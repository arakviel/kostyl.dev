---
title: '–ü—Ä–æ–±–ª–µ–º–∞ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π —Ç–∞ –Ü–Ω–≤–µ—Ä—Å—ñ—è –ö–æ–Ω—Ç—Ä–æ–ª—é'
description: '–ì–ª–∏–±–æ–∫–µ –∑–∞–Ω—É—Ä–µ–Ω–Ω—è —É –ø—Ä–∏—Ä–æ–¥—É –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π –º—ñ–∂ –∫–ª–∞—Å–∞–º–∏: —â–æ —Ç–∞–∫–µ tight coupling, —á–æ–º—É –≤—ñ–Ω —à–∫—ñ–¥–ª–∏–≤–∏–π, —â–æ —Ç–∞–∫–µ IoC —ñ —è–∫ —Ü–µ–π –ø—Ä–∏–Ω—Ü–∏–ø –∑–º—ñ–Ω–∏–≤ –ø—ñ–¥—Ö—ñ–¥ –¥–æ –ø—Ä–æ–µ–∫—Ç—É–≤–∞–Ω–Ω—è –ø—Ä–æ–≥—Ä–∞–º.'
---

# –ü—Ä–æ–±–ª–µ–º–∞ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π —Ç–∞ –Ü–Ω–≤–µ—Ä—Å—ñ—è –ö–æ–Ω—Ç—Ä–æ–ª—é

## –í—Å—Ç—É–ø: –ï–ª–µ–∫—Ç—Ä–∏–∫, —â–æ –ø—Ä–∏–π—à–æ–≤ –∑—ñ —Å–≤–æ—ó–º –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–º

–£—è–≤—ñ—Ç—å —Å–∏—Ç—É–∞—Ü—ñ—é. –í–∏ –Ω–∞–π–º–∞—î—Ç–µ –µ–ª–µ–∫—Ç—Ä–∏–∫–∞ –¥–ª—è —Ä–µ–º–æ–Ω—Ç—É —Ä–æ–∑–µ—Ç–æ–∫ —É –∫–≤–∞—Ä—Ç–∏—Ä—ñ. –í—ñ–Ω –ø—Ä–∏—Ö–æ–¥–∏—Ç—å, –¥—ñ—Å—Ç–∞—î –∑ —Å—É–º–∫–∏... –ø–æ—Ä—Ç–∞—Ç–∏–≤–Ω–∏–π –±–µ–Ω–∑–∏–Ω–æ–≤–∏–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä, –≤–º–∏–∫–∞—î –π–æ–≥–æ, —ñ —Ç—ñ–ª—å–∫–∏ —Ç–æ–¥—ñ –ø—ñ–¥–∫–ª—é—á–∞—î —Å–≤—ñ–π –¥—Ä–∏–ª—å.

–í–∏ –∑–ª–µ–≥–∫–∞ –∑–¥–∏–≤–æ–≤–∞–Ω—ñ. "–ê –Ω–∞–≤—ñ—â–æ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä? –£ –Ω–∞—Å —î —Ä–æ–∑–µ—Ç–∫–∏ —É –∫–≤–∞—Ä—Ç–∏—Ä—ñ!"

–ï–ª–µ–∫—Ç—Ä–∏–∫ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î: "–ù—É, —è —Ç–∞–∫ –∑–≤–∏–∫. –Ø –∑–∞–≤–∂–¥–∏ —Å–∞–º –∑–∞–±–µ–∑–ø–µ—á—É—é —Å–µ–±–µ –µ–ª–µ–∫—Ç—Ä–∏–∫–æ—é, —â–æ–± –Ω–µ –∑–∞–ª–µ–∂–∞—Ç–∏ –≤—ñ–¥ –≤–∞—Å."

–¶–µ, –∑–≤–∏—á–∞–π–Ω–æ, –∞–±—Å—É—Ä–¥. –ê–ª–µ **—Å–∞–º–µ —Ç–∞–∫ –ø–∏—à—É—Ç—å –∫–æ–¥ –±—ñ–ª—å—à—ñ—Å—Ç—å –ø–æ—á–∞—Ç–∫—ñ–≤—Ü—ñ–≤** ‚Äî —ñ –Ω–∞–≤—ñ—Ç—å –¥–µ—è–∫—ñ –¥–æ—Å–≤—ñ–¥—á–µ–Ω—ñ —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∏.

```csharp
// –¶–µ–π –∫–ª–∞—Å ‚Äî —è–∫ —Ç–∞ "–µ–ª–µ–∫—Ç—Ä–∏–∫ –∑ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–æ–º"
public class OrderService
{
    private readonly EmailService _emailService;

    public OrderService()
    {
        // –ö–ª–∞—Å —Å–∞–º "–ø—Ä–∏–Ω–æ—Å–∏—Ç—å —Å–≤—ñ–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä" ‚Äî —Å—Ç–≤–æ—Ä—é—î –∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å
        _emailService = new EmailService("smtp.gmail.com", 587);
    }

    public void PlaceOrder(Order order)
    {
        // –û–±—Ä–æ–±–∫–∞ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è...
        _emailService.Send(order.CustomerEmail, "–í–∞—à–µ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–∏–π–Ω—è—Ç–æ!");
    }
}
```

`OrderService` —Å–∞–º —Å—Ç–≤–æ—Ä—é—î `EmailService`. –í—ñ–Ω –Ω–µ –ø—Ä–æ—Å–∏—Ç—å –π–æ–≥–æ –∑–∑–æ–≤–Ω—ñ ‚Äî –≤—ñ–Ω —Å–∞–º "–ø—Ä–∏–Ω–æ—Å–∏—Ç—å —Å–≤—ñ–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä". –Ü —Ü–µ **–≤–µ–ª–∏—á–µ–∑–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞**, —è–∫—É –º–∏ –¥–µ—Ç–∞–ª—å–Ω–æ —Ä–æ–∑–≥–ª—è–Ω–µ–º–æ —É —Ü—ñ–π —Å—Ç–∞—Ç—Ç—ñ.

::note
**–ú–µ—Ç–∞ —Ü—ñ—î—ó —Å—Ç–∞—Ç—Ç—ñ** ‚Äî –¥–∞—Ç–∏ –≥–ª–∏–±–æ–∫–µ —Ä–æ–∑—É–º—ñ–Ω–Ω—è —Ç–æ–≥–æ, **—á–æ–º—É** –≤–∏–Ω–∏–∫–ª–∏ –ø–∞—Ç—Ç–µ—Ä–Ω–∏ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—è–º–∏. –ë–µ–∑ —Ä–æ–∑—É–º—ñ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º–∏ –Ω–µ–º–æ–∂–ª–∏–≤–æ –æ—Ü—ñ–Ω–∏—Ç–∏ –µ–ª–µ–≥–∞–Ω—Ç–Ω—ñ—Å—Ç—å —Ä—ñ—à–µ–Ω–Ω—è. –¢–æ–º—É –º–∏ –ø—ñ–¥–µ–º–æ –≤—ñ–¥ —Å–∞–º–æ–≥–æ –ø–æ—á–∞—Ç–∫—É.
::

### –©–æ —Ç–∞–∫–µ –∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å?

–£ –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—ñ **–∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å (Dependency)** ‚Äî —Ü–µ –±—É–¥—å-—è–∫–∏–π –∑–æ–≤–Ω—ñ—à–Ω—ñ–π –æ–±'—î–∫—Ç, —Å–µ—Ä–≤—ñ—Å –∞–±–æ —Ä–µ—Å—É—Ä—Å, —è–∫–∏–π –ø–æ—Ç—Ä—ñ–±–µ–Ω –∫–ª–∞—Å—É –¥–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —Å–≤–æ—î—ó —Ä–æ–±–æ—Ç–∏.

–Ø–∫—â–æ –∫–ª–∞—Å `A` –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –∫–ª–∞—Å `B`, —Ç–æ –∫–∞–∂—É—Ç—å —â–æ "A –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ B", –∞–±–æ "B —î –∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—é A".

```csharp
public class ReportGenerator  // –ö–ª–∞—Å A
{
    private readonly DatabaseConnection _db;   // –ó–∞–ª–µ–∂–Ω—ñ—Å—Ç—å 1
    private readonly PdfRenderer _pdf;         // –ó–∞–ª–µ–∂–Ω—ñ—Å—Ç—å 2
    private readonly EmailSender _email;       // –ó–∞–ª–µ–∂–Ω—ñ—Å—Ç—å 3

    public ReportGenerator()
    {
        _db    = new DatabaseConnection("Server=...");  // –°—Ç–≤–æ—Ä—é—î –∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å 1
        _pdf   = new PdfRenderer();                     // –°—Ç–≤–æ—Ä—é—î –∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å 2
        _email = new EmailSender("smtp.company.com");   // –°—Ç–≤–æ—Ä—é—î –∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å 3
    }
}
```

–ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ ‚Äî —Ü–µ –Ω–µ –∑–ª–æ. –ö–æ–∂–Ω–∞ –ø—Ä–æ–≥—Ä–∞–º–∞, —è–∫–∞ —Ä–æ–±–∏—Ç—å —â–æ—Å—å –∫–æ—Ä–∏—Å–Ω–µ, –Ω–µ–º–∏–Ω—É—á–µ –º–∞—Ç–∏–º–µ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ. –ó–ª–æ ‚Äî —Ü–µ **—Å–ø–æ—Å—ñ–±, —É —è–∫–∏–π —Ü—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –æ—Ä–≥–∞–Ω—ñ–∑–æ–≤–∞–Ω—ñ**.

---

## –ß–∞—Å—Ç–∏–Ω–∞ 1: –ê–Ω–∞—Ç–æ–º—ñ—è –ü—Ä–æ–±–ª–µ–º–∏

### 1.1. Coupling (–ó–≤'—è–∑–∞–Ω—ñ—Å—Ç—å): –í—ñ–¥ –ß–æ–≥–æ –í—Å–µ –ü–æ—á–∏–Ω–∞—î—Ç—å—Å—è

**Coupling (–∑–≤'—è–∑–∞–Ω—ñ—Å—Ç—å)** ‚Äî —Ü–µ –º—ñ—Ä–∞ —Ç–æ–≥–æ, –Ω–∞—Å–∫—ñ–ª—å–∫–∏ —Å–∏–ª—å–Ω–æ –æ–¥–∏–Ω –º–æ–¥—É–ª—å –∞–±–æ –∫–ª–∞—Å –ø–æ–∫–ª–∞–¥–∞—î—Ç—å—Å—è –Ω–∞ –¥–µ—Ç–∞–ª—ñ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó —ñ–Ω—à–æ–≥–æ.

Imagine two dancers performing together. There are two types of dance pairs:

- **Tight coupling (—Å–∏–ª—å–Ω–∞ –∑–≤'—è–∑–∞–Ω—ñ—Å—Ç—å)**: –¢–∞–Ω—Ü—ñ–≤–Ω–∏–∫–∏ –∑–∞–≤'—è–∑–∞–Ω—ñ –º–æ—Ç—É–∑–∫–æ—é. –ö–æ–∂–µ–Ω —Ä—É—Ö –æ–¥–Ω–æ–≥–æ –º–∏—Ç—Ç—î–≤–æ –∑–º—É—à—É—î —Ä—É—Ö–∞—Ç–∏—Å—è —ñ–Ω—à–æ–≥–æ. –í–æ–Ω–∏ –Ω–µ –º–æ–∂—É—Ç—å –≤–∏—Å—Ç—É–ø–∞—Ç–∏ –æ–∫—Ä–µ–º–æ, —ñ —è–∫—â–æ –æ–¥–∏–Ω —Å–ø–æ—Ç–∏–∫–∞—î—Ç—å—Å—è ‚Äî –æ–±–∏–¥–≤–∞ –ø–∞–¥–∞—é—Ç—å.
- **Loose coupling (—Å–ª–∞–±–∫–∞ –∑–≤'—è–∑–∞–Ω—ñ—Å—Ç—å)**: –¢–∞–Ω—Ü—ñ–≤–Ω–∏–∫–∏ –ø—Ä–æ—Å—Ç–æ —Å–ª—ñ–¥—É—é—Ç—å –æ–¥–Ω–æ–º—É —Ä–∏—Ç–º—É. –í–æ–Ω–∏ –º–æ–∂—É—Ç—å —Ç–∞–Ω—Ü—é–≤–∞—Ç–∏ –ø–æ-—Ä—ñ–∑–Ω–æ–º—É, –æ–¥–∏–Ω –º–æ–∂–µ –≤—ñ–¥—ñ–π—Ç–∏, –π–æ–≥–æ –º–æ–∂–µ –∑–∞–º—ñ–Ω–∏—Ç–∏ —ñ–Ω—à–∏–π ‚Äî —à–æ—É –ø—Ä–æ–¥–æ–≤–∂—É—î—Ç—å—Å—è.

–£ –∫–æ–¥—ñ —Ü–µ –≤–∏–≥–ª—è–¥–∞—î —Ç–∞–∫:

::tabs

::tabs-item{label="‚ùå Tight Coupling"}
```csharp
// –°–µ—Ä–≤—ñ—Å –∑–∞–º–æ–≤–ª–µ–Ω—å –∂–æ—Ä—Å—Ç–∫–æ –∑–∞–≤'—è–∑–∞–Ω–∏–π –Ω–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏—Ö –∫–ª–∞—Å–∞—Ö
public class OrderService
{
    // –ó–∞–ª–µ–∂–Ω—ñ—Å—Ç—å –≤—ñ–¥ –ö–û–ù–ö–†–ï–¢–ù–û–ì–û –∫–ª–∞—Å—É, –∞ –Ω–µ –∞–±—Å—Ç—Ä–∞–∫—Ü—ñ—ó
    private readonly GmailEmailSender _emailSender;
    private readonly MySqlOrderRepository _repository;
    private readonly StripePaymentGateway _payment;

    public OrderService()
    {
        // –¶—ñ —Ä—è–¥–∫–∏ ‚Äî "–º–æ—Ç—É–∑–∫–∞" –º—ñ–∂ —Ç–∞–Ω—Ü—ñ–≤–Ω–∏–∫–∞–º–∏
        _emailSender = new GmailEmailSender("user@gmail.com", "password");
        _repository = new MySqlOrderRepository("Server=localhost;Database=orders;");
        _payment = new StripePaymentGateway("sk_live_...");
    }

    public void PlaceOrder(Order order)
    {
        _Repository.Save(order);
        _payment.Charge(order.Total);
        _emailSender.Send(order.Email, "–ó–∞–º–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–∏–π–Ω—è—Ç–æ!");
    }
}
```
::

::tabs-item{label="‚úÖ Loose Coupling"}
```csharp
// –°–µ—Ä–≤—ñ—Å –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –ê–ë–°–¢–†–ê–ö–¶–Ü–ô (—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ñ–≤)
public class OrderService
{
    private readonly IEmailSender _emailSender;
    private readonly IOrderRepository _repository;
    private readonly IPaymentGateway _payment;

    // –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –ø–µ—Ä–µ–¥–∞—é—Ç—å—Å—è –∑–∑–æ–≤–Ω—ñ (—á–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä)
    public OrderService(
        IEmailSender emailSender,
        IOrderRepository repository,
        IPaymentGateway payment)
    {
        _emailSender = emailSender;
        _repository = repository;
        _payment = payment;
    }

    public void PlaceOrder(Order order)
    {
        _repository.Save(order);
        _payment.Charge(order.Total);
        _emailSender.Send(order.Email, "–ó–∞–º–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–∏–π–Ω—è—Ç–æ!");
    }
}
```
::

::

–£ –¥—Ä—É–≥–æ–º—É –≤–∞—Ä—ñ–∞–Ω—Ç—ñ `OrderService` –∑–Ω–∞—î –ª–∏—à–µ –ø—Ä–æ **–∫–æ–Ω—Ç—Ä–∞–∫—Ç** (—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å), –∞–ª–µ –Ω–µ –∑–Ω–∞—î –ø—Ä–æ **–∫–æ–Ω–∫—Ä–µ—Ç–Ω—É —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é**. –¶–µ –¥–∞—î –Ω–∞–º –Ω–µ–π–º–æ–≤—ñ—Ä–Ω—É –≥–Ω—É—á–∫—ñ—Å—Ç—å.

### 1.2. Cohesion (–ó–≤'—è–∑–Ω—ñ—Å—Ç—å): –ù–∞–ø–∞—Ä–Ω–∏–∫ Coupling

–ü–æ—Ä—è–¥ –∑ –ø–æ–Ω—è—Ç—Ç—è–º Coupling —á–∞—Å—Ç–æ –∑–≥–∞–¥—É—é—Ç—å –π–æ–≥–æ "–Ω–∞–ø–∞—Ä–Ω–∏–∫–∞" ‚Äî **Cohesion (–∑–≤'—è–∑–Ω—ñ—Å—Ç—å)**.

- **High Cohesion (–≤–∏—Å–æ–∫–∞ –∑–≤'—è–∑–Ω—ñ—Å—Ç—å)** ‚Äî —Ü–µ –î–û–ë–†–ï. –í—Å—ñ —á–∞—Å—Ç–∏–Ω–∏ –∫–ª–∞—Å—É/–º–æ–¥—É–ª—è —Ç—ñ—Å–Ω–æ –ø–æ–≤'—è–∑–∞–Ω—ñ –º—ñ–∂ —Å–æ–±–æ—é –∑–∞ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—é. –ö–ª–∞—Å —Ä–æ–±–∏—Ç—å –æ–¥–Ω—É —Ä—ñ—á —ñ —Ä–æ–±–∏—Ç—å —ó—ó –¥–æ–±—Ä–µ.
- **Low Cohesion (–Ω–∏–∑—å–∫–∞ –∑–≤'—è–∑–Ω—ñ—Å—Ç—å)** ‚Äî —Ü–µ –ü–û–ì–ê–ù–û. –ö–ª–∞—Å –º—ñ—Å—Ç–∏—Ç—å –Ω–µ –ø–æ–≤'—è–∑–∞–Ω—ñ –º—ñ–∂ —Å–æ–±–æ—é –æ–±–æ–≤'—è–∑–∫–∏.

–ú–µ—Ç–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—ó –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏ ‚Äî **–≤–∏—Å–æ–∫–∞ –∑–≤'—è–∑–Ω—ñ—Å—Ç—å (High Cohesion) —Ç–∞ —Å–ª–∞–±–∫–µ –∑—á–µ–ø–ª–µ–Ω–Ω—è (Low Coupling)**.

```csharp
// ‚ùå Low Cohesion - –∫–ª–∞—Å —Ä–æ–±–∏—Ç—å –≤—Å–µ –ø—ñ–¥—Ä—è–¥
public class UserManager
{
    public void CreateUser(string name) { /* ... */ }
    public void SendWelcomeEmail(string email) { /* ... */ }   // ‚Üê –ß–æ–º—É email —Ç—É—Ç?
    public void GenerateReport() { /* ... */ }                 // ‚Üê –ß–æ–º—É –∑–≤—ñ—Ç —Ç—É—Ç?
    public void BackupDatabase() { /* ... */ }                 // ‚Üê –ß–æ–º—É –±–µ–∫–∞–ø —Ç—É—Ç?
    public void OptimizeImages() { /* ... */ }                 // ‚Üê –ü–æ–≤–Ω–∏–π –±–µ–∑–ª–∞–¥!
}

// ‚úÖ High Cohesion - –∫–æ–∂–µ–Ω –∫–ª–∞—Å –º–∞—î —Å–≤–æ—é –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ—Å—Ç—å
public class UserService          { public void CreateUser(string name) { /* ... */ } }
public class EmailService         { public void SendWelcomeEmail(string email) { /* ... */ } }
public class ReportService        { public void GenerateReport() { /* ... */ } }
public class DatabaseBackupService { public void BackupDatabase() { /* ... */ } }
```

### 1.3. –ß–æ–º—É Tight Coupling ‚Äî —Ü–µ —Ç–∞–∫ –ø–æ–≥–∞–Ω–æ?

–î–∞–≤–∞–π—Ç–µ —Ä–æ–∑–≥–ª—è–Ω–µ–º–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É —Å–∏—Å—Ç–µ–º—É —ñ –ø—Ä–æ–∞–Ω–∞–ª—ñ–∑—É—î–º–æ –≤—Å—ñ –ø—Ä–æ–±–ª–µ–º–∏, —è–∫—ñ –ø–æ—Ä–æ–¥–∂—É—î —Å–∏–ª—å–Ω–∞ –∑–≤'—è–∑–∞–Ω—ñ—Å—Ç—å.

–û—Å—å —Ç–∏–ø–æ–≤–∏–π "—Å–ø–∞–≥–µ—Ç—Ç—ñ-–∫–æ–¥" —É –Ω–µ–≤–µ–ª–∏–∫–æ–º—É —Å—Ç–∞—Ä—Ç–∞–ø—ñ, –¥–µ –∫–æ–∂–µ–Ω –∫–ª–∞—Å —Å–∞–º —Å—Ç–≤–æ—Ä—é—î —Å–≤–æ—ó –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ:

```csharp showLineNumbers
// –£—è–≤—ñ—Ç—å, —â–æ —Ü–µ —Ä–µ–∞–ª—å–Ω–∏–π –∫–æ–¥ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—ñ...

public class UserService
{
    private readonly SqlUserRepository _userRepo;
    private readonly SmtpEmailService _emailService;

    public UserService()
    {
        // Hard-coded —Ä—è–¥–æ–∫ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è ‚Äî –¥–µ –∫–æ–Ω—Ñ—ñ–≥?
        _userRepo = new SqlUserRepository("Server=192.168.1.100;Database=UsersDB;User=sa;Password=1234;");
        // Hard-coded SMTP ‚Äî —â–æ –∫–æ–ª–∏ –∑–º—ñ–Ω–∏—Ç—å—Å—è –ø–æ—à—Ç–æ–≤–∏–π –ø—Ä–æ–≤–∞–π–¥–µ—Ä?
        _emailService = new SmtpEmailService("mail.company.com", 25, false);
    }
}

public class OrderService
{
    private readonly SqlOrderRepository _orderRepo;
    private readonly SmtpEmailService _emailService;  // ‚Üê –©–µ –æ–¥–∏–Ω –µ–∫–∑–µ–º–ø–ª—è—Ä!

    public OrderService()
    {
        // –¢–æ–π —Å–∞–º–∏–π —Ä—è–¥–æ–∫ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è ‚Äî –¥—É–±–ª—é–≤–∞–Ω–Ω—è!
        _orderRepo = new SqlOrderRepository("Server=192.168.1.100;Database=OrdersDB;User=sa;Password=1234;");
        _emailService = new SmtpEmailService("mail.company.com", 25, false); // ‚Üê –©–µ –æ–¥–∏–Ω!
    }
}

public class NotificationService
{
    private readonly SmtpEmailService _emailService; // ‚Üê –Ü —â–µ –æ–¥–∏–Ω!

    public NotificationService()
    {
        _emailService = new SmtpEmailService("mail.company.com", 25, false); // ‚Üê –°–∫—ñ–ª—å–∫–∏ –º–æ–∂–Ω–∞?
    }
}
```

–ü–æ—Ä–∞—Ö—É—î–º–æ –ø—Ä–æ–±–ª–µ–º–∏:

**–ü—Ä–æ–±–ª–µ–º–∞ 1: –ù–µ–º–æ–∂–ª–∏–≤–æ –∑–∞–º—ñ–Ω–∏—Ç–∏ —ñ–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü—ñ—é –±–µ–∑ –∑–º—ñ–Ω–∏ –∫–æ–¥—É**

–ö–æ–º–ø–∞–Ω—ñ—è –≤–∏—Ä—ñ—à–∏–ª–∞ –ø–µ—Ä–µ–π—Ç–∏ –∑ –≤–ª–∞—Å–Ω–æ–≥–æ SMTP —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ SendGrid. –¢–µ–ø–µ—Ä –Ω–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–Ω–∞–π—Ç–∏ **–∫–æ–∂–µ–Ω** –∫–ª–∞—Å, —è–∫–∏–π –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î `SmtpEmailService`, —ñ –≤—Ä—É—á–Ω—É –∑–∞–º—ñ–Ω–∏—Ç–∏ –π–æ–≥–æ –Ω–∞ `SendGridEmailService`. –£ –≤–µ–ª–∏–∫—ñ–π —Å–∏—Å—Ç–µ–º—ñ —Ü–µ –º–æ–∂–µ –∑–∞–π–Ω—è—Ç–∏ –¥–Ω—ñ, —ñ –π–º–æ–≤—ñ—Ä–Ω—ñ—Å—Ç—å –ø–æ–º–∏–ª–∫–∏ ‚Äî –≤–∏—Å–æ–∫–∞.

**–ü—Ä–æ–±–ª–µ–º–∞ 2: –ù–µ–º–æ–∂–ª–∏–≤–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏**

```csharp
// –Ø–∫ –Ω–∞–ø–∏—Å–∞—Ç–∏ Unit —Ç–µ—Å—Ç –¥–ª—è OrderService?
[Test]
public void PlaceOrder_ShouldSendEmail_WhenOrderIsPlaced()
{
    var service = new OrderService();
    // –ü–†–û–ë–õ–ï–ú–ê: OrderService —É –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ñ –†–ï–ê–õ–¨–ù–û –ø—ñ–¥–∫–ª—é—á–∏—Ç—å—Å—è –¥–æ –ë–î
    // —ñ –†–ï–ê–õ–¨–ù–û —Å–ø—Ä–æ–±—É—î –Ω–∞–¥—ñ—Å–ª–∞—Ç–∏ email —á–µ—Ä–µ–∑ SMTP!
    // –¢–µ—Å—Ç –±—É–¥–µ –∑–∞–ª–µ–∂–∞—Ç–∏ –≤—ñ–¥ –∑–æ–≤–Ω—ñ—à–Ω—ñ—Ö —Å–∏—Å—Ç–µ–º —ñ –±—É–¥–µ –Ω–µ—Å—Ç–∞–±—ñ–ª—å–Ω–∏–º.

    service.PlaceOrder(new Order { Email = "test@example.com" });

    // –Ø–∫ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —â–æ email –ë–£–õ–û –Ω–∞–¥—ñ—Å–ª–∞–Ω–æ? –ù—ñ—è–∫, –Ω–µ –ø–µ—Ä–µ—Ö–æ–ø–∏—Ç–∏!
}
```

–î–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –Ω–∞–º —Ç—Ä–µ–±–∞ –∑–∞–º—ñ–Ω–∏—Ç–∏ `SmtpEmailService` –Ω–∞ "—Ñ–µ–π–∫–æ–≤–∏–π" —Å–µ—Ä–≤—ñ—Å (Mock), —è–∫–∏–π –ø—Ä–æ—Å—Ç–æ –∑–∞–ø–∞–º'—è—Ç–æ–≤—É—î –≤–∏–∫–ª–∏–∫–∏. –ê–ª–µ –ø—Ä–∏ tight coupling –º–∏ –Ω–µ –º–æ–∂–µ–º–æ —Ü—å–æ–≥–æ –∑—Ä–æ–±–∏—Ç–∏.

**–ü—Ä–æ–±–ª–µ–º–∞ 3: –î—É–±–ª—é–≤–∞–Ω–Ω—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó**

–†—è–¥–æ–∫ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö, –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è SMTP ‚Äî –≤—Å–µ —Ü–µ —Ä–æ–∑–∫–∏–¥–∞–Ω–æ –ø–æ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞—Ö –¥–µ—Å—è—Ç–∫—ñ–≤ –∫–ª–∞—Å—ñ–≤. –ó–º—ñ–Ω–∞ –æ–¥–Ω–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, IP –∞–¥—Ä–µ—Å–∏ —Å–µ—Ä–≤–µ—Ä–∞) –≤–∏–º–∞–≥–∞—î –ø—Ä–∞–≤–æ–∫ —É –±–∞–≥–∞—Ç—å–æ—Ö –º—ñ—Å—Ü—è—Ö.

**–ü—Ä–æ–±–ª–µ–º–∞ 4: –ü–æ—Ä—É—à–µ–Ω–Ω—è Single Responsibility Principle**

–ö–ª–∞—Å `OrderService` —Ç–µ–ø–µ—Ä –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–∏–π –Ω–µ –ª–∏—à–µ –∑–∞ –ª–æ–≥—ñ–∫—É –∑–∞–º–æ–≤–ª–µ–Ω—å, –∞–ª–µ –π –∑–∞ **–∑–Ω–∞–Ω–Ω—è –ø—Ä–æ —Ç–µ, —è–∫ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ email-—Å–µ—Ä–≤—ñ—Å** (—è–∫–∏–π —Å–µ—Ä–≤–µ—Ä, —è–∫–∏–π –ø–æ—Ä—Ç, —á–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ SSL). –¶–µ –ø–æ—Ä—É—à–µ–Ω–Ω—è SRP.

**–ü—Ä–æ–±–ª–µ–º–∞ 5: Lifecycle Management**

–•—Ç–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–∏–π –∑–∞ –∑–Ω–∏—â–µ–Ω–Ω—è –æ–±'—î–∫—Ç—ñ–≤? `SmtpEmailService` –º–æ–∂–µ —Ç—Ä–∏–º–∞—Ç–∏ –≤—ñ–¥–∫—Ä–∏—Ç–µ TCP-–∑'—î–¥–Ω–∞–Ω–Ω—è. –Ø–∫—â–æ `OrderService` –±—É–¥–µ Garbage Collected, –∞–ª–µ –Ω–µ –≤–∏–∫–ª–∏—á–µ `Dispose()` –Ω–∞ `_emailService` ‚Äî –æ—Ç—Ä–∏–º–∞—î–º–æ –≤–∏—Ç—ñ–∫ —Ä–µ—Å—É—Ä—Å—ñ–≤.

::plant-uml

```plantuml
@startuml
skinparam style plain
skinparam defaultFontName Segoe UI
skinparam ArrowColor #3b82f6
skinparam ClassBackgroundColor #1e293b
skinparam ClassBorderColor #475569
skinparam ClassFontColor #f8fafc
skinparam NoteBackgroundColor #f59e0b
skinparam NoteBorderColor #b45309
skinparam NoteFontColor #1e293b

title Tight Coupling ‚Äî "–°–ø–∞–≥–µ—Ç—Ç—ñ –ó–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π"

class UserService {
  - _userRepo: SqlUserRepository
  - _email: SmtpEmailService
  + UserService()
}

class OrderService {
  - _orderRepo: SqlOrderRepository
  - _email: SmtpEmailService
  + OrderService()
}

class NotificationService {
  - _email: SmtpEmailService
  + NotificationService()
}

class SqlUserRepository {
  - connStr: "Server=192..."
}

class SqlOrderRepository {
  - connStr: "Server=192..."
}

class SmtpEmailService {
  - host: "mail.company.com"
  - port: 25
}

UserService --> SqlUserRepository : new SqlUserRepository("Server=192...")
UserService --> SmtpEmailService : new SmtpEmailService("mail...", 25)
OrderService --> SqlOrderRepository : new SqlOrderRepository("Server=192...")
OrderService --> SmtpEmailService : new SmtpEmailService("mail...", 25)
NotificationService --> SmtpEmailService : new SmtpEmailService("mail...", 25)

note bottom of SmtpEmailService
  –¢—Ä–∏ —Ä—ñ–∑–Ω–∏—Ö –µ–∫–∑–µ–º–ø–ª—è—Ä–∏
  —Ç–æ–≥–æ —Å–∞–º–æ–≥–æ –∫–ª–∞—Å—É.
  –¢—Ä–∏ SMTP –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è!
end note

@enduml
```

::

---

## –ß–∞—Å—Ç–∏–Ω–∞ 2: –ï–≤–æ–ª—é—Ü—ñ—è –¥–æ Loosely Coupled –ö–æ–¥—É

–ü—Ä–æ–±–ª–µ–º–∏, –æ–ø–∏—Å–∞–Ω—ñ –≤–∏—â–µ, –±—É–ª–∏ –≤—ñ–¥–æ–º—ñ –∑–∞–¥–æ–≤–≥–æ –¥–æ –ø–æ—è–≤–∏ IoC –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤. –†–æ–∑—Ä–æ–±–Ω–∏–∫–∏ —à—É–∫–∞–ª–∏ —Ä—ñ—à–µ–Ω–Ω—è –ø–æ—Å—Ç—É–ø–æ–≤–æ, —ñ —Ü—è –µ–≤–æ–ª—é—Ü—ñ—è –¥–æ–ø–æ–º–æ–∂–µ –Ω–∞–º –∑—Ä–æ–∑—É–º—ñ—Ç–∏, **—á–æ–º—É** –≤–∏–Ω–∏–∫ Dependency Injection.

### 2.1. –ö—Ä–æ–∫ 1: –í–∏–Ω–æ—Å–∏–º–æ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é (–∞–ª–µ –ø—Ä–æ–±–ª–µ–º–∞ –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è)

–ü–µ—Ä—à–∏–π –æ—á–µ–≤–∏–¥–Ω–∏–π –∫—Ä–æ–∫ ‚Äî –ø—Ä–∏–±—Ä–∞—Ç–∏ hard-coded –∑–Ω–∞—á–µ–Ω–Ω—è:

```csharp
// –ö—Ä–∞—âe, –∞–ª–µ –≤—Å–µ —â–µ tight coupling
public class OrderService
{
    private readonly SqlOrderRepository _orderRepo;
    private readonly SmtpEmailService _emailService;

    public OrderService()
    {
        // –¢–µ–ø–µ—Ä —á–∏—Ç–∞—î–º–æ –∑ –∫–æ–Ω—Ñ—ñ–≥–∞ ‚Äî —Ö–æ—á —è–∫–∏–π—Å—å –ø—Ä–æ–≥—Ä–µ—Å
        var connStr = ConfigurationManager.ConnectionStrings["OrdersDB"].ConnectionString;
        var smtpHost = ConfigurationManager.AppSettings["SmtpHost"];

        _orderRepo = new SqlOrderRepository(connStr);
        _emailService = new SmtpEmailService(smtpHost, 587);
    }
}
```

–¶–µ –∫—Ä–∞—â–µ ‚Äî –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è —Ü–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–∞, –∞–ª–µ **–ø—Ä–æ–±–ª–µ–º–∞ —Ç–µ—Å—Ç–æ–≤–∞–Ω–æ—Å—Ç—ñ –∑–∞–ª–∏—à–∏–ª–∞—Å—å**. –ú–∏ –≤—Å–µ —â–µ –Ω–µ –º–æ–∂–µ–º–æ –∑–∞–º—ñ–Ω–∏—Ç–∏ `SqlOrderRepository` –Ω–∞ in-memory —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é –¥–ª—è —Ç–µ—Å—Ç—ñ–≤.

### 2.2. –ö—Ä–æ–∫ 2: –§–∞–±—Ä–∏—á–Ω–∏–π –º–µ—Ç–æ–¥ (Factory Method)

–ù–∞—Å—Ç—É–ø–Ω–∏–π –∫—Ä–æ–∫ ‚Äî –≤–∏–Ω–æ—Å–∏–º–æ –ª–æ–≥—ñ–∫—É —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –æ–±'—î–∫—Ç—ñ–≤ —É —Ñ–∞–±—Ä–∏–∫—É:

```csharp
// –°—Ç–∞—Ç–∏—á–Ω–∞ —Ñ–∞–±—Ä–∏–∫–∞ –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å–µ—Ä–≤—ñ—Å—ñ–≤
public static class ServiceFactory
{
    public static IEmailService CreateEmailService()
    {
        if (Environment.GetEnvironmentVariable("ASPNETCORE_ENVIRONMENT") == "Testing")
            return new FakeEmailService(); // –î–ª—è —Ç–µ—Å—Ç—ñ–≤
        else
            return new SmtpEmailService("mail.company.com", 587);
    }

    public static IOrderRepository CreateOrderRepository()
    {
        if (Environment.GetEnvironmentVariable("ASPNETCORE_ENVIRONMENT") == "Testing")
            return new InMemoryOrderRepository(); // –î–ª—è —Ç–µ—Å—Ç—ñ–≤
        else
            return new SqlOrderRepository(GetConnectionString());
    }
}

// –¢–µ–ø–µ—Ä OrderService –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Ñ–∞–±—Ä–∏–∫—É
public class OrderService
{
    private readonly IEmailService _emailService;
    private readonly IOrderRepository _orderRepo;

    public OrderService()
    {
        _emailService = ServiceFactory.CreateEmailService(); // –í—Å–µ —â–µ –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ —Ñ–∞–±—Ä–∏–∫–∏!
        _orderRepo = ServiceFactory.CreateOrderRepository();
    }
}
```

–ü—Ä–æ–≥—Ä–µ—Å —î ‚Äî –º–∏ –≤–∂–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∏ `IEmailService` —Ç–∞ `IOrderRepository`. –¢–µ–ø–µ—Ä –º–æ–∂–Ω–∞ –ø—ñ–¥–º—ñ–Ω—è—Ç–∏ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—é. –ê–ª–µ —î –Ω–æ–≤–∞ –ø—Ä–æ–±–ª–µ–º–∞: `OrderService` —Ç–µ–ø–µ—Ä –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ —Å—Ç–∞—Ç–∏—á–Ω–æ—ó `ServiceFactory`. –¶–µ **Service Locator** ‚Äî –ø–∞—Ç—Ç–µ—Ä–Ω, —è–∫–∏–π –º–∏ –¥–µ—Ç–∞–ª—å–Ω–æ —Ä–æ–∑–≥–ª—è–Ω–µ–º–æ –≤ [–Ω–∞—Å—Ç—É–ø–Ω–∏—Ö —Å—Ç–∞—Ç—Ç—è—Ö](./03.service-locator-pattern).

### 2.3. –ö—Ä–æ–∫ 3: –ü–µ—Ä–µ–¥–∞—î–º–æ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ —á–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä (DI!)

–ê —â–æ, —è–∫—â–æ –º–∏ –ø—Ä–æ—Å—Ç–æ **–ø–æ–ø—Ä–æ—Å–∏–º–æ** —Ç–æ–π, —Ö—Ç–æ —Å—Ç–≤–æ—Ä—é—î `OrderService`, –Ω–∞–¥–∞—Ç–∏ –Ω–∞–º –≥–æ—Ç–æ–≤—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ?

```csharp
// üéâ Dependency Injection —É —á–∏—Å—Ç–æ–º—É –≤–∏–≥–ª—è–¥—ñ
public class OrderService
{
    private readonly IEmailService _emailService;
    private readonly IOrderRepository _orderRepo;

    // –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä "–æ–≥–æ–ª–æ—à—É—î –∫–æ–Ω—Ç—Ä–∞–∫—Ç": –Ω–∞–¥–∞–π—Ç–µ –º–µ–Ω—ñ —Ü—ñ –¥–≤–∞ –æ–±'—î–∫—Ç–∏,
    // —ñ —è –∑–º–æ–∂—É –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ —Å–≤–æ—é —Ä–æ–±–æ—Ç—É
    public OrderService(IEmailService emailService, IOrderRepository orderRepo)
    {
        _emailService = emailService;
        _orderRepo = orderRepo;
    }

    public void PlaceOrder(Order order)
    {
        _orderRepo.Save(order);
        _emailService.Send(order.Email, "–ó–∞–º–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–∏–π–Ω—è—Ç–æ!");
    }
}
```

–¢–µ–ø–µ—Ä `OrderService` –∞–±—Å–æ–ª—é—Ç–Ω–æ "—á–∏—Å—Ç–∏–π". –í—ñ–Ω –Ω—ñ—á–æ–≥–æ –Ω–µ –∑–Ω–∞—î –ø—Ä–æ —Ç–µ:

- –î–µ –∂–∏–≤–µ –±–∞–∑–∞ –¥–∞–Ω–∏—Ö (SQL? MongoDB? In-Memory?)
- –Ø–∫–∏–π email –ø—Ä–æ–≤–∞–π–¥–µ—Ä (SMTP? SendGrid? Fake –¥–ª—è —Ç–µ—Å—Ç—ñ–≤?)
- –Ø–∫ —Ü—ñ –æ–±'—î–∫—Ç–∏ —Å—Ç–≤–æ—Ä—é—é—Ç—å—Å—è —Ç–∞ –∑–Ω–∏—â—É—é—Ç—å—Å—è

**–ê–ª–µ –≤–∏–Ω–∏–∫–∞—î –Ω–æ–≤–µ –ø–∏—Ç–∞–Ω–Ω—è: —Ö—Ç–æ —Ç–æ–¥—ñ –∑–±–∏—Ä–∞—î –≤—Å–µ —Ä–∞–∑–æ–º?**

```csharp
// –•—Ç–æ—Å—å –∑–∑–æ–≤–Ω—ñ –º–∞—î –∑—ñ–±—Ä–∞—Ç–∏ –≥—Ä–∞—Ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π –≤—Ä—É—á–Ω—É
var orderRepo = new SqlOrderRepository(connectionString);
var emailService = new SmtpEmailService("mail.company.com", 587);
var orderService = new OrderService(emailService, orderRepo); // –ü–µ—Ä–µ–¥–∞—î–º–æ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ!
```

–ü–æ–∫–∏ —É –Ω–∞—Å 2-3 –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ ‚Äî —Ü–µ –≤–∏–≥–ª—è–¥–∞—î –ø—Ä–æ—Å—Ç–æ. –ê–ª–µ —É —Ä–µ–∞–ª—å–Ω–∏—Ö —Å–∏—Å—Ç–µ–º–∞—Ö –æ–¥–∏–Ω –∫–ª–∞—Å –º–æ–∂–µ –∑–∞–ª–µ–∂–∞—Ç–∏ –≤—ñ–¥ —ñ–Ω—à–∏—Ö, —è–∫—ñ —Ç–µ–∂ –º–∞—é—Ç—å —Å–≤–æ—ó –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ:

```csharp
// –†–µ–∞–ª—å–Ω–∏–π –ø—Ä–∏–∫–ª–∞–¥ —Å–∫–ª–∞–¥–Ω–æ–≥–æ –≥—Ä–∞—Ñ—É –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
var logger = new Logger(logConfig);
var dbConnection = new SqlConnection(connStr);
var unitOfWork = new UnitOfWork(dbConnection, logger);
var userRepo = new SqlUserRepository(unitOfWork, logger);
var orderRepo = new SqlOrderRepository(unitOfWork, logger);
var inventoryService = new InventoryService(orderRepo, logger);
var paymentGateway = new StripePaymentGateway(stripeApiKey, logger);
var emailService = new SmtpEmailService(smtpConfig, logger);
var notificationService = new NotificationService(emailService, userRepo, logger);
var orderService = new OrderService(orderRepo, inventoryService, paymentGateway, notificationService, logger);
// ... —ñ —â–µ 50 —Ç–∞–∫–∏—Ö —Ä—è–¥–∫—ñ–≤
```

–†—É—á–Ω–µ –∑–±–∏—Ä–∞–Ω–Ω—è –≥—Ä–∞—Ñ—É –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π –¥–ª—è –≤–µ–ª–∏–∫–æ—ó —Å–∏—Å—Ç–µ–º–∏ ‚Äî —Ü–µ **—Ç–æ–Ω–Ω–∏ boilerplate –∫–æ–¥—É**, —è–∫–∏–π –≤–∞–∂–∫–æ –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞—Ç–∏. –°–∞–º–µ —Ç—É—Ç –Ω–∞ —Å—Ü–µ–Ω—É –≤–∏—Ö–æ–¥–∏—Ç—å **IoC Container**.

---

## –ß–∞—Å—Ç–∏–Ω–∞ 3: –ü—Ä–∏–Ω—Ü–∏–ø –Ü–Ω–≤–µ—Ä—Å—ñ—ó –ö–æ–Ω—Ç—Ä–æ–ª—é

### 3.1. –©–æ –æ–∑–Ω–∞—á–∞—î "Inversion of Control"?

**Inversion of Control (IoC)** ‚Äî —Ü–µ –∑–∞–≥–∞–ª—å–Ω–∏–π –ø—Ä–∏–Ω—Ü–∏–ø –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è, —è–∫–∏–π —Å—Ç–≤–µ—Ä–¥–∂—É—î, —â–æ **–∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –ø–æ—Ç–æ–∫–æ–º –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –ø—Ä–æ–≥—Ä–∞–º–∏ –ø–µ—Ä–µ–¥–∞—î—Ç—å—Å—è –≤—ñ–¥ –ø—Ä–∏–∫–ª–∞–¥–Ω–æ–≥–æ –∫–æ–¥—É –¥–æ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫—É –∞–±–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞**.

–ù–∞–∑–≤–∞ "–Ü–Ω–≤–µ—Ä—Å—ñ—è –ö–æ–Ω—Ç—Ä–æ–ª—é" –Ω–∞–¥–æ–≤–≥–æ –∑–∞–ø–ª—É—Ç–∞–ª–∞ –±–∞–≥–∞—Ç—å–æ—Ö —Ä–æ–∑—Ä–æ–±–Ω–∏–∫—ñ–≤ (–≤ —Ç–æ–º—É —á–∏—Å–ª—ñ —ñ –ú–∞—Ä—Ç—ñ–Ω –§–∞—É–ª–µ—Ä –≤–∏–∑–Ω–∞–≤, —â–æ –Ω–∞–∑–≤–∞ –Ω–µ –¥—É–∂–µ –≤–¥–∞–ª–∞). –©–æ–± –∫—Ä–∞—â–µ –∑—Ä–æ–∑—É–º—ñ—Ç–∏ –ø—Ä–∏–Ω—Ü–∏–ø, –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—î–º–æ –∫—ñ–ª—å–∫–∞ –∞–Ω–∞–ª–æ–≥—ñ–π.

**–ê–Ω–∞–ª–æ–≥—ñ—è 1: –†–µ—Å—Ç–æ—Ä–∞–Ω vs –á–¥–∞–ª—å–Ω—è —Å–∞–º–æ–æ–±—Å–ª—É–≥–æ–≤—É–≤–∞–Ω–Ω—è**

–£ "—Ç—Ä–∞–¥–∏—Ü—ñ–π–Ω–æ–º—É" –ø—ñ–¥—Ö–æ–¥—ñ (–±–µ–∑ IoC) –≤–∞—à –∫–æ–¥ —Å—Ö–æ–∂–∏–π –Ω–∞ —ó–¥–∞–ª—å–Ω—é —Å–∞–º–æ–æ–±—Å–ª—É–≥–æ–≤—É–≤–∞–Ω–Ω—è:
- –í–∏ —Å–∞–º—ñ –±–µ—Ä–µ—Ç–µ –ø—ñ–¥–Ω—ñ—Å
- –°–∞–º—ñ –ø—ñ–¥—Ö–æ–¥–∏—Ç–µ –¥–æ –∫–æ–∂–Ω–æ—ó —Å—Ç–æ–π–∫–∏
- –°–∞–º—ñ –Ω–∞–∫–ª–∞–¥–∞—î—Ç–µ —ó–∂—É
- –°–∞–º—ñ –Ω–µ—Å–µ—Ç–µ –≤—Å–µ –¥–æ —Å—Ç–æ–ª–∏–∫–∞

–ê –∑ IoC –≤–∞—à –∫–æ–¥ —Å—Ö–æ–∂–∏–π –Ω–∞ —Ä–µ—Å—Ç–æ—Ä–∞–Ω:
- –í–∏ –ø—Ä–æ—Å—Ç–æ —Å—ñ–¥–∞—î—Ç–µ –∑–∞ —Å—Ç—ñ–ª (–æ–≥–æ–ª–æ—à—É—î—Ç–µ –ø–æ—Ç—Ä–µ–±–∏ –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ñ)
- –û—Ñ—ñ—Ü—ñ–∞–Ω—Ç (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä) —Å–∞–º –ø—Ä–∏–Ω–æ—Å–∏—Ç—å –≤—Å–µ –Ω–µ–æ–±—Ö—ñ–¥–Ω–µ
- –í–∏ –Ω–µ –∑–Ω–∞—î—Ç–µ —ñ –Ω–µ –ø–µ—Ä–µ–π–º–∞—î—Ç–µ—Å—è, –¥–µ –≥–æ—Ç—É—é—Ç—å —ñ —Ö—Ç–æ –ø–æ—Å—Ç–∞—á–∞—î –ø—Ä–æ–¥—É–∫—Ç–∏

**–ê–Ω–∞–ª–æ–≥—ñ—è 2: Hollywood Principle ‚Äî "Don't Call Us, We'll Call You"**

IoC —á–∞—Å—Ç–æ –Ω–∞–∑–∏–≤–∞—é—Ç—å **"Hollywood Principle"** ("–ì–æ–ª–ª—ñ–≤—É–¥—Å—å–∫–∏–π –ø—Ä–∏–Ω—Ü–∏–ø"): "–ù–µ —Ç–µ–ª–µ—Ñ–æ–Ω—É–π—Ç–µ –Ω–∞–º ‚Äî –º–∏ –∑–∞—Ç–µ–ª–µ—Ñ–æ–Ω—É—î–º–æ –≤–∞–º".

–í –ì–æ–ª–ª—ñ–≤—É–¥—ñ –∞–∫—Ç–æ—Ä –Ω–µ —Ö–æ–¥–∏—Ç—å –ø–æ —Å—Ç—É–¥—ñ—è—Ö —ñ –Ω–µ —à—É–∫–∞—î —Ä–æ–ª—å —Å–∞–º ‚Äî –≤—ñ–Ω –ø—Ä–æ—Å—Ç–æ –Ω–∞—è–≤–Ω–∏–π —Ç–∞ –≤—ñ–¥–æ–º–∏–π. –ö–æ–ª–∏ —Ä–µ–∂–∏—Å–µ—Ä –ø–æ—Ç—Ä–µ–±—É—î –ø–µ–≤–Ω–æ–≥–æ —Ç–∏–ø—É –∞–∫—Ç–æ—Ä–∞ ‚Äî –≤—ñ–Ω –∑–Ω–∞–π–¥–µ —ñ –∑–∞–ø—Ä–æ—Å–∏—Ç—å –π–æ–≥–æ.

–ê–Ω–∞–ª–æ–≥—ñ—á–Ω–æ: –≤–∞—à –∫–ª–∞—Å –Ω–µ —à—É–∫–∞—î –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ —Å–∞–º (`new SomeService()`). –í—ñ–Ω –ª–∏—à–µ **–æ–≥–æ–ª–æ—à—É—î, —â–æ –π–æ–º—É –ø–æ—Ç—Ä—ñ–±–Ω–æ** (—á–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä), —ñ **–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä** –∑–Ω–∞—Ö–æ–¥–∏—Ç—å —ñ –¥–æ—Å—Ç–∞–≤–ª—è—î –ø–æ—Ç—Ä—ñ–±–Ω–µ.

### 3.2. IoC ‚Äî —Ü–µ –ø—Ä–∏–Ω—Ü–∏–ø, –∞ –Ω–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥—ñ—è

__–í–∞–∂–ª–∏–≤–æ —Ä–æ–∑—É–º—ñ—Ç–∏__, —â–æ IoC ‚Äî —Ü–µ —à–∏—Ä–æ–∫–∏–π –ø—Ä–∏–Ω—Ü–∏–ø, —è–∫–∏–π —Ä–µ–∞–ª—ñ–∑—É—î—Ç—å—Å—è —Ä—ñ–∑–Ω–∏–º–∏ –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º–∏:

::card-group

::card{title="Dependency Injection" icon="i-heroicons-arrow-path"}
–ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –ø–µ—Ä–µ–¥–∞—é—Ç—å—Å—è –∑–∑–æ–≤–Ω—ñ (—á–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä, –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ –∞–±–æ –º–µ—Ç–æ–¥–∏). **–ù–∞–π–ø–æ—à–∏—Ä–µ–Ω—ñ—à–∏–π —Å–ø–æ—Å—ñ–± IoC.**
::

::card{title="Template Method Pattern" icon="i-heroicons-document-text"}
–ë–∞–∑–æ–≤–∏–π –∫–ª–∞—Å –≤–∏–∑–Ω–∞—á–∞—î –∞–ª–≥–æ—Ä–∏—Ç–º, –∞ –ø—ñ–¥–∫–ª–∞—Å–∏ —Ä–µ–∞–ª—ñ–∑—É—é—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ñ –∫—Ä–æ–∫–∏. –§—Ä–µ–π–º–≤–æ—Ä–∫ –≤–∏–∫–ª–∏–∫–∞—î –≤–∞—à –∫–æ–¥.
::

::card{title="Event-Driven / Observer" icon="i-heroicons-bell"}
–í–∞—à –∫–æ–¥ –ø—ñ–¥–ø–∏—Å—É—î—Ç—å—Å—è –Ω–∞ –ø–æ–¥—ñ—ó —Ç–∞ —Ä–µ–∞–≥—É—î –Ω–∞ –Ω–∏—Ö. –•—Ç–æ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î –ø–æ–¥—ñ—ó ‚Äî –∫–æ–Ω—Ç—Ä–æ–ª—é—î –ø–æ—Ç—ñ–∫.
::

::card{title="Service Locator" icon="i-heroicons-magnifying-glass"}
–ö–æ–¥ –∑–∞–ø–∏—Ç—É—î –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ —É —Ü–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–æ–≥–æ —Ä–µ—î—Å—Ç—Ä—É (–≤–≤–∞–∂–∞—î—Ç—å—Å—è –∞–Ω—Ç–∏-–ø–∞—Ç—Ç–µ—Ä–Ω–æ–º, –∞–ª–µ —Ä–µ–∞–ª—ñ–∑—É—î IoC).
::

::

–ö–æ–ª–∏ –ª—é–¥–∏ –∫–∞–∂—É—Ç—å "DI" —Ç–∞ "IoC" ‚Äî –≤–æ–Ω–∏ —á–∞—Å—Ç–æ –º–∞—é—Ç—å –Ω–∞ —É–≤–∞–∑—ñ –æ–¥–Ω–µ –π —Ç–µ –∂, –∞–ª–µ —Ç–µ—Ö–Ω—ñ—á–Ω–æ **DI —î –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ—é —Ñ–æ—Ä–º–æ—é —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó IoC**.

### 3.3. IoC —Ç–∞ SOLID: –ü—Ä–∏–Ω—Ü–∏–ø –Ü–Ω–≤–µ—Ä—Å—ñ—ó –ó–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π (DIP)

Dependency Injection –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ —Ä–µ–∞–ª—ñ–∑—É—î **–ø—Ä–∏–Ω—Ü–∏–ø SOLID "D" ‚Äî Dependency Inversion Principle (DIP)**.

DIP —Å—Ç–≤–µ—Ä–¥–∂—É—î:

1. **–ú–æ–¥—É–ª—ñ –≤–∏—â–æ–≥–æ —Ä—ñ–≤–Ω—è –Ω–µ –ø–æ–≤–∏–Ω–Ω—ñ –∑–∞–ª–µ–∂–∞—Ç–∏ –≤—ñ–¥ –º–æ–¥—É–ª—ñ–≤ –Ω–∏–∂—á–æ–≥–æ —Ä—ñ–≤–Ω—è.** –û–±–∏–¥–≤–∞ –ø–æ–≤–∏–Ω–Ω—ñ –∑–∞–ª–µ–∂–∞—Ç–∏ –≤—ñ–¥ –∞–±—Å—Ç—Ä–∞–∫—Ü—ñ–π.
2. **–ê–±—Å—Ç—Ä–∞–∫—Ü—ñ—ó –Ω–µ –ø–æ–≤–∏–Ω–Ω—ñ –∑–∞–ª–µ–∂–∞—Ç–∏ –≤—ñ–¥ –¥–µ—Ç–∞–ª–µ–π.** –î–µ—Ç–∞–ª—ñ –ø–æ–≤–∏–Ω–Ω—ñ –∑–∞–ª–µ–∂–∞—Ç–∏ –≤—ñ–¥ –∞–±—Å—Ç—Ä–∞–∫—Ü—ñ–π.

::tip
–Ø–∫—â–æ –≤–∏ –Ω–µ –∑–Ω–∞–π–æ–º—ñ –∑ SOLID, —Ä–µ–∫–æ–º–µ–Ω–¥—É—î–º–æ –ø—Ä–æ—á–∏—Ç–∞—Ç–∏ [—Å—Ç–∞—Ç—Ç—é –ø—Ä–æ –ø—Ä–∏–Ω—Ü–∏–ø–∏ –ø—Ä–æ–µ–∫—Ç—É–≤–∞–Ω–Ω—è](../01.software-design-principles) –ø–µ—Ä–µ–¥ –ø—Ä–æ–¥–æ–≤–∂–µ–Ω–Ω—è–º.
::

```csharp
// ‚ùå –ü–û–†–£–®–ï–ù–ù–Ø DIP
// OrderService (–≤–∏—Å—à–∏–π —Ä—ñ–≤–µ–Ω—å) –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ SmtpEmailService (–Ω–∏–∂—á–∏–π —Ä—ñ–≤–µ–Ω—å ‚Äî –¥–µ—Ç–∞–ª—å)
public class OrderService
{
    private SmtpEmailService _email; // ‚Üê –ó–∞–ª–µ–∂–Ω—ñ—Å—Ç—å –≤—ñ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–∏–∫–∏!

    public OrderService()
    {
        _email = new SmtpEmailService(); // ‚Üê OrderService –∑–Ω–∞—î —è–∫ —Å—Ç–≤–æ—Ä–∏—Ç–∏ email —Å–µ—Ä–≤—ñ—Å
    }
}

// ‚úÖ –î–û–¢–†–ò–ú–ê–ù–ù–Ø DIP
// –û–±–∏–¥–≤–∞ –º–æ–¥—É–ª—ñ –∑–∞–ª–µ–∂–∞—Ç—å –≤—ñ–¥ –∞–±—Å—Ç—Ä–∞–∫—Ü—ñ—ó IEmailService
public interface IEmailService          // ‚Üê –ê–±—Å—Ç—Ä–∞–∫—Ü—ñ—è
{
    void Send(string to, string body);
}

public class SmtpEmailService : IEmailService  // –î–µ—Ç–∞–ª—å –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –∞–±—Å—Ç—Ä–∞–∫—Ü—ñ—ó
{
    public void Send(string to, string body) { /* SMTP –ª–æ–≥—ñ–∫–∞ */ }
}

public class OrderService                      // –í–∏—Å—à–∏–π —Ä—ñ–≤–µ–Ω—å –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –∞–±—Å—Ç—Ä–∞–∫—Ü—ñ—ó
{
    private readonly IEmailService _email;     // ‚Üê –ó–∞–ª–µ–∂–Ω—ñ—Å—Ç—å –≤—ñ–¥ –∞–±—Å—Ç—Ä–∞–∫—Ü—ñ—ó!

    public OrderService(IEmailService email)   // ‚Üê –î–µ—Ç–∞–ª—å –ø–µ—Ä–µ–¥–∞—î—Ç—å—Å—è –∑–∑–æ–≤–Ω—ñ
    {
        _email = email;
    }
}
```

–û—Å—å —è—Å–∫—Ä–∞–≤–∞ –¥—ñ–∞–≥—Ä–∞–º–∞, —â–æ –ø–æ–∫–∞–∑—É—î "—ñ–Ω–≤–µ—Ä—Å—ñ—é" –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ:

::plant-uml

```plantuml
@startuml
skinparam style plain
skinparam defaultFontName Segoe UI
skinparam ArrowColor #3b82f6
skinparam ClassBackgroundColor #1e293b
skinparam ClassBorderColor #475569
skinparam ClassFontColor #f8fafc
skinparam InterfaceBackgroundColor #0d9488
skinparam InterfaceBorderColor #0f766e
skinparam InterfaceFontColor #f8fafc
skinparam NoteBackgroundColor #f59e0b
skinparam NoteBorderColor #b45309
skinparam NoteFontColor #1e293b

title –î–æ vs –ü—ñ—Å–ª—è —ñ–Ω–≤–µ—Ä—Å—ñ—ó –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π

package "‚ùå –î–æ (Tight Coupling)" {
  class "OrderService" as OS1 {
    - _email: SmtpEmailService
  }
  class "SmtpEmailService" as SMTP1 {
    + Send(to, body)
  }
  OS1 --> SMTP1 : –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–∏–∫–∏
}

package "‚úÖ –ü—ñ—Å–ª—è (Loose Coupling / DIP)" {
  class "OrderService" as OS2 {
    - _email: IEmailService
  }
  interface "IEmailService" as IESVC {
    + Send(to, body)
  }
  class "SmtpEmailService" as SMTP2 {
    + Send(to, body)
  }
  class "SendGridEmailService" as SG {
    + Send(to, body)
  }
  class "FakeEmailService" as FAKE {
    + Send(to, body)
  }

  OS2 --> IESVC : –∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –∞–±—Å—Ç—Ä–∞–∫—Ü—ñ—ó
  SMTP2 ..|> IESVC : —Ä–µ–∞–ª—ñ–∑—É—î
  SG ..|> IESVC : —Ä–µ–∞–ª—ñ–∑—É—î
  FAKE ..|> IESVC : —Ä–µ–∞–ª—ñ–∑—É—î (–¥–ª—è —Ç–µ—Å—Ç—ñ–≤)
}

@enduml
```

::

–ó–≤–µ—Ä–Ω—ñ—Ç—å —É–≤–∞–≥—É –Ω–∞ —Å—Ç—Ä—ñ–ª–∫—É –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ: —É –≤–∞—Ä—ñ–∞–Ω—Ç—ñ "–ø—ñ—Å–ª—è" `SmtpEmailService` —Ç–µ–ø–µ—Ä **–∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥** `IEmailService` (—Ä–µ–∞–ª—ñ–∑—É—î –π–æ–≥–æ), –∞ –Ω–µ –Ω–∞–≤–ø–∞–∫–∏. –ó–∞–ª–µ–∂–Ω—ñ—Å—Ç—å "—ñ–Ω–≤–µ—Ä—Ç–æ–≤–∞–Ω–∞"!

### 3.4. "–ù–æ–≤–∞" –∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å —è–∫ –∫–æ–Ω—Ç—Ä–∞–∫—Ç

–©–µ –æ–¥–Ω–∞ –≤–∞–∂–ª–∏–≤–∞ –∫–æ–Ω—Ü–µ–ø—Ü—ñ—è: **–∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ ‚Äî —Ü–µ –ø—É–±–ª—ñ—á–Ω–∏–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç –∫–ª–∞—Å—É**. –í—ñ–Ω —è–≤–Ω–æ –≥–æ–≤–æ—Ä–∏—Ç—å "–¥–ª—è —Ä–æ–±–æ—Ç–∏ –º–µ–Ω—ñ –ø–æ—Ç—Ä—ñ–±–Ω—ñ —Ü—ñ —Ä–µ—á—ñ".

–ü–æ—Ä—ñ–≤–Ω—è–π—Ç–µ –¥–≤–∞ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∏:

```csharp
// –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ ‚Äî "–∑–∞–∫—Ä–∏—Ç–∏–π —è—â–∏–∫"
// –°–ø–æ–∂–∏–≤–∞—á –∫–ª–∞—Å—É –Ω–µ –∑–Ω–∞—î, —è–∫—ñ —Ä–µ—Å—É—Ä—Å–∏ –≤—ñ–Ω –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î
public class OrderService()
{
    // –ú–∞–≥—ñ—è –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ... –∫–ª–∞—Å —Å–∞–º –∑–Ω–∞—Ö–æ–¥–∏—Ç—å —Ç–µ, —â–æ –π–æ–º—É –ø–æ—Ç—Ä—ñ–±–Ω–æ
}

// –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ ‚Äî "–≤—ñ–¥–∫—Ä–∏—Ç–∏–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç"
// –°–ø–æ–∂–∏–≤–∞—á —á—ñ—Ç–∫–æ –±–∞—á–∏—Ç—å: "—Ü—å–æ–º—É –∫–ª–∞—Å—É –ø–æ—Ç—Ä—ñ–±–µ–Ω —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π —ñ email —Å–µ—Ä–≤—ñ—Å"
public class OrderService(IOrderRepository repository, IEmailService emailService)
{
    // –ù—ñ—á–æ–≥–æ –∑–∞–π–≤–æ–≥–æ
}
```

**–Ø–≤–Ω–∏–π –∫–æ–Ω—Ç—Ä–∞–∫—Ç –¥–∞—î –Ω–∞–º:**
- –ó—Ä–æ–∑—É–º—ñ–ª—ñ—Å—Ç—å: –æ–¥–Ω–æ–≥–æ –ø–æ–≥–ª—è–¥—É –Ω–∞ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –¥–æ—Å—Ç–∞—Ç–Ω—å–æ, —â–æ–± –∑–Ω–∞—Ç–∏ –≤—Å—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –∫–ª–∞—Å—É
- –¢–µ—Å—Ç–æ–≤–∞–Ω—ñ—Å—Ç—å: —É —Ç–µ—Å—Ç—ñ –º–∏ —è–≤–Ω–æ –ø–µ—Ä–µ–¥–∞—î–º–æ –º–æ–∫–∏
- –ö–æ–º–ø—ñ–ª—è—Ç–∏–≤–Ω—É –±–µ–∑–ø–µ–∫—É: —è–∫—â–æ –∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω–∞ ‚Äî –ø—Ä–æ–≥—Ä–∞–º–∞ –ø—Ä–æ—Å—Ç–æ –Ω–µ —Å–∫–æ–º–ø—ñ–ª—é—î—Ç—å—Å—è
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é: –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä ‚Äî —Ü–µ –∂–∏–≤–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π

---

## –ß–∞—Å—Ç–∏–Ω–∞ 4: –í—ñ–¥ –†—É—á–Ω–æ–≥–æ DI –¥–æ IoC –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞

### 4.1. Pure DI: –ö–æ–ª–∏ –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –ù–µ –ü–æ—Ç—Ä—ñ–±–µ–Ω

–¶—ñ–∫–∞–≤–∏–π —Ñ–∞–∫—Ç: **Dependency Injection –Ω–µ –≤–∏–º–∞–≥–∞—î DI-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞**. –ú–æ–∂–Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫—É–≤–∞—Ç–∏ DI –ø–æ–≤–Ω—ñ—Å—Ç—é –≤—Ä—É—á–Ω—É ‚Äî —Ü–µ –Ω–∞–∑–∏–≤–∞—î—Ç—å—Å—è **Pure DI** –∞–±–æ **Manual DI**.

```csharp
// Program.cs ‚Äî "Composition Root" (–º—ñ—Å—Ü–µ, –¥–µ –≤—Åe –∑–±–∏—Ä–∞—î—Ç—å—Å—è)
// –¢—É—Ç –º–∏ –≤—Ä—É—á–Ω—É –±—É–¥—É—î–º–æ –≥—Ä–∞—Ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π

static void Main(string[] args)
{
    // –†—É—á–Ω–∞ –ø–æ–±—É–¥–æ–≤–∞ –≥—Ä–∞—Ñ—É –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π (Pure DI)
    var logger = new ConsoleLogger(LogLevel.Information);
    var connStr = "Server=localhost;Database=ShopDB;";
    var dbContext = new AppDbContext(connStr);

    var userRepository = new SqlUserRepository(dbContext, logger);
    var orderRepository = new SqlOrderRepository(dbContext, logger);

    var emailConfig = new EmailConfig { Host = "smtp.company.com", Port = 587 };
    var emailService = new SmtpEmailService(emailConfig, logger);

    var paymentGateway = new StripePaymentGateway("sk_live_...", logger);
    var inventoryService = new InventoryService(orderRepository, logger);

    var notificationService = new NotificationService(emailService, userRepository, logger);

    var orderService = new OrderService(
        orderRepository,
        inventoryService,
        paymentGateway,
        notificationService,
        logger
    );

    var app = new Application(orderService, userRepository, logger);
    app.Run();
}
```

**–ü–µ—Ä–µ–≤–∞–≥–∏ Pure DI:**
- –ü–æ–≤–Ω–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –≥—Ä–∞—Ñ–æ–º –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
- –ù–µ–º–∞—î –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –≤—ñ–¥ —Å—Ç–æ—Ä–æ–Ω–Ω—å–æ–≥–æ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫—É
- –ö–æ–º–ø—ñ–ª—è—Ç–∏–≤–Ω–∞ –±–µ–∑–ø–µ–∫–∞ (–Ω–µ–º–∞—î runtime errors –ø—Ä–∏ resolve)

**–ù–µ–¥–æ–ª—ñ–∫–∏ Pure DI:**
- –í–µ–ª–∏—á–µ–∑–Ω–∏–π –æ–±—Å—è–≥ boilerplate –∫–æ–¥—É –¥–ª—è –≤–µ–ª–∏–∫–∏—Ö –ø—Ä–æ—î–∫—Ç—ñ–≤
- –†—É—á–Ω–µ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è lifecycle (—Ö—Ç–æ –≤–∏–∫–ª–∏–∫–∞—î Dispose?)
- –í–∞–∂–∫–æ –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞—Ç–∏ –ø—Ä–∏ –∑–º—ñ–Ω–∞—Ö (–∑–º—ñ–Ω–∞ –æ–¥–Ω–æ–≥–æ –∫–ª–∞—Å—É ‚Üí –ø—Ä–∞–≤–∫–∏ –≤ –±–∞–≥–∞—Ç—å–æ—Ö –º—ñ—Å—Ü—è—Ö)

### 4.2. IoC Container: –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—è DI

**IoC Container** (–≤—ñ–Ω –∂–µ **DI Container**) ‚Äî —Ü–µ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞, —è–∫–∞ **–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ** –≤–∏–∫–æ–Ω—É—î —Ç–µ, —â–æ –º–∏ —Ä–æ–±–∏–ª–∏ –≤—Ä—É—á–Ω—É —É "Composition Root":

1. **–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è (Registration)**: –í–∏ –∫–∞–∂–µ—Ç–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É "–∫–æ–ª–∏ —Ö—Ç–æ—Å—å –ø—Ä–æ—Å–∏—Ç—å `IOrderRepository` ‚Äî –¥–∞–π –π–æ–º—É `SqlOrderRepository`"
2. **Resolve**: –ö–æ–ª–∏ —Ö—Ç–æ—Å—å –ø—Ä–æ—Å–∏—Ç—å `OrderService`, –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ:
   - –î–∏–≤–∏—Ç—å—Å—è –Ω–∞ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä `OrderService`
   - –ë–∞—á–∏—Ç—å, —â–æ –ø–æ—Ç—Ä—ñ–±–µ–Ω `IOrderRepository`
   - –ó–Ω–∞—Ö–æ–¥–∏—Ç—å —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—é –¥–ª—è `IOrderRepository` ‚Üí `SqlOrderRepository`
   - –î–∏–≤–∏—Ç—å—Å—è –Ω–∞ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä `SqlOrderRepository`
   - –ë–∞—á–∏—Ç—å, —â–æ –ø–æ—Ç—Ä—ñ–±–µ–Ω `IDbContext`
   - ...—ñ —Ç–∞–∫ —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ –¥–æ –∫—ñ–Ω—Ü—è –≥—Ä–∞—Ñ—É –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
3. **Lifecycle Management**: –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–Ω–∞—î, –∫–æ–ª–∏ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –Ω–æ–≤–∏–π –æ–±'—î–∫—Ç, –∫–æ–ª–∏ –ø–æ–≤–µ—Ä—Ç–∞—Ç–∏ –∫–µ—à–æ–≤–∞–Ω–∏–π, —ñ –∫–æ–ª–∏ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ Dispose()

```csharp
// –ó –º—ñ–∫—Ä–æ—Å–∫–æ–ø—ñ—á–Ω–∏–º –≤–ª–∞—Å–Ω–∏–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º (–º–∏ –ø–æ–±—É–¥—É—î–º–æ —Ç–∞–∫–∏–π —É –Ω–∞—Å—Ç—É–ø–Ω—ñ–π —Å—Ç–∞—Ç—Ç—ñ!)
var container = new SimpleContainer();

// –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è (–æ–¥–∏–Ω —Ä–∞–∑ –Ω–∞ —Å—Ç–∞—Ä—Ç—ñ)
container.Register<ILogger, ConsoleLogger>();
container.Register<IOrderRepository, SqlOrderRepository>();
container.Register<IEmailService, SmtpEmailService>();
container.Register<IPaymentGateway, StripePaymentGateway>();
container.Register<OrderService, OrderService>();

// Resolve (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –±—É–¥—É—î –≤–µ—Å—å –≥—Ä–∞—Ñ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ)
var orderService = container.Resolve<OrderService>();
// –ó–∞ –ª–∞—à—Ç—É–Ω–∫–∞–º–∏: –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å–∞–º –∑–Ω–∞–π—à–æ–≤ –≤—Å—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ OrderService,
// –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π, —ñ –∑—ñ–±—Ä–∞–≤ –≤–µ—Å—å –≥—Ä–∞—Ñ!

orderService.PlaceOrder(new Order { /* ... */ });
```

–ü–æ—Ä—ñ–≤–Ω—è—î–º–æ –æ–±—Å—è–≥ –∫–æ–¥—É:

| –ü—ñ–¥—Ö—ñ–¥ | –†—è–¥–∫—ñ–≤ –∫–æ–¥—É –¥–ª—è 20 –∫–ª–∞—Å—ñ–≤ |
|--------|--------------------------|
| Tight Coupling (`new` —É –∫–ª–∞—Å–∞—Ö) | ~100 —Ä—è–¥–∫—ñ–≤ —É –∫–ª–∞—Å–∞—Ö + 0 –≤ Composition Root |
| Pure DI (–≤—Ä—É—á–Ω—É) | 0 –≤ –∫–ª–∞—Å–∞—Ö + ~100 —Ä—è–¥–∫—ñ–≤ —É Composition Root |
| IoC Container | 0 –≤ –∫–ª–∞—Å–∞—Ö + ~20 —Ä—è–¥–∫—ñ–≤ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ–π |

### 4.3. Composition Root ‚Äî –¥–µ –≤—Å–µ –∑–±–∏—Ä–∞—î—Ç—å—Å—è

**Composition Root** ‚Äî —Ü–µ —î–¥–∏–Ω–µ –º—ñ—Å—Ü–µ –≤ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É, –¥–µ –∑–±–∏—Ä–∞—î—Ç—å—Å—è –≥—Ä–∞—Ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π. –£ .NET –¥–æ–¥–∞—Ç–∫–∞—Ö —Ü–µ –∑–∞–∑–≤–∏—á–∞–π `Program.cs` –∞–±–æ `Startup.cs`.

::note
**–ü—Ä–∞–≤–∏–ª–æ Composition Root**: –ì—Ä–∞—Ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π –ø–æ–≤–∏–Ω–µ–Ω –±—É–¥—É–≤–∞—Ç–∏—Å—è –≤ —î–¥–∏–Ω–æ–º—É –º—ñ—Å—Ü—ñ —è–∫–æ–º–æ–≥–∞ –±–ª–∏–∂—á–µ –¥–æ —Ç–æ—á–∫–∏ –≤—Ö–æ–¥—É —É –ø—Ä–æ–≥—Ä–∞–º—É. –ù—ñ–¥–µ –±—ñ–ª—å—à–µ –≤ –∫–æ–¥—ñ –Ω–µ –º–∞—î –±—É—Ç–∏ –≤–∏–∫–ª–∏–∫—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –¥–ª—è Resolve!
::

```csharp
// Program.cs ‚Äî –Ñ–î–ò–ù–ï –º—ñ—Å—Ü–µ, –¥–µ –±—É–¥—É—î—Ç—å—Å—è –≥—Ä–∞—Ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π
var builder = WebApplication.CreateBuilder(args);

// Composition Root: —Ä–µ—î—Å—Ç—Ä—É—î–º–æ –≤—Å—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
builder.Services.AddSingleton<ILogger, ConsoleLogger>();
builder.Services.AddScoped<IOrderRepository, SqlOrderRepository>();
builder.Services.AddScoped<IEmailService, SmtpEmailService>();
builder.Services.AddScoped<IPaymentGateway, StripePaymentGateway>();
builder.Services.AddScoped<OrderService>();

var app = builder.Build();
app.Run();

// –í—Å–µ —ñ–Ω—à–µ ‚Äî –ë–Ü–ó–ù–ï–° –õ–û–ì–Ü–ö–ê, —è–∫–∞ –ù–Ü–ß–û–ì–û –Ω–µ –∑–Ω–∞—î –ø—Ä–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä!
```

::mermaid

```mermaid
graph TD
    CR["üèóÔ∏è Composition Root\n(Program.cs)"]
    CT["üì¶ IoC Container"]
    OS["OrderService"]
    ES["IEmailService\n‚Üí SmtpEmailService"]
    OR["IOrderRepository\n‚Üí SqlOrderRepository"]
    PG["IPaymentGateway\n‚Üí StripePaymentGateway"]
    LG["ILogger\n‚Üí ConsoleLogger"]

    CR -->|"–†–µ—î—Å—Ç—Ä—É—î –≤—Å—ñ —Ç–∏–ø–∏"| CT
    CT -->|"–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å—Ç–≤–æ—Ä—é—î\n—ñ –ø—ñ–¥—Å—Ç–∞–≤–ª—è—î –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ"| OS
    OS -->|–∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥| ES
    OS -->|–∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥| OR
    OS -->|–∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥| PG
    ES -->|–∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥| LG
    OR -->|–∑–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥| LG

    style CR fill:#f59e0b,stroke:#b45309,color:#1e293b
    style CT fill:#3b82f6,stroke:#1d4ed8,color:#ffffff
    style OS fill:#10b981,stroke:#059669,color:#ffffff
```

::

---

## –ü—ñ–¥—Å—É–º–æ–∫

–ú–∏ –ø—Ä–æ–π—à–ª–∏ –¥–æ–≤–≥–∏–π —à–ª—è—Ö ‚Äî –≤—ñ–¥ —Ä–æ–∑—É–º—ñ–Ω–Ω—è –ø—Ä–∏—Ä–æ–¥–∏ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π –¥–æ —É—Å–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ—Å—Ç—ñ IoC Container. –î–∞–≤–∞–π—Ç–µ –ø—ñ–¥—Å—É–º—É—î–º–æ –∫–ª—é—á–æ–≤—ñ —ñ–¥–µ—ó:

::card-group

::card{title="Coupling ‚Äî –≤–æ—Ä–æ–≥ –≥–Ω—É—á–∫–æ—Å—Ç—ñ" icon="i-heroicons-link"}
–°–∏–ª—å–Ω–∞ –∑–≤'—è–∑–∞–Ω—ñ—Å—Ç—å –º—ñ–∂ –∫–ª–∞—Å–∞–º–∏ —Ä–æ–±–∏—Ç—å –∫–æ–¥ –∫—Ä–∏—Ö–∫–∏–º. –ö–æ–∂–Ω–∞ –∑–º—ñ–Ω–∞ –æ–¥–Ω—ñ—î—ó –¥–µ—Ç–∞–ª—ñ ‚Äî —Ü–µ —Ä–∏–∑–∏–∫ –∑–ª–∞–º–∞—Ç–∏ –¥–µ—Å—è—Ç–∫–∏ —ñ–Ω—à–∏—Ö –º—ñ—Å—Ü—å.
::

::card{title="DIP ‚Äî —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω–∏–π –ø—Ä–∏–Ω—Ü–∏–ø" icon="i-heroicons-building-office"}
–ó–∞–ª–µ–∂—Ç–µ –≤—ñ–¥ –∞–±—Å—Ç—Ä–∞–∫—Ü—ñ–π (—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ñ–≤), –∞ –Ω–µ –≤—ñ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏—Ö —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ–π. –¶–µ –≤—ñ–¥–∫—Ä–∏–≤–∞—î –¥–≤–µ—Ä—ñ –¥–ª—è –≥–Ω—É—á–∫–æ—Å—Ç—ñ —Ç–∞ —Ç–µ—Å—Ç–æ–≤–∞–Ω–æ—Å—Ç—ñ.
::

::card{title="DI ‚Äî —Ü–µ –ø–µ—Ä–µ–¥–∞—á–∞ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π –∑–∑–æ–≤–Ω—ñ" icon="i-heroicons-arrow-down-tray"}
–û–≥–æ–ª–æ—Å—ñ—Ç—å –ø–æ—Ç—Ä–µ–±–∏ –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ñ ‚Äî –¥–∞–π—Ç–µ —Å–µ—Ä–µ–¥–æ–≤–∏—â—É (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—É) —ó—Ö –∑–∞–¥–æ–≤–æ–ª—å–Ω–∏—Ç–∏. –í–∞—à –∫–ª–∞—Å –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è "—á–∏—Å—Ç–∏–º".
::

::card{title="IoC Container ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—è DI" icon="i-heroicons-cog"}
–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑–Ω–∞—î –ø—Ä–æ –≤—Å—ñ "—Ä–µ—Ü–µ–ø—Ç–∏" —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –æ–±'—î–∫—Ç—ñ–≤ —ñ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–±–∏—Ä–∞—î –≥—Ä–∞—Ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π –∑–∞ –≤–∞—Å.
::

::

### –©–æ –¥–∞–ª—ñ?

–¢–µ–ø–µ—Ä, –∫–æ–ª–∏ –≤–∏ —Ä–æ–∑—É–º—ñ—î—Ç–µ **–ø—Ä–æ–±–ª–µ–º—É** —ñ **–ø—Ä–∏–Ω—Ü–∏–ø** ‚Äî —á–∞—Å –ø–æ–±–∞—á–∏—Ç–∏ **—Ä—ñ—à–µ–Ω–Ω—è –∑—Å–µ—Ä–µ–¥–∏–Ω–∏**. –£ –Ω–∞—Å—Ç—É–ø–Ω—ñ–π —Å—Ç–∞—Ç—Ç—ñ –º–∏ –ø–æ–±—É–¥—É—î–º–æ **–≤–ª–∞—Å–Ω–∏–π IoC –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –∑ –Ω—É–ª—è**, —â–æ–± –∑—Ä–æ–∑—É–º—ñ—Ç–∏ –º–∞–≥—ñ—é –±–µ–∑ –º—ñ—Å—Ç–∏–∫–∏.

::card-group

::card{title="–ë—É–¥—É—î–º–æ –≤–ª–∞—Å–Ω–∏–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä ‚Üí" icon="i-heroicons-wrench-screwdriver" to="./02.build-your-own-container"}
–ö—Ä–æ–∫ –∑–∞ –∫—Ä–æ–∫–æ–º —Ä–µ–∞–ª—ñ–∑—É—î–º–æ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π –∞–ª–µ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–∏–π IoC Container –Ω–∞ C# –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º —Ä–µ—Ñ–ª–µ–∫—Å—ñ—ó.
::

::card{title="Service Locator –ø–∞—Ç—Ç–µ—Ä–Ω ‚Üí" icon="i-heroicons-magnifying-glass" to="./03.service-locator-pattern"}
–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∏–π –ø—ñ–¥—Ö—ñ–¥ –¥–æ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—è–º–∏ ‚Äî –∫–æ–ª–∏ –≤—ñ–Ω –≤–∏–ø—Ä–∞–≤–¥–∞–Ω–∏–π —ñ —á–æ–º—É –π–æ–≥–æ –≤–≤–∞–∂–∞—é—Ç—å –∞–Ω—Ç–∏-–ø–∞—Ç—Ç–µ—Ä–Ω–æ–º.
::

::

---

## üìù –ó–∞–≤–¥–∞–Ω–Ω—è

### –ó–∞–≤–¥–∞–Ω–Ω—è 1: –ê–Ω–∞–ª—ñ–∑ (Easy)

–ó–Ω–∞–π–¥—ñ—Ç—å —É –Ω–∞–≤–µ–¥–µ–Ω–æ–º—É –Ω–∏–∂—á–µ –∫–æ–¥—ñ –≤—Å—ñ –ø—Ä–æ–±–ª–µ–º–∏ —Ç—ñ—Å–Ω–æ—ó –∑–≤'—è–∑–∞–Ω–æ—Å—Ç—ñ —Ç–∞ –Ω–∞–∑–≤—ñ—Ç—å, —è–∫–µ –ø—Ä–∞–≤–∏–ª–æ SOLID –≤–æ–Ω–∏ –ø–æ—Ä—É—à—É—é—Ç—å:

```csharp
public class PaymentController
{
    public IActionResult ProcessPayment(decimal amount)
    {
        var db = new NpgsqlConnection("Host=db.internal;Database=payments;Username=admin;Password=secret");
        db.Open();
        var cmd = new NpgsqlCommand($"INSERT INTO payments VALUES ({amount})", db);
        cmd.ExecuteNonQuery();

        var client = new HttpClient();
        var response = client.PostAsync("https://stripe.com/api/charge",
            new StringContent($"amount={amount}&currency=usd")).Result;

        var smtp = new SmtpClient("smtp.gmail.com");
        smtp.Send("noreply@company.com", "customer@example.com",
            "Payment received", $"Amount: {amount}");

        return Ok("Payment processed");
    }
}
```

### –ó–∞–≤–¥–∞–Ω–Ω—è 2: –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ (Medium)

–ü—Ä–æ–≤–µ–¥—ñ—Ç—å —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –Ω–∞–≤–µ–¥–µ–Ω–æ–≥–æ –≤–∏—â–µ –∫–æ–¥—É, –∑–∞—Å—Ç–æ—Å—É–≤–∞–≤—à–∏ –ø—Ä–∏–Ω—Ü–∏–ø–∏ DIP —Ç–∞ DI. –í–∏–∫–æ–Ω–∞–π—Ç–µ:
1. –í–∏–¥—ñ–ª—ñ—Ç—å —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∏ `IPaymentRepository`, `IPaymentGateway`, `IEmailService`
2. –†–µ–∞–ª—ñ–∑—É–π—Ç–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ñ –∫–ª–∞—Å–∏ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É
3. –í—ñ–¥—Ä–µ—Ñ–∞–∫—Ç–æ—Ä—ñ—Ç—å `PaymentController` —Ç–∞–∫, —â–æ–± –≤—ñ–Ω –æ—Ç—Ä–∏–º—É–≤–∞–≤ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ —á–µ—Ä–µ–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä
4. –ù–∞–ø–∏—à—ñ—Ç—å Unit —Ç–µ—Å—Ç –¥–ª—è `PaymentController`, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ –ø—Ä–æ—Å—Ç—ñ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó (—Å—Ç–∞–±–∏) —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ñ–≤

### –ó–∞–≤–¥–∞–Ω–Ω—è 3: –î–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è (Hard)

–£ –≤–∞—à–æ–º—É –∞–±–æ —á—É–∂–æ–º—É –ø—Ä–æ—î–∫—Ç—ñ (–∞–±–æ –Ω–∞ GitHub) –∑–Ω–∞–π–¥—ñ—Ç—å 3 –ø—Ä–∏–∫–ª–∞–¥–∏ tight coupling. –î–ª—è –∫–æ–∂–Ω–æ–≥–æ:
1. –û–ø–∏—à—ñ—Ç—å –ø—Ä–æ–±–ª–µ–º—É
2. –ü–æ—è—Å–Ω—ñ—Ç—å, —á–æ–º—É —Ü–µ —à–∫—ñ–¥–ª–∏–≤–æ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ñ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
3. –ó–∞–ø—Ä–æ–ø–æ–Ω—É–π—Ç–µ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ñ–≤ —Ç–∞ DI

---

## –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–Ω–∞–Ω—å

::tally-embed{id="wMeRbV" title="–¢–µ—Å—Ç: –ü—Ä–æ–±–ª–µ–º–∞ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π —Ç–∞ IoC"}
::

::note
**–ü—Ä–∏–º—ñ—Ç–∫–∞**: –Ø–∫—â–æ —Ç–µ—Å—Ç –Ω–µ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è, –ø–µ—Ä–µ–π–¥—ñ—Ç—å –∑–∞ [–ø—Ä—è–º–∏–º –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º](https://tally.so/r/wMeRbV).
::
