# 8.1.2. –ü–æ—Ç–æ–∫–∏ (Streams) —Ç–∞ –°–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –î–∞–Ω–∏—Ö

## –í—Å—Ç—É–ø: –í—ñ–¥ —Ñ–∞–π–ª—ñ–≤ –¥–æ –ø–æ—Ç–æ–∫—ñ–≤

–£ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–º—É —Ä–æ–∑–¥—ñ–ª—ñ –º–∏ –Ω–∞–≤—á–∏–ª–∏—Å—è –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –∑ —Ñ–∞–π–ª–∞–º–∏ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –∫–ª–∞—Å—ñ–≤ `File`, `Directory` —Ç–∞ —ó—Ö–Ω—ñ—Ö –æ–±'—î–∫—Ç–Ω–æ-–æ—Ä—ñ—î–Ω—Ç–æ–≤–∞–Ω–∏—Ö –∞–Ω–∞–ª–æ–≥—ñ–≤. –ê–ª–µ —â–æ —Ä–æ–±–∏—Ç–∏, –∫–æ–ª–∏ —Ñ–∞–π–ª –∑–∞–Ω–∞–¥—Ç–æ –≤–µ–ª–∏–∫–∏–π –¥–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —É –ø–∞–º'—è—Ç—å? –Ø–∫ —á–∏—Ç–∞—Ç–∏ –¥–∞–Ω—ñ –∑ –º–µ—Ä–µ–∂—ñ –∞–±–æ –ø–∏—Å–∞—Ç–∏ —É —Å—Ç–∏—Å–Ω—É—Ç–∏–π –∞—Ä—Ö—ñ–≤? –í—ñ–¥–ø–æ–≤—ñ–¥—å ‚Äî **–ü–æ—Ç–æ–∫–∏ (Streams)**.

**Stream** ‚Äî —Ü–µ –∞–±—Å—Ç—Ä–∞–∫—Ü—ñ—è –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ—Å—Ç—ñ –±–∞–π—Ç—ñ–≤. –£—è–≤—ñ—Ç—å –ø–æ—Ç—ñ–∫ –≤–æ–¥–∏: –≤–∏ –º–æ–∂–µ—Ç–µ —á–µ—Ä–ø–∞—Ç–∏ –∑ –Ω—å–æ–≥–æ –≤–æ–¥—É –ø–æ—Ä—Ü—ñ—è–º–∏ (—á–∏—Ç–∞–Ω–Ω—è), –¥–æ–¥–∞–≤–∞—Ç–∏ –Ω–æ–≤—É –≤–æ–¥—É (–∑–∞–ø–∏—Å), –∞–±–æ –ø–µ—Ä–µ–∫—Ä–∏–≤–∞—Ç–∏ –π–æ–≥–æ (–∑–∞–∫—Ä–∏—Ç—Ç—è). –ê–Ω–∞–ª–æ–≥—ñ—á–Ω–æ –ø—Ä–∞—Ü—é—é—Ç—å –ø–æ—Ç–æ–∫–∏ –¥–∞–Ω–∏—Ö —É C#.

### –ù–∞–≤—ñ—â–æ –ø–æ—Ç–æ–∫–∏?

::card-group
::card{title="üéØ –ï—Ñ–µ–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å –ø–∞–º'—è—Ç—ñ"}
–û–±—Ä–æ–±–∫–∞ —Ñ–∞–π–ª—ñ–≤ –≥—ñ–≥–∞–±–∞–π—Ç–Ω–æ–≥–æ —Ä–æ–∑–º—ñ—Ä—É –±–µ–∑ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≤—Å—å–æ–≥–æ —É RAM. –ß–∏—Ç–∞—î–º–æ —Ç–∞ –æ–±—Ä–æ–±–ª—è—î–º–æ —á–∞—Å—Ç–∏–Ω–∞–º–∏ (chunks).
::

::card{title="üåê –£–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω—ñ—Å—Ç—å"}
–Ñ–¥–∏–Ω–∏–π API –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ —Ñ–∞–π–ª–∞–º–∏, –º–µ—Ä–µ–∂–µ—é, –ø–∞–º'—è—Ç—Ç—é, compressed –¥–∞–Ω–∏–º–∏i –±—É–¥—å-—è–∫–∏–º–∏ —ñ–Ω—à–∏–º–∏ –¥–∂–µ—Ä–µ–ª–∞–º–∏ –±–∞–π—Ç—ñ–≤.
::

::card{title="‚ö° –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ñ—Å—Ç—å"}
–ü—ñ–¥—Ç—Ä–∏–º–∫–∞ async/await –¥–ª—è –Ω–µ–±–ª–æ–∫—É—é—á–æ–≥–æ I/O ‚Äî –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è —Å–µ—Ä–≤–µ—Ä–Ω–∏—Ö –¥–æ–¥–∞—Ç–∫—ñ–≤ —Ç–∞ UI.
::

::card{title="üîó –ö–æ–º–ø–æ–∑–∏—Ü—ñ—è"}
–ü–æ—Ç–æ–∫–∏ –º–æ–∂–Ω–∞ "–æ–±–≥–æ—Ä—Ç–∞—Ç–∏" –æ–¥–∏–Ω –≤ –æ–¥–Ω–∏–π: FileStream ‚Üí GZipStream ‚Üí CryptoStream –¥–ª—è —à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è —Å—Ç–∏—Å–Ω—É—Ç–∏—Ö —Ñ–∞–π–ª—ñ–≤.
::
::

::note
**–ü–µ—Ä–µ–¥—É–º–æ–≤–∏**: –î–ª—è —Ä–æ–∑—É–º—ñ–Ω–Ω—è —Ü—å–æ–≥–æ –º–∞—Ç–µ—Ä—ñ–∞–ª—É –ø–æ—Ç—Ä—ñ–±–Ω–µ –∑–Ω–∞–Ω–Ω—è –æ—Å–Ω–æ–≤ —Ä–æ–±–æ—Ç–∏ –∑ —Ñ–∞–π–ª–∞–º–∏ (–ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–π —Ä–æ–∑–¥—ñ–ª), using statements, exception handling —Ç–∞ –±–∞–∑–æ–≤–∏—Ö –∫–æ–Ω—Ü–µ–ø—Ü—ñ–π async/await.
::

---

## –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ—Ç–æ–∫—ñ–≤: –ö–ª–∞—Å Stream

–£ C# –≤—Å—ñ –ø–æ—Ç–æ–∫–∏ –Ω–∞—Å–ª—ñ–¥—É—é—Ç—å—Å—è –≤—ñ–¥ –∞–±—Å—Ç—Ä–∞–∫—Ç–Ω–æ–≥–æ –∫–ª–∞—Å—É `System.IO.Stream`. –¶–µ –±–∞–∑–æ–≤–∏–π –∫–ª–∞—Å, —è–∫–∏–π –≤–∏–∑–Ω–∞—á–∞—î –∑–∞–≥–∞–ª—å–Ω–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —á–∏—Ç–∞–Ω–Ω—è —Ç–∞ –∑–∞–ø–∏—Å—É.

::mermaid

```mermaid
classDiagram
    class Stream {
        <<abstract>>
        +Read(byte[], int, int) int
        +Write(byte[], int, int) void
        +Seek(long, SeekOrigin) long
        +Flush() void
        +Close() void
        +CanRead bool
        +CanWrite bool
        +CanSeek bool
        +Length long
        +Position long
    }

    class FileStream {
        +FileStream(string, FileMode)
        +Lock(long, long) void
        +Unlock(long, long) void
    }

    class MemoryStream {
        +MemoryStream()
        +MemoryStream(byte[])
        +ToArray() byte[]
        +GetBuffer() byte[]
    }

    class NetworkStream {
        +DataAvailable bool
    }

    class GZipStream {
        +GZipStream(Stream, CompressionMode)
    }

    class CryptoStream {
        +CryptoStream(Stream, ICryptoTransform, CryptoStreamMode)
    }

    Stream <|-- FileStream
    Stream <|-- MemoryStream
    Stream <|-- NetworkStream
    Stream <|-- GZipStream
    Stream <|-- CryptoStream

    style Stream fill:#64748b,stroke:#334155,color:#ffffff
    style FileStream fill:#3b82f6,stroke:#1d4ed8,color:#ffffff
    style MemoryStream fill:#3b82f6,stroke:#1d4ed8,color:#ffffff
    style GZipStream fill:#f59e0b,stroke:#b45309,color:#ffffff
```

::

### –ö–ª—é—á–æ–≤—ñ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ Stream

::field-group
::field{name="CanRead" type="bool"}
–ß–∏ –ø—ñ–¥—Ç—Ä–∏–º—É—î –ø–æ—Ç—ñ–∫ —á–∏—Ç–∞–Ω–Ω—è? –ù–∞–ø—Ä–∏–∫–ª–∞–¥, `FileStream` —É —Ä–µ–∂–∏–º—ñ `FileMode.Create` –Ω–µ –º–æ–∂–µ —á–∏—Ç–∞—Ç–∏.
::

::field{name="CanWrite" type="bool"}
–ß–∏ –ø—ñ–¥—Ç—Ä–∏–º—É—î –ø–æ—Ç—ñ–∫ –∑–∞–ø–∏—Å? –ü–æ—Ç—ñ–∫, –≤—ñ–¥–∫—Ä–∏—Ç–∏–π —Ç—ñ–ª—å–∫–∏ –¥–ª—è —á–∏—Ç–∞–Ω–Ω—è, –ø–æ–≤–µ—Ä–Ω–µ `false`.
::

::field{name="CanSeek" type="bool"}
–ß–∏ –º–æ–∂–Ω–∞ –ø–µ—Ä–µ–º—ñ—â—É–≤–∞—Ç–∏—Å—è –ø–æ –ø–æ—Ç–æ–∫—É? `NetworkStream` –Ω–µ –ø—ñ–¥—Ç—Ä–∏–º—É—î seek, –±–æ —Ü–µ –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–∏–π –ø–æ—Ç—ñ–∫.
::

::field{name="Length" type="long"}
–ó–∞–≥–∞–ª—å–Ω–∞ –¥–æ–≤–∂–∏–Ω–∞ –ø–æ—Ç–æ–∫—É —É –±–∞–π—Ç–∞—Ö. –ù–µ–¥–æ—Å—Ç—É–ø–Ω–∞ –¥–ª—è –ø–æ—Ç–æ–∫—ñ–≤, —è–∫—ñ –Ω–µ –ø—ñ–¥—Ç—Ä–∏–º—É—é—Ç—å `CanSeek`.
::

::field{name="Position" type="long"}
–ü–æ—Ç–æ—á–Ω–∞ –ø–æ–∑–∏—Ü—ñ—è —É –ø–æ—Ç–æ—Ü—ñ. –ú–æ–∂–Ω–∞ –∑–º—ñ–Ω—é–≤–∞—Ç–∏ –¥–ª—è –ø–µ—Ä–µ–º—ñ—â–µ–Ω–Ω—è (—è–∫—â–æ `CanSeek == true`).
::
::

### –û—Å–Ω–æ–≤–Ω—ñ –º–µ—Ç–æ–¥–∏ Stream

::field-group
::field{name="Read(byte[] buffer, int offset, int count)" type="int"}
–ß–∏—Ç–∞—î –¥–æ `count` –±–∞–π—Ç—ñ–≤ —É –º–∞—Å–∏–≤ `buffer` –ø–æ—á–∏–Ω–∞—é—á–∏ –∑ –ø–æ–∑–∏—Ü—ñ—ó `offset`. –ü–æ–≤–µ—Ä—Ç–∞—î –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ñ–∞–∫—Ç–∏—á–Ω–æ –ø—Ä–æ—á–∏—Ç–∞–Ω–∏—Ö –±–∞–π—Ç—ñ–≤ (–º–æ–∂–µ –±—É—Ç–∏ –º–µ–Ω—à–µ `count`!).
::

::field{name="Write(byte[] buffer, int offset, int count)" type="void"}
–ó–∞–ø–∏—Å—É—î `count` –±–∞–π—Ç—ñ–≤ –∑ –º–∞—Å–∏–≤—É `buffer` (–ø–æ—á–∏–Ω–∞—é—á–∏ –∑ `offset`) —É –ø–æ—Ç—ñ–∫.
::

::field{name="Seek(long offset, SeekOrigin origin)" type="long"}
–ü–µ—Ä–µ–º—ñ—â—É—î –ø–æ–∑–∏—Ü—ñ—é —É –ø–æ—Ç–æ—Ü—ñ. `SeekOrigin` –º–æ–∂–µ –±—É—Ç–∏: `Begin` (–≤—ñ–¥ –ø–æ—á–∞—Ç–∫—É), `Current` (–≤—ñ–¥ –ø–æ—Ç–æ—á–Ω–æ—ó –ø–æ–∑–∏—Ü—ñ—ó), `End` (–≤—ñ–¥ –∫—ñ–Ω—Ü—è).
::

::field{name="Flush()" type="void"}
–ü—Ä–∏–º—É—Å–æ–≤–æ –∑–∞–ø–∏—Å—É—î –≤—Å—ñ –±—É—Ñ–µ—Ä–∏–∑–æ–≤–∞–Ω—ñ –¥–∞–Ω—ñ —É –±–∞–∑–æ–≤–µ —Å—Ö–æ–≤–∏—â–µ (–¥–∏—Å–∫, –º–µ—Ä–µ–∂—É).
::

::field{name="Close()" type="void"}
–ó–∞–∫—Ä–∏–≤–∞—î –ø–æ—Ç—ñ–∫ —Ç–∞ –∑–≤—ñ–ª—å–Ω—è—î —Ä–µ—Å—É—Ä—Å–∏. –ü—ñ—Å–ª—è –∑–∞–∫—Ä–∏—Ç—Ç—è –ø–æ—Ç—ñ–∫ –±—ñ–ª—å—à–µ –Ω–µ –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏.
::

::field{name="CopyTo(Stream destination)" type="void"}
–ö–æ–ø—ñ—é—î –≤—Å—ñ –¥–∞–Ω—ñ –∑ –ø–æ—Ç–æ—á–Ω–æ–≥–æ –ø–æ—Ç–æ–∫—É –¥–æ —ñ–Ω—à–æ–≥–æ.
::

::field{name="ReadAsync(byte[], int, int)" type="Task<int>"}
–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞ –≤–µ—Ä—Å—ñ—è `Read()`.
::

::field{name="WriteAsync(byte[], int, int)" type="Task"}
–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞ –≤–µ—Ä—Å—ñ—è `Write()`.
::
::

::warning
**–ö—Ä–∏—Ç–∏—á–Ω–æ –≤–∞–∂–ª–∏–≤–æ!** –ó–∞–≤–∂–¥–∏ –∑–∞–∫—Ä–∏–≤–∞–π—Ç–µ –ø–æ—Ç–æ–∫–∏ –ø—ñ—Å–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `using` statement. –ù–µ–∑–∞–∫—Ä–∏—Ç—ñ –ø–æ—Ç–æ–∫–∏ –º–æ–∂—É—Ç—å –∑–∞–±–ª–æ–∫—É–≤–∞—Ç–∏ —Ñ–∞–π–ª–∏, –≤–∏—Ç—ñ–∫–∞—Ç–∏ –ø–∞–º'—è—Ç—å –∞–±–æ –≤—Ç—Ä–∞—Ç–∏—Ç–∏ –¥–∞–Ω—ñ —á–µ—Ä–µ–∑ –Ω–µ–∑–∞–ø–∏—Å–∞–Ω–∏–π –±—É—Ñ–µ—Ä.
::

---

## FileStream: –ù–µ—Å—Ç—Ä–∏–º–Ω–∏–π –¥–æ—Å—Ç—É–ø –¥–æ —Ñ–∞–π–ª—ñ–≤

`FileStream` ‚Äî —Ü–µ –Ω–∞–π–±—ñ–ª—å—à –Ω–∏–∑—å–∫–æ—Ä—ñ–≤–Ω–µ–≤–∏–π —Å–ø–æ—Å—ñ–± —Ä–æ–±–æ—Ç–∏ –∑ —Ñ–∞–π–ª–∞–º–∏. –ù–∞ –≤—ñ–¥–º—ñ–Ω—É –≤—ñ–¥ `File.ReadAllText()`, –≤—ñ–Ω –¥–æ–∑–≤–æ–ª—è—î –∫–æ–Ω—Ç—Ä–æ–ª—é–≤–∞—Ç–∏ **—è–∫ —Å–∞–º–µ** —á–∏—Ç–∞—é—Ç—å—Å—è —Ç–∞ –∑–∞–ø–∏—Å—É—é—Ç—å—Å—è –¥–∞–Ω—ñ.

### –°—Ç–≤–æ—Ä–µ–Ω–Ω—è FileStream

```csharp
FileStream stream = new FileStream(
    path: "data.bin",
    mode: FileMode.OpenOrCreate,
    access: FileAccess.ReadWrite,
    share: FileShare.None,
    bufferSize: 4096,
    useAsync: true
);
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ FileMode

| FileMode       | –û–ø–∏—Å                  | –Ø–∫—â–æ —Ñ–∞–π–ª —ñ—Å–Ω—É—î     | –Ø–∫—â–æ —Ñ–∞–π–ª –ù–ï —ñ—Å–Ω—É—î  |
| :------------- | :-------------------- | :------------------ | :------------------ |
| `CreateNew`    | –°—Ç–≤–æ—Ä—é—î –Ω–æ–≤–∏–π —Ñ–∞–π–ª    | **–í–∏–∫–∏–¥–∞—î –≤–∏–Ω—è—Ç–æ–∫** | –°—Ç–≤–æ—Ä—é—î             |
| `Create`       | –°—Ç–≤–æ—Ä—é—î —Ñ–∞–π–ª          | –ü–µ—Ä–µ–∑–∞–ø–∏—Å—É—î         | –°—Ç–≤–æ—Ä—é—î             |
| `Open`         | –í—ñ–¥–∫—Ä–∏–≤–∞—î —ñ—Å–Ω—É—é—á–∏–π    | –í—ñ–¥–∫—Ä–∏–≤–∞—î           | **–í–∏–∫–∏–¥–∞—î –≤–∏–Ω—è—Ç–æ–∫** |
| `OpenOrCreate` | –í—ñ–¥–∫—Ä–∏–≤–∞—î –∞–±–æ —Å—Ç–≤–æ—Ä—é—î | –í—ñ–¥–∫—Ä–∏–≤–∞—î           | –°—Ç–≤–æ—Ä—é—î             |
| `Truncate`     | –í—ñ–¥–∫—Ä–∏–≤–∞—î —Ç–∞ –æ—á–∏—â–∞—î   | –û—á–∏—â–∞—î –≤–º—ñ—Å—Ç        | **–í–∏–∫–∏–¥–∞—î –≤–∏–Ω—è—Ç–æ–∫** |
| `Append`       | –î–æ–¥–∞—î —É –∫—ñ–Ω–µ—Ü—å        | –ü–æ–∑–∏—Ü—ñ—è = –∫—ñ–Ω–µ—Ü—å    | –°—Ç–≤–æ—Ä—é—î             |

### –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ FileAccess

- `FileAccess.Read` ‚Äî —Ç—ñ–ª—å–∫–∏ —á–∏—Ç–∞–Ω–Ω—è
- `FileAccess.Write` ‚Äî —Ç—ñ–ª—å–∫–∏ –∑–∞–ø–∏—Å
- `FileAccess.ReadWrite` ‚Äî —á–∏—Ç–∞–Ω–Ω—è —Ç–∞ –∑–∞–ø–∏—Å

### –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ FileShare

- `FileShare.None` ‚Äî –µ–∫—Å–∫–ª—é–∑–∏–≤–Ω–∏–π –¥–æ—Å—Ç—É–ø (—ñ–Ω—à—ñ –ø—Ä–æ—Ü–µ—Å–∏ –Ω–µ –º–æ–∂—É—Ç—å –≤—ñ–¥–∫—Ä–∏—Ç–∏ —Ñ–∞–π–ª)
- `FileShare.Read` ‚Äî —ñ–Ω—à—ñ –º–æ–∂—É—Ç—å —á–∏—Ç–∞—Ç–∏
- `FileShare.Write` ‚Äî —ñ–Ω—à—ñ –º–æ–∂—É—Ç—å –ø–∏—Å–∞—Ç–∏
- `FileShare.ReadWrite` ‚Äî —ñ–Ω—à—ñ –º–æ–∂—É—Ç—å —á–∏—Ç–∞—Ç–∏ —Ç–∞ –ø–∏—Å–∞—Ç–∏

### –ü—Ä–∏–∫–ª–∞–¥ 1: –ó–∞–ø–∏—Å —Ç–∞ —á–∏—Ç–∞–Ω–Ω—è –±—ñ–Ω–∞—Ä–Ω–∏—Ö –¥–∞–Ω–∏—Ö

```csharp showLineNumbers
using System;
using System.IO;
using System.Text;

class FileStreamDemo
{
    static void Main()
    {
        string filePath = "message.bin";

        // –ó–ê–ü–ò–°
        using (FileStream writeStream = new FileStream(
            filePath,
            FileMode.Create,
            FileAccess.Write))
        {
            string message = "–ü—Ä–∏–≤—ñ—Ç, FileStream!";
            byte[] messageBytes = Encoding.UTF8.GetBytes(message);

            // –ó–∞–ø–∏—Å—É—î–º–æ –¥–æ–≤–∂–∏–Ω—É –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è (4 –±–∞–π—Ç–∏)
            byte[] lengthBytes = BitConverter.GetBytes(messageBytes.Length);
            writeStream.Write(lengthBytes, 0, lengthBytes.Length);

            // –ó–∞–ø–∏—Å—É—î–º–æ —Å–∞–º–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
            writeStream.Write(messageBytes, 0, messageBytes.Length);

            Console.WriteLine($"–ó–∞–ø–∏—Å–∞–Ω–æ {messageBytes.Length} –±–∞–π—Ç");
        } // using –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∫–ª–∏–∫–∞—î Dispose() ‚Üí Close()

        // –ß–ò–¢–ê–ù–ù–Ø
        using (FileStream readStream = new FileStream(
            filePath,
            FileMode.Open,
            FileAccess.Read))
        {
            // –ß–∏—Ç–∞—î–º–æ –¥–æ–≤–∂–∏–Ω—É
            byte[] lengthBytes = new byte[4];
            readStream.Read(lengthBytes, 0, 4);
            int messageLength = BitConverter.ToInt32(lengthBytes, 0);

            // –ß–∏—Ç–∞—î–º–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
            byte[] messageBytes = new byte[messageLength];
            readStream.Read(messageBytes, 0, messageLength);

            string message = Encoding.UTF8.GetString(messageBytes);
            Console.WriteLine($"–ü—Ä–æ—á–∏—Ç–∞–Ω–æ: {message}");
        }
    }
}
```

**–†–æ–∑–±—ñ—Ä –∫–æ–¥—É:**

- **–†—è–¥–∫–∏ 12-15**: –°—Ç–≤–æ—Ä—é—î–º–æ `FileStream` –¥–ª—è –∑–∞–ø–∏—Å—É. `FileMode.Create` –ø–µ—Ä–µ–∑–∞–ø–∏—à–µ —Ñ–∞–π–ª, —è–∫—â–æ –≤—ñ–Ω —ñ—Å–Ω—É—î.
- **–†—è–¥–æ–∫ 18**: –ö–æ–Ω–≤–µ—Ä—Ç—É—î–º–æ —Ä—è–¥–æ–∫ —É –º–∞—Å–∏–≤ –±–∞–π—Ç—ñ–≤ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `Encoding.UTF8`.
- **–†—è–¥–∫–∏ 21-22**: –ó–∞–ø–∏—Å—É—î–º–æ —Å–ø–æ—á–∞—Ç–∫—É –¥–æ–≤–∂–∏–Ω—É –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è (4 –±–∞–π—Ç–∏ int32), —â–æ–± –∑–Ω–∞—Ç–∏, —Å–∫—ñ–ª—å–∫–∏ –±–∞–π—Ç—ñ–≤ —á–∏—Ç–∞—Ç–∏ –ø–æ—Ç—ñ–º.
- **–†—è–¥–æ–∫ 25**: –ó–∞–ø–∏—Å—É—î–º–æ —Å–∞–º–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è.
- **–†—è–¥–æ–∫ 28**: `using` statement –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∫–ª–∏–∫–∞—î `Dispose()`, —è–∫–∏–π –∑–∞–∫—Ä–∏–≤–∞—î –ø–æ—Ç—ñ–∫.
- **–†—è–¥–∫–∏ 37-38**: –ß–∏—Ç–∞—î–º–æ 4 –±–∞–π—Ç–∏ —Ç–∞ –∫–æ–Ω–≤–µ—Ä—Ç—É—î–º–æ —ó—Ö —É `int` –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `BitConverter`.
- **–†—è–¥–∫–∏ 41-42**: –ß–∏—Ç–∞—î–º–æ —Ç–æ—á–Ω—É –∫—ñ–ª—å–∫—ñ—Å—Ç—å –±–∞–π—Ç—ñ–≤ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è.

::tip
**–ß–æ–º—É —Å–ø–æ—á–∞—Ç–∫—É –¥–æ–≤–∂–∏–Ω–∞?** –î–ª—è –±—ñ–Ω–∞—Ä–Ω–∏—Ö –¥–∞–Ω–∏—Ö –º–∏ –Ω–µ –∑–Ω–∞—î–º–æ, –¥–µ –∑–∞–∫—ñ–Ω—á—É—î—Ç—å—Å—è –æ–¥–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —ñ –ø–æ—á–∏–Ω–∞—î—Ç—å—Å—è —ñ–Ω—à–µ. –ó–∞–ø–∏—Å—É—é—á–∏ –¥–æ–≤–∂–∏–Ω—É —Å–ø–æ—á–∞—Ç–∫—É, –º–∏ –≤–∏—Ä—ñ—à—É—î–º–æ —Ü—é –ø—Ä–æ–±–ª–µ–º—É ‚Äî —Ü–µ —Ç–∏–ø–æ–≤–∏–π –ø–∞—Ç—Ç–µ—Ä–Ω —É –±—ñ–Ω–∞—Ä–Ω–∏—Ö –ø—Ä–æ—Ç–æ–∫–æ–ª–∞—Ö.
::

### –ü—Ä–∏–∫–ª–∞–¥ 2: –ü–æ—Ç–æ–∫–æ–≤–µ —á–∏—Ç–∞–Ω–Ω—è –≤–µ–ª–∏–∫–æ–≥–æ —Ñ–∞–π–ª—É

–£—è–≤—ñ–º–æ, —â–æ –º–∞—î–º–æ –ª–æ–≥-—Ñ–∞–π–ª —Ä–æ–∑–º—ñ—Ä–æ–º 2 –ì–ë. –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –π–æ–≥–æ —É –ø–∞–º'—è—Ç—å –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `File.ReadAllText()` –Ω–µ–º–æ–∂–ª–∏–≤–æ. –í–∏–∫–æ—Ä–∏—Å—Ç–∞—î–º–æ –ø–æ—Ç–æ–∫–æ–≤–µ —á–∏—Ç–∞–Ω–Ω—è.

```csharp showLineNumbers
using System;
using System.IO;

class LargeFileReader
{
    static void Main()
    {
        string logPath = "huge_log.txt";

        // –°—Ç–≤–æ—Ä—é—î–º–æ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ–π–Ω–∏–π —Ñ–∞–π–ª (–±–∞–≥–∞—Ç–æ —Ä—è–¥–∫—ñ–≤)
        CreateDemoLog(logPath, lines: 1_000_000);

        Console.WriteLine("–ü–æ—à—É–∫ –ø–æ–º–∏–ª–æ–∫ —É –≤–µ–ª–∏–∫–æ–º—É —Ñ–∞–π–ª—ñ...\n");

        int errorCount = 0;
        int chunkSize = 4096; // 4 KB
        byte[] buffer = new byte[chunkSize];

        using (FileStream fs = new FileStream(logPath, FileMode.Open, FileAccess.Read))
        {
            int bytesRead;
            long totalBytes = 0;

            // –ß–∏—Ç–∞—î–º–æ —Ñ–∞–π–ª —á–∞—Å—Ç–∏–Ω–∞–º–∏
            while ((bytesRead = fs.Read(buffer, 0, buffer.Length)) > 0)
            {
                totalBytes += bytesRead;

                // –ö–æ–Ω–≤–µ—Ä—Ç—É—î–º–æ chunk —É —Ä—è–¥–æ–∫
                string chunk = System.Text.Encoding.UTF8.GetString(buffer, 0, bytesRead);

                // –†–∞—Ö—É—î–º–æ –ø–æ–º–∏–ª–∫–∏
                errorCount += CountOccurrences(chunk, "ERROR");

                // –ü—Ä–æ–≥—Ä–µ—Å (–∫–æ–∂–Ω—ñ 10 MB)
                if (totalBytes % (10 * 1024 * 1024) == 0)
                {
                    Console.WriteLine($"–û–±—Ä–æ–±–ª–µ–Ω–æ: {totalBytes / 1024 / 1024} MB");
                }
            }
        }

        Console.WriteLine($"\n‚úÖ –ó–Ω–∞–π–¥–µ–Ω–æ –ø–æ–º–∏–ª–æ–∫: {errorCount}");
        Console.WriteLine($"–†–æ–∑–º—ñ—Ä —Ñ–∞–π–ª—É: {new FileInfo(logPath).Length / 1024 / 1024} MB");
    }

    static void CreateDemoLog(string path, int lines)
    {
        using (StreamWriter writer = new StreamWriter(path))
        {
            var random = new Random();
            for (int i = 0; i < lines; i++)
            {
                string level = random.Next(10) == 0 ? "ERROR" : "INFO";
                writer.WriteLine($"{DateTime.Now:yyyy-MM-dd HH:mm:ss} [{level}] Message #{i}");
            }
        }
    }

    static int CountOccurrences(string text, string substring)
    {
        int count = 0;
        int index = 0;
        while ((index = text.IndexOf(substring, index)) != -1)
        {
            count++;
            index += substring.Length;
        }
        return count;
    }
}
```

**–†–æ–∑–±—ñ—Ä –∫–æ–¥—É:**

- **–†—è–¥–æ–∫ 16**: –í–∏–∑–Ω–∞—á–∞—î–º–æ —Ä–æ–∑–º—ñ—Ä –±—É—Ñ–µ—Ä–∞ (chunk) ‚Äî 4 KB. –¶–µ –æ–ø—Ç–∏–º–∞–ª—å–Ω–∏–π —Ä–æ–∑–º—ñ—Ä –¥–ª—è –±—ñ–ª—å—à–æ—Å—Ç—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—ó–≤.
- **–†—è–¥–∫–∏ 25-40**: –ß–∏—Ç–∞—î–º–æ —Ñ–∞–π–ª —É —Ü–∏–∫–ª—ñ —á–∞—Å—Ç–∏–Ω–∞–º–∏. `Read()` –ø–æ–≤–µ—Ä—Ç–∞—î –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ñ–∞–∫—Ç–∏—á–Ω–æ –ø—Ä–æ—á–∏—Ç–∞–Ω–∏—Ö –±–∞–π—Ç—ñ–≤.
- **–†—è–¥–æ–∫ 25**: `while ((bytesRead = fs.Read(...)) > 0)` ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π –ø–∞—Ç—Ç–µ—Ä–Ω –¥–ª—è –ø–æ—Ç–æ–∫–æ–≤–æ–≥–æ —á–∏—Ç–∞–Ω–Ω—è. –ö–æ–ª–∏ –¥–æ—Å—è–≥–Ω–µ–º–æ –∫—ñ–Ω—Ü—è —Ñ–∞–π–ª—É, `Read()` –ø–æ–≤–µ—Ä–Ω–µ 0.
- **–†—è–¥–æ–∫ 30**: –ö–æ–Ω–≤–µ—Ä—Ç—É—î–º–æ —Ç—ñ–ª—å–∫–∏ –ø—Ä–æ—á–∏—Ç–∞–Ω—É —á–∞—Å—Ç–∏–Ω—É –±—É—Ñ–µ—Ä–∞ —É —Ä—è–¥–æ–∫ (–Ω–µ –≤–µ—Å—å –º–∞—Å–∏–≤!).
- **–†—è–¥–∫–∏ 36-39**: –í–∏–≤–æ–¥–∏–º–æ –ø—Ä–æ–≥—Ä–µ—Å –∫–æ–∂–Ω—ñ 10 MB –¥–ª—è –Ω–∞–æ—á–Ω–æ—Å—Ç—ñ.

::note
**–ü—Ä–æ–±–ª–µ–º–∞ –º–µ–∂ —Ä—è–¥–∫—ñ–≤**: –¶–µ–π –ø—Ä–∏–∫–ª–∞–¥ —Å–ø—Ä–æ—â–µ–Ω–∏–π. –Ø–∫—â–æ —Å–ª–æ–≤–æ "ERROR" —Ä–æ–∑—ñ—Ä–≤–µ—Ç—å—Å—è –º—ñ–∂ –¥–≤–æ–º–∞ chunks, –º–∏ –π–æ–≥–æ –Ω–µ –∑–Ω–∞–π–¥–µ–º–æ. –î–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ –∫–æ–¥—É –ø–æ—Ç—Ä—ñ–±–Ω–∞ –¥–æ–¥–∞—Ç–∫–æ–≤–∞ –ª–æ–≥—ñ–∫–∞ –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –Ω–µ–ø–æ–≤–Ω–∏–º–∏ —Ä—è–¥–∫–∞–º–∏ (buffer overlap).
::

---

## MemoryStream: –ü–æ—Ç—ñ–∫ —É –ø–∞–º'—è—Ç—ñ

`MemoryStream` –∑–±–µ—Ä—ñ–≥–∞—î –¥–∞–Ω—ñ —É –ø–∞–º'—è—Ç—ñ (RAM) –∑–∞–º—ñ—Å—Ç—å —Ñ–∞–π–ª—É. –¶–µ –∫–æ—Ä–∏—Å–Ω–æ –¥–ª—è:

- –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è (–Ω–µ —Å—Ç–≤–æ—Ä—é—î —Ñ–∞–π–ª–∏ –Ω–∞ –¥–∏—Å–∫—É)
- –¢–∏–º—á–∞—Å–æ–≤–∏—Ö –±—É—Ñ–µ—Ä—ñ–≤
- –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—ó –º—ñ–∂ –ø–æ—Ç–æ–∫–∞–º–∏ —Ç–∞ –º–∞—Å–∏–≤–∞–º–∏ –±–∞–π—Ç—ñ–≤
- –†–æ–±–æ—Ç–∏ –∑ –¥–∞–Ω–∏–º–∏ –ø–µ—Ä–µ–¥ –∑–∞–ø–∏—Å–æ–º –Ω–∞ –¥–∏—Å–∫

### –ü—Ä–∏–∫–ª–∞–¥ 3: –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è MemoryStream

```csharp showLineNumbers
using System;
using System.IO;
using System.Text;

class MemoryStreamDemo
{
    static void Main()
    {
        // –°—Ç–≤–æ—Ä—é—î–º–æ –ø—É—Å—Ç–∏–π MemoryStream
        using (MemoryStream ms = new MemoryStream())
        {
            // –ó–∞–ø–∏—Å—É—î–º–æ –¥–∞–Ω—ñ
            string message = "–î–∞–Ω—ñ —É –ø–∞–º'—è—Ç—ñ";
            byte[] messageBytes = Encoding.UTF8.GetBytes(message);
            ms.Write(messageBytes, 0, messageBytes.Length);

            Console.WriteLine($"–ü–æ–∑–∏—Ü—ñ—è –ø—ñ—Å–ª—è –∑–∞–ø–∏—Å—É: {ms.Position}");
            Console.WriteLine($"–î–æ–≤–∂–∏–Ω–∞ –ø–æ—Ç–æ–∫—É: {ms.Length}");

            // –ü–æ–≤–µ—Ä—Ç–∞—î–º–æ—Å—è –Ω–∞ –ø–æ—á–∞—Ç–æ–∫ –¥–ª—è —á–∏—Ç–∞–Ω–Ω—è
            ms.Position = 0;

            // –ß–∏—Ç–∞—î–º–æ –¥–∞–Ω—ñ
            byte[] buffer = new byte[ms.Length];
            ms.Read(buffer, 0, buffer.Length);

            string readMessage = Encoding.UTF8.GetString(buffer);
            Console.WriteLine($"–ü—Ä–æ—á–∏—Ç–∞–Ω–æ: {readMessage}");

            // –û—Ç—Ä–∏–º—É—î–º–æ –º–∞—Å–∏–≤ –±–∞–π—Ç—ñ–≤
            byte[] allData = ms.ToArray();
            Console.WriteLine($"ToArray() –ø–æ–≤–µ—Ä–Ω—É–≤ {allData.Length} –±–∞–π—Ç");
        }

        // –°—Ç–≤–æ—Ä—é—î–º–æ MemoryStream –∑ —ñ—Å–Ω—É—é—á–æ–≥–æ –º–∞—Å–∏–≤—É
        byte[] existingData = Encoding.UTF8.GetBytes("–ü–æ–ø–µ—Ä–µ–¥–Ω—ñ –¥–∞–Ω—ñ");
        using (MemoryStream ms2 = new MemoryStream(existingData))
        {
            ms2.Position = ms2.Length; // –ü–µ—Ä–µ—Ö–æ–¥–∏–º–æ –≤ –∫—ñ–Ω–µ—Ü—å

            // –î–æ–¥–∞—î–º–æ –Ω–æ–≤—ñ –¥–∞–Ω—ñ
            byte[] newData = Encoding.UTF8.GetBytes(" + –Ω–æ–≤—ñ –¥–∞–Ω—ñ");
            ms2.Write(newData, 0, newData.Length);

            ms2.Position = 0; // –ü–æ–≤–µ—Ä—Ç–∞—î–º–æ—Å—è –Ω–∞ –ø–æ—á–∞—Ç–æ–∫
            byte[] combined = ms2.ToArray();
            Console.WriteLine($"\n–û–±'—î–¥–Ω–∞–Ω—ñ –¥–∞–Ω—ñ: {Encoding.UTF8.GetString(combined)}");
        }
    }
}
```

**–†–æ–∑–±—ñ—Ä –∫–æ–¥—É:**

- **–†—è–¥–æ–∫ 10**: –°—Ç–≤–æ—Ä—é—î–º–æ –ø–æ—Ä–æ–∂–Ω—ñ–π `MemoryStream`. –ü–æ—á–∞—Ç–∫–æ–≤–∞ —î–º–Ω—ñ—Å—Ç—å ‚Äî 0, –∞–ª–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑—Ä–æ—Å—Ç–∞—î.
- **–†—è–¥–æ–∫ 21**: **–ö—Ä–∏—Ç–∏—á–Ω–æ!** –ü—ñ—Å–ª—è –∑–∞–ø–∏—Å—É –ø–æ–∑–∏—Ü—ñ—è —É –ø–æ—Ç–æ—Ü—ñ ‚Äî –≤ –∫—ñ–Ω—Ü—ñ. –î–ª—è —á–∏—Ç–∞–Ω–Ω—è –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ —ó—ó –Ω–∞ –ø–æ—á–∞—Ç–æ–∫.
- **–†—è–¥–æ–∫ 31**: `ToArray()` —Å—Ç–≤–æ—Ä—é—î **–∫–æ–ø—ñ—é** –≤–Ω—É—Ç—Ä—ñ—à–Ω—å–æ–≥–æ –±—É—Ñ–µ—Ä–∞. –î–ª—è –≤–µ–ª–∏–∫–∏—Ö –¥–∞–Ω–∏—Ö —Ü–µ –º–æ–∂–µ –±—É—Ç–∏ –Ω–µ–µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ.
- **–†—è–¥–∫–∏ 36-47**: –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—è —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó `MemoryStream` —ñ—Å–Ω—É—é—á–∏–º –º–∞—Å–∏–≤–æ–º.

::tip
**GetBuffer() vs ToArray()**: `GetBuffer()` –ø–æ–≤–µ—Ä—Ç–∞—î –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ–π –º–∞—Å–∏–≤ –±–µ–∑ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è, –∞–ª–µ –≤—ñ–Ω –º–æ–∂–µ –º—ñ—Å—Ç–∏—Ç–∏ –Ω–µ–≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω—ñ –±–∞–π—Ç–∏. `ToArray()` –ø–æ–≤–µ—Ä—Ç–∞—î —Ç–æ—á–Ω—É –∫–æ–ø—ñ—é –¥–∞–Ω–∏—Ö. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `GetBuffer()` –¥–ª—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ, —è–∫—â–æ —Ä–æ–∑—É–º—ñ—î—Ç–µ —Ä–∏–∑–∏–∫–∏.
::

---

## StreamReader —Ç–∞ StreamWriter: –¢–µ–∫—Å—Ç–æ–≤—ñ –ø–æ—Ç–æ–∫–∏

–†–æ–±–æ—Ç–∞ –∑ –±–∞–π—Ç–∞–º–∏ –Ω–µ–∑—Ä—É—á–Ω–∞ –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö. `StreamReader` —Ç–∞ `StreamWriter` ‚Äî —Ü–µ –æ–±–≥–æ—Ä—Ç–∫–∏ –Ω–∞–¥ `Stream`, —è–∫—ñ –ø—Ä–∞—Ü—é—é—Ç—å –∑ **—Ä—è–¥–∫–∞–º–∏** —Ç–∞ **—Å–∏–º–≤–æ–ª–∞–º–∏** –∑–∞–º—ñ—Å—Ç—å –±–∞–π—Ç—ñ–≤.

### StreamReader: –ß–∏—Ç–∞–Ω–Ω—è —Ç–µ–∫—Å—Ç—É

```csharp showLineNumbers
using System;
using System.IO;

class StreamReaderDemo
{
    static void Main()
    {
        string filePath = "diary.txt";

        // –°—Ç–≤–æ—Ä—é—î–º–æ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ–π–Ω–∏–π —Ñ–∞–π–ª
        File.WriteAllLines(filePath, new[]
        {
            "2026-01-10: –í–∏–≤—á–∞—é C# Streams",
            "2026-01-11: –ü—Ä–∞–∫—Ç–∏–∫—É—é async I/O",
            "2026-01-12: –ë—É–¥—É—é —Ä–µ–∞–ª—å–Ω–∏–π –ø—Ä–æ—î–∫—Ç"
        });

        // –ß–∏—Ç–∞–Ω–Ω—è –≤—Å—å–æ–≥–æ —Ñ–∞–π–ª—É
        using (StreamReader reader = new StreamReader(filePath))
        {
            string content = reader.ReadToEnd();
            Console.WriteLine("=== –í–ï–°–¨ –í–ú–Ü–°–¢ ===");
            Console.WriteLine(content);
        }

        // –ß–∏—Ç–∞–Ω–Ω—è –ø–æ —Ä—è–¥–∫–∞—Ö
        Console.WriteLine("\n=== –ü–û–†–Ø–î–ö–û–í–ï –ß–ò–¢–ê–ù–ù–Ø ===");
        using (StreamReader reader = new StreamReader(filePath))
        {
            string line;
            int lineNumber = 1;
            while ((line = reader.ReadLine()) != null)
            {
                Console.WriteLine($"[{lineNumber}] {line}");
                lineNumber++;
            }
        }

        // –ß–∏—Ç–∞–Ω–Ω—è –∑ –∫–æ–¥—É–≤–∞–Ω–Ω—è–º
        using (StreamReader reader = new StreamReader(filePath, System.Text.Encoding.UTF8))
        {
            Console.WriteLine($"\n–ü–µ—Ä—à–∏–π —Å–∏–º–≤–æ–ª: '{(char)reader.Read()}'");
        }
    }
}
```

**–†–æ–∑–±—ñ—Ä –∫–æ–¥—É:**

- **–†—è–¥–æ–∫ 21**: `ReadToEnd()` —á–∏—Ç–∞—î –≤–µ—Å—å —Ñ–∞–π–ª —É —î–¥–∏–Ω–∏–π —Ä—è–¥–æ–∫ (–∞–Ω–∞–ª–æ–≥ `File.ReadAllText()`).
- **–†—è–¥–æ–∫ 32**: `ReadLine()` —á–∏—Ç–∞—î –æ–¥–∏–Ω —Ä—è–¥–æ–∫ (–¥–æ —Å–∏–º–≤–æ–ª—É `\n` –∞–±–æ `\r\n`). –ü–æ–≤–µ—Ä—Ç–∞—î `null` –Ω–∞–ø—Ä–∏–∫—ñ–Ω—Ü—ñ —Ñ–∞–π–ª—É.
- **–†—è–¥–æ–∫ 40**: –ú–æ–∂–Ω–∞ –≤–∫–∞–∑–∞—Ç–∏ –∫–æ–¥—É–≤–∞–Ω–Ω—è (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º ‚Äî UTF-8).
- **–†—è–¥–æ–∫ 42**: `Read()` —á–∏—Ç–∞—î **–æ–¥–∏–Ω —Å–∏–º–≤–æ–ª** (–ø–æ–≤–µ—Ä—Ç–∞—î `int`, –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø—Ä–∏–≤–µ—Å—Ç–∏ –¥–æ `char`).

### StreamWriter: –ó–∞–ø–∏—Å —Ç–µ–∫—Å—Ç—É

```csharp showLineNumbers
using System;
using System.IO;

class StreamWriterDemo
{
    static void Main()
    {
        string logPath = "application.log";

        // –ó–∞–ø–∏—Å –∑ –ø–µ—Ä–µ–∑–∞–ø–∏—Å–æ–º
        using (StreamWriter writer = new StreamWriter(logPath))
        {
            writer.WriteLine($"[{DateTime.Now}] Application started");
            writer.WriteLine($"[{DateTime.Now}] Initializing components...");
            writer.Write("Progress: ");
            writer.Write("25%... ");
            writer.WriteLine("50%... Done!");
        }

        // –î–æ–¥–∞–≤–∞–Ω–Ω—è –¥–æ —ñ—Å–Ω—É—é—á–æ–≥–æ —Ñ–∞–π–ª—É
        using (StreamWriter writer = new StreamWriter(logPath, append: true))
        {
            writer.WriteLine($"[{DateTime.Now}] New log entry");
        }

        // –ó–∞–ø–∏—Å –∑ –∫–æ–¥—É–≤–∞–Ω–Ω—è–º —Ç–∞ –±—É—Ñ–µ—Ä–∏–∑–∞—Ü—ñ—î—é
        using (StreamWriter writer = new StreamWriter(
            path: logPath,
            append: true,
            encoding: System.Text.Encoding.UTF8,
            bufferSize: 65536)) // 64 KB buffer
        {
            for (int i = 0; i < 1000; i++)
            {
                writer.WriteLine($"[{DateTime.Now}] Iteration {i}");
            }
            // writer.Flush(); // –ü—Ä–∏–º—É—Å–æ–≤–æ —Å–∫–∏–Ω—É—Ç–∏ –±—É—Ñ–µ—Ä (–≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—Ä–∏ Dispose)
        }

        // –í–∏–≤–æ–¥–∏–º–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
        Console.WriteLine("=== –õ–û–ì –§–ê–ô–õ ===");
        Console.WriteLine(File.ReadAllText(logPath));
    }
}
```

**–†–æ–∑–±—ñ—Ä –∫–æ–¥—É:**

- **–†—è–¥–æ–∫ 13**: `WriteLine()` –¥–æ–¥–∞—î —Å–∏–º–≤–æ–ª –Ω–æ–≤–æ–≥–æ —Ä—è–¥–∫–∞ (`\n` –∞–±–æ `\r\n` –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –û–°).
- **–†—è–¥–∫–∏ 15-17**: `Write()` –Ω–µ –¥–æ–¥–∞—î –Ω–æ–≤–∏–π —Ä—è–¥–æ–∫ ‚Äî –¥–æ–∑–≤–æ–ª—è—î –ø–∏—Å–∞—Ç–∏ —á–∞—Å—Ç–∏–Ω–∞–º–∏.
- **–†—è–¥–æ–∫ 21**: `append: true` –¥–æ–¥–∞—î —Ç–µ–∫—Å—Ç —É –∫—ñ–Ω–µ—Ü—å —Ñ–∞–π–ª—É –∑–∞–º—ñ—Å—Ç—å –ø–µ—Ä–µ–∑–∞–ø–∏—Å—É.
- **–†—è–¥–∫–∏ 27-31**: –í–∫–∞–∑—É—î–º–æ –∫–æ–¥—É–≤–∞–Ω–Ω—è —Ç–∞ —Ä–æ–∑–º—ñ—Ä –±—É—Ñ–µ—Ä–∞. –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º `StreamWriter` –±—É—Ñ–µ—Ä–∏–∑—É—î –¥–∞–Ω—ñ –¥–ª—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ.
- **–†—è–¥–æ–∫ 37**: `Flush()` –ø—Ä–∏–º—É—Å–æ–≤–æ –∑–∞–ø–∏—Å—É—î –±—É—Ñ–µ—Ä –Ω–∞ –¥–∏—Å–∫. `Dispose()` –≤–∏–∫–ª–∏–∫–∞—î –π–æ–≥–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ.

::warning
**–ë—É—Ñ–µ—Ä–∏–∑–∞—Ü—ñ—è**: `StreamWriter` –Ω–µ –∑–∞–ø–∏—Å—É—î –∫–æ–∂–µ–Ω `WriteLine()` –æ–¥—Ä–∞–∑—É –Ω–∞ –¥–∏—Å–∫ ‚Äî –≤—ñ–Ω –Ω–∞–∫–æ–ø–∏—á—É—î –¥–∞–Ω—ñ —É –±—É—Ñ–µ—Ä—ñ. –Ø–∫—â–æ –ø—Ä–æ–≥—Ä–∞–º–∞ –∞–≤–∞—Ä—ñ–π–Ω–æ –∑–∞–≤–µ—Ä—à–∏—Ç—å—Å—è –¥–æ `Dispose()`, –æ—Å—Ç–∞–Ω–Ω—ñ –∑–∞–ø–∏—Å–∏ –º–æ–∂—É—Ç—å –≤—Ç—Ä–∞—Ç–∏—Ç–∏—Å—è. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `writer.AutoFlush = true` –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω–∏—Ö –ª–æ–≥—ñ–≤.
::

---

## BinaryReader —Ç–∞ BinaryWriter: –°—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω—ñ –±—ñ–Ω–∞—Ä–Ω—ñ –¥–∞–Ω—ñ

–î–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –ø—Ä–∏–º—ñ—Ç–∏–≤–Ω–∏–º–∏ —Ç–∏–ø–∞–º–∏ (int, float, bool) —É –±—ñ–Ω–∞—Ä–Ω–æ–º—É —Ñ–æ—Ä–º–∞—Ç—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `BinaryReader` —Ç–∞ `BinaryWriter`. –í–æ–Ω–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ–±—Ä–æ–±–ª—è—é—Ç—å –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—é —Ç–∏–ø—ñ–≤.

### –ü—Ä–∏–∫–ª–∞–¥ 4: –ó–±–µ—Ä—ñ–≥–∞–Ω–Ω—è —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω–∏—Ö –¥–∞–Ω–∏—Ö

```csharp showLineNumbers
using System;
using System.IO;

// –ú–æ–¥–µ–ª—å –¥–∞–Ω–∏—Ö
record PlayerData(string Name, int Level, float Health, bool IsOnline);

class BinaryDataDemo
{
    static void Main()
    {
        string savePath = "player_save.dat";

        // –°—Ç–≤–æ—Ä—é—î–º–æ –¥–∞–Ω—ñ –≥—Ä–∞–≤—Ü—è
        var player = new PlayerData("Aragorn", 42, 95.5f, true);

        // –ó–ê–ü–ò–° —É –±—ñ–Ω–∞—Ä–Ω–∏–π —Ñ–∞–π–ª
        using (FileStream fs = new FileStream(savePath, FileMode.Create))
        using (BinaryWriter writer = new BinaryWriter(fs))
        {
            writer.Write(player.Name);    // string
            writer.Write(player.Level);   // int (4 bytes)
            writer.Write(player.Health);  // float (4 bytes)
            writer.Write(player.IsOnline);// bool (1 byte)

            Console.WriteLine("–î–∞–Ω—ñ –∑–±–µ—Ä–µ–∂–µ–Ω–æ!");
        }

        // –ß–ò–¢–ê–ù–ù–Ø –∑ –±—ñ–Ω–∞—Ä–Ω–æ–≥–æ —Ñ–∞–π–ª—É
        using (FileStream fs = new FileStream(savePath, FileMode.Open))
        using (BinaryReader reader = new BinaryReader(fs))
        {
            string name = reader.ReadString();
            int level = reader.ReadInt32();
            float health = reader.ReadSingle();
            bool isOnline = reader.ReadBoolean();

            var loadedPlayer = new PlayerData(name, level, health, isOnline);

            Console.WriteLine($"\n–î–∞–Ω—ñ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ:");
            Console.WriteLine($"  –Ü–º'—è: {loadedPlayer.Name}");
            Console.WriteLine($"  –†—ñ–≤–µ–Ω—å: {loadedPlayer.Level}");
            Console.WriteLine($"  –ó–¥–æ—Ä–æ–≤'—è: {loadedPlayer.Health}");
            Console.WriteLine($"  –û–Ω–ª–∞–π–Ω: {loadedPlayer.IsOnline}");
        }

        // –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ —Ä–æ–∑–º—ñ—Ä —Ñ–∞–π–ª—É
        FileInfo fileInfo = new FileInfo(savePath);
        Console.WriteLine($"\n–†–æ–∑–º—ñ—Ä —Ñ–∞–π–ª—É: {fileInfo.Length} –±–∞–π—Ç");
    }
}
```

**–†–æ–∑–±—ñ—Ä –∫–æ–¥—É:**

- **–†—è–¥–æ–∫ 5**: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ `record` –¥–ª—è –∫–æ–º–ø–∞–∫—Ç–Ω–æ–≥–æ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –º–æ–¥–µ–ª—ñ –¥–∞–Ω–∏—Ö.
- **–†—è–¥–∫–∏ 20-23**: `BinaryWriter.Write()` –º–∞—î –±–∞–≥–∞—Ç–æ –ø–µ—Ä–µ–≤–∞–Ω—Ç–∞–∂–µ–Ω—å –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö —Ç–∏–ø—ñ–≤. –í—ñ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∫–æ–Ω–≤–µ—Ä—Ç—É—î —ó—Ö —É –±–∞–π—Ç–∏.
- **–†—è–¥–∫–∏ 32-35**: **–ö—Ä–∏—Ç–∏—á–Ω–æ –≤–∞–∂–ª–∏–≤–æ**: —á–∏—Ç–∞—Ç–∏ –¥–∞–Ω—ñ —É —Ç–æ–º—É —Å–∞–º–æ–º—É –ø–æ—Ä—è–¥–∫—É, —â–æ —ñ –∑–∞–ø–∏—Å—É–≤–∞–ª–∏! `ReadInt32()`, `ReadSingle()`, `ReadBoolean()` ‚Äî –º–µ—Ç–æ–¥–∏ –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏—Ö —Ç–∏–ø—ñ–≤.
- **–†—è–¥–æ–∫ 47**: –ë—ñ–Ω–∞—Ä–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç –∫–æ–º–ø–∞–∫—Ç–Ω—ñ—à–∏–π –∑–∞ —Ç–µ–∫—Å—Ç–æ–≤–∏–π (JSON/XML).

::note
**–í–µ—Ä—Å—ñ–π–Ω—ñ—Å—Ç—å**: –Ø–∫—â–æ –≤–∏ –∑–º—ñ–Ω–∏—Ç–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É `PlayerData` (–¥–æ–¥–∞—Å—Ç–µ –ø–æ–ª–µ), —Å—Ç–∞—Ä—ñ —Ñ–∞–π–ª–∏ –∑–±–µ—Ä–µ–∂–µ–Ω—å –Ω–µ —á–∏—Ç–∞—Ç–∏–º—É—Ç—å—Å—è. –î–ª—è —Ä–µ–∞–ª—å–Ω–∏—Ö –ø—Ä–æ—î–∫—Ç—ñ–≤ –ø–æ—Ç—Ä—ñ–±–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –≤–µ—Ä—Å—ñ–π–Ω–æ—Å—Ç—ñ —Ñ–æ—Ä–º–∞—Ç—ñ–≤ –∞–±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è JSON/XML/Protobuf.
::

### –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è: BinaryWriter vs StreamWriter

| –ö—Ä–∏—Ç–µ—Ä—ñ–π          | BinaryWriter                 | StreamWriter            |
| :---------------- | :--------------------------- | :---------------------- |
| **–¢–∏–ø –¥–∞–Ω–∏—Ö**     | –ë—ñ–Ω–∞—Ä–Ω—ñ (int, float, byte[]) | –¢–µ–∫—Å—Ç (string, char)    |
| **–†–æ–∑–º—ñ—Ä —Ñ–∞–π–ª—É**  | –ö–æ–º–ø–∞–∫—Ç–Ω–∏–π                   | –ë—ñ–ª—å—à–∏–π (—Ç–µ–∫—Å—Ç)         |
| **–ß–∏—Ç–∞–±–µ–ª—å–Ω—ñ—Å—Ç—å** | –ù–µ —á–∏—Ç–∞–±–µ–ª—å–Ω–∏–π –ª—é–¥–∏–Ω–æ—é       | –ß–∏—Ç–∞–±–µ–ª—å–Ω–∏–π             |
| **–®–≤–∏–¥–∫—ñ—Å—Ç—å**     | –®–≤–∏–¥—à–µ                       | –ü–æ–≤—ñ–ª—å–Ω—ñ—à–µ              |
| **–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è**  | –ü—Ä–æ—Ç–æ–∫–æ–ª–∏, —Ñ–æ—Ä–º–∞—Ç–∏ –¥–∞–Ω–∏—Ö     | –õ–æ–≥–∏, –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó, CSV |

---

## Compression: –°—Ç–∏—Å–Ω–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö

.NET –Ω–∞–¥–∞—î –≤–±—É–¥–æ–≤–∞–Ω—ñ –∫–ª–∞—Å–∏ –¥–ª—è —Å—Ç–∏—Å–Ω–µ–Ω–Ω—è —Ç–∞ —Ä–æ–∑–ø–∞–∫—É–≤–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö: `GZipStream`, `DeflateStream` —Ç–∞ `ZipArchive`.

### GZipStream: –°—Ç–∏—Å–Ω–µ–Ω–Ω—è –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª—É

`GZipStream` –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –∞–ª–≥–æ—Ä–∏—Ç–º GZIP (—Ç–µ —Å–∞–º–µ, —â–æ HTTP compression).

```csharp showLineNumbers
using System;
using System.IO;
using System.IO.Compression;

class GZipDemo
{
    static void Main()
    {
        string sourceFile = "large_document.txt";
        string compressedFile = "large_document.txt.gz";
        string decompressedFile = "large_document_restored.txt";

        // –°—Ç–≤–æ—Ä—é—î–º–æ –≤–µ–ª–∏–∫–∏–π —Ñ–∞–π–ª –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó
        File.WriteAllText(sourceFile, new string('A', 1_000_000)); // 1 MB –±—É–∫–≤ 'A'

        // –°–¢–ò–°–ù–ï–ù–ù–Ø
        Console.WriteLine("–°—Ç–∏—Å–∫–∞–Ω–Ω—è...");
        using (FileStream sourceStream = new FileStream(sourceFile, FileMode.Open))
        using (FileStream compressedStream = new FileStream(compressedFile, FileMode.Create))
        using (GZipStream gzipStream = new GZipStream(compressedStream, CompressionMode.Compress))
        {
            sourceStream.CopyTo(gzipStream);
        }

        // –†–û–ó–ü–ê–ö–£–í–ê–ù–ù–Ø
        Console.WriteLine("–†–æ–∑–ø–∞–∫—É–≤–∞–Ω–Ω—è...");
        using (FileStream compressedStream = new FileStream(compressedFile, FileMode.Open))
        using (GZipStream gzipStream = new GZipStream(compressedStream, CompressionMode.Decompress))
        using (FileStream decompressedStream = new FileStream(decompressedFile, FileMode.Create))
        {
            gzipStream.CopyTo(decompressedStream);
        }

        // –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è —Ä–æ–∑–º—ñ—Ä—ñ–≤
        long originalSize = new FileInfo(sourceFile).Length;
        long compressedSize = new FileInfo(compressedFile).Length;
        long restoredSize = new FileInfo(decompressedFile).Length;

        Console.WriteLine($"\n–†–æ–∑–º—ñ—Ä–∏:");
        Console.WriteLine($"  –û—Ä–∏–≥—ñ–Ω–∞–ª:      {originalSize:N0} –±–∞–π—Ç");
        Console.WriteLine($"  –°—Ç–∏—Å–Ω—É—Ç–∏–π:     {compressedSize:N0} –±–∞–π—Ç");
        Console.WriteLine($"  –í—ñ–¥–Ω–æ–≤–ª–µ–Ω–∏–π:   {restoredSize:N0} –±–∞–π—Ç");
        Console.WriteLine($"  –ö–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç:    {(double)compressedSize / originalSize:P2}");

        // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–æ—Ä–µ–∫—Ç–Ω–æ—Å—Ç—ñ
        string originalContent = File.ReadAllText(sourceFile);
        string restoredContent = File.ReadAllText(decompressedFile);
        Console.WriteLine($"\n–î–∞–Ω—ñ —ñ–¥–µ–Ω—Ç–∏—á–Ω—ñ: {originalContent == restoredContent}");
    }
}
```

**–†–æ–∑–±—ñ—Ä –∫–æ–¥—É:**

- **–†—è–¥–æ–∫ 14**: –°—Ç–≤–æ—Ä—é—î–º–æ —Ñ–∞–π–ª –∑ –ø–æ–≤—Ç–æ—Ä—é–≤–∞–Ω–∏–º–∏ –¥–∞–Ω–∏–º–∏ ‚Äî —Ç–∞–∫—ñ —Ñ–∞–π–ª–∏ —Å—Ç–∏—Å–∫–∞—é—Ç—å—Å—è –¥—É–∂–µ –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ.
- **–†—è–¥–æ–∫ 20**: **–ö–ª—é—á–æ–≤–∏–π –º–æ–º–µ–Ω—Ç**: `GZipStream` –æ–±–≥–æ—Ä—Ç–∞—î `FileStream`. –î–∞–Ω—ñ, –∑–∞–ø–∏—Å–∞–Ω—ñ —É `gzipStream`, –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å—Ç–∏—Å–∫–∞—é—Ç—å—Å—è —Ç–∞ –∑–∞–ø–∏—Å—É—é—Ç—å—Å—è —É `compressedStream`.
- **–†—è–¥–æ–∫ 22**: `CopyTo()` –∫–æ–ø—ñ—é—î –≤—Å—ñ –¥–∞–Ω—ñ –∑ –æ–¥–Ω–æ–≥–æ –ø–æ—Ç–æ–∫—É –≤ —ñ–Ω—à–∏–π.
- **–†—è–¥–æ–∫ 28**: –î–ª—è —Ä–æ–∑–ø–∞–∫—É–≤–∞–Ω–Ω—è –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ `CompressionMode.Decompress`.
- **–†—è–¥–æ–∫ 43**: –†–æ–∑—Ä–∞—Ö–æ–≤—É—î–º–æ –∫–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç —Å—Ç–∏—Å–Ω–µ–Ω–Ω—è.

::tip
**–ö–æ–ª–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ GZIP?** –î–ª—è —Ç–µ–∫—Å—Ç–æ–≤–∏—Ö —Ñ–∞–π–ª—ñ–≤, –ª–æ–≥—ñ–≤, JSON, XML ‚Äî —Å—Ç–∏—Å–Ω–µ–Ω–Ω—è –º–æ–∂–µ –¥–æ—Å—è–≥–∞—Ç–∏ 80-90%. –î–ª—è –≤–∂–µ —Å—Ç–∏—Å–Ω—É—Ç–∏—Ö —Ñ–æ—Ä–º–∞—Ç—ñ–≤ (JPEG, PNG, MP4, ZIP) GZIP –º–∞–ª–æ–µ—Ñ–µ–∫—Ç–∏–≤–Ω–∏–π.
::

### ZipArchive: –†–æ–±–æ—Ç–∞ –∑ ZIP-–∞—Ä—Ö—ñ–≤–∞–º–∏

`ZipArchive` –¥–æ–∑–≤–æ–ª—è—î —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ —Ç–∞ —á–∏—Ç–∞—Ç–∏ ZIP-–∞—Ä—Ö—ñ–≤–∏ –∑ –∫—ñ–ª—å–∫–æ–º–∞ —Ñ–∞–π–ª–∞–º–∏.

```csharp showLineNumbers
using System;
using System.IO;
using System.IO.Compression;

class ZipArchiveDemo
{
    static void Main()
    {
        string archivePath = "backup.zip";

        // –°—Ç–≤–æ—Ä—é—î–º–æ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ–π–Ω—ñ —Ñ–∞–π–ª–∏
        Directory.CreateDirectory("TempData");
        File.WriteAllText("TempData/file1.txt", "–í–º—ñ—Å—Ç —Ñ–∞–π–ª—É 1");
        File.WriteAllText("TempData/file2.txt", "–í–º—ñ—Å—Ç —Ñ–∞–π–ª—É 2");
        File.WriteAllText("TempData/file3.txt", "–í–º—ñ—Å—Ç —Ñ–∞–π–ª—É 3");

        // –°–¢–í–û–†–ï–ù–ù–Ø ZIP-–ê–†–•–Ü–í–£
        Console.WriteLine("–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∞—Ä—Ö—ñ–≤—É...");
        using (FileStream zipToOpen = new FileStream(archivePath, FileMode.Create))
        using (ZipArchive archive = new ZipArchive(zipToOpen, ZipArchiveMode.Create))
        {
            // –î–æ–¥–∞—î–º–æ —Ñ–∞–π–ª–∏
            foreach (string filePath in Directory.GetFiles("TempData"))
            {
                string entryName = Path.GetFileName(filePath);
                ZipArchiveEntry entry = archive.CreateEntry(entryName, CompressionLevel.Optimal);

                using (Stream entryStream = entry.Open())
                using (FileStream fileStream = new FileStream(filePath, FileMode.Open))
                {
                    fileStream.CopyTo(entryStream);
                }

                Console.WriteLine($"  –î–æ–¥–∞–Ω–æ: {entryName}");
            }
        }

        // –ß–ò–¢–ê–ù–ù–Ø ZIP-–ê–†–•–Ü–í–£
        Console.WriteLine("\n=== –í–ú–Ü–°–¢ –ê–†–•–Ü–í–£ ===");
        using (FileStream zipToOpen = new FileStream(archivePath, FileMode.Open))
        using (ZipArchive archive = new ZipArchive(zipToOpen, ZipArchiveMode.Read))
        {
            foreach (ZipArchiveEntry entry in archive.Entries)
            {
                Console.WriteLine($"üìÑ {entry.Name} ({entry.CompressedLength} / {entry.Length} –±–∞–π—Ç)");
            }
        }

        // –†–û–ó–ü–ê–ö–£–í–ê–ù–ù–Ø
        Console.WriteLine("\n–†–æ–∑–ø–∞–∫—É–≤–∞–Ω–Ω—è...");
        ZipFile.ExtractToDirectory(archivePath, "ExtractedData", overwriteFiles: true);

        Console.WriteLine("‚úÖ –ê—Ä—Ö—ñ–≤ —Å—Ç–≤–æ—Ä–µ–Ω–æ —Ç–∞ —Ä–æ–∑–ø–∞–∫–æ–≤–∞–Ω–æ!");
    }
}
```

**–†–æ–∑–±—ñ—Ä –∫–æ–¥—É:**

- **–†—è–¥–æ–∫ 20**: `ZipArchiveMode.Create` ‚Äî —Ä–µ–∂–∏–º —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –∞—Ä—Ö—ñ–≤—É.
- **–†—è–¥–æ–∫ 26**: `CreateEntry()` –¥–æ–¥–∞—î –µ–ª–µ–º–µ–Ω—Ç —É –∞—Ä—Ö—ñ–≤. `CompressionLevel.Optimal` ‚Äî –±–∞–ª–∞–Ω—Å –º—ñ–∂ —à–≤–∏–¥–∫—ñ—Å—Ç—é —Ç–∞ —Å—Ç—É–ø–µ–Ω–µ–º —Å—Ç–∏—Å–Ω–µ–Ω–Ω—è.
- **–†—è–¥–∫–∏ 28-32**: –í—ñ–¥–∫—Ä–∏–≤–∞—î–º–æ –ø–æ—Ç—ñ–∫ –∑–∞–ø–∏—Å—É –¥–ª—è entry —Ç–∞ –∫–æ–ø—ñ—é—î–º–æ —Ç—É–¥–∏ –¥–∞–Ω—ñ –∑ —Ñ–∞–π–ª—É.
- **–†—è–¥–æ–∫ 41**: `ZipArchiveMode.Read` ‚Äî —Ä–µ–∂–∏–º —á–∏—Ç–∞–Ω–Ω—è.
- **–†—è–¥–æ–∫ 45**: `CompressedLength` ‚Äî —Ä–æ–∑–º—ñ—Ä —É –∞—Ä—Ö—ñ–≤—ñ, `Length` ‚Äî –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∏–π —Ä–æ–∑–º—ñ—Ä.
- **–†—è–¥–æ–∫ 51**: `ZipFile.ExtractToDirectory()` ‚Äî helper-–º–µ—Ç–æ–¥ –¥–ª—è —à–≤–∏–¥–∫–æ–≥–æ —Ä–æ–∑–ø–∞–∫—É–≤–∞–Ω–Ω—è –≤—Å—å–æ–≥–æ –∞—Ä—Ö—ñ–≤—É.

::note
**ZipFile vs ZipArchive**: `ZipFile` ‚Äî —Å—Ç–∞—Ç–∏—á–Ω–∏–π –∫–ª–∞—Å –∑ —É—Ç–∏–ª—ñ—Ç–∞—Ä–Ω–∏–º–∏ –º–µ—Ç–æ–¥–∞–º–∏ (`CreateFromDirectory`, `ExtractToDirectory`). `ZipArchive` ‚Äî –¥–ª—è —Ç–æ–Ω–∫–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—é (–≤–∏–±—ñ—Ä–∫–æ–≤–µ —á–∏—Ç–∞–Ω–Ω—è, –º–æ–¥–∏—Ñ—ñ–∫–∞—Ü—ñ—è —ñ—Å–Ω—É—é—á–∏—Ö –∞—Ä—Ö—ñ–≤—ñ–≤).
::

---

## Async I/O: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞ —Ä–æ–±–æ—Ç–∞ –∑ —Ñ–∞–π–ª–∞–º–∏

–£ —Å—É—á–∞—Å–Ω–∏—Ö –¥–æ–¥–∞—Ç–∫–∞—Ö –∫—Ä–∏—Ç–∏—á–Ω–æ –≤–∞–∂–ª–∏–≤–æ –Ω–µ –±–ª–æ–∫—É–≤–∞—Ç–∏ –ø–æ—Ç–æ–∫–∏ –ø—ñ–¥ —á–∞—Å I/O –æ–ø–µ—Ä–∞—Ü—ñ–π. .NET –ø—ñ–¥—Ç—Ä–∏–º—É—î async/await –¥–ª—è –≤—Å—ñ—Ö –ø–æ—Ç–æ–∫–æ–≤–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π.

### –ü—Ä–∏–∫–ª–∞–¥ 5: –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è —Ñ–∞–π–ª—É

```csharp showLineNumbers
using System;
using System.IO;
using System.Threading.Tasks;
using System.Diagnostics;

class AsyncIODemo
{
    static async Task Main()
    {
        string sourceFile = "large_video.mp4";
        string destFile = "large_video_copy.mp4";

        // –°—Ç–≤–æ—Ä—é—î–º–æ –≤–µ–ª–∏–∫–∏–π —Ñ–∞–π–ª (100 MB) –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—ó
        Console.WriteLine("–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ–π–Ω–æ–≥–æ —Ñ–∞–π–ª—É...");
        await CreateLargeFileAsync(sourceFile, sizeInMB: 100);

        // –°–∏–Ω—Ö—Ä–æ–Ω–Ω–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è
        Console.WriteLine("\n[SYNC] –ö–æ–ø—ñ—é–≤–∞–Ω–Ω—è...");
        Stopwatch sw = Stopwatch.StartNew();
        File.Copy(sourceFile, destFile, overwrite: true);
        sw.Stop();
        Console.WriteLine($"–ß–∞—Å: {sw.ElapsedMilliseconds} –º—Å");
        File.Delete(destFile);

        // –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–µ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è
        Console.WriteLine("\n[ASYNC] –ö–æ–ø—ñ—é–≤–∞–Ω–Ω—è...");
        sw.Restart();
        await CopyFileAsync(sourceFile, destFile);
        sw.Stop();
        Console.WriteLine($"–ß–∞—Å: {sw.ElapsedMilliseconds} –º—Å");

        Console.WriteLine("\n‚úÖ –ó–∞–≤–µ—Ä—à–µ–Ω–æ!");
    }

    static async Task CopyFileAsync(string sourcePath, string destPath)
    {
        const int bufferSize = 81920; // 80 KB

        using (FileStream sourceStream = new FileStream(
            sourcePath,
            FileMode.Open,
            FileAccess.Read,
            FileShare.Read,
            bufferSize,
            useAsync: true)) // –ö—Ä–∏—Ç–∏—á–Ω–æ –≤–∞–∂–ª–∏–≤–æ!
        using (FileStream destStream = new FileStream(
            destPath,
            FileMode.Create,
            FileAccess.Write,
            FileShare.None,
            bufferSize,
            useAsync: true))
        {
            await sourceStream.CopyToAsync(destStream);
        }
    }

    static async Task CreateLargeFileAsync(string path, int sizeInMB)
    {
        byte[] buffer = new byte[1024 * 1024]; // 1 MB buffer
        new Random().NextBytes(buffer); // –í–∏–ø–∞–¥–∫–æ–≤—ñ –¥–∞–Ω—ñ

        using (FileStream fs = new FileStream(path, FileMode.Create, FileAccess.Write, FileShare.None, buffer.Length, useAsync: true))
        {
            for (int i = 0; i < sizeInMB; i++)
            {
                await fs.WriteAsync(buffer, 0, buffer.Length);
            }
        }
    }
}
```

**–†–æ–∑–±—ñ—Ä –∫–æ–¥—É:**

- **–†—è–¥–æ–∫ 8**: `async Task Main()` ‚Äî –ø—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è –∑ C# 7.1+.
- **–†—è–¥–æ–∫ 45**: **useAsync: true** ‚Äî –∫—Ä–∏—Ç–∏—á–Ω–æ –≤–∞–∂–ª–∏–≤–∏–π –ø–∞—Ä–∞–º–µ—Ç—Ä! –í—ñ–Ω –≤–º–∏–∫–∞—î —Å–ø—Ä–∞–≤–∂–Ω—ñ–π –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏–π I/O –Ω–∞ —Ä—ñ–≤–Ω—ñ –û–°.
- **–†—è–¥–æ–∫ 54**: `CopyToAsync()` ‚Äî –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞ –≤–µ—Ä—Å—ñ—è `CopyTo()`.
- **–†—è–¥–æ–∫ 68**: `WriteAsync()` ‚Äî –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏–π –∑–∞–ø–∏—Å. –ù–µ –±–ª–æ–∫—É—î –ø–æ—Ç—ñ–∫ –ø—ñ–¥ —á–∞—Å –∑–∞–ø–∏—Å—É –Ω–∞ –¥–∏—Å–∫.

::warning
**–ü–æ–º–∏–ª–∫–∞ –Ω–æ–≤–∞—á–∫—ñ–≤**: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ async –º–µ—Ç–æ–¥–∏ **–±–µ–∑** `useAsync: true`. –£ —Ç–∞–∫–æ–º—É —Ä–∞–∑—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó –≤—Å–µ –æ–¥–Ω–æ –±–ª–æ–∫—É—é—Ç—å –ø–æ—Ç—ñ–∫! –ó–∞–≤–∂–¥–∏ –≤–∫–∞–∑—É–π—Ç–µ `useAsync: true` —É –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ñ `FileStream` –¥–ª—è —Å–ø—Ä–∞–≤–∂–Ω—å–æ—ó –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—ñ.
::

---

## Best Practices —Ç–∞ Performance

::card-group
::card{title="‚úÖ –ó–∞–≤–∂–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ using"}
–ù–µ–∑–∞–∫—Ä–∏—Ç—ñ –ø–æ—Ç–æ–∫–∏ –±–ª–æ–∫—É—é—Ç—å —Ñ–∞–π–ª–∏ —Ç–∞ –≤–∏—Ç—ñ–∫–∞—é—Ç—å —Ä–µ—Å—É—Ä—Å–∏. `using` statement –≥–∞—Ä–∞–Ω—Ç—É—î –≤–∏–∫–ª–∏–∫ `Dispose()`.
::

::card{title="üéØ –í–∏–±–∏—Ä–∞–π—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π —Ä–æ–∑–º—ñ—Ä –±—É—Ñ–µ—Ä–∞"}
–î–ª—è —Ñ–∞–π–ª—ñ–≤: 4-80 KB. –î–ª—è –º–µ—Ä–µ–∂—ñ: 8-16 KB. –ë—ñ–ª—å—à–∏–π –±—É—Ñ–µ—Ä != —à–≤–∏–¥—à–µ (context switching overhead).
::

::card{title="‚ö° Async –¥–ª—è I/O bound –æ–ø–µ—Ä–∞—Ü—ñ–π"}
–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ async/await –¥–ª—è —Ñ–∞–π–ª—ñ–≤ –ø–æ–Ω–∞–¥ 1 MB, –º–µ—Ä–µ–∂—ñ, –±–∞–∑–∏ –¥–∞–Ω–∏—Ö. –ù–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –¥–ª—è –æ–±—á–∏—Å–ª–µ–Ω—å —É –ø–∞–º'—è—Ç—ñ.
::

::card{title="üîí –ö–æ–Ω—Ç—Ä–æ–ª—é–π—Ç–µ FileShare"}
–ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º —Ñ–∞–π–ª –±–ª–æ–∫—É—î—Ç—å—Å—è –µ–∫—Å–∫–ª—é–∑–∏–≤–Ω–æ. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `FileShare.Read` –¥–ª—è –ª–æ–≥—ñ–≤, —è–∫—ñ —á–∏—Ç–∞—é—Ç—å —ñ–Ω—à—ñ –ø—Ä–æ—Ü–µ—Å–∏.
::

::card{title="üíæ –ë—É—Ñ–µ—Ä–∏–∑–∞—Ü—ñ—è StreamWriter"}
`AutoFlush = false` (default) –¥–ª—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ. `AutoFlush = true` —Ç—ñ–ª—å–∫–∏ –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω–∏—Ö –ª–æ–≥—ñ–≤.
::

::card{title="üóúÔ∏è –°—Ç–∏—Å–∫–∞–π—Ç–µ –≤–µ–ª–∏–∫—ñ —Ñ–∞–π–ª–∏"}
–î–ª—è —Ç–µ–∫—Å—Ç–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö GZIP –º–æ–∂–µ –∑–º–µ–Ω—à–∏—Ç–∏ —Ä–æ–∑–º—ñ—Ä –Ω–∞ 80-90%. –î–ª—è –±—ñ–Ω–∞—Ä–Ω–∏—Ö ‚Äî —Ç–µ—Å—Ç—É–π—Ç–µ.
::
::

---

## –ü—Ä–∞–∫—Ç–∏—á–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è

::steps

### –ó–∞–≤–¥–∞–Ω–Ω—è 1: –õ–æ–≥-–∞–Ω–∞–ª—ñ–∑–∞—Ç–æ—Ä

–°—Ç–≤–æ—Ä—ñ—Ç—å –ø—Ä–æ–≥—Ä–∞–º—É, —è–∫–∞:

1. –ß–∏—Ç–∞—î –≤–µ–ª–∏–∫–∏–π –ª–æ–≥-—Ñ–∞–π–ª (100+ MB) –ø–æ—Ä—è–¥–∫–æ–≤–æ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `StreamReader`.
2. –§—ñ–ª—å—Ç—Ä—É—î —Ä—è–¥–∫–∏ –∑ `[ERROR]` —Ç–∞ –∑–∞–ø–∏—Å—É—î —ó—Ö —É –æ–∫—Ä–µ–º–∏–π —Ñ–∞–π–ª `errors.log`.
3. –í–∏–≤–æ–¥–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É: –∫—ñ–ª—å–∫—ñ—Å—Ç—å ERROR, WARNING, INFO.
4. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î async/await –¥–ª—è –Ω–µ–±–ª–æ–∫—É—é—á–æ–≥–æ I/O.

### –ó–∞–≤–¥–∞–Ω–Ω—è 2: –°–∏—Å—Ç–µ–º–∞ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è

–ù–∞–ø–∏—à—ñ—Ç—å —É—Ç–∏–ª—ñ—Ç—É, —è–∫–∞:

1. –ü—Ä–∏–π–º–∞—î —à–ª—è—Ö –¥–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó –Ω–∞ –≤—Ö—ñ–¥.
2. –°—Ç–≤–æ—Ä—é—î ZIP-–∞—Ä—Ö—ñ–≤ –≤—Å—ñ—Ö —Ñ–∞–π–ª—ñ–≤ –∑ —Ü—ñ—î—ó –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó (—Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ).
3. –î–æ–¥–∞—î –¥–æ –Ω–∞–∑–≤–∏ –∞—Ä—Ö—ñ–≤—É –¥–∞—Ç—É: `backup_2026-01-10.zip`.
4. –í–∏–≤–æ–¥–∏—Ç—å –∫–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç —Å—Ç–∏—Å–Ω–µ–Ω–Ω—è –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —Ñ–∞–π–ª—É.

### –ó–∞–≤–¥–∞–Ω–Ω—è 3: –ë—ñ–Ω–∞—Ä–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó

–°—Ç–≤–æ—Ä—ñ—Ç—å –≤–ª–∞—Å–Ω–∏–π –±—ñ–Ω–∞—Ä–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å –¥–æ–¥–∞—Ç–∫—É:

1. –í–∏–∑–Ω–∞—á—Ç–µ –∫–ª–∞—Å `AppSettings` –∑ –ø–æ–ª—è–º–∏: `string Theme`, `int FontSize`, `bool Notifications`, `string[] RecentFiles`.
2. –†–µ–∞–ª—ñ–∑—É–π—Ç–µ `SaveSettings(AppSettings, string path)` –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `BinaryWriter`.
3. –†–µ–∞–ª—ñ–∑—É–π—Ç–µ `LoadSettings(string path)` –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `BinaryReader`.
4. –î–æ–¥–∞–π—Ç–µ –≤–µ—Ä—Å—ñ–π–Ω—ñ—Å—Ç—å: –ø–µ—Ä—à–∏–π –±–∞–π—Ç —Ñ–∞–π–ª—É ‚Äî –≤–µ—Ä—Å—ñ—è —Ñ–æ—Ä–º–∞—Ç—É (–ø–æ–∫–∏ —â–æ `1`).

::

---

## –†–µ–∑—é–º–µ: –ü–æ—Ç–æ–∫–∏ —Ç–∞ —Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è

–ú–∏ —Ä–æ–∑–≥–ª—è–Ω—É–ª–∏ –ø–æ—Ç—É–∂–Ω—É —Ç–∞ –≥–Ω—É—á–∫—É –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä—É –ø–æ—Ç–æ–∫—ñ–≤ —É .NET:

::mermaid

```mermaid
graph LR
    A[–ê–±—Å—Ç—Ä–∞–∫—Ç–Ω–∏–π Stream] --> B[FileStream]
    A --> C[MemoryStream]
    A --> D[NetworkStream]

    B --> E[StreamReader/Writer]
    B --> F[BinaryReader/Writer]
    B --> G[GZipStream]

    G --> H[ZipArchive]

    style A fill:#64748b,stroke:#334155,color:#ffffff
    style B fill:#3b82f6,stroke:#1d4ed8,color:#ffffff
    style C fill:#3b82f6,stroke:#1d4ed8,color:#ffffff
    style D fill:#3b82f6,stroke:#1d4ed8,color:#ffffff
    style E fill:#10b981,stroke:#047857,color:#ffffff
    style F fill:#10b981,stroke:#047857,color:#ffffff
    style G fill:#f59e0b,stroke:#b45309,color:#ffffff
    style H fill:#f59e0b,stroke:#b45309,color:#ffffff
```

::

### –ö–ª—é—á–æ–≤—ñ –ø–æ–Ω—è—Ç—Ç—è

- **Stream** ‚Äî —É–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∞ –∞–±—Å—Ç—Ä–∞–∫—Ü—ñ—è –¥–ª—è –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ—Å—Ç–µ–π –±–∞–π—Ç—ñ–≤
- **FileStream** ‚Äî –Ω–∏–∑—å–∫–æ—Ä—ñ–≤–Ω–µ–≤–∏–π –¥–æ—Å—Ç—É–ø –¥–æ —Ñ–∞–π–ª—ñ–≤ –∑ –∫–æ–Ω—Ç—Ä–æ–ª–µ–º –±—É—Ñ–µ—Ä–∏–∑–∞—Ü—ñ—ó
- **MemoryStream** ‚Äî –ø–æ—Ç—ñ–∫ —É –ø–∞–º'—è—Ç—ñ –¥–ª—è —Ç–∏–º—á–∞—Å–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö
- **StreamReader/Writer** ‚Äî –∑—Ä—É—á–Ω–∞ —Ä–æ–±–æ—Ç–∞ –∑ —Ç–µ–∫—Å—Ç–æ–º
- **BinaryReader/Writer** ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω—ñ –±—ñ–Ω–∞—Ä–Ω—ñ –¥–∞–Ω—ñ
- **GZipStream/ZipArchive** ‚Äî —Å—Ç–∏—Å–Ω–µ–Ω–Ω—è —Ç–∞ –∞—Ä—Ö—ñ–≤—É–≤–∞–Ω–Ω—è
- **Async I/O** ‚Äî –Ω–µ–±–ª–æ–∫—É—é—á–µ I/O –∑ `useAsync: true`

::tip
**–ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏**: –¢–µ–ø–µ—Ä –≤–∏ –≥–æ—Ç–æ–≤—ñ –¥–æ:

- **–°–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó –æ–±'—î–∫—Ç—ñ–≤** (JSON, XML, Protobuf)
- **–†–æ–±–æ—Ç–∏ –∑ –º–µ—Ä–µ–∂–µ–≤–∏–º–∏ –ø–æ—Ç–æ–∫–∞–º–∏** (NetworkStream, HttpClient)
- **–ö—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ—ñ—ó** (CryptoStream –¥–ª—è —à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤)
- **Pipeline pattern** –¥–ª—è –≤–∏—Å–æ–∫–æ–ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–∏—Ö —Å—Ü–µ–Ω–∞—Ä—ñ—ó–≤

::

---

## –ü–æ—Å–∏–ª–∞–Ω–Ω—è

- [–û—Ñ—ñ—Ü—ñ–π–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è System.IO.Stream](https://learn.microsoft.com/en-us/dotnet/api/system.io.stream)
- [–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞ —Ä–æ–±–æ—Ç–∞ –∑ —Ñ–∞–π–ª–∞–º–∏](https://learn.microsoft.com/en-us/dotnet/csharp/asynchronous-programming/using-async-for-file-access)
- [System.IO.Compression](https://learn.microsoft.com/en-us/dotnet/api/system.io.compression)
- [Best Practices –¥–ª—è –ø–æ—Ç–æ–∫—ñ–≤](https://learn.microsoft.com/en-us/dotnet/standard/io/best-practices)
- [Pipelines –¥–ª—è –≤–∏—Å–æ–∫–æ—ó –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ](https://learn.microsoft.com/en-us/dotnet/standard/io/pipelines)
