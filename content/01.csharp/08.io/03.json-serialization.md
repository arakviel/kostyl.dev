# 8.2.1. JSON Serialization –∑ System.Text.Json

## –í—Å—Ç—É–ø: –°–≤—ñ—Ç –æ–±–º—ñ–Ω—É –¥–∞–Ω–∏–º–∏

–£—è–≤—ñ—Ç—å, —â–æ –≤–∞—à –¥–æ–¥–∞—Ç–æ–∫ –ø–æ—Ç—Ä–µ–±—É—î –≤—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ –¥–∞–Ω—ñ –Ω–∞ —Å–µ—Ä–≤–µ—Ä, –∑–±–µ—Ä–µ–≥—Ç–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ —É —Ñ–∞–π–ª, –∞–±–æ –æ—Ç—Ä–∏–º–∞—Ç–∏ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –∑ REST API. –Ø–∫ –ø–µ—Ä–µ–¥–∞—Ç–∏ —Å–∫–ª–∞–¥–Ω–∏–π –æ–±'—î–∫—Ç C# —á–µ—Ä–µ–∑ –º–µ—Ä–µ–∂—É? –Ø–∫ –∑–±–µ—Ä–µ–≥—Ç–∏ –π–æ–≥–æ –Ω–∞ –¥–∏—Å–∫ —Ç–∞–∫, —â–æ–± —ñ–Ω—à—ñ —Å–∏—Å—Ç–µ–º–∏ (–º–æ–∂–ª–∏–≤–æ, –Ω–∞–ø–∏—Å–∞–Ω—ñ –Ω–∞ Python —á–∏ JavaScript) –º–æ–≥–ª–∏ –π–æ–≥–æ –ø—Ä–æ—á–∏—Ç–∞—Ç–∏? –í—ñ–¥–ø–æ–≤—ñ–¥—å ‚Äî **—Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è (Serialization)**.

**–°–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è** ‚Äî —Ü–µ –ø—Ä–æ—Ü–µ—Å –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è –æ–±'—î–∫—Ç–∞ –∑ –ø–∞–º'—è—Ç—ñ —É —Ñ–æ—Ä–º–∞—Ç, –ø—Ä–∏–¥–∞—Ç–Ω–∏–π –¥–ª—è –ø–µ—Ä–µ–¥–∞—á—ñ –∞–±–æ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —Ä—è–¥–æ–∫, –º–∞—Å–∏–≤ –±–∞–π—Ç—ñ–≤). **–î–µ—Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è** ‚Äî –∑–≤–æ—Ä–æ—Ç–Ω–∏–π –ø—Ä–æ—Ü–µ—Å: –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –æ–±'—î–∫—Ç–∞ –∑ —Å–µ—Ä—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–∏—Ö –¥–∞–Ω–∏—Ö.

### –ù–∞–≤—ñ—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–∞ —Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è?

::card-group
::card{title="üåê API —Ç–∞ –≤–µ–±-—Å–µ—Ä–≤—ñ—Å–∏"}
REST API –æ–±–º—ñ–Ω—é—é—Ç—å—Å—è –¥–∞–Ω–∏–º–∏ —É JSON —Ñ–æ—Ä–º–∞—Ç—ñ. –°–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –¥–æ–∑–≤–æ–ª—è—î –ø–µ—Ä–µ—Ç–≤–æ—Ä–∏—Ç–∏ C# –æ–±'—î–∫—Ç–∏ –Ω–∞ JSON —Ç–∞ –Ω–∞–∑–∞–¥.
::

::card{title="üíæ –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Å—Ç–∞–Ω—É"}
–ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó, –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è, –∫–µ—à, –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è —ñ–≥–æ—Ä ‚Äî –≤—Å–µ —Ü–µ –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è —á–µ—Ä–µ–∑ —Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—é.
::

::card{title="üì° –ú—ñ–∂–ø—Ä–æ—Ü–µ—Å–Ω–∞ –∫–æ–º—É–Ω—ñ–∫–∞—Ü—ñ—è"}
–û–±–º—ñ–Ω –¥–∞–Ω–∏–º–∏ –º—ñ–∂ –¥–æ–¥–∞—Ç–∫–∞–º–∏, –º—ñ–∫—Ä–æ—Å–µ—Ä–≤—ñ—Å–∞–º–∏, –∞–±–æ –º—ñ–∂ –∫–ª—ñ—î–Ω—Ç–æ–º —ñ —Å–µ—Ä–≤–µ—Ä–æ–º.
::

::card{title="üìù –õ–æ–≥—É–≤–∞–Ω–Ω—è"}
Structured logging (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —É Elasticsearch) –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î JSON –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –ª–æ–≥—ñ–≤ –∑ –º–µ—Ç–∞–¥–∞–Ω–∏–º–∏.
::
::

### JSON: –£–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–∏—Ö

**JSON (JavaScript Object Notation)** ‚Äî —Ü–µ —Ç–µ–∫—Å—Ç–æ–≤–∏–π —Ñ–æ—Ä–º–∞—Ç –¥–ª—è –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—è —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω–∏—Ö –¥–∞–Ω–∏—Ö. –í—ñ–Ω:

- **–ß–∏—Ç–∞–±–µ–ª—å–Ω–∏–π –ª—é–¥–∏–Ω–æ—é** (–Ω–∞ –≤—ñ–¥–º—ñ–Ω—É –≤—ñ–¥ –±—ñ–Ω–∞—Ä–Ω–∏—Ö —Ñ–æ—Ä–º–∞—Ç—ñ–≤)
- **–ù–µ–∑–∞–ª–µ–∂–Ω–∏–π –≤—ñ–¥ –º–æ–≤–∏** (–ø—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è –≤—Å—ñ–º–∞ —Å—É—á–∞—Å–Ω–∏–º–∏ –º–æ–≤–∞–º–∏ –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è)
- **–ö–æ–º–ø–∞–∫—Ç–Ω–∏–π** (–ø–æ—Ä—ñ–≤–Ω—è–Ω–æ –∑ XML)
- **–°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–æ–≤–∞–Ω–∏–π** (RFC 8259)

**–ü—Ä–∏–∫–ª–∞–¥ JSON:**

```json
{
    "name": "–ê—Ä—Ç–µ–º",
    "age": 25,
    "isStudent": true,
    "skills": ["C#", "JavaScript", "SQL"],
    "address": {
        "city": "–ö–∏—ó–≤",
        "zipCode": "01001"
    }
}
```

::note
**–ü–µ—Ä–µ–¥—É–º–æ–≤–∏**: –î–ª—è –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ–≥–æ –∑–∞—Å–≤–æ—î–Ω–Ω—è –º–∞—Ç–µ—Ä—ñ–∞–ª—É –ø–æ—Ç—Ä—ñ–±–Ω–µ –∑–Ω–∞–Ω–Ω—è –æ—Å–Ω–æ–≤ C# (–∫–ª–∞—Å–∏, –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ, –∫–æ–ª–µ–∫—Ü—ñ—ó), generics, async/await, —Ç–∞ –±–∞–∑–æ–≤–∏–π –¥–æ—Å–≤—ñ–¥ —Ä–æ–±–æ—Ç–∏ –∑ JSON.
::

---

## –ï–≤–æ–ª—é—Ü—ñ—è JSON —Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó –≤ .NET

::mermaid

```mermaid
timeline
    title –Ü—Å—Ç–æ—Ä—ñ—è JSON –≤ .NET
    section .NET Framework (2006-2015)
        JavaScriptSerializer : –°—Ç–∞—Ä–∏–π API –∑ System.Web.Extensions
        DataContractJsonSerializer : –ë—ñ–ª—å—à –ø–æ—Ç—É–∂–Ω–∏–π, –∞–ª–µ —Å–∫–ª–∞–¥–Ω–∏–π
    section Newtonsoft.Json era (2009-2019)
        Json.NET : –î–µ-—Ñ–∞–∫—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç
        –ë–∞–≥–∞—Ç–∏–π API : FlexibleSettings, –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä–∏
        –í–∏—Å–æ–∫–∞ –ø–æ–ø—É–ª—è—Ä–Ω—ñ—Å—Ç—å : 1+ –º—ñ–ª—å—è—Ä–¥ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—å NuGet
    section .NET Core 3.0+ (2019-—Å—å–æ–≥–æ–¥–Ω—ñ)
        System.Text.Json : –í–±—É–¥–æ–≤–∞–Ω–∏–π, —à–≤–∏–¥–∫–∏–π
        Performance-first : 2-3x —à–≤–∏–¥—à–µ Newtonsoft
        Source Generators : Compile-time –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó
        Native AOT : –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –¥–ª—è –º–æ–±—ñ–ª—å–Ω–∏—Ö —Ç–∞ embedded
```

::

### System.Text.Json vs Newtonsoft.Json

| –ö—Ä–∏—Ç–µ—Ä—ñ–π              | System.Text.Json        | Newtonsoft.Json (Json.NET) |
| :-------------------- | :---------------------- | :------------------------- |
| **–®–≤–∏–¥–∫—ñ—Å—Ç—å**         | ‚ö° –®–≤–∏–¥—à–µ (2-3x)        | –ü–æ–≤—ñ–ª—å–Ω—ñ—à–µ                 |
| **–ü–∞–º'—è—Ç—å**           | –ú–µ–Ω—à–µ –∞–ª–æ–∫–∞—Ü—ñ–π          | –ë—ñ–ª—å—à–µ –∞–ª–æ–∫–∞—Ü—ñ–π            |
| **–§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å**  | –ë–∞–∑–æ–≤–∞ (–∑—Ä–æ—Å—Ç–∞—î)        | –î—É–∂–µ –±–∞–≥–∞—Ç–∞                |
| **–í–±—É–¥–æ–≤–∞–Ω–∏–π**        | ‚úÖ –¢–∞–∫ (.NET Core 3.0+) | ‚ùå –ù—ñ (NuGet)              |
| **Source Generators** | ‚úÖ –¢–∞–∫                  | ‚ùå –ù—ñ                      |
| **AOT Compilation**   | ‚úÖ –ü—ñ–¥—Ç—Ä–∏–º–∫–∞            | ‚ö†Ô∏è –û–±–º–µ–∂–µ–Ω–∞                |
| **–ü—ñ–¥—Ç—Ä–∏–º–∫–∞ legacy**  | –¢—ñ–ª—å–∫–∏ .NET Core 3.0+   | –í—Å—ñ –≤–µ—Ä—Å—ñ—ó .NET            |

::tip
**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è**: –î–ª—è –Ω–æ–≤–∏—Ö –ø—Ä–æ—î–∫—Ç—ñ–≤ –Ω–∞ .NET 5+ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `System.Text.Json`. –î–ª—è legacy –ø—Ä–æ—î–∫—Ç—ñ–≤ –∞–±–æ —è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω—ñ —Å–ø–µ—Ü–∏—Ñ—ñ—á–Ω—ñ —Ñ—ñ—á—ñ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, LINQ to JSON) ‚Äî `Newtonsoft.Json`.
::

---

## –û—Å–Ω–æ–≤–∏ JsonSerializer

`JsonSerializer` ‚Äî —Ü–µ –≥–æ–ª–æ–≤–Ω–∏–π –∫–ª–∞—Å –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ JSON —É .NET. –í—ñ–Ω –Ω–∞–¥–∞—î —Å—Ç–∞—Ç–∏—á–Ω—ñ –º–µ—Ç–æ–¥–∏ –¥–ª—è —Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó —Ç–∞ –¥–µ—Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó.

### –ë–∞–∑–æ–≤–∞ —Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è —Ç–∞ –¥–µ—Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è

```csharp showLineNumbers
using System;
using System.Text.Json;

class Person
{
    public string Name { get; set; }
    public int Age { get; set; }
    public bool IsStudent { get; set; }
}

class JsonBasics
{
    static void Main()
    {
        // –°—Ç–≤–æ—Ä—é—î–º–æ –æ–±'—î–∫—Ç
        var person = new Person
        {
            Name = "–û–ª–µ–Ω–∞",
            Age = 28,
            IsStudent = false
        };

        // –°–ï–†–Ü–ê–õ–Ü–ó–ê–¶–Ü–Ø: –û–±'—î–∫—Ç ‚Üí JSON —Ä—è–¥–æ–∫
        string jsonString = JsonSerializer.Serialize(person);
        Console.WriteLine("=== –°–ï–†–Ü–ê–õ–Ü–ó–ê–¶–Ü–Ø ===");
        Console.WriteLine(jsonString);
        // –í–∏–≤—ñ–¥: {"Name":"–û–ª–µ–Ω–∞","Age":28,"IsStudent":false}

        // –î–ï–°–ï–†–Ü–ê–õ–Ü–ó–ê–¶–Ü–Ø: JSON —Ä—è–¥–æ–∫ ‚Üí –û–±'—î–∫—Ç
        string jsonInput = "{\"Name\":\"–Ü–≥–æ—Ä\",\"Age\":35,\"IsStudent\":true}";
        Person deserializedPerson = JsonSerializer.Deserialize<Person>(jsonInput);

        Console.WriteLine("\n=== –î–ï–°–ï–†–Ü–ê–õ–Ü–ó–ê–¶–Ü–Ø ===");
        Console.WriteLine($"–Ü–º'—è: {deserializedPerson.Name}");
        Console.WriteLine($"–í—ñ–∫: {deserializedPerson.Age}");
        Console.WriteLine($"–°—Ç—É–¥–µ–Ω—Ç: {deserializedPerson.IsStudent}");
    }
}
```

**–†–æ–∑–±—ñ—Ä –∫–æ–¥—É:**

- **–†—è–¥–æ–∫ 24**: `JsonSerializer.Serialize(object)` –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î –æ–±'—î–∫—Ç —É JSON —Ä—è–¥–æ–∫.
- **–†—è–¥–æ–∫ 31**: `JsonSerializer.Deserialize<T>(string)` —Å—Ç–≤–æ—Ä—é—î –æ–±'—î–∫—Ç —Ç–∏–ø—É `T` –∑ JSON —Ä—è–¥–∫–∞.
- **–í–∞–∂–ª–∏–≤–æ**: –ù–∞–∑–≤–∏ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç–µ–π –≤ JSON –º–∞—é—Ç—å –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—Ç–∏ –Ω–∞–∑–≤–∞–º –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç–µ–π —É –∫–ª–∞—Å—ñ (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º case-sensitive!).

### –§–æ—Ä–º–∞—Ç–æ–≤–∞–Ω–∏–π –≤–∏–≤—ñ–¥ (Pretty Print)

–ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º JSON –≥–µ–Ω–µ—Ä—É—î—Ç—å—Å—è —É –∫–æ–º–ø–∞–∫—Ç–Ω–æ–º—É —Ñ–æ—Ä–º–∞—Ç—ñ. –î–ª—è —á–∏—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—ñ –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ `JsonSerializerOptions`:

```csharp showLineNumbers
using System;
using System.Text.Json;

class PrettyPrintDemo
{
    static void Main()
    {
        var person = new Person { Name = "–ú–∞—Ä—ñ—è", Age = 22, IsStudent = true };

        var options = new JsonSerializerOptions
        {
            WriteIndented = true  // –£–≤—ñ–º–∫–Ω—É—Ç–∏ —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è
        };

        string json = JsonSerializer.Serialize(person, options);
        Console.WriteLine(json);

        /* –í–∏–≤—ñ–¥:
        {
          "Name": "–ú–∞—Ä—ñ—è",
          "Age": 22,
          "IsStudent": true
        }
        */
    }
}
```

**–†–æ–∑–±—ñ—Ä –∫–æ–¥—É:**

- **–†—è–¥–æ–∫ 12**: `WriteIndented = true` –¥–æ–¥–∞—î –≤—ñ–¥—Å—Ç—É–ø–∏ —Ç–∞ –Ω–æ–≤—ñ —Ä—è–¥–∫–∏ –¥–ª—è —á–∏—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—ñ.
- **–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è**: –ö–æ—Ä–∏—Å–Ω–æ –¥–ª—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤, debugging, API responses –¥–ª—è —Ä–æ–∑—Ä–æ–±–Ω–∏–∫—ñ–≤.

::warning
**–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å**: `WriteIndented = true` –∑–±—ñ–ª—å—à—É—î —Ä–æ–∑–º—ñ—Ä JSON –Ω–∞ 20-30% —Ç–∞ —Ç—Ä–æ—Ö–∏ –ø–æ–≤—ñ–ª—å–Ω—ñ—à–µ. –ù–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –¥–ª—è production API responses, –¥–µ –∫–æ–∂–µ–Ω –±–∞–π—Ç –≤–∞–∂–ª–∏–≤–∏–π.
::

---

## JsonSerializerOptions: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó

`JsonSerializerOptions` –¥–æ–∑–≤–æ–ª—è—î —Ç–æ–Ω–∫–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –ø–æ–≤–µ–¥—ñ–Ω–∫—É —Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó.

### –û—Å–Ω–æ–≤–Ω—ñ –æ–ø—Ü—ñ—ó

::field-group
::field{name="PropertyNamingPolicy" type="JsonNamingPolicy"}
–ü–æ–ª—ñ—Ç–∏–∫–∞ –Ω–∞–π–º–µ–Ω—É–≤–∞–Ω–Ω—è –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç–µ–π. –ó–Ω–∞—á–µ–Ω–Ω—è: `null` (—è–∫ —î), `JsonNamingPolicy.CamelCase`, `JsonNamingPolicy.SnakeCaseLower` (.NET 8+).
::

::field{name="PropertyNameCaseInsensitive" type="bool"}
–Ü–≥–Ω–æ—Ä—É–≤–∞—Ç–∏ —Ä–µ–≥—ñ—Å—Ç—Ä –ø—Ä–∏ –¥–µ—Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó. –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º `false`.
::

::field{name="DefaultIgnoreCondition" type="JsonIgnoreCondition"}
–ö–æ–ª–∏ —ñ–≥–Ω–æ—Ä—É–≤–∞—Ç–∏ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ: `Never`, `WhenWritingNull`, `WhenWritingDefault`, `Always`.
::

::field{name="WriteIndented" type="bool"}
–§–æ—Ä–º–∞—Ç–æ–≤–∞–Ω–∏–π –≤–∏–≤—ñ–¥ (pretty print). –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º `false`.
::

::field{name="NumberHandling" type="JsonNumberHandling"}
–û–±—Ä–æ–±–∫–∞ —á–∏—Å–µ–ª: –¥–æ–∑–≤–æ–ª–∏—Ç–∏ —á–∏—Ç–∞–Ω–Ω—è –∑ —Ä—è–¥–∫—ñ–≤, –ø–∏—Å–∞—Ç–∏ —è–∫ —Ä—è–¥–∫–∏ —Ç–æ—â–æ.
::

::field{name="ReferenceHandler" type="ReferenceHandler"}
–û–±—Ä–æ–±–∫–∞ —Ü–∏–∫–ª—ñ—á–Ω–∏—Ö –ø–æ—Å–∏–ª–∞–Ω—å: `null`, `Preserve`, `IgnoreCycles`.
::

::field{name="Encoder" type="JavaScriptEncoder"}
–ö–æ–¥—É–≤–∞–Ω–Ω—è —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–∏—Ö —Å–∏–º–≤–æ–ª—ñ–≤. –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º `JavaScriptEncoder.UnsafeRelaxedJsonEscaping`.
::

::field{name="Converters" type="IList<JsonConverter>"}
–°–ø–∏—Å–æ–∫ custom –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä—ñ–≤ –¥–ª—è —Å–ø–µ—Ü–∏—Ñ—ñ—á–Ω–∏—Ö —Ç–∏–ø—ñ–≤.
::
::

### –ü—Ä–∏–∫–ª–∞–¥: camelCase naming policy

–£ JavaScript –ø—Ä–∏–π–Ω—è—Ç–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `camelCase` –¥–ª—è –Ω–∞–∑–≤ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç–µ–π, –∞ –≤ C# ‚Äî `PascalCase`. `JsonNamingPolicy.CamelCase` –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∫–æ–Ω–≤–µ—Ä—Ç—É—î:

```csharp showLineNumbers
using System;
using System.Text.Json;

class Employee
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public int EmployeeId { get; set; }
}

class NamingPolicyDemo
{
    static void Main()
    {
        var employee = new Employee
        {
            FirstName = "–ê–Ω–¥—Ä—ñ–π",
            LastName = "–ö–æ–≤–∞–ª–µ–Ω–∫–æ",
            EmployeeId = 12345
        };

        var options = new JsonSerializerOptions
        {
            PropertyNamingPolicy = JsonNamingPolicy.CamelCase,
            WriteIndented = true
        };

        string json = JsonSerializer.Serialize(employee, options);
        Console.WriteLine(json);

        /* –í–∏–≤—ñ–¥:
        {
          "firstName": "–ê–Ω–¥—Ä—ñ–π",
          "lastName": "–ö–æ–≤–∞–ª–µ–Ω–∫–æ",
          "employeeId": 12345
        }
        */

        // –î–µ—Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è —Ç–∞–∫–æ–∂ –ø—Ä–∞—Ü—é—î –∑ camelCase
        string jsonInput = "{\"firstName\":\"–û–ª–µ–≥\",\"lastName\":\"–®–µ–≤—á–µ–Ω–∫–æ\",\"employeeId\":54321}";
        var deserialized = JsonSerializer.Deserialize<Employee>(jsonInput, options);
        Console.WriteLine($"\n–Ü–º'—è: {deserialized.FirstName} {deserialized.LastName}");
    }
}
```

**–†–æ–∑–±—ñ—Ä –∫–æ–¥—É:**

- **–†—è–¥–æ–∫ 24**: `JsonNamingPolicy.CamelCase` –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î `FirstName` ‚Üí `firstName`.
- **–†—è–¥–æ–∫ 41**: –ü—Ä–∏ –¥–µ—Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó —Ç–∞–∫–æ–∂ –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç–∏ `options`, —â–æ–± –ø—Ä–∞–≤–∏–ª—å–Ω–æ mapped camelCase –Ω–∞–∑–≤–∏.

::tip
**.NET 8+ Snake Case**: –£ .NET 8 –¥–æ–¥–∞–ª–∏ `JsonNamingPolicy.SnakeCaseLower` —Ç–∞ `SnakeCaseUpper` –¥–ª—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü—ñ—ó —É `snake_case` (–ø–æ–ø—É–ª—è—Ä–Ω–æ —É Python —Ç–∞ –±–∞–∑–∞—Ö –¥–∞–Ω–∏—Ö).
::

### –ü—Ä–∏–∫–ª–∞–¥: –Ü–≥–Ω–æ—Ä—É–≤–∞–Ω–Ω—è null –∑–Ω–∞—á–µ–Ω—å

```csharp showLineNumbers
using System;
using System.Text.Json;
using System.Text.Json.Serialization;

class Product
{
    public string Name { get; set; }
    public decimal Price { get; set; }
    public string Description { get; set; }  // –ú–æ–∂–µ –±—É—Ç–∏ null
    public string Category { get; set; }      // –ú–æ–∂–µ –±—É—Ç–∏ null
}

class IgnoreNullDemo
{
    static void Main()
    {
        var product = new Product
        {
            Name = "–ù–æ—É—Ç–±—É–∫",
            Price = 25000,
            Description = null,  // null
            Category = null      // null
        };

        // –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º null —Å–µ—Ä—ñ–∞–ª—ñ–∑—É—î—Ç—å—Å—è
        var defaultJson = JsonSerializer.Serialize(product, new JsonSerializerOptions { WriteIndented = true });
        Console.WriteLine("=== –ó–ê –ó–ê–ú–û–í–ß–£–í–ê–ù–ù–Ø–ú ===");
        Console.WriteLine(defaultJson);
        // –í–∏–≤—ñ–¥ –º—ñ—Å—Ç–∏—Ç—å: "Description": null, "Category": null

        // –Ü–≥–Ω–æ—Ä—É—î–º–æ null –∑–Ω–∞—á–µ–Ω–Ω—è
        var options = new JsonSerializerOptions
        {
            DefaultIgnoreCondition = JsonIgnoreCondition.WhenWritingNull,
            WriteIndented = true
        };

        var optimizedJson = JsonSerializer.Serialize(product, options);
        Console.WriteLine("\n=== –ë–ï–ó NULL ===");
        Console.WriteLine(optimizedJson);
        // –í–∏–≤—ñ–¥ –ù–ï –º—ñ—Å—Ç–∏—Ç—å –ø–æ–ª—ñ–≤ –∑ null
    }
}
```

**–†–æ–∑–±—ñ—Ä –∫–æ–¥—É:**

- **–†—è–¥–æ–∫ 34**: `JsonIgnoreCondition.WhenWritingNull` –ø—Ä–æ–ø—É—Å–∫–∞—î –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ –∑ –∑–Ω–∞—á–µ–Ω–Ω—è–º `null`.
- **–ü–µ—Ä–µ–≤–∞–≥–∏**: –ú–µ–Ω—à–∏–π —Ä–æ–∑–º—ñ—Ä JSON (–∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –º–æ–±—ñ–ª—å–Ω–∏—Ö –¥–æ–¥–∞—Ç–∫—ñ–≤ —Ç–∞ API), —á–∏—Å—Ç—ñ—à–∏–π –≤–∏–≤—ñ–¥.
- **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞**: `WhenWritingDefault` —ñ–≥–Ω–æ—Ä—É—î —Ç–∞–∫–æ–∂ –¥–µ—Ñ–æ–ª—Ç–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è (`0`, `false`, –ø–æ—Ä–æ–∂–Ω—é –∫–æ–ª–µ–∫—Ü—ñ—é).

---

## –ê—Ç—Ä–∏–±—É—Ç–∏ —Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó

–ê—Ç—Ä–∏–±—É—Ç–∏ –¥–æ–∑–≤–æ–ª—è—é—Ç—å —Ç–æ—á–Ω–æ –∫–æ–Ω—Ç—Ä–æ–ª—é–≤–∞—Ç–∏, —è–∫ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ –∫–ª–∞—Å—É —Å–µ—Ä—ñ–∞–ª—ñ–∑—É—é—Ç—å—Å—è, –±–µ–∑ –∑–º—ñ–Ω–∏ –≥–ª–æ–±–∞–ª—å–Ω–∏—Ö `JsonSerializerOptions`.

### [JsonPropertyName]: –ü–µ—Ä–µ–π–º–µ–Ω—É–≤–∞–Ω–Ω—è –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç–µ–π

–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è, –∫–æ–ª–∏ –Ω–∞–∑–≤–∞ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ –≤ C# –Ω–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –Ω–∞–∑–≤—ñ –≤ JSON (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, API –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î snake_case).

```csharp showLineNumbers
using System;
using System.Text.Json;
using System.Text.Json.Serialization;

class User
{
    [JsonPropertyName("user_id")]
    public int UserId { get; set; }

    [JsonPropertyName("full_name")]
    public string FullName { get; set; }

    [JsonPropertyName("email_address")]
    public string EmailAddress { get; set; }
}

class JsonPropertyNameDemo
{
    static void Main()
    {
        var user = new User
        {
            UserId = 101,
            FullName = "–ö–∞—Ç–µ—Ä–∏–Ω–∞ –ë–æ–Ω–¥–∞—Ä–µ–Ω–∫–æ",
            EmailAddress = "kateryna@example.com"
        };

        string json = JsonSerializer.Serialize(user, new JsonSerializerOptions { WriteIndented = true });
        Console.WriteLine(json);

        /* –í–∏–≤—ñ–¥:
        {
          "user_id": 101,
          "full_name": "–ö–∞—Ç–µ—Ä–∏–Ω–∞ –ë–æ–Ω–¥–∞—Ä–µ–Ω–∫–æ",
          "email_address": "kateryna@example.com"
        }
        */

        // –î–µ—Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –∑ JSON –∑ —ñ–Ω—à–∏–º–∏ –Ω–∞–∑–≤–∞–º–∏
        string jsonInput = @"
        {
            ""user_id"": 202,
            ""full_name"": ""–î–º–∏—Ç—Ä–æ –ü–µ—Ç—Ä–µ–Ω–∫–æ"",
            ""email_address"": ""dmytro@example.com""
        }";

        var deserialized = JsonSerializer.Deserialize<User>(jsonInput);
        Console.WriteLine($"\nUser ID: {deserialized.UserId}");
        Console.WriteLine($"–Ü–º'—è: {deserialized.FullName}");
    }
}
```

**–†–æ–∑–±—ñ—Ä –∫–æ–¥—É:**

- **–†—è–¥–∫–∏ 7, 10, 13**: `[JsonPropertyName("...")]` –≤–∫–∞–∑—É—î —Ç–æ—á–Ω—É –Ω–∞–∑–≤—É —É JSON.
- **–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è**: –†–æ–±–æ—Ç–∞ –∑ legacy API, —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ Python/Ruby (–¥–µ –ø—Ä–∏–π–Ω—è—Ç–æ snake_case).

::note
**Records —Ç–∞ –∞—Ç—Ä–∏–±—É—Ç–∏**: –î–ª—è positional records –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `[property: JsonPropertyName("...")]`:

```csharp
public record Person(
    [property: JsonPropertyName("first_name")] string FirstName,
    [property: JsonPropertyName("last_name")] string LastName
);
```

::

### [JsonIgnore]: –í–∏–∫–ª—é—á–µ–Ω–Ω—è –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç–µ–π

–î–µ—è–∫—ñ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ —Å–µ—Ä—ñ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –ø–∞—Ä–æ–ª—ñ, –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ–π —Å—Ç–∞–Ω, computed properties).

```csharp showLineNumbers
using System;
using System.Text.Json;
using System.Text.Json.Serialization;

class Account
{
    public string Username { get; set; }

    [JsonIgnore]
    public string Password { get; set; }  // –ù–Ü–ö–û–õ–ò –Ω–µ —Å–µ—Ä—ñ–∞–ª—ñ–∑—É—î—Ç—å—Å—è!

    public string Email { get; set; }

    [JsonIgnore]
    public DateTime LastLoginTime { get; set; }  // –í–Ω—É—Ç—Ä—ñ—à–Ω—è –º–µ—Ç–∞–¥–∞—Ç–∞
}

class JsonIgnoreDemo
{
    static void Main()
    {
        var account = new Account
        {
            Username = "vasyl_ua",
            Password = "SuperSecret123!",
            Email = "vasyl@example.com",
            LastLoginTime = DateTime.Now
        };

        string json = JsonSerializer.Serialize(account, new JsonSerializerOptions { WriteIndented = true });
        Console.WriteLine(json);

        /* –í–∏–≤—ñ–¥:
        {
          "Username": "vasyl_ua",
          "Email": "vasyl@example.com"
        }
        Password —Ç–∞ LastLoginTime –≤—ñ–¥—Å—É—Ç–Ω—ñ!
        */
    }
}
```

**–†–æ–∑–±—ñ—Ä –∫–æ–¥—É:**

- **–†—è–¥–∫–∏ 9, 14**: `[JsonIgnore]` –ø–æ–≤–Ω—ñ—Å—Ç—é –≤–∏–∫–ª—é—á–∞—î –≤–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å –∑ —Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó —Ç–∞ –¥–µ—Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó.
- **Security**: –ö—Ä–∏—Ç–∏—á–Ω–æ –≤–∞–∂–ª–∏–≤–æ –¥–ª—è –ø–∞—Ä–æ–ª—ñ–≤, —Ç–æ–∫–µ–Ω—ñ–≤, –ø—Ä–∏–≤–∞—Ç–Ω–∏—Ö –∫–ª—é—á—ñ–≤.

::warning
**–ë–µ–∑–ø–µ–∫–∞**: `[JsonIgnore]` –ù–ï —à–∏—Ñ—Ä—É—î –¥–∞–Ω—ñ! –Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç–∏ –∫–æ–Ω—Ñ—ñ–¥–µ–Ω—Ü—ñ–π–Ω—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ HTTPS/TLS —Ç–∞ –¥–æ–¥–∞—Ç–∫–æ–≤–µ —à–∏—Ñ—Ä—É–≤–∞–Ω–Ω—è.
::

### [JsonInclude]: –°–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –ø—Ä–∏–≤–∞—Ç–Ω–∏—Ö –ø–æ–ª—ñ–≤

–ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º —Å–µ—Ä—ñ–∞–ª—ñ–∑—É—é—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ public –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ. `[JsonInclude]` –¥–æ–∑–≤–æ–ª—è—î —Å–µ—Ä—ñ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –ø—Ä–∏–≤–∞—Ç–Ω—ñ –ø–æ–ª—è –∞–±–æ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ:

```csharp showLineNumbers
using System;
using System.Text.Json;
using System.Text.Json.Serialization;

class BankAccount
{
    public string AccountNumber { get; set; }

    [JsonInclude]
    private decimal _balance;  // –ü—Ä–∏–≤–∞—Ç–Ω–µ –ø–æ–ª–µ

    public BankAccount(string accountNumber, decimal initialBalance)
    {
        AccountNumber = accountNumber;
        _balance = initialBalance;
    }

    public decimal GetBalance() => _balance;
}

class JsonIncludeDemo
{
    static void Main()
    {
        var account = new BankAccount("UA123456789", 1500.50m);

        var options = new JsonSerializerOptions
        {
            WriteIndented = true,
            IncludeFields = true  // –û–±–æ–≤'—è–∑–∫–æ–≤–æ –¥–ª—è –ø–æ–ª—ñ–≤!
        };

        string json = JsonSerializer.Serialize(account, options);
        Console.WriteLine(json);

        /* –í–∏–≤—ñ–¥:
        {
          "AccountNumber": "UA123456789",
          "_balance": 1500.5
        }
        */
    }
}
```

**–†–æ–∑–±—ñ—Ä –∫–æ–¥—É:**

- **–†—è–¥–æ–∫ 9**: `[JsonInclude]` –¥–æ–∑–≤–æ–ª—è—î —Å–µ—Ä—ñ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –ø—Ä–∏–≤–∞—Ç–Ω–µ –ø–æ–ª–µ `_balance`.
- **–†—è–¥–æ–∫ 30**: `IncludeFields = true` **–æ–±–æ–≤'—è–∑–∫–æ–≤–æ** —É `JsonSerializerOptions`!

::tip
**Use case**: Immutable –æ–±'—î–∫—Ç–∏ –∑ `readonly` –ø–æ–ª—è–º–∏, –¥–µ –Ω–µ–º–∞—î –ø—É–±–ª—ñ—á–Ω–∏—Ö setters.
::

### [JsonConstructor]: –í–∏–±—ñ—Ä –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ –¥–ª—è –¥–µ—Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó

–Ø–∫—â–æ –∫–ª–∞—Å –º–∞—î –∫—ñ–ª—å–∫–∞ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—ñ–≤, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `[JsonConstructor]` –¥–ª—è –≤–∫–∞–∑—ñ–≤–∫–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ:

```csharp showLineNumbers
using System;
using System.Text.Json;
using System.Text.Json.Serialization;

class Rectangle
{
    public int Width { get; }
    public int Height { get; }

    // –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º
    public Rectangle()
    {
        Width = 0;
        Height = 0;
    }

    // –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –¥–ª—è –¥–µ—Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó
    [JsonConstructor]
    public Rectangle(int width, int height)
    {
        Width = width;
        Height = height;
    }
}

class JsonConstructorDemo
{
    static void Main()
    {
        string json = "{\"Width\":100,\"Height\":50}";

        var rectangle = JsonSerializer.Deserialize<Rectangle>(json);
        Console.WriteLine($"–†–æ–∑–º—ñ—Ä–∏: {rectangle.Width} x {rectangle.Height}");
        // –í–∏–≤—ñ–¥: –†–æ–∑–º—ñ—Ä–∏: 100 x 50
    }
}
```

**–†–æ–∑–±—ñ—Ä –∫–æ–¥—É:**

- **–†—è–¥–æ–∫ 18**: `[JsonConstructor]` –≤–∫–∞–∑—É—î, —â–æ —Ü–µ–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –¥–µ—Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó.
- **–í–∞–∂–ª–∏–≤–æ**: –ù–∞–∑–≤–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ –º–∞—é—Ç—å –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—Ç–∏ –Ω–∞–∑–≤–∞–º –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç–µ–π (case-insensitive –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º).

### [JsonExtensionData]: –î–æ–¥–∞—Ç–∫–æ–≤—ñ –¥–∞–Ω—ñ

–ó–±–µ—Ä—ñ–≥–∞—î –Ω–µ–≤—ñ–¥–æ–º—ñ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ –∑ JSON —É —Å–ª–æ–≤–Ω–∏–∫:

```csharp showLineNumbers
using System;
using System.Collections.Generic;
using System.Text.Json;
using System.Text.Json.Serialization;

class Config
{
    public string AppName { get; set; }
    public int Version { get; set; }

    [JsonExtensionData]
    public Dictionary<string, object> AdditionalData { get; set; }
}

class JsonExtensionDataDemo
{
    static void Main()
    {
        string json = @"
        {
            ""AppName"": ""MyApp"",
            ""Version"": 2,
            ""Theme"": ""dark"",
            ""Language"": ""uk"",
            ""CustomSetting"": 42
        }";

        var config = JsonSerializer.Deserialize<Config>(json);

        Console.WriteLine($"AppName: {config.AppName}");
        Console.WriteLine($"Version: {config.Version}");
        Console.WriteLine("\n–î–æ–¥–∞—Ç–∫–æ–≤—ñ –¥–∞–Ω—ñ:");

        foreach (var kvp in config.AdditionalData)
        {
            Console.WriteLine($"  {kvp.Key}: {kvp.Value}");
        }

        // –°–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –Ω–∞–∑–∞–¥ –≤–∫–ª—é—á–∏—Ç—å –≤—Å—ñ –¥–∞–Ω—ñ
        string serialized = JsonSerializer.Serialize(config, new JsonSerializerOptions { WriteIndented = true });
        Console.WriteLine("\n=== –°–ï–†–Ü–ê–õ–Ü–ó–û–í–ê–ù–û –ù–ê–ó–ê–î ===");
        Console.WriteLine(serialized);
    }
}
```

**–†–æ–∑–±—ñ—Ä –∫–æ–¥—É:**

- **–†—è–¥–æ–∫ 11**: `[JsonExtensionData]` –≤–∫–∞–∑—É—î —Å–ª–æ–≤–Ω–∏–∫ –¥–ª—è –Ω–µ–≤—ñ–¥–æ–º–∏—Ö –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç–µ–π.
- **–†—è–¥–∫–∏ 23-25**: `Theme`, `Language`, `CustomSetting` –Ω–µ –º–∞—é—Ç—å –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏—Ö –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç–µ–π —É –∫–ª–∞—Å—ñ.
- **–†–µ–∑—É–ª—å—Ç–∞—Ç**: –¶—ñ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è —É `AdditionalData` —ñ —Å–µ—Ä—ñ–∞–ª—ñ–∑—É—é—Ç—å—Å—è –Ω–∞–∑–∞–¥.

**–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:**ÁâàÊú¨—É–≤–∞–Ω–Ω—è API (–Ω–æ–≤—ñ –ø–æ–ª—è –Ω–µ –ª–∞–º–∞—é—Ç—å —Å—Ç–∞—Ä–∏–π –∫–æ–¥), –ø–ª–∞–≥—ñ–Ω–Ω—ñ —Å–∏—Å—Ç–µ–º–∏, –¥–∏–Ω–∞–º—ñ—á–Ω—ñ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó.

---

## Custom Converters: –ü–æ–≤–Ω–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å

–Ü–Ω–æ–¥—ñ –≤–±—É–¥–æ–≤–∞–Ω–æ—ó –ª–æ–≥—ñ–∫–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ. –ù–∞–ø—Ä–∏–∫–ª–∞–¥, –ø–æ—Ç—Ä—ñ–±–Ω–æ —Å–µ—Ä—ñ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ `DateTime` —É —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–æ–º—É —Ñ–æ—Ä–º–∞—Ç—ñ, –∞–±–æ –∫–æ–Ω–≤–µ—Ä—Ç—É–≤–∞—Ç–∏ enum —É custom —Ä—è–¥–∫–∏. –î–ª—è —Ü—å–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è **JsonConverter**.

### –ë–∞–∑–æ–≤–∏–π –ø—Ä–∏–∫–ª–∞–¥: Custom DateTime —Ñ–æ—Ä–º–∞—Ç

```csharp showLineNumbers
using System;
using System.Text.Json;
using System.Text.Json.Serialization;

// Custom –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä –¥–ª—è DateTime
class CustomDateTimeConverter : JsonConverter<DateTime>
{
    private const string DateFormat = "dd.MM.yyyy HH:mm";

    public override DateTime Read(ref Utf8JsonReader reader, Type typeToConvert, JsonSerializerOptions options)
    {
        string dateString = reader.GetString();
        return DateTime.ParseExact(dateString, DateFormat, null);
    }

    public override void Write(Utf8JsonWriter writer, DateTime value, JsonSerializerOptions options)
    {
        writer.WriteStringValue(value.ToString(DateFormat));
    }
}

class Event
{
    public string Title { get; set; }

    [JsonConverter(typeof(CustomDateTimeConverter))]
    public DateTime EventDate { get; set; }
}

class CustomConverterDemo
{
    static void Main()
    {
        var event1 = new Event
        {
            Title = "–ö–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü—ñ—è .NET",
            EventDate = new DateTime(2026, 3, 15, 10, 30, 0)
        };

        string json = JsonSerializer.Serialize(event1, new JsonSerializerOptions { WriteIndented = true });
        Console.WriteLine(json);

        /* –í–∏–≤—ñ–¥:
        {
          "Title": "–ö–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü—ñ—è .NET",
          "EventDate": "15.03.2026 10:30"
        }
        */

        // –î–µ—Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è
        string jsonInput = @"{""Title"": ""–°–µ–º—ñ–Ω–∞—Ä C#"", ""EventDate"": ""20.04.2026 14:00""}";
        var event2 = JsonSerializer.Deserialize<Event>(jsonInput);
        Console.WriteLine($"\n{event2.Title} - {event2.EventDate}");
    }
}
```

**–†–æ–∑–±—ñ—Ä –∫–æ–¥—É:**

- **–†—è–¥–æ–∫ 6**: –£—Å–ø–∞–¥–∫–æ–≤—É—î–º–æ `JsonConverter<DateTime>`.
- **–†—è–¥–æ–∫ 10**: `Read()` ‚Äî –ª–æ–≥—ñ–∫–∞ –¥–µ—Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó (JSON ‚Üí –æ–±'—î–∫—Ç).
- **–†—è–¥–æ–∫ 16**: `Write()` ‚Äî –ª–æ–≥—ñ–∫–∞ —Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó (–æ–±'—î–∫—Ç ‚Üí JSON).
- **–†—è–¥–æ–∫ 26**: `[JsonConverter(typeof(...))]` –∑–∞—Å—Ç–æ—Å–æ–≤—É—î –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä –¥–æ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ.

### –ü—Ä–∏–∫–ª–∞–¥: Enum –∑ custom –∑–Ω–∞—á–µ–Ω–Ω—è–º–∏

```csharp showLineNumbers
using System;
using System.Text.Json;
using System.Text.Json.Serialization;

enum OrderStatus
{
    Pending,
    Processing,
    Shipped,
    Delivered,
    Cancelled
}

// –ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä –¥–ª—è OrderStatus
class OrderStatusConverter : JsonConverter<OrderStatus>
{
    public override OrderStatus Read(ref Utf8JsonReader reader, Type typeToConvert, JsonSerializerOptions options)
    {
        string value = reader.GetString();
        return value switch
        {
            "pending" => OrderStatus.Pending,
            "processing" => OrderStatus.Processing,
            "shipped" => OrderStatus.Shipped,
            "delivered" => OrderStatus.Delivered,
            "cancelled" => OrderStatus.Cancelled,
            _ => throw new JsonException($"Unknown status: {value}")
        };
    }

    public override void Write(Utf8JsonWriter writer, OrderStatus value, JsonSerializerOptions options)
    {
        string status = value switch
        {
            OrderStatus.Pending => "pending",
            OrderStatus.Processing => "processing",
            OrderStatus.Shipped => "shipped",
            OrderStatus.Delivered => "delivered",
            OrderStatus.Cancelled => "cancelled",
            _ => throw new JsonException($"Unknown enum: {value}")
        };
        writer.WriteStringValue(status);
    }
}

class Order
{
    public int OrderId { get; set; }

    [JsonConverter(typeof(OrderStatusConverter))]
    public OrderStatus Status { get; set; }
}

class EnumConverterDemo
{
    static void Main()
    {
        var order = new Order { OrderId = 12345, Status = OrderStatus.Shipped };

        string json = JsonSerializer.Serialize(order);
        Console.WriteLine(json);
        // –í–∏–≤—ñ–¥: {"OrderId":12345,"Status":"shipped"}

        string jsonInput = @"{""OrderId"":67890,""Status"":""delivered""}";
        var deserialized = JsonSerializer.Deserialize<Order>(jsonInput);
        Console.WriteLine($"–ó–∞–º–æ–≤–ª–µ–Ω–Ω—è #{deserialized.OrderId}: {deserialized.Status}");
    }
}
```

**–†–æ–∑–±—ñ—Ä –∫–æ–¥—É:**

- **–†—è–¥–æ–∫ 20**: `switch` expression –¥–ª—è mapping —Ä—è–¥–∫—ñ–≤ –Ω–∞ enum.
- **–†—è–¥–æ–∫ 33**: –ó–≤–æ—Ä–æ—Ç–Ω—ñ–π mapping –¥–ª—è —Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó.
- **–ü–µ—Ä–µ–≤–∞–≥–∏**: API –æ—Ç—Ä–∏–º—É—î lowercase —Å—Ç–∞—Ç—É—Å–∏ –∑–∞–º—ñ—Å—Ç—å `"Shipped"` (–±—ñ–ª—å—à RESTful).

::tip
**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞**: –î–ª—è –ø—Ä–æ—Å—Ç–∏—Ö enum –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `JsonStringEnumConverter`:

```csharp
[JsonConverter(typeof(JsonStringEnumConverter))]
public OrderStatus Status { get; set; }
```

–¶–µ —Å–µ—Ä—ñ–∞–ª—ñ–∑—É—î enum —è–∫ —Ä—è–¥–æ–∫ (`"Shipped"`), –∞–ª–µ –±–µ–∑ –∫–∞—Å—Ç–æ–º—ñ–∑–∞—Ü—ñ—ó lowercase.
::

### JsonConverterFactory: –ö–æ–Ω–≤–µ—Ä—Ç–µ—Ä –¥–ª—è generic —Ç–∏–ø—ñ–≤

–î–ª—è —Å–∫–ª–∞–¥–Ω–∏—Ö —Å—Ü–µ–Ω–∞—Ä—ñ—ó–≤ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä –¥–ª—è –≤—Å—ñ—Ö `List<T>`) –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `JsonConverterFactory`.

```csharp showLineNumbers
using System;
using System.Collections.Generic;
using System.Text.Json;
using System.Text.Json.Serialization;

// –§–∞–±—Ä–∏–∫–∞ –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä—ñ–≤ –¥–ª—è List<T>, —è–∫–∞ —Å–µ—Ä—ñ–∞–ª—ñ–∑—É—î —Ç—ñ–ª—å–∫–∏ –ø–µ—Ä—à—ñ 3 –µ–ª–µ–º–µ–Ω—Ç–∏
class TruncatedListConverterFactory : JsonConverterFactory
{
    public override bool CanConvert(Type typeToConvert)
    {
        return typeToConvert.IsGenericType &&
               typeToConvert.GetGenericTypeDefinition() == typeof(List<>);
    }

    public override JsonConverter CreateConverter(Type typeToConvert, JsonSerializerOptions options)
    {
        Type elementType = typeToConvert.GetGenericArguments()[0];
        Type converterType = typeof(TruncatedListConverter<>).MakeGenericType(elementType);
        return (JsonConverter)Activator.CreateInstance(converterType);
    }
}

class TruncatedListConverter<T> : JsonConverter<List<T>>
{
    public override List<T> Read(ref Utf8JsonReader reader, Type typeToConvert, JsonSerializerOptions options)
    {
        return JsonSerializer.Deserialize<List<T>>(ref reader, options);
    }

    public override void Write(Utf8JsonWriter writer, List<T> value, JsonSerializerOptions options)
    {
        writer.WriteStartArray();

        int count = Math.Min(3, value.Count);  // –¢—ñ–ª—å–∫–∏ –ø–µ—Ä—à—ñ 3
        for (int i = 0; i < count; i++)
        {
            JsonSerializer.Serialize(writer, value[i], options);
        }

        if (value.Count > 3)
        {
            writer.WriteStringValue($"... —Ç–∞ —â–µ {value.Count - 3}");
        }

        writer.WriteEndArray();
    }
}

class Product
{
    public string Name { get; set; }

    [JsonConverter(typeof(TruncatedListConverterFactory))]
    public List<string> Tags { get; set; }
}

class FactoryDemo
{
    static void Main()
    {
        var product = new Product
        {
            Name = "–°–º–∞—Ä—Ç—Ñ–æ–Ω",
            Tags = new List<string> { "electronics", "mobile", "android", "5G", "camera" }
        };

        string json = JsonSerializer.Serialize(product, new JsonSerializerOptions { WriteIndented = true });
        Console.WriteLine(json);

        /* –í–∏–≤—ñ–¥:
        {
          "Name": "–°–º–∞—Ä—Ç—Ñ–æ–Ω",
          "Tags": [
            "electronics",
            "mobile",
            "android",
            "... —Ç–∞ —â–µ 2"
          ]
        }
        */
    }
}
```

**–†–æ–∑–±—ñ—Ä –∫–æ–¥—É:**

- **–†—è–¥–æ–∫ 9**: `CanConvert()` –ø–µ—Ä–µ–≤—ñ—Ä—è—î, —á–∏ –º–æ–∂–µ —Ñ–∞–±—Ä–∏–∫–∞ –æ–±—Ä–æ–±–∏—Ç–∏ —Ç–∏–ø.
- **–†—è–¥–æ–∫ 15**: `CreateConverter()` —Å—Ç–≤–æ—Ä—é—î –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä –¥–ª—è `List<T>`.
- **–†—è–¥–æ–∫ 30**: –õ–æ–≥—ñ–∫–∞ —Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó —Ç—ñ–ª—å–∫–∏ –ø–µ—Ä—à–∏—Ö 3 –µ–ª–µ–º–µ–Ω—Ç—ñ–≤.
- **–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è**: Logging (—Å–∫–æ—Ä–æ—á–µ–Ω–Ω—è –≤–µ–ª–∏–∫–∏—Ö –º–∞—Å–∏–≤—ñ–≤), preview —É UI.

---

## Source Generators: Compile-Time –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è

**Source Generators** ‚Äî —Ü–µ –Ω–æ–≤–∞ —Ç–µ—Ö–Ω–æ–ª–æ–≥—ñ—è .NET, —è–∫–∞ –≥–µ–Ω–µ—Ä—É—î –∫–æ–¥ —Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó **–ø—ñ–¥ —á–∞—Å –∫–æ–º–ø—ñ–ª—è—Ü—ñ—ó** –∑–∞–º—ñ—Å—Ç—å runtime reflection. –¶–µ –¥–∞—î:

- ‚ö° **–®–≤–∏–¥–∫—ñ—Å—Ç—å**: 2-3x —à–≤–∏–¥—à–µ —á–µ—Ä–µ–∑ –≤—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å reflection
- üíæ **–ú–µ–Ω—à–µ –ø–∞–º'—è—Ç—ñ**: –ú–µ–Ω—à–µ –∞–ª–æ–∫–∞—Ü—ñ–π
- üì± **AOT Compilation**: –ù–µ–æ–±—Ö—ñ–¥–Ω–æ –¥–ª—è Native AOT (iOS, Android, WebAssembly)
- üîç **Type Safety**: –ü–æ–º–∏–ª–∫–∏ –≤–∏—è–≤–ª—è—é—Ç—å—Å—è –Ω–∞ –µ—Ç–∞–ø—ñ –∫–æ–º–ø—ñ–ª—è—Ü—ñ—ó

### –ë–∞–∑–æ–≤–∏–π –ø—Ä–∏–∫–ª–∞–¥

```csharp showLineNumbers
using System;
using System.Text.Json;
using System.Text.Json.Serialization;

// –ú–æ–¥–µ–ª—å –¥–∞–Ω–∏—Ö
class WeatherForecast
{
    public DateTime Date { get; set; }
    public int TemperatureC { get; set; }
    public string Summary { get; set; }
}

// –ö–æ–Ω—Ç–µ–∫—Å—Ç —Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó (Source Generator)
[JsonSourceGenerationOptions(WriteIndented = true)]
[JsonSerializable(typeof(WeatherForecast))]
[JsonSerializable(typeof(WeatherForecast[]))]  // –î–ª—è –º–∞—Å–∏–≤—ñ–≤
internal partial class AppJsonContext : JsonSerializerContext
{
}

class SourceGeneratorDemo
{
    static void Main()
    {
        var forecast = new WeatherForecast
        {
            Date = DateTime.Now,
            TemperatureC = 22,
            Summary = "–°–æ–Ω—è—á–Ω–æ"
        };

        // –°–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –∑ Source Generator –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
        string json = JsonSerializer.Serialize(forecast, AppJsonContext.Default.WeatherForecast);
        Console.WriteLine(json);

        // –î–µ—Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è
        var deserialized = JsonSerializer.Deserialize(json, AppJsonContext.Default.WeatherForecast);
        Console.WriteLine($"\n–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞: {deserialized.TemperatureC}¬∞C, {deserialized.Summary}");
    }
}
```

**–†–æ–∑–±—ñ—Ä –∫–æ–¥—É:**

- **–†—è–¥–æ–∫ 14**: `[JsonSourceGenerationOptions]` –∑–∞–¥–∞—î –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó.
- **–†—è–¥–æ–∫ 15-16**: `[JsonSerializable(typeof(...))]` –≤–∫–∞–∑—É—î —Ç–∏–ø–∏ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó.
- **–†—è–¥–æ–∫ 17**: `partial class` –¥–æ–∑–≤–æ–ª—è—î source generator –¥–æ–¥–∞—Ç–∏ –∫–æ–¥.
- **–†—è–¥–æ–∫ 33**: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ `AppJsonContext.Default.WeatherForecast` –∑–∞–º—ñ—Å—Ç—å generics.

::note
**–Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î?** –ü—ñ–¥ —á–∞—Å –∫–æ–º–ø—ñ–ª—è—Ü—ñ—ó analyzer –≥–µ–Ω–µ—Ä—É—î C# –∫–æ–¥ –∑ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ—é –ª–æ–≥—ñ–∫–æ—é —Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó –¥–ª—è `WeatherForecast`, –±–µ–∑ reflection. –í–∏ –º–æ–∂–µ—Ç–µ –ø–æ–¥–∏–≤–∏—Ç–∏—Å—è –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–∏–π –∫–æ–¥ —É `obj/Debug/.../generated/`.
::

### –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Source Generator

```csharp showLineNumbers
using System.Text.Json;
using System.Text.Json.Serialization;

[JsonSourceGenerationOptions(
    WriteIndented = true,
    PropertyNamingPolicy = JsonKnownNamingPolicy.CamelCase,
    DefaultIgnoreCondition = JsonIgnoreCondition.WhenWritingNull,
    GenerationMode = JsonSourceGenerationMode.Metadata | JsonSourceGenerationMode.Serialization
)]
[JsonSerializable(typeof(User))]
[JsonSerializable(typeof(Product))]
internal partial class MyAppContext : JsonSerializerContext
{
}

class User
{
    public int Id { get; set; }
    public string Name { get; set; }
}

class Product
{
    public string Title { get; set; }
    public decimal Price { get; set; }
}
```

**–û–ø—Ü—ñ—ó:**

- **PropertyNamingPolicy**: `CamelCase`, `SnakeCaseLower` (–°# class `UserName` ‚Üí JSON `userName`)
- **GenerationMode**:
    - `Metadata` ‚Äî —Ç—ñ–ª—å–∫–∏ –º–µ—Ç–∞–¥–∞–Ω—ñ (–º–µ–Ω—à–∏–π —Ä–æ–∑–º—ñ—Ä)
    - `Serialization` ‚Äî –ø–æ–≤–Ω–∞ –ª–æ–≥—ñ–∫–∞ —Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó (—à–≤–∏–¥—à–µ)
    - –û–±–∏–¥–≤–∞ ‚Äî —É–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω—ñ—Å—Ç—å

::tip
**–ö–æ–ª–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ Source Generators?**

- –ú–æ–±—ñ–ª—å–Ω—ñ –¥–æ–¥–∞—Ç–∫–∏ (Xamarin, MAUI) ‚Äî –º–µ–Ω—à–∏–π —Ä–æ–∑–º—ñ—Ä APK/IPA
- AOT scenarios (iOS, WebAssembly)
- High-performance —Å–µ—Ä–≤—ñ—Å–∏ –∑ –º—ñ–ª—å–π–æ–Ω–∞–º–∏ –∑–∞–ø–∏—Ç—ñ–≤
- Embedded systems –∑ –æ–±–º–µ–∂–µ–Ω–æ—é –ø–∞–º'—è—Ç—Ç—é

::

---

## Advanced Scenarios

### Polymorphic Serialization

–°–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è —ñ—î—Ä–∞—Ä—Ö—ñ—ó –∫–ª–∞—Å—ñ–≤ –∑ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è–º —Ç–∏–ø—É:

```csharp showLineNumbers
using System;
using System.Text.Json;
using System.Text.Json.Serialization;

[JsonDerivedType(typeof(Dog), typeDiscriminator: "dog")]
[JsonDerivedType(typeof(Cat), typeDiscriminator: "cat")]
abstract class Animal
{
    public string Name { get; set; }
}

class Dog : Animal
{
    public string Breed { get; set; }
}

class Cat : Animal
{
    public int Lives { get; set; }
}

class PolymorphicDemo
{
    static void Main()
    {
        Animal[] animals = new Animal[]
        {
            new Dog { Name = "–†–µ–∫—Å", Breed = "–ù—ñ–º–µ—Ü—å–∫–∞ –≤—ñ–≤—á–∞—Ä–∫–∞" },
            new Cat { Name = "–ú—É—Ä—á–∏–∫", Lives = 9 }
        };

        var options = new JsonSerializerOptions { WriteIndented = true };
        string json = JsonSerializer.Serialize(animals, options);
        Console.WriteLine(json);

        /* –í–∏–≤—ñ–¥:
        [
          {
            "$type": "dog",
            "Name": "–†–µ–∫—Å",
            "Breed": "–ù—ñ–º–µ—Ü—å–∫–∞ –≤—ñ–≤—á–∞—Ä–∫–∞"
          },
          {
            "$type": "cat",
            "Name": "–ú—É—Ä—á–∏–∫",
            "Lives": 9
          }
        ]
        */

        // –î–µ—Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –≤—ñ–¥–Ω–æ–≤–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ñ —Ç–∏–ø–∏
        var deserialized = JsonSerializer.Deserialize<Animal[]>(json, options);
        foreach (var animal in deserialized)
        {
            Console.WriteLine($"{animal.GetType().Name}: {animal.Name}");
        }
    }
}
```

### Handling –¶–∏–∫–ª—ñ—á–Ω–∏—Ö –ü–æ—Å–∏–ª–∞–Ω—å

```csharp showLineNumbers
using System;
using System.Text.Json;
using System.Text.Json.Serialization;

class Person
{
    public string Name { get; set; }
    public Person BestFriend { get; set; }  // –ú–æ–∂–µ –ø–æ—Å–∏–ª–∞—Ç–∏—Å—è –Ω–∞–∑–∞–¥!
}

class CyclesDemo
{
    static void Main()
    {
        var alice = new Person { Name = "Alice" };
        var bob = new Person { Name = "Bob" };

        alice.BestFriend = bob;
        bob.BestFriend = alice;  // –¶–∏–∫–ª—ñ—á–Ω–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è!

        var options = new JsonSerializerOptions
        {
            ReferenceHandler = ReferenceHandler.IgnoreCycles,  // –Ü–≥–Ω–æ—Ä—É–≤–∞—Ç–∏ —Ü–∏–∫–ª–∏
            WriteIndented = true
        };

        string json = JsonSerializer.Serialize(alice, options);
        Console.WriteLine(json);

        /* –í–∏–≤—ñ–¥:
        {
          "Name": "Alice",
          "BestFriend": {
            "Name": "Bob",
            "BestFriend": null   ‚Üê –¶–∏–∫–ª –ø–µ—Ä–µ—Ä–≤–∞–Ω–∏–π
          }
        }
        */
    }
}
```

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞**: `ReferenceHandler.Preserve` –∑–±–µ—Ä—ñ–≥–∞—î –ø–æ—Å–∏–ª–∞–Ω–Ω—è —á–µ—Ä–µ–∑ `$id` —Ç–∞ `$ref` (JSON-LD —Å—Ç–∏–ª—å).

---

## –ü—Ä–∞–∫—Ç–∏—á–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è

::steps

### –ó–∞–≤–¥–∞–Ω–Ω—è 1: API Client

–°—Ç–≤–æ—Ä—ñ—Ç—å –∫–ª–∞—Å `Book` –∑ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—è–º–∏: `Title`, `Author`, `ISBN`, `PublishedDate`. –†–µ–∞–ª—ñ–∑—É–π—Ç–µ:

1. –°–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—é —É JSON –∑ camelCase –Ω–∞–∑–≤–∞–º–∏.
2. –Ü–≥–Ω–æ—Ä—É–≤–∞–Ω–Ω—è `ISBN`, —è–∫—â–æ –≤–æ–Ω–æ null.
3. Custom –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä –¥–ª—è `PublishedDate` —É —Ñ–æ—Ä–º–∞—Ç—ñ "YYYY-MM-DD".
4. –¢–µ—Å—Ç —Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó/–¥–µ—Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó.

### –ó–∞–≤–¥–∞–Ω–Ω—è 2: Configuration System

–°—Ç–≤–æ—Ä—ñ—Ç—å —Å–∏—Å—Ç–µ–º—É –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó –¥–æ–¥–∞—Ç–∫—É:

1. –ö–ª–∞—Å `AppConfig` –∑ –≤–∫–ª–∞–¥–µ–Ω–∏–º–∏ —Å–µ–∫—Ü—ñ—è–º–∏ (`DatabaseConfig`, `LoggingConfig`).
2. [JsonExtensionData] –¥–ª—è –Ω–µ–≤—ñ–¥–æ–º–∏—Ö –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å.
3. –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è/–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑ —Ñ–∞–π–ª—É `config.json`.
4. –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ –¥–µ—Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó (–Ω–µ–≤–∞–ª—ñ–¥–Ω–∏–π JSON).

### –ó–∞–≤–¥–∞–Ω–Ω—è 3: Source Generator Performance Test

–°—Ç–≤–æ—Ä—ñ—Ç—å benchmark –¥–ª—è –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è:

1. –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞ —Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è (`JsonSerializer.Serialize<T>`).
2. Source generator (`AppJsonContext.Default.T`).
3. –í–∏–º—ñ—Ä—è–π—Ç–µ —á–∞—Å –¥–ª—è 10,000 –æ–±'—î–∫—Ç—ñ–≤.
4. –í–∏–≤–µ–¥—ñ—Ç—å —Ä—ñ–∑–Ω–∏—Ü—é —É —à–≤–∏–¥–∫–æ—Å—Ç—ñ.

::

---

## –†–µ–∑—é–º–µ

::card-group
::card{title="JsonSerializer"}
–û—Å–Ω–æ–≤–Ω–∏–π API –¥–ª—è —Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó/–¥–µ—Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó. `Serialize()` —Ç–∞ `Deserialize<T>()` ‚Äî –≤–∞—à—ñ –Ω–∞–π–∫—Ä–∞—â—ñ –¥—Ä—É–∑—ñ.
::

::card{title="JsonSerializerOptions"}
–ì–ª–æ–±–∞–ª—å–Ω—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è: naming policy, ignore conditions, format—É–≤–∞–Ω–Ω—è.
::

::card{title="–ê—Ç—Ä–∏–±—É—Ç–∏"}
`[JsonPropertyName]`, `[JsonIgnore]`, `[JsonInclude]`, `[JsonConstructor]` ‚Äî —Ç–æ—á–Ω–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞ —Ä—ñ–≤–Ω—ñ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç–µ–π.
::

::card{title="Custom Converters"}
`JsonConverter<T>` –¥–ª—è —Å–∫–ª–∞–¥–Ω–æ—ó –ª–æ–≥—ñ–∫–∏. `JsonConverterFactory` –¥–ª—è generic —Ç–∏–ø—ñ–≤.
::

::card{title="Source Generators"}
Compile-time –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ—ó –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ —Ç–∞ AOT —Å—Ü–µ–Ω–∞—Ä—ñ—ó–≤.
::
::

::tip
**–ù–∞—Å—Ç—É–ø–Ω–∏–π –∫—Ä–æ–∫**: –£ –Ω–∞—Å—Ç—É–ø–Ω–æ–º—É –º–∞—Ç–µ—Ä—ñ–∞–ª—ñ —Ä–æ–∑–≥–ª—è–Ω–µ–º–æ **XML Serialization** –∑ `XmlSerializer` —Ç–∞ **LINQ to XML** –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ XML –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏.
::

---

## –ü–æ—Å–∏–ª–∞–Ω–Ω—è

- [System.Text.Json Overview](https://learn.microsoft.com/en-us/dotnet/standard/serialization/system-text-json/overview)
- [How to serialize and deserialize JSON](https://learn.microsoft.com/en-us/dotnet/standard/serialization/system-text-json/how-to)
- [Custom converters](https://learn.microsoft.com/en-us/dotnet/standard/serialization/system-text-json/converters-how-to)
- [Source generation](https://learn.microsoft.com/en-us/dotnet/standard/serialization/system-text-json/source-generation)
- [Migrate from Newtonsoft.Json](https://learn.microsoft.com/en-us/dotnet/standard/serialization/system-text-json/migrate-from-newtonsoft)
