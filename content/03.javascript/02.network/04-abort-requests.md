---
title: –ü–µ—Ä–µ—Ä–∏–≤–∞–Ω–Ω—è fetch-–∑–∞–ø–∏—Ç—ñ–≤
description: –ù–∞–≤—á—ñ—Ç—å—Å—è —Å–∫–∞—Å–æ–≤—É–≤–∞—Ç–∏ HTTP-–∑–∞–ø–∏—Ç–∏ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é AbortController, –∫–µ—Ä—É–≤–∞—Ç–∏ —Ç–∞–π–º–∞—É—Ç–∞–º–∏ —Ç–∞ –æ—Ä–≥–∞–Ω—ñ–∑–æ–≤—É–≤–∞—Ç–∏ –≥—Ä—É–ø–æ–≤–µ –ø–µ—Ä–µ—Ä–∏–≤–∞–Ω–Ω—è –∑–∞–ø–∏—Ç—ñ–≤
---

# –ü–µ—Ä–µ—Ä–∏–≤–∞–Ω–Ω—è fetch-–∑–∞–ø–∏—Ç—ñ–≤

## –í—Å—Ç—É–ø —Ç–∞ –ö–æ–Ω—Ç–µ–∫—Å—Ç

–£—è–≤—ñ—Ç—å: –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –ø–æ—á–∞–≤ –∑–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞—Ç–∏ –≤–µ–ª–∏–∫–µ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è, –∞–ª–µ –ø–µ—Ä–µ–¥—É–º–∞–≤ —ñ –ø–µ—Ä–µ–π—à–æ–≤ –Ω–∞ —ñ–Ω—à—É —Å—Ç–æ—Ä—ñ–Ω–∫—É. –ê–±–æ –∑–∞–ø—É—Å—Ç–∏–≤ –ø–æ—à—É–∫, –∞–ª–µ –≤–∂–µ –Ω–∞ —Ç—Ä–µ—Ç—ñ–π –ª—ñ—Ç–µ—Ä—ñ –∑—Ä–æ–∑—É–º—ñ–≤, —â–æ –≤–≤—ñ–≤ —â–æ—Å—å –Ω–µ —Ç–µ. –£ —Ü–∏—Ö —Å—Ü–µ–Ω–∞—Ä—ñ—è—Ö –ø—Ä–æ–¥–æ–≤–∂–µ–Ω–Ω—è –∑–∞–ø–∏—Ç—É ‚Äî —Ü–µ –º–∞—Ä–Ω–∞ —Ç—Ä–∞—Ç–∞ —Ä–µ—Å—É—Ä—Å—ñ–≤: —Ç—Ä–∞—Ñ—ñ–∫—É, –ø–∞–º'—è—Ç—ñ, –ø—Ä–æ—Ü–µ—Å–æ—Ä–Ω–æ–≥–æ —á–∞—Å—É.

**–ü—Ä–æ–±–ª–µ–º–∞:** –í JavaScript –ø—Ä–æ–º—ñ—Å–∏ –Ω–µ –º–æ–∂–Ω–∞ "—Å–∫–∞—Å—É–≤–∞—Ç–∏" —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–º —Å–ø–æ—Å–æ–±–æ–º. –Ø–∫—â–æ `fetch()` –ø–æ–≤–µ—Ä–Ω—É–≤ –ø—Ä–æ–º—ñ—Å, –≤—ñ–Ω –≤–∏–∫–æ–Ω–∞—î—Ç—å—Å—è –¥–æ –∫—ñ–Ω—Ü—è, –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –≤–∂–µ –Ω–µ –ø–æ—Ç—Ä—ñ–±–µ–Ω.

**–†—ñ—à–µ–Ω–Ω—è:** `AbortController` ‚Äî —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–∏–π –≤–±—É–¥–æ–≤–∞–Ω–∏–π –æ–±'—î–∫—Ç, —è–∫–∏–π –Ω–∞–¥–∞—î API –¥–ª—è –ø–µ—Ä–µ—Ä–∏–≤–∞–Ω–Ω—è –Ω–µ —Ç—ñ–ª—å–∫–∏ fetch-–∑–∞–ø–∏—Ç—ñ–≤, –∞–ª–µ –π –±—É–¥—å-—è–∫–∏—Ö –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π.

::tip
**–ß–æ–º—É —Ü–µ –≤–∞–∂–ª–∏–≤–æ?**

-   üí∞ **–ï–∫–æ–Ω–æ–º—ñ—è —Ä–µ—Å—É—Ä—Å—ñ–≤** ‚Äî –∑–∞–æ—â–∞–¥–∂–µ–Ω–Ω—è —Ç—Ä–∞—Ñ—ñ–∫—É —Ç–∞ —Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ –Ω–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
-   ‚ö° **–®–≤–∏–¥–∫—ñ—Å—Ç—å** ‚Äî –Ω–µ–≥–∞–π–Ω–∞ —Ä–µ–∞–∫—Ü—ñ—è –Ω–∞ –∑–º—ñ–Ω—É UI
-   üéØ **UX** ‚Äî –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –∫–æ–Ω—Ç—Ä–æ–ª—é—î –ø—Ä–æ—Ü–µ—Å (–∫–Ω–æ–ø–∫–∞ "–°–∫–∞—Å—É–≤–∞—Ç–∏")
-   üîÑ **–î–µ–±–∞—É–Ω—Å–∏–Ω–≥** ‚Äî —Å–∫–∞—Å—É–≤–∞–Ω–Ω—è –∑–∞—Å—Ç–∞—Ä—ñ–ª–∏—Ö –ø–æ—à—É–∫–æ–≤–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤

::

### –©–æ –º–∏ –Ω–∞–≤—á–∏–º–æ—Å—è —Ä–æ–±–∏—Ç–∏?

-   –°—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ `AbortController` –¥–ª—è –∫–µ—Ä—É–≤–∞–Ω–Ω—è –∑–∞–ø–∏—Ç–∞–º–∏
-   –ü–µ—Ä–µ—Ä–∏–≤–∞—Ç–∏ fetch-–∑–∞–ø–∏—Ç–∏ —á–µ—Ä–µ–∑ `signal`
-   –†–µ–∞–ª—ñ–∑–æ–≤—É–≤–∞—Ç–∏ —Ç–∞–π–º–∞—É—Ç–∏ –¥–ª—è –∑–∞–ø–∏—Ç—ñ–≤
-   –°–∫–∞—Å–æ–≤—É–≤–∞—Ç–∏ –∫—ñ–ª—å–∫–∞ –∑–∞–ø–∏—Ç—ñ–≤ –æ–¥–Ω–æ—á–∞—Å–Ω–æ
-   –Ü–Ω—Ç–µ–≥—Ä—É–≤–∞—Ç–∏ AbortController —É –≤–ª–∞—Å–Ω—ñ async-—Ñ—É–Ω–∫—Ü—ñ—ó

## –§—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ñ –ö–æ–Ω—Ü–µ–ø—Ü—ñ—ó

### –©–æ —Ç–∞–∫–µ AbortController?

**AbortController** ‚Äî —Ü–µ –æ–±'—î–∫—Ç, —è–∫–∏–π —Å—Ç–≤–æ—Ä—é—î —Å–∏–≥–Ω–∞–ª (`signal`) –¥–ª—è –ø–µ—Ä–µ—Ä–∏–≤–∞–Ω–Ω—è –æ–ø–µ—Ä–∞—Ü—ñ–π. –í—ñ–Ω —Å–∫–ª–∞–¥–∞—î—Ç—å—Å—è –∑ –¥–≤–æ—Ö —á–∞—Å—Ç–∏–Ω:

```javascript
const controller = new AbortController()
const signal = controller.signal
```

::field-group
::field{name="controller.signal" type="AbortSignal"}
–û–±'—î–∫—Ç-—Å–∏–≥–Ω–∞–ª, —è–∫–∏–π –ø–µ—Ä–µ–¥–∞—î—Ç—å—Å—è —É —Ñ—É–Ω–∫—Ü—ñ—ó –¥–ª—è –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É —Å—Ç–∞–Ω—É –ø–µ—Ä–µ—Ä–∏–≤–∞–Ω–Ω—è
::

::field{name="controller.abort()" type="Method"}
–ú–µ—Ç–æ–¥, —è–∫–∏–π –ø–µ—Ä–µ—Ä–∏–≤–∞—î –æ–ø–µ—Ä–∞—Ü—ñ—é, –≥–µ–Ω–µ—Ä—É—é—á–∏ –ø–æ–¥—ñ—é `abort` –Ω–∞ `signal`
::

::field{name="signal.aborted" type="boolean"}
–í–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å, —è–∫–∞ —Å—Ç–∞—î `true` –ø—ñ—Å–ª—è –≤–∏–∫–ª–∏–∫—É `controller.abort()`
::

::field{name="signal.addEventListener('abort', handler)" type="Method"}
–°–ª—É—Ö–∞—á –ø–æ–¥—ñ—ó, —è–∫–∏–π —Å–ø—Ä–∞—Ü—å–æ–≤—É—î –ø—Ä–∏ –ø–µ—Ä–µ—Ä–∏–≤–∞–Ω–Ω—ñ
::
::

### –Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î: –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –≤–∑–∞—î–º–æ–¥—ñ—ó

::mermaid

```mermaid
sequenceDiagram
    participant Code as –í–∞—à –∫–æ–¥
    participant AC as AbortController
    participant Signal as signal
    participant Fetch as fetch()
    participant Server as –°–µ—Ä–≤–µ—Ä

    Code->>AC: new AbortController()
    AC->>Signal: –°—Ç–≤–æ—Ä—é—î signal
    Code->>Fetch: fetch(url, {signal})
    Fetch->>Signal: –ü—ñ–¥–ø–∏—Å—É—î—Ç—å—Å—è –Ω–∞ abort
    Fetch->>Server: HTTP –∑–∞–ø–∏—Ç

    Note over Code: –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–∞—Ç–∏—Å–∫–∞—î "–°–∫–∞—Å—É–≤–∞—Ç–∏"

    Code->>AC: controller.abort()
    AC->>Signal: –ì–µ–Ω–µ—Ä—É—î –ø–æ–¥—ñ—é 'abort'
    Signal->>Fetch: –°–ø–æ–≤—ñ—â–µ–Ω–Ω—è –ø—Ä–æ –ø–µ—Ä–µ—Ä–∏–≤–∞–Ω–Ω—è
    Fetch->>Server: (–ø–µ—Ä–µ—Ä–∏–≤–∞—î –∑'—î–¥–Ω–∞–Ω–Ω—è)
    Fetch-->>Code: Promise rejected with AbortError
```

::

**–î–≤—ñ —Å—Ç–æ—Ä–æ–Ω–∏ –ø—Ä–æ—Ü–µ—Å—É:**

1. **–í–∏–∫–æ–Ω–∞–≤–µ—Ü—å** ‚Äî —Ç–æ–π, —Ö—Ç–æ –≤–∏–∫–æ–Ω—É—î –æ–ø–µ—Ä–∞—Ü—ñ—é (fetch, async —Ñ—É–Ω–∫—Ü—ñ—è). –ü—ñ–¥–ø–∏—Å—É—î—Ç—å—Å—è –Ω–∞ `signal.addEventListener('abort')`
2. **–ö–æ–Ω—Ç—Ä–æ–ª–µ—Ä** ‚Äî —Ç–æ–π, —Ö—Ç–æ —Å–∫–∞—Å–æ–≤—É—î. –í–∏–∫–ª–∏–∫–∞—î `controller.abort()` –∫–æ–ª–∏ –ø–æ—Ç—Ä—ñ–±–Ω–æ

## –ü—Ä–∞–∫—Ç–∏—á–Ω–∞ –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è

### –ë–∞–∑–æ–≤–∏–π –ø—Ä–∏–∫–ª–∞–¥: –ø–µ—Ä–µ—Ä–∏–≤–∞–Ω–Ω—è –∑–∞–ø–∏—Ç—É

–ù–∞–π–ø—Ä–æ—Å—Ç—ñ—à–∏–π –ø—Ä–∏–∫–ª–∞–¥ –ø–µ—Ä–µ—Ä–∏–≤–∞–Ω–Ω—è fetch-–∑–∞–ø–∏—Ç—É:

```javascript showLineNumbers
// –°—Ç–≤–æ—Ä—é—î–º–æ –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä
const controller = new AbortController()

// –ü–µ—Ä–µ–¥–∞—î–º–æ signal —É fetch
fetch('https://api.github.com/repos/microsoft/vscode/commits?per_page=100', {
    signal: controller.signal,
})
    .then((response) => response.json())
    .then((data) => console.log('–û—Ç—Ä–∏–º–∞–Ω–æ –∫–æ–º–º—ñ—Ç—ñ–≤:', data.length))
    .catch((error) => {
        if (error.name === 'AbortError') {
            console.log('‚úã –ó–∞–ø–∏—Ç —Å–∫–∞—Å–æ–≤–∞–Ω–æ')
        } else {
            console.error('‚ùå –ü–æ–º–∏–ª–∫–∞:', error)
        }
    })

// –°–∫–∞—Å–æ–≤—É—î–º–æ –∑–∞–ø–∏—Ç (–º–æ–∂–Ω–∞ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ –≤ –±—É–¥—å-—è–∫–∏–π –º–æ–º–µ–Ω—Ç)
controller.abort()
```

**–†–æ–∑–±—ñ—Ä –∫–æ–¥—É:**

-   **–†—è–¥–æ–∫ 2:** –°—Ç–≤–æ—Ä—é—î–º–æ –µ–∫–∑–µ–º–ø–ª—è—Ä `AbortController`
-   **–†—è–¥–æ–∫ 5-6:** –ü–µ—Ä–µ–¥–∞—î–º–æ `controller.signal` –≤ –æ–ø—Ü—ñ—ó fetch
-   **–†—è–¥–æ–∫ 11:** –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —á–∏ –ø–æ–º–∏–ª–∫–∞ ‚Äî —Ü–µ `AbortError`
-   **–†—è–¥–æ–∫ 19:** –í–∏–∫–ª–∏–∫–∞—î–º–æ `abort()` –¥–ª—è –ø–µ—Ä–µ—Ä–∏–≤–∞–Ω–Ω—è

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ø–µ—Ä–µ—Ä–∏–≤–∞–Ω–Ω—è —á–µ—Ä–µ–∑ —Ç–∞–π–º–∞—É—Ç

–†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è —Ç–∞–π–º–∞—É—Ç—É –¥–ª—è fetch-–∑–∞–ø–∏—Ç—ñ–≤:

```javascript
function fetchWithTimeout(url, options = {}, timeout = 5000) {
    // –°—Ç–≤–æ—Ä—é—î–º–æ –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä
    const controller = new AbortController()

    // –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ —Ç–∞–π–º–µ—Ä
    const timeoutId = setTimeout(() => {
        controller.abort()
    }, timeout)

    // –í—ñ–¥–ø—Ä–∞–≤–ª—è—î–º–æ –∑–∞–ø–∏—Ç
    return fetch(url, {
        ...options,
        signal: controller.signal,
    })
        .then((response) => {
            clearTimeout(timeoutId) // –û—á–∏—â–∞—î–º–æ —Ç–∞–π–º–µ—Ä –ø—Ä–∏ —É—Å–ø—ñ—Ö—É
            return response
        })
        .catch((error) => {
            clearTimeout(timeoutId) // –û—á–∏—â–∞—î–º–æ —Ç–∞–π–º–µ—Ä –ø—Ä–∏ –ø–æ–º–∏–ª—Ü—ñ

            if (error.name === 'AbortError') {
                throw new Error(`–ó–∞–ø–∏—Ç –ø–µ—Ä–µ–≤–∏—â–∏–≤ —á–∞—Å –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è (${timeout}ms)`)
            }
            throw error
        })
}

// –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
async function loadData() {
    try {
        const response = await fetchWithTimeout(
            'https://api.github.com/repos/facebook/react/commits',
            {},
            3000, // 3 —Å–µ–∫—É–Ω–¥–∏ –º–∞–∫—Å–∏–º—É–º
        )
        const data = await response.json()
        console.log('–î–∞–Ω—ñ –æ—Ç—Ä–∏–º–∞–Ω–æ:', data.length, '–∫–æ–º–º—ñ—Ç—ñ–≤')
    } catch (error) {
        console.error('–ü–æ–º–∏–ª–∫–∞:', error.message)
    }
}

loadData()
```

::note
**–ß–æ–º—É –≤–∞–∂–ª–∏–≤–æ clearTimeout?**

–ü—ñ—Å–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –∑–∞–ø–∏—Ç—É (—É—Å–ø—ñ—à–Ω–æ —á–∏ –Ω—ñ) –ø–æ—Ç—Ä—ñ–±–Ω–æ –æ–±–æ–≤'—è–∑–∫–æ–≤–æ –æ—á–∏—Å—Ç–∏—Ç–∏ —Ç–∞–π–º–µ—Ä —á–µ—Ä–µ–∑ `clearTimeout()`, —â–æ–± —É–Ω–∏–∫–Ω—É—Ç–∏ –≤–∏—Ç–æ–∫—É –ø–∞–º'—è—Ç—ñ.
::

### –Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏–π –ø—Ä–∏–∫–ª–∞–¥ –∑ UI

–°—Ç–≤–æ—Ä–∏–º–æ –ø—Ä–∞–∫—Ç–∏—á–Ω–∏–π –ø—Ä–∏–∫–ª–∞–¥ –∑ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—é —Å–∫–∞—Å—É–≤–∞–Ω–Ω—è:

```html
<!DOCTYPE html>
<html>
    <head>
        <title>–°–∫–∞—Å—É–≤–∞–Ω–Ω—è fetch-–∑–∞–ø–∏—Ç—É</title>
        <style>
            body {
                font-family: Arial, sans-serif;
                max-width: 600px;
                margin: 50px auto;
                padding: 20px;
            }

            .container {
                border: 2px solid #3b82f6;
                border-radius: 8px;
                padding: 20px;
                background: #f8fafc;
            }

            button {
                padding: 10px 20px;
                font-size: 16px;
                border: none;
                border-radius: 5px;
                cursor: pointer;
                margin-right: 10px;
                transition: background 0.3s;
            }

            #fetchBtn {
                background: #3b82f6;
                color: white;
            }

            #fetchBtn:hover:not(:disabled) {
                background: #2563eb;
            }

            #abortBtn {
                background: #ef4444;
                color: white;
            }

            #abortBtn:hover:not(:disabled) {
                background: #dc2626;
            }

            button:disabled {
                background: #cbd5e1;
                cursor: not-allowed;
            }

            #status {
                margin-top: 20px;
                padding: 15px;
                border-radius: 5px;
                background: white;
                min-height: 50px;
            }

            .loading {
                color: #3b82f6;
            }

            .success {
                color: #10b981;
            }

            .error {
                color: #ef4444;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <h2>–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—è AbortController</h2>

            <div>
                <button id="fetchBtn">üöÄ –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –¥–∞–Ω—ñ</button>
                <button id="abortBtn" disabled>‚ùå –°–∫–∞—Å—É–≤–∞—Ç–∏</button>
            </div>

            <div id="status">–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –∫–Ω–æ–ø–∫—É –¥–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö</div>
        </div>

        <script>
            let controller = null

            const fetchBtn = document.getElementById('fetchBtn')
            const abortBtn = document.getElementById('abortBtn')
            const statusDiv = document.getElementById('status')

            fetchBtn.addEventListener('click', async () => {
                // –°—Ç–≤–æ—Ä—é—î–º–æ –Ω–æ–≤–∏–π –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä
                controller = new AbortController()

                // –û–Ω–æ–≤–ª—é—î–º–æ UI
                fetchBtn.disabled = true
                abortBtn.disabled = false
                statusDiv.className = 'loading'
                statusDiv.textContent = '‚è≥ –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö...'

                try {
                    const response = await fetch('https://api.github.com/repos/nodejs/node/commits?per_page=100', {
                        signal: controller.signal,
                    })

                    if (!response.ok) {
                        throw new Error(`HTTP ${response.status}`)
                    }

                    const data = await response.json()

                    // –£—Å–ø—ñ—Ö
                    statusDiv.className = 'success'
                    statusDiv.innerHTML = `
          ‚úÖ <strong>–£—Å–ø—ñ—à–Ω–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ!</strong><br>
          –û—Ç—Ä–∏–º–∞–Ω–æ ${data.length} –∫–æ–º–º—ñ—Ç—ñ–≤<br>
          –û—Å—Ç–∞–Ω–Ω—ñ–π –∫–æ–º–º—ñ—Ç–µ—Ä: ${data[0].commit.author.name}
        `
                } catch (error) {
                    // –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫
                    statusDiv.className = 'error'

                    if (error.name === 'AbortError') {
                        statusDiv.textContent = '‚ö†Ô∏è –ó–∞–ø–∏—Ç —Å–∫–∞—Å–æ–≤–∞–Ω–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º'
                    } else {
                        statusDiv.textContent = '‚ùå –ü–æ–º–∏–ª–∫–∞: ' + error.message
                    }
                } finally {
                    // –í—ñ–¥–Ω–æ–≤–ª—é—î–º–æ UI
                    fetchBtn.disabled = false
                    abortBtn.disabled = true
                    controller = null
                }
            })

            abortBtn.addEventListener('click', () => {
                if (controller) {
                    controller.abort()
                }
            })
        </script>
    </body>
</html>
```

**–ö–ª—é—á–æ–≤—ñ –æ—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ:**

-   –ö–Ω–æ–ø–∫–∞ "–°–∫–∞—Å—É–≤–∞—Ç–∏" –∞–∫—Ç–∏–≤–Ω–∞ –ª–∏—à–µ –ø—ñ–¥ —á–∞—Å –∑–∞–ø–∏—Ç—É
-   –í—ñ–∑—É–∞–ª—å–Ω–∏–π feedback –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö —Å—Ç–∞–Ω—ñ–≤ (–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è, —É—Å–ø—ñ—Ö, –ø–æ–º–∏–ª–∫–∞)
-   –ü—Ä–∞–≤–∏–ª—å–Ω–∞ –æ–±—Ä–æ–±–∫–∞ `AbortError`

## –†–æ–∑—à–∏—Ä–µ–Ω—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—ó

### –°–∫–∞—Å—É–≤–∞–Ω–Ω—è –º–Ω–æ–∂–∏–Ω–Ω–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤

–û–¥–∏–Ω `AbortController` –º–æ–∂–µ –∫–µ—Ä—É–≤–∞—Ç–∏ –∫—ñ–ª—å–∫–æ–º–∞ –∑–∞–ø–∏—Ç–∞–º–∏ –æ–¥–Ω–æ—á–∞—Å–Ω–æ:

```javascript
async function loadMultipleRepositories(repoNames) {
    const controller = new AbortController()

    // –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ –≥–ª–æ–±–∞–ª—å–Ω–∏–π —Ç–∞–π–º–∞—É—Ç
    const timeoutId = setTimeout(() => {
        controller.abort()
    }, 10000) // 10 —Å–µ–∫—É–Ω–¥ –¥–ª—è –≤—Å—ñ—Ö –∑–∞–ø–∏—Ç—ñ–≤

    try {
        // –°—Ç–≤–æ—Ä—é—î–º–æ –º–∞—Å–∏–≤ –ø—Ä–æ–º—ñ—Å—ñ–≤
        const promises = repoNames.map((repo) =>
            fetch(`https://api.github.com/repos/${repo}`, {
                signal: controller.signal,
            }).then((r) => r.json()),
        )

        // –ß–µ–∫–∞—î–º–æ –≤—Å—ñ –∑–∞–ø–∏—Ç–∏
        const results = await Promise.all(promises)

        clearTimeout(timeoutId)

        console.log('‚úÖ –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó–≤:', results.length)
        results.forEach((repo) => {
            console.log(`- ${repo.full_name}: ‚≠ê ${repo.stargazers_count}`)
        })

        return results
    } catch (error) {
        clearTimeout(timeoutId)

        if (error.name === 'AbortError') {
            console.log('‚ö†Ô∏è –í—Å—ñ –∑–∞–ø–∏—Ç–∏ —Å–∫–∞—Å–æ–≤–∞–Ω–æ')
        } else {
            console.error('‚ùå –ü–æ–º–∏–ª–∫–∞:', error)
        }
        throw error
    }
}

// –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
const repos = ['facebook/react', 'microsoft/vscode', 'nodejs/node']

loadMultipleRepositories(repos)
    .then(() => console.log('–ì–æ—Ç–æ–≤–æ!'))
    .catch((error) => console.error('–§–∞—Ç–∞–ª—å–Ω–∞ –ø–æ–º–∏–ª–∫–∞:', error))

// –ú–æ–∂–Ω–∞ —Å–∫–∞—Å—É–≤–∞—Ç–∏ –≤—Å—ñ –∑–∞–ø–∏—Ç–∏ –æ–¥–Ω–æ—á–∞—Å–Ω–æ:
// controller.abort();
```

### –ü–æ—à—É–∫ –∑ –¥–µ–±–∞—É–Ω—Å–∏–Ω–≥–æ–º (—Å–∫–∞—Å—É–≤–∞–Ω–Ω—è –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ—Ö –∑–∞–ø–∏—Ç—ñ–≤)

–ö–ª–∞—Å–∏—á–Ω–∞ –∑–∞–¥–∞—á–∞: –ø–æ—à—É–∫ –∑ –∞–≤—Ç–æ–¥–æ–ø–æ–≤–Ω–µ–Ω–Ω—è–º. –ö–æ–∂–µ–Ω –Ω–æ–≤–∏–π —Å–∏–º–≤–æ–ª —Å–∫–∞—Å–æ–≤—É—î –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–π –∑–∞–ø–∏—Ç:

```html
<!DOCTYPE html>
<html>
    <head>
        <title>–ü–æ—à—É–∫ –∑ –¥–µ–±–∞—É–Ω—Å–∏–Ω–≥–æ–º</title>
        <style>
            body {
                font-family: Arial, sans-serif;
                max-width: 600px;
                margin: 50px auto;
                padding: 20px;
            }

            input {
                width: 100%;
                padding: 12px;
                font-size: 16px;
                border: 2px solid #3b82f6;
                border-radius: 5px;
                box-sizing: border-box;
            }

            #results {
                margin-top: 20px;
            }

            .result-item {
                padding: 10px;
                border-bottom: 1px solid #e2e8f0;
                cursor: pointer;
            }

            .result-item:hover {
                background: #f1f5f9;
            }

            .loading {
                color: #64748b;
                font-style: italic;
            }
        </style>
    </head>
    <body>
        <h2>üîç –ü–æ—à—É–∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó–≤ GitHub</h2>
        <input type="text" id="searchInput" placeholder="–í–≤–µ–¥—ñ—Ç—å –Ω–∞–∑–≤—É (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, 'react')..." />
        <div id="results"></div>

        <script>
            let currentController = null

            const searchInput = document.getElementById('searchInput')
            const resultsDiv = document.getElementById('results')

            searchInput.addEventListener('input', async (e) => {
                const query = e.target.value.trim()

                // –°–∫–∞—Å–æ–≤—É—î–º–æ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–π –∑–∞–ø–∏—Ç
                if (currentController) {
                    currentController.abort()
                }

                // –Ø–∫—â–æ –∑–∞–ø–∏—Ç –ø–æ—Ä–æ–∂–Ω—ñ–π, –æ—á–∏—â–∞—î–º–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏
                if (!query) {
                    resultsDiv.innerHTML = ''
                    return
                }

                // –°—Ç–≤–æ—Ä—é—î–º–æ –Ω–æ–≤–∏–π –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä
                currentController = new AbortController()

                // –ü–æ–∫–∞–∑—É—î–º–æ —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
                resultsDiv.innerHTML = '<div class="loading">‚è≥ –ü–æ—à—É–∫...</div>'

                try {
                    const response = await fetch(
                        `https://api.github.com/search/repositories?q=${encodeURIComponent(query)}&per_page=10`,
                        { signal: currentController.signal },
                    )

                    const data = await response.json()

                    // –í—ñ–¥–æ–±—Ä–∞–∂–∞—î–º–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏
                    if (data.items && data.items.length > 0) {
                        resultsDiv.innerHTML = data.items
                            .map(
                                (repo) => `
            <div class="result-item">
              <strong>${repo.full_name}</strong><br>
              <small>‚≠ê ${repo.stargazers_count} | üç¥ ${repo.forks_count}</small><br>
              <small>${repo.description || '–ë–µ–∑ –æ–ø–∏—Å—É'}</small>
            </div>
          `,
                            )
                            .join('')
                    } else {
                        resultsDiv.innerHTML = '<div class="loading">–ù—ñ—á–æ–≥–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ</div>'
                    }
                } catch (error) {
                    // –Ü–≥–Ω–æ—Ä—É—î–º–æ AbortError (—Ü–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –ø—Ä–∏ –¥–µ–±–∞—É–Ω—Å–∏–Ω–≥—É)
                    if (error.name !== 'AbortError') {
                        resultsDiv.innerHTML = `<div style="color: red;">–ü–æ–º–∏–ª–∫–∞: ${error.message}</div>`
                    }
                }
            })
        </script>
    </body>
</html>
```

**–Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î:**

1. –ö–æ–∂–µ–Ω –Ω–æ–≤–∏–π —Å–∏–º–≤–æ–ª —Å–∫–∞—Å–æ–≤—É—î –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–π –∑–∞–ø–∏—Ç —á–µ—Ä–µ–∑ `controller.abort()`
2. –°—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –Ω–æ–≤–∏–π –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä –¥–ª—è –Ω–æ–≤–æ–≥–æ –∑–∞–ø–∏—Ç—É
3. `AbortError` —ñ–≥–Ω–æ—Ä—É—î—Ç—å—Å—è ‚Äî —Ü–µ –æ—á—ñ–∫—É–≤–∞–Ω–∞ –ø–æ–≤–µ–¥—ñ–Ω–∫–∞ –ø—Ä–∏ –¥–µ–±–∞—É–Ω—Å–∏–Ω–≥—É

### –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ –≤–ª–∞—Å–Ω–∏–º–∏ async-—Ñ—É–Ω–∫—Ü—ñ—è–º–∏

AbortController –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –Ω–µ —Ç—ñ–ª—å–∫–∏ –∑ fetch, –∞–ª–µ –π –∑ –≤–ª–∞—Å–Ω–∏–º–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏–º–∏ –æ–ø–µ—Ä–∞—Ü—ñ—è–º–∏:

```javascript
async function longRunningTask(signal) {
    return new Promise((resolve, reject) => {
        // –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —á–∏ –≤–∂–µ —Å–∫–∞—Å–æ–≤–∞–Ω–æ
        if (signal.aborted) {
            reject(new DOMException('–°–∫–∞—Å–æ–≤–∞–Ω–æ', 'AbortError'))
            return
        }

        // –ü—ñ–¥–ø–∏—Å—É—î–º–æ—Å—è –Ω–∞ –ø–æ–¥—ñ—é abort
        signal.addEventListener('abort', () => {
            reject(new DOMException('–°–∫–∞—Å–æ–≤–∞–Ω–æ', 'AbortError'))
        })

        // –Ü–º—ñ—Ç—É—î–º–æ –¥–æ–≤–≥—É –æ–ø–µ—Ä–∞—Ü—ñ—é
        let progress = 0
        const interval = setInterval(() => {
            progress += 10
            console.log(`–ü—Ä–æ–≥—Ä–µ—Å: ${progress}%`)

            if (progress >= 100) {
                clearInterval(interval)
                resolve('–ó–∞–≤–¥–∞–Ω–Ω—è –≤–∏–∫–æ–Ω–∞–Ω–æ!')
            }
        }, 500)

        // –û—á–∏—â–∞—î–º–æ —ñ–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–∏ –ø–µ—Ä–µ—Ä–∏–≤–∞–Ω–Ω—ñ
        signal.addEventListener('abort', () => {
            clearInterval(interval)
        })
    })
}

// –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
async function runTask() {
    const controller = new AbortController()

    // –°–∫–∞—Å–æ–≤—É—î–º–æ —á–µ—Ä–µ–∑ 2 —Å–µ–∫—É–Ω–¥–∏
    setTimeout(() => {
        console.log('‚ö†Ô∏è –°–∫–∞—Å–æ–≤—É—î–º–æ –∑–∞–≤–¥–∞–Ω–Ω—è...')
        controller.abort()
    }, 2000)

    try {
        const result = await longRunningTask(controller.signal)
        console.log('‚úÖ', result)
    } catch (error) {
        if (error.name === 'AbortError') {
            console.log('‚ö†Ô∏è –ó–∞–≤–¥–∞–Ω–Ω—è —Å–∫–∞—Å–æ–≤–∞–Ω–æ')
        } else {
            console.error('‚ùå –ü–æ–º–∏–ª–∫–∞:', error)
        }
    }
}

runTask()
```

::caution
**–í–∞–∂–ª–∏–≤–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—Ç–∏ signal.aborted**

–ó–∞–≤–∂–¥–∏ –ø–µ—Ä–µ–≤—ñ—Ä—è–π—Ç–µ `signal.aborted` –Ω–∞ –ø–æ—á–∞—Ç–∫—É —Ñ—É–Ω–∫—Ü—ñ—ó —Ç–∞ –ø—ñ—Å–ª—è await/async –æ–ø–µ—Ä–∞—Ü—ñ–π, —â–æ–± —É–Ω–∏–∫–Ω—É—Ç–∏ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è —Å–∫–∞—Å–æ–≤–∞–Ω–æ–≥–æ –∫–æ–¥—É.

```javascript
async function myAsyncFn(signal) {
    if (signal.aborted) {
        throw new DOMException('Aborted', 'AbortError')
    }

    await someOperation()

    // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—ñ—Å–ª—è async –æ–ø–µ—Ä–∞—Ü—ñ—ó
    if (signal.aborted) {
        throw new DOMException('Aborted', 'AbortError')
    }

    // ...–ø—Ä–æ–¥–æ–≤–∂—É—î–º–æ —Ä–æ–±–æ—Ç—É
}
```

::

## –ü—ñ–¥—Å—É–º–∫–∏

AbortController ‚Äî –ø–æ—Ç—É–∂–Ω–∏–π —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∫–µ—Ä—É–≤–∞–Ω–Ω—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∏–º–∏ –æ–ø–µ—Ä–∞—Ü—ñ—è–º–∏:

::card-group
::card{title="–ë–∞–∑–æ–≤–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è" icon="i-lucide-power-off"}

```javascript
const controller = new AbortController()

fetch(url, { signal: controller.signal })
    .then(...)
    .catch((error) => {
        if (error.name === 'AbortError') {
            // –°–∫–∞—Å–æ–≤–∞–Ω–æ
        }
    })

// –°–∫–∞—Å—É–≤–∞—Ç–∏
controller.abort()
```

::

::card{title="–¢–∞–π–º–∞—É—Ç" icon="i-lucide-timer"}

```javascript
const controller = new AbortController()

setTimeout(() => controller.abort(), 5000)

fetch(url, { signal: controller.signal })
```

::

::card{title="–ú–Ω–æ–∂–∏–Ω–Ω—ñ –∑–∞–ø–∏—Ç–∏" icon="i-lucide-layers"}

```javascript
const controller = new AbortController()

const promises = urls.map((url) => fetch(url, { signal: controller.signal }))

await Promise.all(promises)

// –°–∫–∞—Å—É—î –í–°–Ü –∑–∞–ø–∏—Ç–∏
controller.abort()
```

::

::card{title="–î–µ–±–∞—É–Ω—Å–∏–Ω–≥ –ø–æ—à—É–∫—É" icon="i-lucide-search"}

```javascript
let controller = null

input.oninput = async () => {
    // –°–∫–∞—Å–æ–≤—É—î–º–æ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–π
    controller?.abort()

    controller = new AbortController()

    await fetch(url, {
        signal: controller.signal,
    })
}
```

::
::

### –ö–ª—é—á–æ–≤—ñ –∫–æ–Ω—Ü–µ–ø—Ü—ñ—ó

| –ö–æ–Ω—Ü–µ–ø—Ü—ñ—è           | –û–ø–∏—Å                                             |
| :------------------ | :----------------------------------------------- |
| **AbortController** | –û–±'—î–∫—Ç, —â–æ –∫–µ—Ä—É—î —Å–∫–∞—Å—É–≤–∞–Ω–Ω—è–º –æ–ø–µ—Ä–∞—Ü—ñ–π            |
| **signal**          | –°–∏–≥–Ω–∞–ª, —â–æ –ø–µ—Ä–µ–¥–∞—î—Ç—å—Å—è —É —Ñ—É–Ω–∫—Ü—ñ—ó –¥–ª—è –º–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥—É |
| **abort()**         | –ú–µ—Ç–æ–¥, —â–æ –ø–µ—Ä–µ—Ä–∏–≤–∞—î –æ–ø–µ—Ä–∞—Ü—ñ—é                     |
| **AbortError**      | –ü–æ–º–∏–ª–∫–∞, —â–æ –≥–µ–Ω–µ—Ä—É—î—Ç—å—Å—è –ø—Ä–∏ –ø–µ—Ä–µ—Ä–∏–≤–∞–Ω–Ω—ñ          |
| **signal.aborted**  | –í–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Å—Ç–∞–Ω—É                  |

### –¢–∏–ø–æ–≤—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—ó –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

‚úÖ **–ö–æ–ª–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏:**

-   –ó–∞–ø–∏—Ç–∏, —è–∫—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –º–æ–∂–µ —Å–∫–∞—Å—É–≤–∞—Ç–∏ (–∫–Ω–æ–ø–∫–∞ "–°—Ç–æ–ø")
-   –¢–∞–π–º–∞—É—Ç–∏ –¥–ª—è –∑–∞–ø–∏—Ç—ñ–≤
-   –ü–æ—à—É–∫ –∑ –∞–≤—Ç–æ–¥–æ–ø–æ–≤–Ω–µ–Ω–Ω—è–º (–¥–µ–±–∞—É–Ω—Å–∏–Ω–≥)
-   –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–Ω—è –º—ñ–∂ –≤–∫–ª–∞–¥–∫–∞–º–∏ (—Å–∫–∞—Å—É–≤–∞–Ω–Ω—è –∑–∞–ø–∏—Ç—ñ–≤ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ—ó –≤–∫–ª–∞–¥–∫–∏)
-   –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤ –∑ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—é —Å–∫–∞—Å—É–≤–∞–Ω–Ω—è

‚ùå **–ö–æ–ª–∏ –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ:**

-   –ö—Ä–∏—Ç–∏—á–Ω—ñ –∑–∞–ø–∏—Ç–∏, —è–∫—ñ –ø–æ–≤–∏–Ω–Ω—ñ –∑–∞–≤–µ—Ä—à–∏—Ç–∏—Å—è (–æ–ø–ª–∞—Ç–∞, –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è)
-   –ö–æ—Ä–æ—Ç–∫—ñ –∑–∞–ø–∏—Ç–∏ (<100ms)
-   –ó–∞–ø–∏—Ç–∏ –±–µ–∑ user interaction

::warning
**–û–±—Ä–æ–±–∫–∞ AbortError –æ–±–æ–≤ º—è–∑–∫–æ–≤–∞**

–ó–∞–≤–∂–¥–∏ –æ–±—Ä–æ–±–ª—è–π—Ç–µ `AbortError` –æ–∫—Ä–µ–º–æ –≤—ñ–¥ —ñ–Ω—à–∏—Ö –ø–æ–º–∏–ª–æ–∫. –°–∫–∞—Å—É–≤–∞–Ω–Ω—è ‚Äî —Ü–µ –Ω–æ—Ä–º–∞–ª—å–Ω–∏–π —Å—Ü–µ–Ω–∞—Ä—ñ–π, –∞ –Ω–µ –≤–∏–Ω—è—Ç–∫–æ–≤–∏–π:

```javascript
try {
    await fetch(url, { signal })
} catch (error) {
    if (error.name === 'AbortError') {
        // –ù–æ—Ä–º–∞–ª—å–Ω–∞ –ø–æ–≤–µ–¥—ñ–Ω–∫–∞ ‚Äî –ª–æ–≥—É—î–º–æ –∞–±–æ —ñ–≥–Ω–æ—Ä—É—î–º–æ
        return
    }
    // –°–ø—Ä–∞–≤–∂–Ω—è –ø–æ–º–∏–ª–∫–∞ ‚Äî –æ–±—Ä–æ–±–ª—è—î–º–æ —Å–µ—Ä–π–æ–∑–Ω–æ
    throw error
}
```

::

–£ –Ω–∞—Å—Ç—É–ø–Ω–æ–º—É —Ä–æ–∑–¥—ñ–ª—ñ –º–∏ —Ä–æ–∑–≥–ª—è–Ω–µ–º–æ CORS (Cross-Origin Resource Sharing) ‚Äî –º–µ—Ö–∞–Ω—ñ–∑–º –±–µ–∑–ø–µ–∫–∏ –±—Ä–∞—É–∑–µ—Ä–∞, —è–∫–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—é—î –∑–∞–ø–∏—Ç–∏ –º—ñ–∂ —Ä—ñ–∑–Ω–∏–º–∏ –¥–æ–º–µ–Ω–∞–º–∏.

## –î–æ–¥–∞—Ç–∫–æ–≤—ñ —Ä–µ—Å—É—Ä—Å–∏

-   [MDN: AbortController](https://developer.mozilla.org/en-US/docs/Web/API/AbortController) ‚Äî –ø–æ–≤–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
-   [MDN: AbortSignal](https://developer.mozilla.org/en-US/docs/Web/API/AbortSignal) ‚Äî –¥–µ—Ç–∞–ª—ñ –ø—Ä–æ signal
-   [DOM Standard: Aborting](https://dom.spec.whatwg.org/#aborting-ongoing-activities) ‚Äî –æ—Ñ—ñ—Ü—ñ–π–Ω–∞ —Å–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ—è
-   [Can I Use: AbortController](https://caniuse.com/abortcontroller) ‚Äî –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ –±—Ä–∞—É–∑–µ—Ä–∞–º–∏
