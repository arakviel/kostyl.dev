---
title: Cookies, document.cookie —Ç–∞ —Å–≤—ñ—Ç –ø—ñ—Å–ª—è "Cookiepocalypse"
description: –ï–Ω—Ü–∏–∫–ª–æ–ø–µ–¥—ñ—è –ø—Ä–æ HTTP Cookies. –í—ñ–¥ `document.cookie` –¥–æ –∞—Ç—Ä–∏–±—É—Ç—ñ–≤ –±–µ–∑–ø–µ–∫–∏ (SameSite, Secure), –±–æ—Ä–æ—Ç—å–±–∏ –∑ CSRF/XSS —Ç–∞ –º–∞–π–±—É—Ç–Ω—å–æ–≥–æ –±–µ–∑ —Å—Ç–æ—Ä–æ–Ω–Ω—ñ—Ö cookies.
---

# Cookies: –ü–æ–≤–Ω–∏–π –≥—ñ–¥ –ø–æ –∫—Ä–∏—Ö—Ç–∞–º –≤–µ–±—É

## –í—Å—Ç—É–ø: –©–æ —Ü–µ —ñ —á–æ–º—É –≤–æ–Ω–æ –≤—Å–µ —â–µ —Ç—É—Ç?

–§–∞–π–ª–∏ **Cookie** (–∫—É–∫–∏, —Ä–µ–ø'—è—à–∫–∏) ‚Äî —Ü–µ, –º–∞–±—É—Ç—å, –Ω–∞–π—Å—Ç–∞—Ä—ñ—à–∞ —Ç–∞ –Ω–∞–π–≤—ñ–¥–æ–º—ñ—à–∞ —Ç–µ—Ö–Ω–æ–ª–æ–≥—ñ—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö –Ω–∞ –∫–ª—ñ—î–Ω—Ç—ñ. –í–æ–Ω–∏ –∑ –Ω–∞–º–∏ –∑ 1994 —Ä–æ–∫—É, –∫–æ–ª–∏ –õ—É –ú–æ–Ω—Ç—É–ª–ª—ñ (Lou Montulli) –≤ Netscape –≤–∏–≥–∞–¥–∞–≤ —Å–ø–æ—Å—ñ–± –∑–∞–ø–∞–º'—è—Ç–∞—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –º—ñ–∂ –∑–∞–ø–∏—Ç–∞–º–∏.

–î–æ –ø–æ—è–≤–∏ cookies –≤–µ–± –±—É–≤ "–±–µ–∑—Å—Ç–∞–Ω—ñ–≤–∏–º" (stateless). –°–µ—Ä–≤–µ—Ä –Ω–µ –º–∞–≤ –ø–∞–º'—è—Ç—ñ. –ö–æ–∂–µ–Ω –∑–∞–ø–∏—Ç –±—É–≤ —è–∫ –ø–µ—Ä—à–∏–π –ø–æ—Ü—ñ–ª—É–Ω–æ–∫ ‚Äî —Å–µ—Ä–≤–µ—Ä –Ω–µ –ø–∞–º'—è—Ç–∞–≤, —Ö—Ç–æ –≤–∏ —ñ —â–æ –≤–∏ —Ä–æ–±–∏–ª–∏ —Å–µ–∫—É–Ω–¥—É —Ç–æ–º—É. Cookies –∑–º—ñ–Ω–∏–ª–∏ –≤—Å–µ, –¥–æ–¥–∞–≤—à–∏ "–ø–∞–º'—è—Ç—å" (state) –¥–æ HTTP.

### –ß–æ–º—É —Ü–µ –≤–∞–∂–ª–∏–≤–æ –∑–Ω–∞—Ç–∏ —É 2025?

–ú–æ–∂–ª–∏–≤–æ, –≤–∏ –¥—É–º–∞—î—Ç–µ: _"–£ –Ω–∞—Å —î LocalStorage, IndexedDB, –Ω–∞–≤—ñ—â–æ –º–µ–Ω—ñ —Ü—ñ —Å—Ç–∞—Ä—ñ cookies?"_

1.  **–ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è:** –¶–µ –≤—Å–µ —â–µ **—î–¥–∏–Ω–∏–π** –±–µ–∑–ø–µ—á–Ω–∏–π —Å–ø–æ—Å—ñ–± –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è —Å–µ—Å—ñ–π (–∑–∞–≤–¥—è–∫–∏ `HttpOnly`). LocalStorage –≤—Ä–∞–∑–ª–∏–≤–∏–π –¥–æ XSS.
2.  **–ü–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–∏—Ö –Ω–∞ —Å–µ—Ä–≤–µ—Ä:** Cookies _–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ_ –ª–µ—Ç—è—Ç—å —ñ–∑ –∫–æ–∂–Ω–∏–º –∑–∞–ø–∏—Ç–æ–º. –í–∞–º –Ω–µ —Ç—Ä–µ–±–∞ –¥–æ–¥–∞–≤–∞—Ç–∏ —ó—Ö –≤—Ä—É—á–Ω—É –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∏, —è–∫ JWT —Ç–æ–∫–µ–Ω–∏.
3.  **Tracking & Analytics:** –í–µ—Å—å —Ä–µ–∫–ª–∞–º–Ω–∏–π –±—ñ–∑–Ω–µ—Å —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç—É –ø–æ–±—É–¥–æ–≤–∞–Ω–∏–π –Ω–∞ –Ω–∏—Ö (—Ö–æ—á–∞ —Ü–µ –∑–º—ñ–Ω—é—î—Ç—å—Å—è).
4.  **–°–∫–ª–∞–¥–Ω—ñ—Å—Ç—å:** Cookies –º–∞—é—Ç—å –Ω–∞–π—Å–∫–ª–∞–¥–Ω—ñ—à—É –º–æ–¥–µ–ª—å –±–µ–∑–ø–µ–∫–∏ (`SameSite`, `Secure`, `Domain`, `Path`), —è–∫—É –∫—Ä–∏—Ç–∏—á–Ω–æ –≤–∞–∂–ª–∏–≤–æ —Ä–æ–∑—É–º—ñ—Ç–∏ Fullstack —Ä–æ–∑—Ä–æ–±–Ω–∏–∫—É.

> [!NOTE]
> Cookie ‚Äî —Ü–µ –ø—Ä–æ—Å—Ç–æ —Ä—è–¥–æ–∫ –∑ –¥–∞–Ω–∏–º–∏ (–∑–∞–∑–≤–∏—á–∞–π `key=value`), —è–∫–∏–π –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –≤ –±—Ä–∞—É–∑–µ—Ä—ñ —ñ _–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ_ –¥–æ–¥–∞—î—Ç—å—Å—è –¥–æ –∑–∞–≥–æ–ª–æ–≤–∫–∞ `Cookie` –ø—Ä–∏ –∫–æ–∂–Ω–æ–º—É –∑–∞–ø–∏—Ç—ñ –¥–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ–≥–æ –¥–æ–º–µ–Ω—É.

---

## –ê–Ω–∞—Ç–æ–º—ñ—è Cookie

–ù–∞ –Ω–∏–∑—å–∫–æ–º—É —Ä—ñ–≤–Ω—ñ, cookie ‚Äî —Ü–µ —á–∞—Å—Ç–∏–Ω–∞ HTTP –ø—Ä–æ—Ç–æ–∫–æ–ª—É ([RFC 6265](https://tools.ietf.org/html/rfc6265)).

### –Ø–∫ —Å–µ—Ä–≤–µ—Ä –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î Cookie?

–°–µ—Ä–≤–µ—Ä –Ω–∞–¥—Å–∏–ª–∞—î –∑–∞–≥–æ–ª–æ–≤–æ–∫ `Set-Cookie` —É –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ:

```http
HTTP/1.1 200 OK
Content-Type: text/html
Set-Cookie: session_id=12345; Secure; HttpOnly; SameSite=Lax
Set-Cookie: user_pref=dark_mode; Max-Age=3600
```

### –Ø–∫ –±—Ä–∞—É–∑–µ—Ä –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î Cookie?

–ü—Ä–∏ –Ω–∞—Å—Ç—É–ø–Ω–æ–º—É –∑–∞–ø–∏—Ç—ñ –¥–æ —Ü—å–æ–≥–æ –∂ –¥–æ–º–µ–Ω—É, –±—Ä–∞—É–∑–µ—Ä –∑–±–∏—Ä–∞—î –≤—Å—ñ –¥–æ—Å—Ç—É–ø–Ω—ñ cookies —ñ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î —ó—Ö –≤ –æ–¥–Ω–æ–º—É –∑–∞–≥–æ–ª–æ–≤–∫—É `Cookie` (—Ä–æ–∑–¥—ñ–ª–µ–Ω—ñ –∫—Ä–∞–ø–∫–æ—é –∑ –∫–æ–º–æ—é):

```http
GET /profile HTTP/1.1
Host: example.com
Cookie: session_id=12345; user_pref=dark_mode
```

---

## –†–æ–±–æ—Ç–∞ –∑ JavaScript: document.cookie

–£ JavaScript –¥–æ—Å—Ç—É–ø –¥–æ cookies —Ä–µ–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π —á–µ—Ä–µ–∑ "–º–∞–≥—ñ—á–Ω—É" –≤–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å `document.cookie`. –¶–µ –Ω–µ –∑–≤–∏—á–∞–π–Ω–∏–π —Ä—è–¥–æ–∫ –æ–±'—î–∫—Ç–∞, –∞ **–∞–∫—Å–µ—Å–æ—Ä** (get/set).

### –ß–∏—Ç–∞–Ω–Ω—è (Getter)

```javascript
const allCookies = document.cookie
console.log(allCookies)
// –í–∏–≤–µ–¥–µ —â–æ—Å—å –Ω–∞ –∑—Ä–∞–∑–æ–∫: "user=John; session_id=xyz; theme=dark"
```

**–ü—Ä–æ–±–ª–µ–º–∏ –ø—Ä–∏ —á–∏—Ç–∞–Ω–Ω—ñ:**

1.  –ú–∏ –æ—Ç—Ä–∏–º—É—î–º–æ **–æ–¥–∏–Ω –¥–æ–≤–≥–∏–π —Ä—è–¥–æ–∫**.
2.  –ú–∏ –±–∞—á–∏–º–æ —Ç—ñ–ª—å–∫–∏ –ø–∞—Ä–∏ `name=value`. –ú–∏ **–Ω–µ –±–∞—á–∏–º–æ** –∞—Ç—Ä–∏–±—É—Ç—ñ–≤ (`expires`, `path`, `domain`, `secure`).
3.  –ú–∏ –Ω–µ –±–∞—á–∏–º–æ `HttpOnly` cookies (—Ü–µ —Ñ—ñ—á–∞ –±–µ–∑–ø–µ–∫–∏).

### –ó–∞–ø–∏—Å (Setter)

–ó–∞–ø–∏—Å –ø—Ä–∞—Ü—é—î –∫–æ–Ω—Ç—Ä—ñ–Ω—Ç—É—ó—Ç–∏–≤–Ω–æ. –ö–æ–ª–∏ –≤–∏ –ø—Ä–∏—Å–≤–æ—é—î—Ç–µ –∑–Ω–∞—á–µ–Ω–Ω—è `document.cookie`, –≤–∏ **–Ω–µ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—É—î—Ç–µ** –≤—Å—ñ cookies, –∞ **–¥–æ–¥–∞—î—Ç–µ –∞–±–æ –æ–Ω–æ–≤–ª—é—î—Ç–µ** –ª–∏—à–µ –æ–¥–Ω—É –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É cookie.

```javascript
// –¶–µ –ù–ï –≤–∏–¥–∞–ª–∏—Ç—å —ñ–Ω—à—ñ cookies! –¶–µ –¥–æ–¥–∞—Å—Ç—å –Ω–æ–≤—É.
document.cookie = 'user=John'

// –¶–µ –æ–Ω–æ–≤–∏—Ç—å —ñ—Å–Ω—É—é—á—É cookie 'user'
document.cookie = 'user=Jane'
```

### –ö–æ–¥—É–≤–∞–Ω–Ω—è –∑–Ω–∞—á–µ–Ω—å (Encoding)

–ó–≥—ñ–¥–Ω–æ –∑—ñ —Å–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ—î—é, —ñ–º'—è —Ç–∞ –∑–Ω–∞—á–µ–Ω–Ω—è cookie –º–æ–∂—É—Ç—å –º—ñ—Å—Ç–∏—Ç–∏ –ª–∏—à–µ –ø–µ–≤–Ω–∏–π –Ω–∞–±—ñ—Ä —Å–∏–º–≤–æ–ª—ñ–≤ ASCII. –ü—Ä–æ–±—ñ–ª–∏, –∫–æ–º–∏, –∫—Ä–∞–ø–∫–∏ –∑ –∫–æ–º–æ—é, –∫–∏—Ä–∏–ª–∏—Ü—è ‚Äî –∑–∞–±–æ—Ä–æ–Ω–µ–Ω—ñ (–∞–±–æ –º–æ–∂—É—Ç—å –∑–ª–∞–º–∞—Ç–∏ –ø–∞—Ä—Å–∏–Ω–≥).

–¢–æ–º—É –ø—Ä–∞–≤–∏–ª–æ ‚Ññ1: **–ó–∞–≤–∂–¥–∏ –∫–æ–¥—É–π—Ç–µ —ñ–º–µ–Ω–∞ —Ç–∞ –∑–Ω–∞—á–µ–Ω–Ω—è!**

```javascript
const name = 'my name'
const value = 'Ivan & Oksana'

// ‚ùå –ù–µ–±–µ–∑–ø–µ—á–Ω–æ:
// document.cookie = name + "=" + value;

// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ:
document.cookie = encodeURIComponent(name) + '=' + encodeURIComponent(value)
// –†–µ–∑—É–ª—å—Ç–∞—Ç: my%20name=Ivan%20%26%20Oksana
```

---

## –ê—Ç—Ä–∏–±—É—Ç–∏ Cookie: –ì–ª–∏–±–æ–∫–µ –∑–∞–Ω—É—Ä–µ–Ω–Ω—è

–ê—Ç—Ä–∏–±—É—Ç–∏ ‚Äî —Ü–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è, —è–∫—ñ –≤–∫–∞–∑—É—é—Ç—å –±—Ä–∞—É–∑–µ—Ä—É, —è–∫ –ø–æ–≤–æ–¥–∏—Ç–∏—Å—è –∑ cookie (–∫–æ–ª–∏ –≤–∏–¥–∞–ª—è—Ç–∏, –∫–æ–º—É –≤—ñ–¥–ø—Ä–∞–≤–ª—è—Ç–∏). –í–æ–Ω–∏ –≤–∫–∞–∑—É—é—Ç—å—Å—è –ø—ñ—Å–ª—è –∫—Ä–∞–ø–∫–∏ –∑ –∫–æ–º–æ—é.

### 1. –ñ–∏—Ç—Ç—î–≤–∏–π —Ü–∏–∫–ª: `Expires` —Ç–∞ `Max-Age`

–ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º (—è–∫—â–æ –∞—Ç—Ä–∏–±—É—Ç–∏ –Ω–µ –≤–∫–∞–∑–∞–Ω—ñ), cookie —î **—Å–µ—Å—ñ–π–Ω–æ—é** (`Session Cookie`). –í–æ–Ω–∞ –∂–∏–≤–µ, –¥–æ–∫–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–µ –∑–∞–∫—Ä–∏—î –±—Ä–∞—É–∑–µ—Ä (—Å–∞–º–µ –±—Ä–∞—É–∑–µ—Ä, –∞ –Ω–µ –≤–∫–ª–∞–¥–∫—É!).

–©–æ–± –∑—Ä–æ–±–∏—Ç–∏ cookie "–≤—ñ—á–Ω–æ—é" (Persistent), —Ç—Ä–µ–±–∞ –≤–∫–∞–∑–∞—Ç–∏ —á–∞—Å –∂–∏—Ç—Ç—è.

#### `expires` (Old school)

–í–∫–∞–∑—É—î –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É –¥–∞—Ç—É –≤ —Ñ–æ—Ä–º–∞—Ç—ñ GMT (UTC), –∫–æ–ª–∏ cookie –ø–æ–º—Ä–µ.

```javascript
// –ñ–∏–≤–µ –¥–æ –ø–µ–≤–Ω–æ—ó –¥–∞—Ç–∏
document.cookie = 'user=John; expires=Tue, 19 Jan 2038 03:14:07 GMT'
```

_–ú—ñ–Ω—É—Å:_ –¢—Ä–µ–±–∞ —Å–∞–º–æ–º—É —Ñ–æ—Ä–º–∞—Ç—É–≤–∞—Ç–∏ –¥–∞—Ç—É (`date.toUTCString()`).

#### `max-age` (Modern)

–í–∫–∞–∑—É—î —á–∞—Å –∂–∏—Ç—Ç—è –≤ **—Å–µ–∫—É–Ω–¥–∞—Ö** –≤—ñ–¥ –ø–æ—Ç–æ—á–Ω–æ–≥–æ –º–æ–º–µ–Ω—Ç—É.

```javascript
// –ñ–∏–≤–µ 1 –≥–æ–¥–∏–Ω—É (3600 —Å–µ–∫)
document.cookie = 'user=John; max-age=3600'

// –ñ–∏–≤–µ 1 —Ä—ñ–∫
document.cookie = 'user=John; max-age=31536000'
```

#### –í–∏–¥–∞–ª–µ–Ω–Ω—è cookie üóëÔ∏è

–ù–µ —ñ—Å–Ω—É—î –º–µ—Ç–æ–¥—É `deleteCookie()`. –©–æ–± –≤–∏–¥–∞–ª–∏—Ç–∏ cookie, —Ç—Ä–µ–±–∞ –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ —ó—ó –∑–Ω–æ–≤—É –∑ **–º–∏–Ω—É–ª–æ—é –¥–∞—Ç–æ—é** –∞–±–æ `max-age=0` (–∞–±–æ -1).

```javascript
document.cookie = 'user=; max-age=0'
```

> [!IMPORTANT]
> –ü—Ä–∏ –≤–∏–¥–∞–ª–µ–Ω–Ω—ñ (—è–∫ —ñ –ø—Ä–∏ –æ–Ω–æ–≤–ª–µ–Ω–Ω—ñ) –≤–∏ –ø–æ–≤–∏–Ω–Ω—ñ –≤–∫–∞–∑–∞—Ç–∏ **—Ç—ñ –∂ —Å–∞–º—ñ** `path` —ñ `domain`, –∑ —è–∫–∏–º–∏ cookie –±—É–ª–∞ —Å—Ç–≤–æ—Ä–µ–Ω–∞! –Ü–Ω–∞–∫—à–µ –≤–∏ –º–æ–∂–µ—Ç–µ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –¥—É–±–ª—ñ–∫–∞—Ç –∞–±–æ –Ω—ñ—á–æ–≥–æ –Ω–µ –≤–∏–¥–∞–ª–∏—Ç–∏.

---

### 2. –û–±–ª–∞—Å—Ç—å –≤–∏–¥–∏–º–æ—Å—Ç—ñ: `Path` —Ç–∞ `Domain`

–¶—ñ –∞—Ç—Ä–∏–±—É—Ç–∏ –∫–æ–Ω—Ç—Ä–æ–ª—é—é—Ç—å, –Ω–∞ —è–∫—ñ URL –±—Ä–∞—É–∑–µ—Ä –±—É–¥–µ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—Ç–∏ cookie.

#### `Path`

–í–∫–∞–∑—É—î URL-—à–ª—è—Ö, –¥–ª—è —è–∫–æ–≥–æ –∞–∫—Ç—É–∞–ª—å–Ω–∞ cookie.

-   `path=/` (—Å—Ç–∞–Ω–¥–∞—Ä—Ç): –¥–æ—Å—Ç—É–ø–Ω–∞ –Ω–∞ –≤—Å—å–æ–º—É —Å–∞–π—Ç—ñ.
-   `path=/admin`: –¥–æ—Å—Ç—É–ø–Ω–∞ –Ω–∞ `/admin`, `/admin/users`, –∞–ª–µ **–Ω–µ** –Ω–∞ `/` —á–∏ `/home`.

```javascript
// –í–∏–¥–Ω–æ —Ç—ñ–ª—å–∫–∏ –≤ –∞–¥–º—ñ–Ω—Ü—ñ
document.cookie = 'admin_token=123; path=/admin'
```

#### `Domain`

–ù–∞–π—Å–∫–ª–∞–¥–Ω—ñ—à–∏–π –∞—Ç—Ä–∏–±—É—Ç. –í—ñ–Ω –∫–æ–Ω—Ç—Ä–æ–ª—é—î –¥–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å –º—ñ–∂ –ø—ñ–¥–¥–æ–º–µ–Ω–∞–º–∏.

**–ü—Ä–∞–≤–∏–ª–æ:** Cookie, –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –Ω–∞ –¥–æ–º–µ–Ω—ñ, –Ω—ñ–∫–æ–ª–∏ –Ω–µ –¥–æ—Å—Ç—É–ø–Ω–∞ –Ω–∞ —ñ–Ω—à–æ–º—É –¥–æ–º–µ–Ω—ñ –¥—Ä—É–≥–æ–≥–æ —Ä—ñ–≤–Ω—è (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥ `site.com` –Ω–µ –±–∞—á–∏—Ç—å cookies `google.com`).

–ê–ª–µ —è–∫ —â–æ–¥–æ `app.site.com` —Ç–∞ `blog.site.com`?

1.  **–ë–µ–∑ `domain` (HostOnly):**
    –Ø–∫—â–æ –≤–∏ –ø–∏—à–µ—Ç–µ `document.cookie = "a=1"`, cookie –ø—Ä–∏–≤'—è–∑—É—î—Ç—å—Å—è **—Ç—ñ–ª—å–∫–∏** –¥–æ –ø–æ—Ç–æ—á–Ω–æ–≥–æ —Ö–æ—Å—Ç–∞.

    -   –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –Ω–∞ `app.site.com`.
    -   –ù–µ –≤–∏–¥–Ω–æ –Ω–∞ `site.com`.
    -   –ù–µ –≤–∏–¥–Ω–æ –Ω–∞ `blog.site.com`.
    -   –ù–µ –≤–∏–¥–Ω–æ –Ω–∞–≤—ñ—Ç—å –Ω–∞ `www.app.site.com`.

2.  **–ó `domain=site.com`:**
    –Ø–∫—â–æ –≤–∏ —è–≤–Ω–æ –≤–∫–∞–∑—É—î—Ç–µ –¥–æ–º–µ–Ω, cookie —Å—Ç–∞—î –¥–æ—Å—Ç—É–ø–Ω–æ—é –Ω–∞ —Ü—å–æ–º—É –¥–æ–º–µ–Ω—ñ **—ñ –≤—Å—ñ—Ö –ø—ñ–¥–¥–æ–º–µ–Ω–∞—Ö**.
    `document.cookie = "a=1; domain=site.com"`
    -   –í–∏–¥–Ω–æ –Ω–∞ `site.com`
    -   –í–∏–¥–Ω–æ –Ω–∞ `app.site.com`
    -   –í–∏–¥–Ω–æ –Ω–∞ `dev.api.site.com`

::mermaid

```mermaid
graph TD
    Root[site.com]
    Sub1[app.site.com]
    Sub2[blog.site.com]
    Deep1[api.app.site.com]

    Cookie1[Cookie: domain=site.com]
    Cookie2[Cookie: domain=app.site.com]
    Cookie3["Cookie: (no domain)"]

    Root --> Sub1
    Root --> Sub2
    Sub1 --> Deep1

    Cookie1 -.-> Root & Sub1 & Sub2 & Deep1
    Cookie2 -.-> Sub1 & Deep1
    Cookie3 -.-> Sub1
```

::

---

### 3. –ë–µ–∑–ø–µ–∫–∞: `Secure`

```javascript
document.cookie = 'user=John; Secure'
```

–ê—Ç—Ä–∏–±—É—Ç `Secure` –∫–∞–∂–µ –±—Ä–∞—É–∑–µ—Ä—É: _"–ù—ñ–∫–æ–ª–∏ –Ω–µ –≤—ñ–¥–ø—Ä–∞–≤–ª—è–π —Ü—é cookie –ø–æ –Ω–µ–∑–∞—Ö–∏—â–µ–Ω–æ–º—É HTTP –∑'—î–¥–Ω–∞–Ω–Ω—é"_. –í–æ–Ω–∞ –ø–æ–ª–µ—Ç–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä —Ç—ñ–ª—å–∫–∏ —è–∫—â–æ –ø—Ä–æ—Ç–æ–∫–æ–ª **HTTPS**.

–¶–µ –∑–∞—Ö–∏—â–∞—î –≤—ñ–¥ –∞—Ç–∞–∫ —Ç–∏–ø—É Man-in-the-Middle, –∫–æ–ª–∏ –∑–ª–æ–≤–º–∏—Å–Ω–∏–∫ –ø–µ—Ä–µ—Ö–æ–ø–ª—é—î —Ç—Ä–∞—Ñ—ñ–∫ —É –≤—ñ–¥–∫—Ä–∏—Ç–æ–º—É Wi-Fi.

> [!NOTE]
> –ù–∞ `localhost` –±—Ä–∞—É–∑–µ—Ä–∏ —Ä–æ–±–ª—è—Ç—å –≤–∏–Ω—è—Ç–æ–∫ —ñ –¥–æ–∑–≤–æ–ª—è—é—Ç—å `Secure` cookies –Ω–∞–≤—ñ—Ç—å –ø–æ http, —â–æ–± —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞–º –±—É–ª–æ –∑—Ä—É—á–Ω–æ.

---

### 4. –ù–µ–≤–∏–¥–∏–º–∫–∞: `HttpOnly`

–¶–µ–π –∞—Ç—Ä–∏–±—É—Ç **–Ω–µ–º–æ–∂–ª–∏–≤–æ** –≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ —á–µ—Ä–µ–∑ JavaScript (`document.cookie`). –í—ñ–Ω –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ —Å–µ—Ä–≤–µ—Ä–æ–º —á–µ—Ä–µ–∑ –∑–∞–≥–æ–ª–æ–≤–æ–∫ `Set-Cookie`.

**–©–æ –≤—ñ–Ω —Ä–æ–±–∏—Ç—å?**
–í—ñ–Ω –∑–∞–±–æ—Ä–æ–Ω—è—î JavaScript —á–∏—Ç–∞—Ç–∏ —Ü—é cookie. `document.cookie` —ó—ó –ø—Ä–æ—Å—Ç–æ –Ω–µ –ø–æ–±–∞—á–∏—Ç—å.

**–ù–∞–≤—ñ—â–æ?**
–¶–µ –≥–æ–ª–æ–≤–Ω–∏–π –∑–∞—Ö–∏—Å—Ç –≤—ñ–¥ **XSS (Cross-Site Scripting)**. –Ø–∫—â–æ —Ö–∞–∫–µ—Ä –∑–Ω–∞–π–¥–µ –≤—Ä–∞–∑–ª–∏–≤—ñ—Å—Ç—å –Ω–∞ –≤–∞—à–æ–º—É —Å–∞–π—Ç—ñ —ñ –∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–≤—ñ–π JS –∫–æ–¥:
`alert(document.cookie)` ‚Äî –≤—ñ–Ω **–Ω–µ –æ—Ç—Ä–∏–º–∞—î** –≤–∞—à—ñ —Å–µ—Å—ñ–π–Ω—ñ —Ç–æ–∫–µ–Ω–∏, —è–∫—â–æ –≤–æ–Ω–∏ `HttpOnly`.

> [!TIP] > **Best Practice:** –£—Å—ñ cookies, —â–æ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—é—Ç—å –∑–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—é (JWT, session ID), **–º—É—Å—è—Ç—å** –±—É—Ç–∏ `HttpOnly`.

---

### 5. –ì–æ–ª–æ–≤–Ω–∏–π —â–∏—Ç: `SameSite`

–ê—Ç—Ä–∏–±—É—Ç `SameSite` –±—É–≤ –≤–≤–µ–¥–µ–Ω–∏–π –¥–ª—è –±–æ—Ä–æ—Ç—å–±–∏ –∑ **CSRF (Cross-Site Request Forgery)** —Ç–∞ –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è–º. –í—ñ–Ω –∫–æ–Ω—Ç—Ä–æ–ª—é—î, —á–∏ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è cookie, –∫–æ–ª–∏ –∑–∞–ø–∏—Ç —ñ–Ω—ñ—Ü—ñ–π–æ–≤–∞–Ω–æ –∑ **—ñ–Ω—à–æ–≥–æ** —Å–∞–π—Ç—É (cross-site).

–Ñ —Ç—Ä–∏ –∑–Ω–∞—á–µ–Ω–Ω—è: `Strict`, `Lax`, `None`.

#### CSRF –ê—Ç–∞–∫–∞ (–¥–ª—è –∫–æ–Ω—Ç–µ–∫—Å—Ç—É)

1. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –∑–∞–ª–æ–≥—ñ–Ω–µ–Ω–∏–π —É –±–∞–Ω–∫—É (`bank.com`). Cookie —Å–µ—Å—ñ—ó —î –≤ –±—Ä–∞—É–∑–µ—Ä—ñ.
2. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –∑–∞—Ö–æ–¥–∏—Ç—å –Ω–∞ `evil.com`.
3. –ù–∞ `evil.com` —î –ø—Ä–∏—Ö–æ–≤–∞–Ω–∞ —Ñ–æ—Ä–º–∞, —è–∫–∞ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î POST –∑–∞–ø–∏—Ç –Ω–∞ `bank.com/transfer` (–ø–µ—Ä–µ–∫–∞–∑–∞—Ç–∏ –≥—Ä–æ—à—ñ).
4. –ë—Ä–∞—É–∑–µ—Ä –±–∞—á–∏—Ç—å –∑–∞–ø–∏—Ç –Ω–∞ `bank.com` —ñ (–∑–∞ —Å—Ç–∞—Ä–∏–º–∏ –ø—Ä–∞–≤–∏–ª–∞–º–∏) **–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –¥–æ–¥–∞—î cookie**.
5. –ë–∞–Ω–∫ –¥—É–º–∞—î, —â–æ —Ü–µ –ª–µ–≥—ñ—Ç–∏–º–Ω–∏–π –∑–∞–ø–∏—Ç –≤—ñ–¥ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞. –ì—Ä–æ—à—ñ –≤–∫—Ä–∞–¥–µ–Ω–æ.

::mermaid

```mermaid
sequenceDiagram
    participant User as üë§ User Browser
    participant Evil as üòà evil.com
    participant Bank as üè¶ bank.com

    Note over User, Bank: 1. User authorized (Has Cookie)
    User->>Bank: Login
    Bank-->>User: Set-Cookie: session=123

    Note over User, Evil: 2. User visits malicious site
    User->>Evil: GET /free-iphone
    Evil-->>User: 200 OK (Hidden Form Auto-submit)

    Note over User, Bank: 3-4. Browser executes POST to Bank
    rect rgba(139, 110, 110, 1)
    User->>Bank: POST /transfer (to: hacker)<br/>Cookie: session=123 ‚ö†Ô∏è
    Note right of User: Browser adds cookie automatically!
    end

    Note over Bank: 5. Bank processes request
    Bank-->>User: 200 OK (Money sent üí∏)
```

::

#### `SameSite=Strict`

Cookie –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è **—Ç—ñ–ª—å–∫–∏** –¥–ª—è First-Party –∑–∞–ø–∏—Ç—ñ–≤ (–∫–æ–ª–∏ –≤–∏ –≤–∂–µ –∑–Ω–∞—Ö–æ–¥–∏—Ç–µ—Å—å –Ω–∞ `bank.com`).
–Ø–∫—â–æ –≤–∏ –ø–µ—Ä–µ–π—à–ª–∏ –∑–∞ –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º –∑ Facebook –Ω–∞ –≤–∞—à –±–∞–Ω–∫, cookie **–Ω–µ –≤—ñ–¥–ø—Ä–∞–≤–∏—Ç—å—Å—è**. –í–∏ –±—É–¥–µ—Ç–µ —Ä–æ–∑–ª–æ–≥—ñ–Ω–µ–Ω—ñ.
–¶–µ —Å—É–ø–µ—Ä –±–µ–∑–ø–µ—á–Ω–æ, –∞–ª–µ –Ω–µ–∑—Ä—É—á–Ω–æ.

#### `SameSite=Lax` (–ó–æ–ª–æ—Ç–∏–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç üõ°Ô∏è)

–¶–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º —É —Å—É—á–∞—Å–Ω–∏—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö. –í–æ–Ω–æ –∑–∞–±–µ–∑–ø–µ—á—É—î –Ω–∞–π–∫—Ä–∞—â–∏–π –±–∞–ª–∞–Ω—Å –º—ñ–∂ –±–µ–∑–ø–µ–∫–æ—é —Ç–∞ –∑—Ä—É—á–Ω—ñ—Å—Ç—é –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.

**–õ–æ–≥—ñ–∫–∞ —Ä–æ–±–æ—Ç–∏:**
Cookie –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä **—Ç—ñ–ª—å–∫–∏** —è–∫—â–æ –≤–∏–∫–æ–Ω—É—é—Ç—å—Å—è –¥–≤—ñ —É–º–æ–≤–∏:

1.  –¶–µ **–Ω–∞–≤—ñ–≥–∞—Ü—ñ—è –≤–µ—Ä—Ö–Ω—å–æ–≥–æ —Ä—ñ–≤–Ω—è** (Top-Level Navigation). –¢–æ–±—Ç–æ URL –≤ –∞–¥—Ä–µ—Å–Ω–æ–º—É —Ä—è–¥–∫—É –±—Ä–∞—É–∑–µ—Ä–∞ –∑–º—ñ–Ω—é—î—Ç—å—Å—è –Ω–∞ –≤–∞—à —Å–∞–π—Ç.
2.  –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è **–±–µ–∑–ø–µ—á–Ω–∏–π HTTP –º–µ—Ç–æ–¥** (–∑–∞–∑–≤–∏—á–∞–π `GET`).

**–ú–∞—Ç—Ä–∏—Ü—è –ø–æ–≤–µ–¥—ñ–Ω–∫–∏:**

| –°—Ü–µ–Ω–∞—Ä—ñ–π                                                      | –¢–∏–ø –∑–∞–ø–∏—Ç—É          | Cookie –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è? | –ü–æ—è—Å–Ω–µ–Ω–Ω—è                                                                   |
| :------------------------------------------------------------ | :------------------ | :--------------------: | :-------------------------------------------------------------------------- |
| üîó **–ö–ª—ñ–∫ –ø–æ –ø–æ—Å–∏–ª–∞–Ω–Ω—é** (`<a href="...">`)                   | `GET` (Navigation)  |       ‚úÖ **–¢–ê–ö**       | –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á —Å–≤—ñ–¥–æ–º–æ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –Ω–∞ —Å–∞–π—Ç. –õ–æ–≥—ñ–Ω –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è.                  |
| üñºÔ∏è **–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—É** (`<img>`, `<iframe>`, `<script>`) | `GET` (Subresource) |       ‚ùå **–ù–Ü**        | –¶–µ —Ñ–æ–Ω–æ–≤–∏–π –∑–∞–ø–∏—Ç –∑ —ñ–Ω—à–æ–≥–æ —Å–∞–π—Ç—É. –ó–∞—Ö–∏—â–∞—î –≤—ñ–¥ —Ç—Ä–µ–∫—ñ–Ω–≥—É —Ç–∞ CSRF.              |
| üìù **–í—ñ–¥–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ä–º–∏** (`<form method="POST">`)               | `POST`              |       ‚ùå **–ù–Ü**        | `POST` ‚Äî –º–µ—Ç–æ–¥, —â–æ –∑–º—ñ–Ω—é—î –¥–∞–Ω—ñ. –ë–ª–æ–∫—É–≤–∞–Ω–Ω—è –∑–∞—Ö–∏—â–∞—î –≤—ñ–¥ –∫–ª–∞—Å–∏—á–Ω–∏—Ö CSRF –∞—Ç–∞–∫. |
| üì° **Fetch / XHR**                                            | `GET`/`POST`        |       ‚ùå **–ù–Ü**        | Cross-site AJAX –∑–∞–ø–∏—Ç–∏ –Ω—ñ–∫–æ–ª–∏ –Ω–µ –ø–µ—Ä–µ–¥–∞—é—Ç—å Lax –∫—É–∫–∏.                        |
| üîÑ **window.location.href**                                   | `GET` (Navigation)  |       ‚úÖ **–¢–ê–ö**       | –ü—Ä–æ–≥—Ä–∞–º–Ω–∞ –Ω–∞–≤—ñ–≥–∞—Ü—ñ—è –ø—Ä–∏—Ä—ñ–≤–Ω—é—î—Ç—å—Å—è –¥–æ –∫–ª—ñ–∫—É –ø–æ –ø–æ—Å–∏–ª–∞–Ω–Ω—é.                    |

**–í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è –∑–∞—Ö–∏—Å—Ç—É (Mermaid):**

```mermaid
flowchart TD
    User((–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á))
    Evil[–°–∞–π—Ç —Ö–∞–∫–µ—Ä–∞\nattacker.com]
    Bank[–í–∞—à —Å–∞–π—Ç\nbank.com]

    User --> Evil

    subgraph Browser["–ë—Ä–∞—É–∑–µ—Ä (Cookie: SameSite=Lax)"]
        direction TB
        Link["1. –ö–ª—ñ–∫ –ø–æ –ø–æ—Å–∏–ª–∞–Ω–Ω—é\n<a href='bank.com'>"]
        Img["2. –ü—Ä–∏—Ö–æ–≤–∞–Ω–∏–π –∑–∞–ø–∏—Ç\n<img src='bank.com/pay'>"]
        Form["3. –ê–≤—Ç–æ-—Ñ–æ—Ä–º–∞\n<form method='POST'>"]
    end

    Evil -.-> Link
    Evil -.-> Img
    Evil -.-> Form

    Link -->|GET Navigation| Allowed{‚úÖ –î–æ–∑–≤–æ–ª–µ–Ω–æ}
    Img -->|Subresource| Blocked{‚ùå –ë–ª–æ–∫–æ–≤–∞–Ω–æ}
    Form -->|POST Method| Blocked

    Allowed -->|Cookie Included| Bank
    Blocked -->|No Cookie| Bank

    style Allowed fill:#d4edda,stroke:#28a745,color:black
    style Blocked fill:#f8d7da,stroke:#dc3545,color:black
```

> [!NOTE]
> –ó–∞–≤–¥—è–∫–∏ `SameSite=Lax`, —è–∫—â–æ –≤–∏ –∑–∞–ª–æ–≥—ñ–Ω–µ–Ω—ñ –≤ Facebook —ñ –ø–µ—Ä–µ–π–¥–µ—Ç–µ –Ω–∞ –Ω—å–æ–≥–æ –∑ —ñ–Ω—à–æ–≥–æ —Å–∞–π—Ç—É –ø–æ –ø–æ—Å–∏–ª–∞–Ω–Ω—é ‚Äî –≤–∏ –∑–∞–ª–∏—à–∏—Ç–µ—Å—å –∑–∞–ª–æ–≥—ñ–Ω–µ–Ω–∏–º. –ê–ª–µ —è–∫—â–æ —ñ–Ω—à–∏–π —Å–∞–π—Ç —Å–ø—Ä–æ–±—É—î –ª–∞–π–∫–Ω—É—Ç–∏ –ø–æ—Å—Ç –∑–∞ –≤–∞—Å —á–µ—Ä–µ–∑ –ø—Ä–∏—Ö–æ–≤–∞–Ω–∏–π –∑–∞–ø–∏—Ç ‚Äî –∫—É–∫–∏ –Ω–µ –ø–µ—Ä–µ–¥–∞–¥—É—Ç—å—Å—è, —ñ Facebook –≤—ñ–¥—Ö–∏–ª–∏—Ç—å –¥—ñ—é.

#### `SameSite=None`

–ü–æ–≤–µ–¥—ñ–Ω–∫–∞ "—è–∫ —Ä–∞–Ω—ñ—à–µ". Cookie –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è –∑–∞–≤–∂–¥–∏, –Ω–∞–≤—ñ—Ç—å —É –∑–∞–ø–∏—Ç–∞—Ö —Å—Ç–æ—Ä–æ–Ω–Ω—ñ—Ö —Ä–µ—Å—É—Ä—Å—ñ–≤ (—Ä–µ–∫–ª–∞–º–Ω—ñ —Ç—Ä–µ–∫–µ—Ä–∏, YouTube embed —ñ —Ç.–¥.).
**–í–∏–º–æ–≥–∞:** –Ø–∫—â–æ `SameSite=None`, –≤–∏ **–∑–æ–±–æ–≤'—è–∑–∞–Ω—ñ** –¥–æ–¥–∞—Ç–∏ `Secure`. –ë–µ–∑ HTTPS —Ç–∞–∫–∞ cookie –±—É–¥–µ –≤—ñ–¥—Ö–∏–ª–µ–Ω–∞ –±—Ä–∞—É–∑–µ—Ä–æ–º.

| –ó–Ω–∞—á–µ–Ω–Ω—è   | –ü–µ—Ä–µ—Ö—ñ–¥ –ø–æ –ø–æ—Å–∏–ª–∞–Ω–Ω—é  | AJAX/Fetch/Form POST | Iframe |
| :--------- | :-------------------: | :------------------: | :----: |
| **Strict** |          ‚ùå           |          ‚ùå          |   ‚ùå   |
| **Lax**    | ‚úÖ (Safe methods GET) |          ‚ùå          |   ‚ùå   |
| **None**   |          ‚úÖ           |          ‚úÖ          |   ‚úÖ   |

---

### 6. –ú–∞–π–±—É—Ç–Ω—î: `Partitioned` (CHIPS)

Google Chrome –ø–ª–∞–Ω—É—î –ø–æ–≤–Ω—ñ—Å—Ç—é –∑–∞–±–ª–æ–∫—É–≤–∞—Ç–∏ —Å—Ç–æ—Ä–æ–Ω–Ω—ñ cookies (`SameSite=None`). –ê–ª–µ —è–∫ –±—É—Ç–∏ —Å–µ—Ä–≤—ñ—Å–∞–º —Ç–∏–ø—É "—á–∞—Ç –ø—ñ–¥—Ç—Ä–∏–º–∫–∏", —è–∫—ñ –≤–±—É–¥–æ–≤—É—é—Ç—å—Å—è –≤ —Ç–∏—Å—è—á—ñ —Å–∞–π—Ç—ñ–≤ —á–µ—Ä–µ–∑ `iframe` —ñ –ø–æ—Ç—Ä–µ–±—É—é—Ç—å –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Å—Ç–∞–Ω—É?

–†—ñ—à–µ–Ω–Ω—è ‚Äî **CHIPS (Cookies Having Independent Partitioned State)**.
–ê—Ç—Ä–∏–±—É—Ç `Partitioned` –∫–∞–∂–µ –±—Ä–∞—É–∑–µ—Ä—É: _"–ó–±–µ—Ä—ñ–≥–∞–π —Ü—é cookie –æ–∫—Ä–µ–º–æ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ —Å–∞–π—Ç—É, –¥–µ –≤–æ–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è"_.

Cookie –≤—ñ–¥ `chat.com` –Ω–∞ —Å–∞–π—Ç—ñ `site-a.com` –±—É–¥–µ –≤—ñ–¥—Ä—ñ–∑–Ω—è—Ç–∏—Å—è –≤—ñ–¥ cookie `chat.com` –Ω–∞ `site-b.com`. –í–æ–Ω–∏ –Ω–µ –∑–º–æ–∂—É—Ç—å "—Å–ø—ñ–ª–∫—É–≤–∞—Ç–∏—Å—è" –º—ñ–∂ —Å–æ–±–æ—é, –∞–ª–µ –∑–º–æ–∂—É—Ç—å –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –≤ –º–µ–∂–∞—Ö –æ–¥–Ω–æ–≥–æ —Å–∞–π—Ç—É.

```http
Set-Cookie: user_color=blue; SameSite=None; Secure; Partitioned
```

---

## –ë–µ–∑–ø–µ–∫–∞: XSS —Ç–∞ CSRF

### XSS (Cross-Site Scripting)

–¶–µ –∫–æ–ª–∏ –∑–ª–æ–≤–º–∏—Å–Ω–∏–∫ –≤–ø—Ä–æ–≤–∞–¥–∂—É—î —Å–≤—ñ–π JS –∫–æ–¥ –Ω–∞ –≤–∞—à—É —Å—Ç–æ—Ä—ñ–Ω–∫—É.

-   **–†–∏–∑–∏–∫:** –ö—Ä–∞–¥—ñ–∂–∫–∞ —Å–µ—Å—ñ–π (Session Hijacking).
-   **–ó–∞—Ö–∏—Å—Ç:**
    1. `HttpOnly` –¥–ª—è —Å–µ—Å—ñ–π–Ω–∏—Ö cookies.
    2. Content Security Policy (CSP).
    3. –°–∞–Ω—ñ—Ç–∏–∑–∞—Ü—ñ—è –≤–≤–æ–¥—É.

### CSRF (Cross-Site Request Forgery)

–¶–µ –∫–æ–ª–∏ –∑–ª–æ–≤–º–∏—Å–Ω–∏–∫ –∑–º—É—à—É—î –±—Ä–∞—É–∑–µ—Ä –≤–∏–∫–æ–Ω–∞—Ç–∏ –¥—ñ—é –≤—ñ–¥ –≤–∞—à–æ–≥–æ —ñ–º–µ–Ω—ñ.

-   **–†–∏–∑–∏–∫:** –ù–µ—Å–∞–Ω–∫—Ü—ñ–æ–Ω–æ–≤–∞–Ω—ñ –¥—ñ—ó (–∑–º—ñ–Ω–∞ –ø–∞—Ä–æ–ª—é, –ø–µ—Ä–µ–∫–∞–∑–∏).
-   **–ó–∞—Ö–∏—Å—Ç:**
    1. `SameSite=Lax` (–±–∞–∑–æ–≤–∏–π –∑–∞—Ö–∏—Å—Ç).
    2. **CSRF Tokens:** –°–ø–µ—Ü—ñ–∞–ª—å–Ω–∏–π —Ç–æ–∫–µ–Ω –≤ –ø—Ä–∏—Ö–æ–≤–∞–Ω–æ–º—É –ø–æ–ª—ñ —Ñ–æ—Ä–º–∏ –∞–±–æ –∑–∞–≥–æ–ª–æ–≤–∫—É, —è–∫–∏–π —Å–µ—Ä–≤–µ—Ä –≥–µ–Ω–µ—Ä—É—î –¥–ª—è –∫–æ–∂–Ω–æ—ó —Å–µ—Å—ñ—ó.

### Cookie Tossing

–ê—Ç–∞–∫–∞, –∫–æ–ª–∏ –∑–ª–æ–≤–º–∏—Å–Ω–∏–∫ –∫–æ–Ω—Ç—Ä–æ–ª—é—î –ø—ñ–¥–¥–æ–º–µ–Ω (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥ `useless.site.com`), –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î cookie –∑ `domain=site.com`, —ñ —Ü—è cookie "–ø–µ—Ä–µ–±–∏–≤–∞—î" –ª–µ–≥—ñ—Ç–∏–º–Ω—É cookie –Ω–∞ `app.site.com`.

-   **–ó–∞—Ö–∏—Å—Ç:** –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –ø—Ä–µ—Ñ—ñ–∫—Å–∏ –≤ –Ω–∞–∑–≤–∞—Ö cookie.
    -   `__Host-`: –≤–∏–º–∞–≥–∞—î `Secure`, `Path=/` —ñ –≤—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å `Domain`.
    -   `__Secure-`: –≤–∏–º–∞–≥–∞—î `Secure`.
        –ü—Ä–∏–∫–ª–∞–¥: `__Host-SessionID=123`. –ë—Ä–∞—É–∑–µ—Ä –≥–∞—Ä–∞–Ω—Ç—É—î, —â–æ –≤–æ–Ω–∞ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ –±–µ–∑–ø–µ—á–Ω–æ.

---

## Privacy: GDPR —Ç–∞ Cookie Banners

–í –Ñ–≤—Ä–æ–ø—ñ (GDPR) —Ç–∞ –ö–∞–ª—ñ—Ñ–æ—Ä–Ω—ñ—ó (CCPA) –≤–∏ –Ω–µ –º–æ–∂–µ—Ç–µ –ø—Ä–æ—Å—Ç–æ —Ç–∞–∫ —Å—Ç–∞–≤–∏—Ç–∏ cookies.

### –ö–∞—Ç–µ–≥–æ—Ä—ñ—ó Cookie

1.  **Strictly Necessary (–¢–µ—Ö–Ω—ñ—á–Ω—ñ):** –õ–æ–≥—ñ–Ω, –∫–æ—à–∏–∫ —Ç–æ–≤–∞—Ä—ñ–≤, –±–µ–∑–ø–µ–∫–∞. –î–æ–∑–≤—ñ–ª **–Ω–µ –ø–æ—Ç—Ä—ñ–±–µ–Ω**.
2.  **Preferences (–§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ):** –ú–æ–≤–∞, —Ç–µ–º–∞, —Ä–µ–≥—ñ–æ–Ω. –ü–æ—Ç—Ä—ñ–±–µ–Ω –¥–æ–∑–≤—ñ–ª.
3.  **Analytics (–°—Ç–∞—Ç–∏—Å—Ç–∏—á–Ω—ñ):** Google Analytics. –ü–æ—Ç—Ä—ñ–±–µ–Ω **—è–≤–Ω–∏–π** –¥–æ–∑–≤—ñ–ª.
4.  **Marketing (–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥–æ–≤—ñ):** –†–µ–∫–ª–∞–º–Ω—ñ —Ç—Ä–µ–∫–µ—Ä–∏. –ü–æ—Ç—Ä—ñ–±–µ–Ω **—è–≤–Ω–∏–π** –¥–æ–∑–≤—ñ–ª.

### –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è

–í–∏ **–Ω–µ –ø–æ–≤–∏–Ω–Ω—ñ** –∑–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞—Ç–∏ —Å–∫—Ä–∏–ø—Ç–∏ –∞–Ω–∞–ª—ñ—Ç–∏–∫–∏ (Google Analytics, Facebook Pixel), –¥–æ–∫–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–µ –Ω–∞—Ç–∏—Å–Ω–µ "Accept". –ë–∞–≥–∞—Ç–æ —Å–∞–π—Ç—ñ–≤ –ø–æ—Ä—É—à—É—é—Ç—å —Ü–µ, —Å—Ç–∞–≤–ª—è—á–∏ cookies –≤—ñ–¥—Ä–∞–∑—É, –∞ –±–∞–Ω–µ—Ä –ø–æ–∫–∞–∑—É—é—Ç—å "–¥–ª—è –≥–∞–ª–æ—á–∫–∏". –¶–µ –Ω–µ–∑–∞–∫–æ–Ω–Ω–æ –≤ –Ñ–°.

---

## Modern Helper Library: `CookieUtils`

–û—Å–∫—ñ–ª—å–∫–∏ —Ä—ñ–¥–Ω–∏–π API `document.cookie` –∂–∞—Ö–ª–∏–≤–∏–π, –Ω–∞–ø–∏—à–µ–º–æ –Ω–∞–¥—ñ–π–Ω—É –±—ñ–±–ª—ñ–æ—Ç–µ–∫—É –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ cookies. –¶–µ –≥–æ—Ç–æ–≤–∏–π –¥–æ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É –∫–æ–¥.

```javascript
/**
 * –£—Ç–∏–ª—ñ—Ç–∏ –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ Cookies.
 * –ü—ñ–¥—Ç—Ä–∏–º—É—î –≤—Å—ñ —Å—É—á–∞—Å–Ω—ñ –∞—Ç—Ä–∏–±—É—Ç–∏, –ø—Ä–∞–≤–∏–ª—å–Ω–µ –∫–æ–¥—É–≤–∞–Ω–Ω—è —Ç–∞ –ø–∞—Ä—Å–∏–Ω–≥.
 */
const CookieUtils = {
    /**
     * –û—Ç—Ä–∏–º–∞—Ç–∏ cookie –∑–∞ —ñ–º'—è–º
     * @param {string} name
     * @returns {string|undefined} –ó–Ω–∞—á–µ–Ω–Ω—è –∞–±–æ undefined
     */
    get(name) {
        if (typeof document === 'undefined') return undefined // SSR guard

        const matches = document.cookie.match(
            new RegExp('(?:^|; )' + name.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g, '\\$1') + '=([^;]*)'),
        )

        return matches ? decodeURIComponent(matches[1]) : undefined
    },

    /**
     * –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ cookie
     * @param {string} name
     * @param {string} value
     * @param {Object} options - { expires, path, domain, secure, samesite }
     */
    set(name, value, options = {}) {
        options = {
            path: '/', // –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –¥–æ—Å—Ç—É–ø–Ω–∞ –Ω–∞ –≤—Å—å–æ–º—É —Å–∞–π—Ç—ñ
            // ...—ñ–Ω—à—ñ –¥–µ—Ñ–æ–ª—Ç–∏
            ...options,
        }

        if (options.expires instanceof Date) {
            options.expires = options.expires.toUTCString()
        }

        let updatedCookie = encodeURIComponent(name) + '=' + encodeURIComponent(value)

        for (let optionKey in options) {
            updatedCookie += '; ' + optionKey
            let optionValue = options[optionKey]
            if (optionValue !== true) {
                updatedCookie += '=' + optionValue
            }
        }

        document.cookie = updatedCookie
    },

    /**
     * –í–∏–¥–∞–ª–∏—Ç–∏ cookie
     * @param {string} name
     * @param {Object} options - –í–∞–∂–ª–∏–≤–æ –ø–µ—Ä–µ–¥–∞—Ç–∏ —Ç—ñ –∂ path/domain, —â–æ –ø—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ!
     */
    delete(name, options = {}) {
        this.set(name, '', {
            ...options,
            'max-age': -1,
        })
    },

    /**
     * –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —á–∏ —î cookies —É–≤—ñ–º–∫–Ω–µ–Ω–∏–º–∏ –≤ –±—Ä–∞—É–∑–µ—Ä—ñ
     */
    isEnabled() {
        try {
            document.cookie = 'cookietest=1'
            const ret = document.cookie.indexOf('cookietest=') !== -1
            this.delete('cookietest')
            return ret
        } catch (e) {
            return false
        }
    },
}

// --- –ü—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è ---

// 1. –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ —Å–µ—Å—ñ–π–Ω—É cookie
CookieUtils.set('user', 'John')

// 2. –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ cookie –Ω–∞ 1 –¥–µ–Ω—å –∑ Secure
CookieUtils.set('token', 'xyz123', {
    'max-age': 86400,
    secure: true,
    samesite: 'Strict',
})

// 3. –û—Ç—Ä–∏–º–∞—Ç–∏
console.log(CookieUtils.get('token')) // 'xyz123'

// 4. –í–∏–¥–∞–ª–∏—Ç–∏
CookieUtils.delete('user')
```

---

## Cookie vs Web Storage

–©–æ –∫—Ä–∞—â–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏?

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞          | Cookies                            | LocalStorage                   | SessionStorage         |
| :---------------------- | :--------------------------------- | :----------------------------- | :--------------------- |
| **–û–±—Å—è–≥**               | 4 KB                               | 5-10 MB                        | 5-10 MB                |
| **–í—ñ–¥–ø—Ä–∞–≤–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä** | **–ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ** (–∑ –∫–æ–∂–Ω–∏–º –∑–∞–ø–∏—Ç–æ–º) | –ù—ñ (—Ä—É–∫–∞–º–∏ –≤ JS)               | –ù—ñ                     |
| **–¢–µ—Ä–º—ñ–Ω –∂–∏—Ç—Ç—è**        | –ù–∞–ª–∞—à—Ç–æ–≤—É—î—Ç—å—Å—è (expires)           | –í—ñ—á–Ω–æ (–¥–æ –æ—á–∏—â–µ–Ω–Ω—è)            | –î–æ –∑–∞–∫—Ä–∏—Ç—Ç—è –≤–∫–ª–∞–¥–∫–∏    |
| **–î–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å (–≤—ñ–∫–Ω–∞)** | –í—Å—ñ –≤–∫–ª–∞–¥–∫–∏/–≤—ñ–∫–Ω–∞                  | –í—Å—ñ –≤–∫–ª–∞–¥–∫–∏/–≤—ñ–∫–Ω–∞              | –¢—ñ–ª—å–∫–∏ –ø–æ—Ç–æ—á–Ω–∞ –≤–∫–ª–∞–¥–∫–∞ |
| **–î–æ—Å—Ç—É–ø JS**           | –¢–∞–∫ (–∫—Ä—ñ–º HttpOnly)                | –¢–∞–∫                            | –¢–∞–∫                    |
| **–ë–µ–∑–ø–µ–∫–∞ (XSS)**       | –ú–æ–∂–Ω–∞ –∑–∞—Ö–∏—Å—Ç–∏—Ç–∏ (HttpOnly)         | –í—Ä–∞–∑–ª–∏–≤–µ                       | –í—Ä–∞–∑–ª–∏–≤–µ               |
| **–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è**        | Auth —Ç–æ–∫–µ–Ω–∏, —Å–µ—Ä–≤–µ—Ä–Ω—ñ —Å–µ—Å—ñ—ó        | –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è UI, –∫–µ—à, —á–µ—Ä–Ω–µ—Ç–∫–∏ | –î–∞–Ω—ñ —Ñ–æ—Ä–º–∏, —Å–∫—Ä–æ–ª      |

> [!WARNING]
> –ù—ñ–∫–æ–ª–∏ –Ω–µ –∑–±–µ—Ä—ñ–≥–∞–π—Ç–µ JWT —Ç–æ–∫–µ–Ω–∏ –≤ LocalStorage, —è–∫—â–æ –≤–∏ —Ö–æ—á–µ—Ç–µ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ—ó –±–µ–∑–ø–µ–∫–∏. XSS –∞—Ç–∞–∫–∞ –¥–æ–∑–≤–æ–ª–∏—Ç—å –≤–∫—Ä–∞—Å—Ç–∏ —Ç–æ–∫–µ–Ω –∑ LocalStorage –º–∏—Ç—Ç—î–≤–æ. HttpOnly Cookies ‚Äî —î–¥–∏–Ω–µ –º—ñ—Å—Ü–µ, –∫—É–¥–∏ JS –Ω–µ –º–æ–∂–µ –∑–∞–ª—ñ–∑—Ç–∏.

---

## –ü—ñ–¥—Å—É–º–∫–∏ —Ç–∞ Best Practices

1.  **–ú—ñ–Ω—ñ–º—ñ–∑—É–π—Ç–µ —Ä–æ–∑–º—ñ—Ä:** Cookies –ª—ñ—Ç–∞—é—Ç—å –∑ –∫–æ–∂–Ω–∏–º –∑–∞–ø–∏—Ç–æ–º (–Ω–∞–≤—ñ—Ç—å –∑–∞ –∫–∞—Ä—Ç–∏–Ω–∫–∞–º–∏). –í–µ–ª–∏–∫—ñ cookies —É–ø–æ–≤—ñ–ª—å–Ω—é—é—Ç—å —Å–∞–π—Ç.
2.  **–ó–∞–≤–∂–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `encodeURIComponent`** –¥–ª—è —ñ–º–µ–Ω —ñ –∑–Ω–∞—á–µ–Ω—å.
3.  **–ë–µ–∑–ø–µ–∫–∞ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º:** –°—Ç–∞—Ä–∞–π—Ç–µ—Å—å –∑–∞–≤–∂–¥–∏ —Å—Ç–∞–≤–∏—Ç–∏ `Secure` —Ç–∞ `SameSite=Lax`.
4.  **–ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è —Ç—ñ–ª—å–∫–∏ –≤ HttpOnly:** –ù–µ –¥–∞–≤–∞–π—Ç–µ JavaScript –¥–æ—Å—Ç—É–ø –¥–æ —Å–µ—Å—ñ–π–Ω–∏—Ö –¥–∞–Ω–∏—Ö.
5.  **–í—Ä–∞—Ö–æ–≤—É–π—Ç–µ GDPR:** –ù–µ —Å—Ç–∞–≤—Ç–µ –∞–Ω–∞–ª—ñ—Ç–∏–∫—É –±–µ–∑ –¥–æ–∑–≤–æ–ª—É.
6.  **–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏:** –ù–µ –ø–∞—Ä—Å—ñ—Ç—å `document.cookie` —Ä–µ–≥—É–ª—è—Ä–∫–∞–º–∏ –≤—Ä—É—á–Ω—É –≤ –∫–æ–∂–Ω–æ–º—É —Ñ–∞–π–ª—ñ. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `js-cookie` –∞–±–æ –Ω–∞—à `CookieUtils`.

–¢–µ–ø–µ—Ä –≤–∏ –∑–Ω–∞—î—Ç–µ –ø—Ä–æ cookies –±—ñ–ª—å—à–µ, –Ω—ñ–∂ 90% —Ä–æ–∑—Ä–æ–±–Ω–∏–∫—ñ–≤. –í–∏ –≥–æ—Ç–æ–≤—ñ –¥–æ —Å–≤—ñ—Ç—É –±–µ–∑ —Å—Ç–æ—Ä–æ–Ω–Ω—ñ—Ö cookies! üç™

::card-group

::card{icon="lucide:shield-check"}
#title
HttpOnly

#description
–í–∞—à –Ω–∞–π–∫—Ä–∞—â–∏–π –¥—Ä—É–≥ –¥–ª—è –∑–∞—Ö–∏—Å—Ç—É –≤—ñ–¥ –∫—Ä–∞–¥—ñ–∂–∫–∏ —Å–µ—Å—ñ–π —á–µ—Ä–µ–∑ XSS. JavaScript —Å–ª—ñ–ø–∏–π –¥–æ —Ü–∏—Ö cookies.
::

::card{icon="lucide:lock"}
#title
Secure

#description
–ì–∞—Ä–∞–Ω—Ç—É—î, —â–æ cookie –Ω—ñ–∫–æ–ª–∏ –Ω–µ –ø–æ–ª–µ—Ç–∏—Ç—å –ø–æ –≤—ñ–¥–∫—Ä–∏—Ç–æ–º—É –¥—Ä–æ—Ç—É. –û–±–æ–≤'—è–∑–∫–æ–≤–æ –¥–ª—è –±—É–¥—å-—è–∫–∏—Ö —á—É—Ç–ª–∏–≤–∏—Ö –¥–∞–Ω–∏—Ö.
::

::card{icon="lucide:globe"}
#title
SameSite

#description
–í–∞—à —â–∏—Ç –≤—ñ–¥ CSRF –∞—Ç–∞–∫. –ö–æ–Ω—Ç—Ä–æ–ª—é—î, –∫–æ–ª–∏ cookie –º–æ–∂–µ "–ø–µ—Ä–µ—Ç–∏–Ω–∞—Ç–∏ –∫–æ—Ä–¥–æ–Ω" –º—ñ–∂ —Å–∞–π—Ç–∞–º–∏. `Lax` - —Ü–µ –Ω–æ–≤–∏–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç.
::

::card{icon="lucide:hard-drive"}
#title
4KB Limit

#description
–ü–∞–º'—è—Ç–∞–π—Ç–µ –ø—Ä–æ –ª—ñ–º—ñ—Ç —Ä–æ–∑–º—ñ—Ä—É. Cookies ‚Äî —Ü–µ –Ω–µ –±–∞–∑–∞ –¥–∞–Ω–∏—Ö. –î–ª—è –≤–µ–ª–∏–∫–∏—Ö –¥–∞–Ω–∏—Ö —î IndexedDB.
::

::
