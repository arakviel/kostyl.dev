# Axios —Ç–∞ React: –ü—Ä–æ—Ñ–µ—Å—ñ–π–Ω–∞ –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –ó–∞–ø–∏—Ç—ñ–≤

–£—è–≤—ñ—Ç—å, —â–æ –≤–∏ –±—É–¥—É—î—Ç–µ –ø–∞–Ω–µ–ª—å –∫–µ—Ä—É–≤–∞–Ω–Ω—è –¥–ª—è –≤–µ–ª–∏–∫–æ–≥–æ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω—É. –í–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞—Ç–∏ —Ç–æ–≤–∞—Ä–∏, –æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏ —Ü—ñ–Ω–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ, –æ–±—Ä–æ–±–ª—è—Ç–∏ –ø–æ–º–∏–ª–∫–∏ –º–µ—Ä–µ–∂—ñ —Ç–∞ —Å–∫–∞—Å–æ–≤—É–≤–∞—Ç–∏ –∑–∞–π–≤—ñ –∑–∞–ø–∏—Ç–∏, –∫–æ–ª–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á —à–≤–∏–¥–∫–æ –ø–µ—Ä–µ–º–∏–∫–∞—î—Ç—å—Å—è –º—ñ–∂ –≤–∫–ª–∞–¥–∫–∞–º–∏.

–£ "—á–∏—Å—Ç–æ–º—É" React –≤–∏ —à–≤–∏–¥–∫–æ –∑—ñ—Ç–∫–Ω–µ—Ç–µ—Å—è –∑ –ø—Ä–æ–±–ª–µ–º–æ—é: **–ª–æ–≥—ñ–∫–∞ –∑–∞–ø–∏—Ç—ñ–≤ –ø–æ—á–∏–Ω–∞—î –∑–º—ñ—à—É–≤–∞—Ç–∏—Å—è –∑ UI-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏**. –í–∞—à `useEffect` —Ä–æ–∑—Ä–æ—Å—Ç–∞—î—Ç—å—Å—è –¥–æ 50 —Ä—è–¥–∫—ñ–≤, –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ –¥—É–±–ª—é—î—Ç—å—Å—è, –∞ —Ç–æ–∫–µ–Ω–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó –¥–æ–≤–æ–¥–∏—Ç—å—Å—è –ø–µ—Ä–µ–¥–∞–≤–∞—Ç–∏ –≤—Ä—É—á–Ω—É –≤ –∫–æ–∂–µ–Ω –∑–∞–ø–∏—Ç.

–°—å–æ–≥–æ–¥–Ω—ñ –º–∏ —Ä–æ–∑–±–µ—Ä–µ–º–æ, —è–∫ —ñ–Ω—Ç–µ–≥—Ä—É–≤–∞—Ç–∏ **Axios** —É **React 19** —Ç–∞–∫, —â–æ–± –≤–∞—à –∫–æ–¥ –±—É–≤ —á–∏—Å—Ç–∏–º, –º–∞—Å—à—Ç–∞–±–æ–≤–∞–Ω–∏–º —Ç–∞ —Å—Ç—ñ–π–∫–∏–º –¥–æ –ø–æ–º–∏–ª–æ–∫. –ú–∏ –Ω–µ –ø—Ä–æ—Å—Ç–æ "–∑—Ä–æ–±–∏–º–æ –∑–∞–ø–∏—Ç", –º–∏ –ø–æ–±—É–¥—É—î–º–æ –ø—Ä–æ—Ñ–µ—Å—ñ–π–Ω–∏–π —à–∞—Ä —Ä–æ–±–æ—Ç–∏ –∑ –¥–∞–Ω–∏–º–∏.

## –ß–æ–º—É —Å–∞–º–µ Axios –≤ –µ–∫–æ—Å–∏—Å—Ç–µ–º—ñ React?

–•–æ—á–∞ React –Ω–µ –º–∞—î "–æ—Ñ—ñ—Ü—ñ–π–Ω–æ–≥–æ" —Å–ø–æ—Å–æ–±—É —Ä–æ–±–∏—Ç–∏ –∑–∞–ø–∏—Ç–∏, —Å–ø—ñ–ª—å–Ω–æ—Ç–∞ –≤–∏—Ä–æ–±–∏–ª–∞ –ø–µ–≤–Ω—ñ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏. –ß–æ–º—É –∂ –±—ñ–ª—å—à—ñ—Å—Ç—å –æ–±–∏—Ä–∞—î Axios –∑–∞–º—ñ—Å—Ç—å –≤–±—É–¥–æ–≤–∞–Ω–æ–≥–æ `fetch`?

| –ü—Ä–æ–±–ª–µ–º–∞ Fetch –≤ React | –†—ñ—à–µ–Ω–Ω—è Axios |
| :--- | :--- |
| **Boilerplate**: –ü–æ—Ç—Ä—ñ–±–Ω–æ –ø–æ—Å—Ç—ñ–π–Ω–æ –ø–∏—Å–∞—Ç–∏ `if (!res.ok) throw ...` —Ç–∞ `await res.json()` | **–õ–∞–∫–æ–Ω—ñ—á–Ω—ñ—Å—Ç—å**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è —Å—Ç–∞—Ç—É—Å—ñ–≤ —Ç–∞ –ø–∞—Ä—Å–∏–Ω–≥ JSON –∑–º–µ–Ω—à—É—é—Ç—å –∫–æ–¥ –≤ `useEffect`. |
| **Race Conditions**: –°–∫–ª–∞–¥–Ω–æ —Å–∫–∞—Å–æ–≤—É–≤–∞—Ç–∏ –∑–∞–ø–∏—Ç–∏ –ø—Ä–∏ —Ä–æ–∑–º–æ–Ω—Ç—É–≤–∞–Ω–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ | **AbortController**: –ü—Ä–æ—Å—Ç–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ `useEffect` cleanup —Ñ—É–Ω–∫—Ü—ñ—î—é. |
| **–î—É–±–ª—é–≤–∞–Ω–Ω—è –∫–æ–Ω—Ñ—ñ–≥—É**: –ü–µ—Ä–µ–¥–∞—á–∞ –∑–∞–≥–æ–ª–æ–≤–∫—ñ–≤ (Auth) —É –∫–æ–∂–µ–Ω –≤–∏–∫–ª–∏–∫ | **Interceptors**: –ì–ª–æ–±–∞–ª—å–Ω–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–∞–≥–æ–ª–æ–≤–∫—ñ–≤ —Ç–∞ –æ–±—Ä–æ–±–∫–∏ –ø–æ–º–∏–ª–æ–∫ –≤ –æ–¥–Ω–æ–º—É –º—ñ—Å—Ü—ñ. |

---

## –ê–Ω–∞—Ç–æ–º—ñ—è –∑–∞–ø–∏—Ç—É –≤ React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ

–ü–µ—Ä—à –Ω—ñ–∂ –±—É–¥—É–≤–∞—Ç–∏ —Å–∫–ª–∞–¥–Ω—ñ –∞–±—Å—Ç—Ä–∞–∫—Ü—ñ—ó, —Ä–æ–∑–±–µ—Ä–µ–º–æ "–∞—Ç–æ–º–∞—Ä–Ω–∏–π" —Ä—ñ–≤–µ–Ω—å ‚Äî —è–∫ –∑—Ä–æ–±–∏—Ç–∏ –∑–∞–ø–∏—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ, –≤—Ä–∞—Ö–æ–≤—É—é—á–∏ –∂–∏—Ç—Ç—î–≤–∏–π —Ü–∏–∫–ª React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.

### –ê–Ω—Ç–∏-–ø–∞—Ç–µ—Ä–Ω: –ó–∞–ø–∏—Ç "–≤ –ª–æ–±"

–ü–æ—á–∞—Ç–∫—ñ–≤—Ü—ñ —á–∞—Å—Ç–æ —Ä–æ–±–ª—è—Ç—å —Ü—é –ø–æ–º–∏–ª–∫—É ‚Äî –≤–∏–∫–ª–∏–∫–∞—é—Ç—å –∑–∞–ø–∏—Ç –ø—Ä—è–º–æ –≤ —Ç—ñ–ª—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –∞–±–æ –æ–±—Ä–æ–±–Ω–∏–∫—É –ø–æ–¥—ñ–π –±–µ–∑ –≤—Ä–∞—Ö—É–≤–∞–Ω–Ω—è —Å—Ç–∞–Ω—É.

```jsx [BadComponent.jsx]
// ‚ùå –ù–ï –†–û–ë–Ü–¢–¨ –¢–ê–ö
function BadComponent() {
  const data = axios.get('/api/data'); // üò± –ó–∞–ø–∏—Ç –±—É–¥–µ –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏—Å—å –ø—Ä–∏ –∫–æ–∂–Ω–æ–º—É —Ä–µ–Ω–¥–µ—Ä—ñ!

  return <div>{data.toString()}</div>;
}
```

### –ü–∞—Ç–µ—Ä–Ω: "Fetch-on-Mount" –∑ useEffect

–ö–ª–∞—Å–∏—á–Ω–∏–π –ø—ñ–¥—Ö—ñ–¥ –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.

::steps

### 1. –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å—Ç–∞–Ω—ñ–≤

–ù–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ —Ç—Ä–∏ —Å—Ç–∞–Ω–∏ –¥–ª—è –ø–æ–≤–Ω–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—é UI: `data` (–¥–∞–Ω—ñ), `loading` (—ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è) —Ç–∞ `error` (–ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –ø–æ–º–∏–ª–∫—É).

### 2. –ï—Ñ–µ–∫—Ç –∑ –æ—á–∏—â–µ–Ω–Ω—è–º

–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ `useEffect` –∑ –ø–æ—Ä–æ–∂–Ω—ñ–º –º–∞—Å–∏–≤–æ–º –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π `[]` –¥–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∫–æ–¥—É –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ –º–æ–Ω—Ç—É–≤–∞–Ω–Ω—ñ.

### 3. –û–±—Ä–æ–±–∫–∞ —Å–∫–∞—Å—É–≤–∞–Ω–Ω—è

–ö—Ä–∏—Ç–∏—á–Ω–æ –≤–∞–∂–ª–∏–≤–æ —Å–∫–∞—Å–æ–≤—É–≤–∞—Ç–∏ –∑–∞–ø–∏—Ç, —è–∫—â–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –±—É–≤ –≤–∏–¥–∞–ª–µ–Ω–∏–π –∑—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á —à–≤–∏–¥–∫–æ –ø–µ—Ä–µ–π—à–æ–≤ –Ω–∞ —ñ–Ω—à—É —Å—Ç–æ—Ä—ñ–Ω–∫—É).

::

::code-group

```jsx [UserProfile.jsx]
import { useState, useEffect } from 'react';
import axios from 'axios';

export function UserProfile({ userId }) {
  const [user, setUser] = useState(null);
  const [isLoading, setIsLoading] = useState(true);
  const [error, setError] = useState(null);

  useEffect(() => {
    // 1. –°—Ç–≤–æ—Ä—é—î–º–æ –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä –¥–ª—è —Å–∫–∞—Å—É–≤–∞–Ω–Ω—è
    const controller = new AbortController();

    const fetchUser = async () => {
      try {
        setIsLoading(true);
        // 2. –ü–µ—Ä–µ–¥–∞—î–º–æ —Å–∏–≥–Ω–∞–ª –≤ Axios
        const response = await axios.get(`https://api.escuelajs.co/api/v1/users/${userId}`, {
          signal: controller.signal
        });
        
        setUser(response.data);
        setError(null);
      } catch (err) {
        // 3. –Ü–≥–Ω–æ—Ä—É—î–º–æ –ø–æ–º–∏–ª–∫—É, —è–∫—â–æ —Ü–µ —Å–∫–∞—Å—É–≤–∞–Ω–Ω—è –∑–∞–ø–∏—Ç—É
        if (axios.isCancel(err)) {
          console.log('Request canceled', err.message);
        } else {
          setError(err.message);
        }
      } finally {
        // 4. –û–Ω–æ–≤–ª—é—î–º–æ —Å—Ç–∞–Ω –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è, —Ç—ñ–ª—å–∫–∏ —è–∫—â–æ –∑–∞–ø–∏—Ç –Ω–µ –±—É–≤ —Å–∫–∞—Å–æ–≤–∞–Ω–∏–π
        if (!controller.signal.aborted) {
          setIsLoading(false);
        }
      }
    };

    fetchUser();

    // 5. –§—É–Ω–∫—Ü—ñ—è –æ—á–∏—â–µ–Ω–Ω—è (Cleanup function)
    return () => {
      controller.abort();
    };
  }, [userId]); // –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—î–º–æ –µ—Ñ–µ–∫—Ç, —è–∫—â–æ –∑–º—ñ–Ω–∏–≤—Å—è userId

  if (isLoading) return <div className="spinner">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</div>;
  if (error) return <div className="error">–ü–æ–º–∏–ª–∫–∞: {error}</div>;
  if (!user) return null;

  return (
    <div className="card">
      <img src={user.avatar} alt={user.name} />
      <h2>{user.name}</h2>
      <p>{user.email}</p>
    </div>
  );
}
```

::

**–†–æ–∑–±—ñ—Ä –∫–æ–¥—É:**

-   **`AbortController`**: –¶–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π Web API. –Ø–∫—â–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–µ–º–æ–Ω—Ç—É—î—Ç—å—Å—è (return –∑ `useEffect`), –º–∏ –≤–∏–∫–ª–∏–∫–∞—î–º–æ `controller.abort()`. Axios –±–∞—á–∏—Ç—å —Ü–µ —ñ –ø–µ—Ä–µ—Ä–∏–≤–∞—î HTTP-–∑'—î–¥–Ω–∞–Ω–Ω—è.
-   **`axios.isCancel(err)`**: –î–æ–∑–≤–æ–ª—è—î –≤—ñ–¥—Ä—ñ–∑–Ω–∏—Ç–∏ "–ø–æ–≥–∞–Ω–∏–π" –∑–∞–ø–∏—Ç (404, 500) –≤—ñ–¥ "—Å–∫–∞—Å–æ–≤–∞–Ω–æ–≥–æ" (–∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –ø—ñ—à–æ–≤ –∑—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏), —â–æ–± –Ω–µ –ø–æ–∫–∞–∑—É–≤–∞—Ç–∏ –ø–æ–º–∏–ª–∫—É –¥–∞—Ä–µ–º–Ω–æ.
-   **–ó–∞–ª–µ–∂–Ω—ñ—Å—Ç—å `[userId]`**: –Ø–∫—â–æ ID –∑–º—ñ–Ω–∏—Ç—å—Å—è, —Å—Ç–∞—Ä–∏–π –∑–∞–ø–∏—Ç —Å–∫–∞—Å—É—î—Ç—å—Å—è, —ñ –ø–æ—á–Ω–µ—Ç—å—Å—è –Ω–æ–≤–∏–π.

---

## –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞: –í–∏–Ω–æ—Å–∏–º–æ –ª–æ–≥—ñ–∫—É –≤ –°–µ—Ä–≤—ñ—Å–Ω–∏–π –®–∞—Ä

–ü–∏—Å–∞—Ç–∏ `axios.get` –ø—Ä—è–º–æ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö ‚Äî —Ü–µ —à–ª—è—Ö –¥–æ –¥—É–±–ª—é–≤–∞–Ω–Ω—è –∫–æ–¥—É. –£ –ø—Ä–æ—Ñ–µ—Å—ñ–π–Ω–∏—Ö –ø—Ä–æ—î–∫—Ç–∞—Ö –º–∏ —Å—Ç–≤–æ—Ä—é—î–º–æ **API Layer**.

### 1. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —ñ–Ω—Å—Ç–∞–Ω—Å—É (Singleton)

–°—Ç–≤–æ—Ä–∏–º–æ —Ñ–∞–π–ª –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó, –¥–µ –∂–∏–≤–µ "–¥—É—à–∞" –Ω–∞—à–æ—ó –≤–∑–∞—î–º–æ–¥—ñ—ó –∑ —Å–µ—Ä–≤–µ—Ä–æ–º.

```javascript [src/api/axios.client.js]
import axios from 'axios';

// –°—Ç–≤–æ—Ä—é—î–º–æ —î–¥–∏–Ω–∏–π –µ–∫–∑–µ–º–ø–ª—è—Ä –¥–ª—è –≤—Å—å–æ–≥–æ –¥–æ–¥–∞—Ç–∫—É
export const apiClient = axios.create({
  baseURL: import.meta.env.VITE_API_URL || 'https://api.escuelajs.co/api/v1',
  headers: {
    'Content-Type': 'application/json',
  },
  timeout: 10000, // 10 —Å–µ–∫—É–Ω–¥
});

// Interceptor –¥–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è —Ç–æ–∫–µ–Ω–∞ (—è–∫—â–æ —î)
apiClient.interceptors.request.use((config) => {
  const token = localStorage.getItem('auth_token');
  if (token) {
    config.headers.Authorization = `Bearer ${token}`;
  }
  return config;
});

// Interceptor –¥–ª—è –≥–ª–æ–±–∞–ª—å–Ω–æ—ó –æ–±—Ä–æ–±–∫–∏ –ø–æ–º–∏–ª–æ–∫
apiClient.interceptors.response.use(
  (response) => response,
  (error) => {
    if (error.response?.status === 401) {
      // –õ–æ–≥—ñ–∫–∞ –¥–ª—è —Ä–æ–∑–ª–æ–≥—ñ–Ω—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
      console.warn('Unauthorized! Redirecting to login...');
      // window.location.href = '/login';
    }
    return Promise.reject(error);
  }
);
```

### 2. –°–µ—Ä–≤—ñ—Å–∏ —Å—É—Ç–Ω–æ—Å—Ç–µ–π (Repository Pattern)

–ì—Ä—É–ø—É—î–º–æ –º–µ—Ç–æ–¥–∏ –∑–∞ –±—ñ–∑–Ω–µ—Å-—Å—É—Ç–Ω—ñ—Å—Ç—é. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ –Ω–µ –ø–æ–≤–∏–Ω–Ω—ñ –∑–Ω–∞—Ç–∏ –ø—Ä–æ URL-–∞–¥—Ä–µ—Å–∏.

```javascript [src/api/products.service.js]
import { apiClient } from './axios.client';

export const ProductsService = {
  // –û—Ç—Ä–∏–º–∞—Ç–∏ –≤—Å—ñ –ø—Ä–æ–¥—É–∫—Ç–∏
  getAll: async (params, signal) => {
    const { data } = await apiClient.get('/products', { params, signal });
    return data;
  },

  // –û—Ç—Ä–∏–º–∞—Ç–∏ –æ–¥–∏–Ω –∑–∞ ID
  getById: async (id, signal) => {
    const { data } = await apiClient.get(`/products/${id}`, { signal });
    return data;
  },

  // –°—Ç–≤–æ—Ä–∏—Ç–∏ –ø—Ä–æ–¥—É–∫—Ç
  create: async (productData) => {
    const { data } = await apiClient.post('/products', productData);
    return data;
  }
};
```

---

## Custom Hooks: React Way

–¢–µ–ø–µ—Ä –º–∏ –º–æ–∂–µ–º–æ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –≤–ª–∞—Å–Ω–∏–π —Ö—É–∫, —è–∫–∏–π —ñ–Ω–∫–∞–ø—Å—É–ª—é—î –ª–æ–≥—ñ–∫—É `useEffect`, —Å—Ç–∞–Ω—ñ–≤ —Ç–∞ —Å–µ—Ä–≤—ñ—Å—ñ–≤. –¶–µ –∑—Ä–æ–±–∏—Ç—å –Ω–∞—à—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ –Ω–µ–π–º–æ–≤—ñ—Ä–Ω–æ —á–∏—Å—Ç–∏–º–∏.

### –°—Ç–≤–æ—Ä–µ–Ω–Ω—è `useFetch` —Ö—É–∫–∞

–¶–µ–π —Ö—É–∫ –±—É–¥–µ —É–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∏–º —Å–æ–ª–¥–∞—Ç–æ–º –¥–ª—è GET-–∑–∞–ø–∏—Ç—ñ–≤.

```javascript [src/hooks/useFetch.js]
import { useState, useEffect, useRef } from 'react';
import axios from 'axios';

export function useFetch(fetchFn, dependencies = []) {
  const [data, setData] = useState(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState(null);

  // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ —Ñ—É–Ω–∫—Ü—ñ—é —É ref, —â–æ–± —É–Ω–∏–∫–Ω—É—Ç–∏ –∑–∞–π–≤–∏—Ö —Ä–µ—Ä–µ–Ω–¥–µ—Ä—ñ–≤
  const fetchFnRef = useRef(fetchFn);

  useEffect(() => {
    fetchFnRef.current = fetchFn;
  }, [fetchFn]);

  useEffect(() => {
    const controller = new AbortController();
    
    const fetchData = async () => {
      try {
        setLoading(true);
        setError(null);
        
        // –ü–µ—Ä–µ–¥–∞—î–º–æ signal —É —Ñ—É–Ω–∫—Ü—ñ—é –∑–∞–ø–∏—Ç—É
        const result = await fetchFnRef.current(controller.signal);
        
        setData(result);
      } catch (err) {
        if (!axios.isCancel(err)) {
          setError(err.response?.data?.message || err.message);
        }
      } finally {
        if (!controller.signal.aborted) {
          setLoading(false);
        }
      }
    };

    fetchData();

    return () => {
      controller.abort();
    };
  }, dependencies); // –ó–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –ø–µ—Ä–µ–¥–∞–Ω–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, [categoryId])

  return { data, loading, error };
}
```

### –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ö—É–∫–∞ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ

–î–∏–≤—ñ—Ç—å—Å—è, –Ω–∞—Å–∫—ñ–ª—å–∫–∏ —á–∏—Å—Ç—ñ—à–∏–º —Å—Ç–∞–≤ –Ω–∞—à –∫–æ–º–ø–æ–Ω–µ–Ω—Ç!

```jsx [ProductList.jsx]
import { useFetch } from '../hooks/useFetch';
import { ProductsService } from '../api/products.service';

export function ProductList({ categoryId }) {
  // –•—É–∫ –±–µ—Ä–µ –Ω–∞ —Å–µ–±–µ –≤—Å—é —Å–∫–ª–∞–¥–Ω—ñ—Å—Ç—å –∂–∏—Ç—Ç—î–≤–æ–≥–æ —Ü–∏–∫–ª—É
  // –í–∞–∂–ª–∏–≤–æ: –æ–±–≥–æ—Ä—Ç–∞—î–º–æ –≤–∏–∫–ª–∏–∫ —Å–µ—Ä–≤—ñ—Å—É –≤ —Å—Ç—Ä—ñ–ª–æ—á–Ω—É —Ñ—É–Ω–∫—Ü—ñ—é, —â–æ–± –ø–µ—Ä–µ–¥–∞—Ç–∏ signal
  const { data: products, loading, error } = useFetch(
    (signal) => ProductsService.getAll({ categoryId }, signal),
    [categoryId] // –ü–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏, —è–∫—â–æ –∑–º—ñ–Ω–∏–ª–∞—Å—å –∫–∞—Ç–µ–≥–æ—Ä—ñ—è
  );

  if (loading) return <div className="skeleton">Loading...</div>;
  if (error) return <div className="error">{error}</div>;

  return (
    <div className="grid grid-cols-3 gap-4">
      {products.map(product => (
        <ProductCard key={product.id} product={product} />
      ))}
    </div>
  );
}
```

---

## React 19 —Ç–∞ –ú–∞–π–±—É—Ç–Ω—î (Suspense & `use`)

–í React 19 –∑'—è–≤–∏–≤—Å—è –Ω–æ–≤–∏–π —Ö—É–∫ `use`, —è–∫–∏–π –¥–æ–∑–≤–æ–ª—è—î —á–∏—Ç–∞—Ç–∏ –ø—Ä–æ–º—ñ—Å–∏ –ø—Ä—è–º–æ –≤ —Ä–µ–Ω–¥–µ—Ä—ñ. –¶–µ –∑–º—ñ–Ω—é—î –ø—Ä–∞–≤–∏–ª–∞ –≥—Ä–∏, –Ω–∞–±–ª–∏–∂–∞—é—á–∏ –∫–ª—ñ—î–Ω—Ç—Å—å–∫–∏–π –∫–æ–¥ –¥–æ —Å–µ—Ä–≤–µ—Ä–Ω–æ–≥–æ.

### –Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î –∑ Axios?

Axios –ø–æ–≤–µ—Ä—Ç–∞—î Promise, —Ç–æ–º—É –º–∏ –º–æ–∂–µ–º–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –π–æ–≥–æ –∑ `use`. –ê–ª–µ —î **–∫—Ä–∏—Ç–∏—á–Ω–∞ —É–º–æ–≤–∞**: –ø—Ä–æ–º—ñ—Å –ø–æ–≤–∏–Ω–µ–Ω –±—É—Ç–∏ —Å—Ç–≤–æ—Ä–µ–Ω–∏–π *–∑–∞ –º–µ–∂–∞–º–∏* —Ä–µ–Ω–¥–µ—Ä—É –∞–±–æ –∫–µ—à–æ–≤–∞–Ω–∏–π, —ñ–Ω–∞–∫—à–µ –≤–∏ –æ—Ç—Ä–∏–º–∞—î—Ç–µ –Ω–µ—Å–∫—ñ–Ω—á–µ–Ω–Ω–∏–π —Ü–∏–∫–ª –∑–∞–ø–∏—Ç—ñ–≤.

```jsx [ModernProduct.jsx]
import { use, Suspense } from 'react';
import { apiClient } from '../api/axios.client';

// 1. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—É (–ø—Ä–æ—Å—Ç–∏–π –∫–µ—à –∞–±–æ –∑–∞–ø–∏—Ç –Ω–∞ —Ä—ñ–≤–Ω—ñ –º–æ–¥—É–ª—è)
// –í —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ —Ç–∏–ø—É TanStack Query
const productsPromise = apiClient.get('/products').then(res => res.data);

function ProductList() {
  // 2. –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è `use` –¥–ª—è "—Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è" –ø—Ä–æ–º—ñ—Å—É
  // –¶–µ –ø—Ä–∏–∑—É–ø–∏–Ω–∏—Ç—å (suspend) –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, –¥–æ–∫–∏ –¥–∞–Ω—ñ –Ω–µ –∑–∞–≤–∞–Ω—Ç–∞–∂–∞—Ç—å—Å—è
  const products = use(productsPromise);

  return (
    <ul>
      {products.map(p => <li key={p.id}>{p.title}</li>)}
    </ul>
  );
}

export function Page() {
  return (
    // 3. Suspense –æ–±—Ä–æ–±–ª—è—î —Å—Ç–∞–Ω –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
    <Suspense fallback={<div>Loading products...</div>}>
      <ProductList />
    </Suspense>
  );
}
```

::caution
**–û–±–µ—Ä–µ–∂–Ω–æ –∑ `use`**: –ù–µ —Å—Ç–≤–æ—Ä—é–π—Ç–µ –ø—Ä–æ–º—ñ—Å–∏ (`axios.get(...)`) –ø—Ä—è–º–æ –≤ —Ç—ñ–ª—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–¥–∞—á–µ—é –≤ `use()`. –¶–µ –ø—Ä–∏–∑–≤–µ–¥–µ –¥–æ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –∑–∞–ø–∏—Ç—É –ø—Ä–∏ –∫–æ–∂–Ω–æ–º—É —Ä–µ–Ω–¥–µ—Ä—ñ!
::

---

## –û–ø—Ç–∏–º—ñ—Å—Ç–∏—á–Ω—ñ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è (Optimistic UI)

–ö–æ–ª–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–∞—Ç–∏—Å–∫–∞—î "–õ–∞–π–∫", –≤—ñ–Ω –Ω–µ —Ö–æ—á–µ —á–µ–∫–∞—Ç–∏ 200–º—Å –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ —Å–µ—Ä–≤–µ—Ä–∞. –ú–∏ –æ–Ω–æ–≤–ª—é—î–º–æ UI –º–∏—Ç—Ç—î–≤–æ, –∞ –∑–∞–ø–∏—Ç —à–ª–µ–º–æ —É —Ñ–æ–Ω—ñ.

```jsx [LikeButton.jsx]
import { useState } from 'react';
import { apiClient } from '../api/axios.client';

export function LikeButton({ productId, initialLikes }) {
  const [likes, setLikes] = useState(initialLikes);
  const [isLiked, setIsLiked] = useState(false);

  const handleLike = async () => {
    // 1. –û–ø—Ç–∏–º—ñ—Å—Ç–∏—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è (–º–∏—Ç—Ç—î–≤–µ)
    const previousLikes = likes;
    const previousIsLiked = isLiked;

    setLikes(prev => isLiked ? prev - 1 : prev + 1);
    setIsLiked(!isLiked);

    try {
      // 2. –†–µ–∞–ª—å–Ω–∏–π –∑–∞–ø–∏—Ç —É —Ñ–æ–Ω—ñ
      await apiClient.post(`/products/${productId}/like`);
    } catch (error) {
      // 3. –í—ñ–¥–∫–∞—Ç (Rollback) –ø—Ä–∏ –ø–æ–º–∏–ª—Ü—ñ
      console.error('Like failed', error);
      setLikes(previousLikes);
      setIsLiked(previousIsLiked);
      alert('–ù–µ –≤–¥–∞–ª–æ—Å—è –ø–æ—Å—Ç–∞–≤–∏—Ç–∏ –ª–∞–π–∫ :(');
    }
  };

  return (
    <button onClick={handleLike} className={isLiked ? 'liked' : ''}>
      ‚ù§Ô∏è {likes}
    </button>
  );
}
```

---

## Best Practices Checklist

–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Å–≤—ñ–π –∫–æ–¥ –Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ—Å—Ç—å —Ü–∏–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º:

- [ ] **API Instance**: –ß–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ –≤–∏ `axios.create` –∑–∞–º—ñ—Å—Ç—å –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —ñ–º–ø–æ—Ä—Ç—É?
- [ ] **Cleanup**: –ß–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ –≤–∏ `AbortController` —É `useEffect`?
- [ ] **Environment Variables**: –ß–∏ –≤–∏–Ω–µ—Å–µ–Ω–æ `baseURL` —É –∑–º—ñ–Ω–Ω—ñ –æ—Ç–æ—á–µ–Ω–Ω—è (`.env`)?
- [ ] **Loading States**: –ß–∏ –ø–æ–∫–∞–∑—É—î—Ç–µ –≤–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É, —â–æ —â–æ—Å—å –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è?
- [ ] **Error Boundaries**: –ß–∏ –Ω–µ "–ø–∞–¥–∞—î" –≤–µ—Å—å –¥–æ–¥–∞—Ç–æ–∫ –≤—ñ–¥ –æ–¥–Ω—ñ—î—ó –ø–æ–º–∏–ª–∫–∏ –∑–∞–ø–∏—Ç—É?
- [ ] **Service Layer**: –ß–∏ –≤—ñ–¥–¥—ñ–ª–µ–Ω–∞ –ª–æ–≥—ñ–∫–∞ –∑–∞–ø–∏—Ç—ñ–≤ –≤—ñ–¥ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤?

## –ü—Ä–∞–∫—Ç–∏—á–Ω–µ –∑–∞–≤–¥–∞–Ω–Ω—è: –ü–æ–±—É–¥–æ–≤–∞ Search Bar

–°–ø—Ä–æ–±—É–π—Ç–µ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –ø–æ—à—É–∫—É —Ç–æ–≤–∞—Ä—ñ–≤, —è–∫–∏–π:
1. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î **Debounce** (—á–µ–∫–∞—î 500–º—Å –ø—ñ—Å–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –≤–≤–æ–¥—É –ø–µ—Ä–µ–¥ –∑–∞–ø–∏—Ç–æ–º).
2. –°–∫–∞—Å–æ–≤—É—î –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–π –∑–∞–ø–∏—Ç, —è–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –ø—Ä–æ–¥–æ–≤–∂–∏–≤ –≤–≤–æ–¥–∏—Ç–∏.
3. –í—ñ–¥–æ–±—Ä–∞–∂–∞—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è "–ù—ñ—á–æ–≥–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ".

::collapsible
### –ü—ñ–¥–∫–∞–∑–∫–∞ (–†—ñ—à–µ–Ω–Ω—è)

```jsx
import { useState, useEffect } from 'react';
import axios from 'axios';

// –ü—Ä–æ—Å—Ç–∏–π —Ö—É–∫ debounce
function useDebounce(value, delay) {
  const [debouncedValue, setDebouncedValue] = useState(value);
  useEffect(() => {
    const handler = setTimeout(() => setDebouncedValue(value), delay);
    return () => clearTimeout(handler);
  }, [value, delay]);
  return debouncedValue;
}

export function SearchBar() {
  const [query, setQuery] = useState('');
  const [results, setResults] = useState([]);
  const [loading, setLoading] = useState(false);
  
  const debouncedQuery = useDebounce(query, 500);

  useEffect(() => {
    if (!debouncedQuery) {
      setResults([]);
      return;
    }

    const controller = new AbortController();
    
    const search = async () => {
      setLoading(true);
      try {
        const { data } = await axios.get(`https://api.escuelajs.co/api/v1/products`, {
          params: { title: debouncedQuery },
          signal: controller.signal
        });
        setResults(data);
      } catch (err) {
        if (!axios.isCancel(err)) console.error(err);
      } finally {
        if (!controller.signal.aborted) setLoading(false);
      }
    };

    search();

    return () => controller.abort();
  }, [debouncedQuery]);

  return (
    <div className="search-container">
      <input 
        type="text" 
        value={query} 
        onChange={(e) => setQuery(e.target.value)} 
        placeholder="–ü–æ—à—É–∫..." 
        className="input"
      />
      {loading && <p>–®—É–∫–∞—î–º–æ...</p>}
      <ul>
        {results.map(p => <li key={p.id}>{p.title} - ${p.price}</li>)}
      </ul>
    </div>
  );
}
```
::

::tally-embed{id="YOUR_REACT_AXIOS_QUIZ_ID" title="–¢–µ—Å—Ç: React + Axios"}
::
