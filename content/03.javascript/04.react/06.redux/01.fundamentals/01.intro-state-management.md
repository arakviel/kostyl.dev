# –í—Å—Ç—É–ø –¥–æ State Management

–ü–µ—Ä—à –Ω—ñ–∂ –ø—ñ—Ä–Ω–∞—Ç–∏ –≤ –∫–æ–¥ Redux, –¥–∞–≤–∞–π—Ç–µ –∑—É–ø–∏–Ω–∏–º–æ—Å—è —ñ –≤—ñ–¥–ø–æ–≤—ñ–º–æ –Ω–∞ –≥–æ–ª–æ–≤–Ω–µ –ø–∏—Ç–∞–Ω–Ω—è: **"–Ø–∫—É –ø—Ä–æ–±–ª–µ–º—É –º–∏ –≤–∑–∞–≥–∞–ª—ñ –Ω–∞–º–∞–≥–∞—î–º–æ—Å—è –≤–∏—Ä—ñ—à–∏—Ç–∏?"**.

–ë–∞–≥–∞—Ç–æ —Ä–æ–∑—Ä–æ–±–Ω–∏–∫—ñ–≤ –¥–æ–¥–∞—é—Ç—å Redux —É –ø—Ä–æ—î–∫—Ç –ø—Ä–æ—Å—Ç–æ —Ç–æ–º—É, —â–æ "—Ç–∞–∫ –ø—Ä–∏–π–Ω—è—Ç–æ" –∞–±–æ "—Ü–µ —î –≤ –≤–∏–º–æ–≥–∞—Ö –≤–∞–∫–∞–Ω—Å—ñ—ó". –¶–µ –ø—Ä–∏–∑–≤–æ–¥–∏—Ç—å –¥–æ –Ω–∞–¥–º—ñ—Ä–Ω–æ —Å–∫–ª–∞–¥–Ω–æ—ó –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏ —Ç–∞–º, –¥–µ –≤–æ–Ω–∞ –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–∞.

–£ —Ü—å–æ–º—É —Ä–æ–∑–¥—ñ–ª—ñ –º–∏ —Ä–æ–∑–±–µ—Ä–µ–º–æ—Å—è, —â–æ —Ç–∞–∫–µ —Å—Ç–∞–Ω, —è–∫–∏–º –≤—ñ–Ω –±—É–≤–∞—î, —ñ –∫–æ–ª–∏ `useState` –ø–µ—Ä–µ—Å—Ç–∞—î —Å–ø—Ä–∞–≤–ª—è—Ç–∏—Å—è.

## –©–æ —Ç–∞–∫–µ "–°—Ç–∞–Ω" (State)?

–£ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ñ React, **State (–°—Ç–∞–Ω)** ‚Äî —Ü–µ –±—É–¥—å-—è–∫—ñ –¥–∞–Ω—ñ, —è–∫—ñ –∑–º—ñ–Ω—é—é—Ç—å—Å—è —É —á–∞—Å—ñ —Ç–∞ –≤–ø–ª–∏–≤–∞—é—Ç—å –Ω–∞ —Ç–µ, —â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –±–∞—á–∏—Ç—å –Ω–∞ –µ–∫—Ä–∞–Ω—ñ.

–¶–µ –Ω–µ —Ç—ñ–ª—å–∫–∏ –¥–∞–Ω—ñ –∑ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö. –°—Ç–∞–Ω ‚Äî —Ü–µ –≤—Å–µ:
-   –¢–µ–∫—Å—Ç, —è–∫–∏–π –≤–∏ –≤–≤–æ–¥–∏—Ç–µ –≤ –ø–æ–ª–µ –ø–æ—à—É–∫—É.
-   –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ —Ç–µ, —á–∏ –≤—ñ–¥–∫—Ä–∏—Ç–æ –º–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ.
-   –°–ø–∏—Å–æ–∫ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–∏—Ö –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å.
-   –ü–æ–º–∏–ª–∫–∞, —è–∫–∞ –≤–∏–Ω–∏–∫–ª–∞ –ø—Ä–∏ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó —Ñ–æ—Ä–º–∏.
-   –ù–∞–≤—ñ—Ç—å –ø–æ–∑–∏—Ü—ñ—è —Å–∫—Ä–æ–ª—É —Å—Ç–æ—Ä—ñ–Ω–∫–∏.

### –¢–∏–ø–æ–ª–æ–≥—ñ—è –°—Ç–∞–Ω—É

–©–æ–± –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –∫–µ—Ä—É–≤–∞—Ç–∏ –¥–∞–Ω–∏–º–∏, –≤–∞–∂–ª–∏–≤–æ —Ä–æ–∑—Ä—ñ–∑–Ω—è—Ç–∏ —ó—Ö —Ç–∏–ø–∏. –ù–µ –≤—Å–µ –º–∞—î –ª–µ–∂–∞—Ç–∏ –≤ Redux!

| –¢–∏–ø —Å—Ç–∞–Ω—É | –û–ø–∏—Å | –ü—Ä–∏–∫–ª–∞–¥ | –î–µ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏? |
| :--- | :--- | :--- | :--- |
| **Local State** | –î–∞–Ω—ñ, —â–æ —Å—Ç–æ—Å—É—é—Ç—å—Å—è –æ–¥–Ω–æ–≥–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –∞–±–æ –π–æ–≥–æ –Ω–∞–π–±–ª–∏–∂—á–∏—Ö –¥—ñ—Ç–µ–π. | –ó–Ω–∞—á–µ–Ω–Ω—è input, —Å—Ç–∞–Ω –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è dropdown. | `useState`, `useReducer` |
| **Global State** | –î–∞–Ω—ñ, –ø–æ—Ç—Ä—ñ–±–Ω—ñ –±–∞–≥–∞—Ç—å–æ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º —É —Ä—ñ–∑–Ω–∏—Ö —á–∞—Å—Ç–∏–Ω–∞—Ö –¥–µ—Ä–µ–≤–∞. | –ü—Ä–æ—Ñ—ñ–ª—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞, —Ç–µ–º–∞ (—Å–≤—ñ—Ç–ª–∞/—Ç–µ–º–Ω–∞), –º–æ–≤–∞ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É. | Context API, Redux, Zustand |
| **Server State** | –ö–µ—à–æ–≤–∞–Ω—ñ –¥–∞–Ω—ñ, –æ—Ç—Ä–∏–º–∞–Ω—ñ –∑ API. | –°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä—ñ–≤, –¥–µ—Ç–∞–ª—ñ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è. | React Query, SWR, RTK Query |
| **URL State** | –î–∞–Ω—ñ, —â–æ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ –∞–¥—Ä–µ—Å–Ω–æ–º—É —Ä—è–¥–∫—É. | ID –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ç–æ–≤–∞—Ä—É (`/product/123`), –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó (`?sort=price`). | React Router |

::alert{type="warning"}
**–ê–Ω—Ç–∏–ø–∞—Ç–µ—Ä–Ω**: –ó–±–µ—Ä—ñ–≥–∞—Ç–∏ *–≤—Å–µ* –≤ –≥–ª–æ–±–∞–ª—å–Ω–æ–º—É —Å—Ç–µ–π—Ç—ñ. –Ø–∫—â–æ —Å—Ç–∞–Ω –≤—ñ–¥–∫—Ä–∏—Ç—Ç—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –≤—ñ–∫–Ω–∞ –ø–æ—Ç—Ä—ñ–±–µ–Ω –ª–∏—à–µ –æ–¥–Ω—ñ–π –∫–Ω–æ–ø—Ü—ñ —Ç–∞ —Å–∞–º–æ–º—É –≤—ñ–∫–Ω—É ‚Äî —Ü–µ Local State.
::

## –ü—Ä–æ–±–ª–µ–º–∞: Prop Drilling

–£—è–≤—ñ—Ç—å, —â–æ —É –≤–∞—Å —î —Ç–∏–ø–æ–≤–∏–π React-–¥–æ–¥–∞—Ç–æ–∫. –£ –≤–∞—Å —î –∫–æ—Ä–µ–Ω–µ–≤–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `App`, –≤ –Ω—å–æ–º—É —î `Layout`, –≤ –Ω—å–æ–º—É `Header`, –≤ `Header` —î `UserMenu`, –∞ –≤ `UserMenu` ‚Äî `Avatar`.

–í–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–µ—Ä–µ–¥–∞—Ç–∏ –æ–±'—î–∫—Ç `user` –∑ `App` –≤ `Avatar`.

–ë–µ–∑ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Å—Ç–µ–π—Ç-–º–µ–Ω–µ–¥–∂–µ—Ä–∞ —Ü–µ –≤–∏–≥–ª—è–¥–∞—î —Ç–∞–∫:

::code-tree
```tsx [App.js]
function App() {
  const [user, setUser] = useState({ name: 'Ivan', avatar: 'img.jpg' });
  // –ú–∏ –ø–µ—Ä–µ–¥–∞—î–º–æ user –≤ Layout, —Ö–æ—á–∞ Layout –≤—ñ–Ω –Ω–µ –ø–æ—Ç—Ä—ñ–±–µ–Ω!
  return <Layout user={user} />;
}
```

```tsx [Layout.js]
function Layout({ user }) {
  // Layout –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–¥–∞—î –¥–∞–ª—ñ...
  return (
    <div>
      <Sidebar />
      <Header user={user} />
      <Main />
    </div>
  );
}
```

```tsx [Header.js]
function Header({ user }) {
  // Header —Ç–µ–∂ –ø—Ä–æ—Å—Ç–æ –ø–µ—Ä–µ–¥–∞—î –¥–∞–ª—ñ...
  return (
    <header>
      <Logo />
      <UserMenu user={user} />
    </header>
  );
}
```

```tsx [UserMenu.js]
function UserMenu({ user }) {
  // –ù–∞—Ä–µ—à—Ç—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ!
  return (
    <div className="user-menu">
      <span>{user.name}</span>
      <Avatar url={user.avatar} />
    </div>
  );
}
```
::

–¶–µ —è–≤–∏—â–µ –Ω–∞–∑–∏–≤–∞—î—Ç—å—Å—è **Prop Drilling** ("—Å–≤–µ—Ä–¥–ª—ñ–Ω–Ω—è –ø—Ä–æ–ø—Å—ñ–≤").

### –ß–æ–º—É —Ü–µ –ø–æ–≥–∞–Ω–æ?

1.  **–ó–∞–π–≤–∏–π –∫–æ–¥**: –ü—Ä–æ–º—ñ–∂–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ (`Layout`, `Header`) –∑–∞–±—Ä—É–¥–Ω–µ–Ω—ñ –ø—Ä–æ–ø—Å–∞–º–∏, —è–∫—ñ —ó–º –Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω—ñ.
2.  **–°–∫–ª–∞–¥–Ω—ñ—Å—Ç—å —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥—É**: –Ø–∫—â–æ –≤–∏ –∑–∞—Ö–æ—á–µ—Ç–µ –ø–µ—Ä–µ–π–º–µ–Ω—É–≤–∞—Ç–∏ `user` –Ω–∞ `currentUser`, –≤–∞–º –¥–æ–≤–µ–¥–µ—Ç—å—Å—è –ø—Ä–∞–≤–∏—Ç–∏ 4 —Ñ–∞–π–ª–∏ –∑–∞–º—ñ—Å—Ç—å –æ–¥–Ω–æ–≥–æ.
3.  **–ó–≤'—è–∑–Ω—ñ—Å—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤**: `Header` –Ω–µ –º–æ–∂–µ —ñ—Å–Ω—É–≤–∞—Ç–∏ –±–µ–∑ `user`, —Ö–æ—á–∞ –ª–æ–≥—ñ—á–Ω–æ –≤—ñ–Ω –π–æ–º—É –Ω–µ –ø–æ—Ç—Ä—ñ–±–µ–Ω.
4.  **Re-renders**: –ó–º—ñ–Ω–∞ `user` –º–æ–∂–µ –≤–∏–∫–ª–∏–∫–∞—Ç–∏ —Ä–µ-—Ä–µ–Ω–¥–µ—Ä —É—Å—ñ—Ö –ø—Ä–æ–º—ñ–∂–Ω–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤ (—Ö–æ—á–∞ React –Ω–∞–º–∞–≥–∞—î—Ç—å—Å—è —Ü–µ –æ–ø—Ç–∏–º—ñ–∑—É–≤–∞—Ç–∏, —Ü–µ –≤—Å–µ –æ–¥–Ω–æ –ø–æ—Ç–µ–Ω—Ü—ñ–π–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞).

## –†—ñ—à–µ–Ω–Ω—è: Global State Manager

–ì–ª–æ–±–∞–ª—å–Ω–∏–π –º–µ–Ω–µ–¥–∂–µ—Ä —Å—Ç–∞–Ω—É (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, Redux) –ø—Ä–∞—Ü—é—î —è–∫ "—Ö–º–∞—Ä–∞" –¥–ª—è –≤–∞—à–æ–≥–æ –¥–æ–¥–∞—Ç–∫—É. –í–∏ –∫–ª–∞–¥–µ—Ç–µ –¥–∞–Ω—ñ –≤ —Ü—é —Ö–º–∞—Ä—É, —ñ –±—É–¥—å-—è–∫–∏–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –º–æ–∂–µ "–ø—ñ–¥–∫–ª—é—á–∏—Ç–∏—Å—è" –¥–æ –Ω–µ—ó —ñ –æ—Ç—Ä–∏–º–∞—Ç–∏ —Ç–µ, —â–æ –π–æ–º—É –ø–æ—Ç—Ä—ñ–±–Ω–æ, –Ω–∞–ø—Ä—è–º—É.

::mermaid
graph TD
    Store[(Global Store)]
    App --> Layout
    Layout --> Header
    Header --> UserMenu
    
    Store -.->|Direct Access| UserMenu
    Store -.->|Direct Access| Sidebar
    
    style Store fill:#f59e0b,stroke:#b45309,color:#ffffff
    style UserMenu fill:#3b82f6,stroke:#1d4ed8,color:#ffffff
::

### –û—Å–Ω–æ–≤–Ω—ñ –ø–µ—Ä–µ–≤–∞–≥–∏ Redux

–ö—Ä—ñ–º –≤–∏—Ä—ñ—à–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º–∏ Prop Drilling, Redux –¥–∞—î –Ω–∞–º —â–µ –¥–µ—â–æ –≤–∞–∂–ª–∏–≤–µ:

1.  **Single Source of Truth (–Ñ–¥–∏–Ω–µ –¥–∂–µ—Ä–µ–ª–æ –ø—Ä–∞–≤–¥–∏)**:
    –í–µ—Å—å —Å—Ç–∞–Ω –¥–æ–¥–∞—Ç–∫—É –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ –æ–¥–Ω–æ–º—É –º—ñ—Å—Ü—ñ (–æ–±'—î–∫—Ç—ñ). –¶–µ –ø–æ–ª–µ–≥—à—É—î —Ä–æ–∑—É–º—ñ–Ω–Ω—è —Ç–æ–≥–æ, —â–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –≤ –ø—Ä–æ–≥—Ä–∞–º—ñ.

2.  **–ü–µ—Ä–µ–¥–±–∞—á—É–≤–∞–Ω—ñ—Å—Ç—å (Predictability)**:
    –£ Redux –Ω–µ –º–æ–∂–Ω–∞ –ø—Ä–æ—Å—Ç–æ –∑–º—ñ–Ω–∏—Ç–∏ —Å—Ç–∞–Ω (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `user.name = 'Max'`). –í–∏ –ø–æ–≤–∏–Ω–Ω—ñ "–ø–æ–ø—Ä–æ—Å–∏—Ç–∏" —Å–∏—Å—Ç–µ–º—É –∑—Ä–æ–±–∏—Ç–∏ –∑–º—ñ–Ω–∏ —á–µ—Ä–µ–∑ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω—É –ø–æ–¥—ñ—é (**Action**). –¶–µ –≥–∞—Ä–∞–Ω—Ç—É—î, —â–æ –∑–º—ñ–Ω–∏ –≤—ñ–¥–±—É–≤–∞—é—Ç—å—Å—è –∫–æ–Ω—Ç—Ä–æ–ª—å–æ–≤–∞–Ω–æ.

3.  **–ü–æ—Ç—É–∂–Ω—ñ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ —Ä–æ–∑—Ä–æ–±–Ω–∏–∫–∞ (DevTools)**:
    –¶–µ "–∫—ñ–ª–µ—Ä-—Ñ—ñ—á–∞" Redux. –í–∏ –º–æ–∂–µ—Ç–µ:
    -   –ë–∞—á–∏—Ç–∏ —ñ—Å—Ç–æ—Ä—ñ—é –≤—Å—ñ—Ö –¥—ñ–π.
    -   –ë–∞—á–∏—Ç–∏, —è–∫ –∑–º—ñ–Ω—é–≤–∞–≤—Å—è —Å—Ç–∞–Ω –ø—ñ—Å–ª—è –∫–æ–∂–Ω–æ—ó –¥—ñ—ó (Diff).
    -   **Time Travel Debugging**: "–í—ñ–¥–º–æ—Ç–∞—Ç–∏" —á–∞—Å –Ω–∞–∑–∞–¥ —ñ –ø–æ–¥–∏–≤–∏—Ç–∏—Å—è, —è–∫ –≤–∏–≥–ª—è–¥–∞–≤ –¥–æ–¥–∞—Ç–æ–∫ 5 —Ö–≤–∏–ª–∏–Ω —Ç–æ–º—É.

4.  **–õ–µ–≥–∫—ñ—Å—Ç—å —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è**:
    –û—Å–∫—ñ–ª—å–∫–∏ –ª–æ–≥—ñ–∫–∞ –∑–º—ñ–Ω–∏ —Å—Ç–∞–Ω—É (Reducers) ‚Äî —Ü–µ —á–∏—Å—Ç—ñ —Ñ—É–Ω–∫—Ü—ñ—ó, —ó—Ö –¥—É–∂–µ –ª–µ–≥–∫–æ —Ç–µ—Å—Ç—É–≤–∞—Ç–∏ (unit tests), –Ω–∞–≤—ñ—Ç—å –±–µ–∑ –∑–∞–ø—É—Å–∫—É React.

---

–¢–µ–ø–µ—Ä, –∫–æ–ª–∏ –º–∏ —Ä–æ–∑—É–º—ñ—î–º–æ *–Ω–∞–≤—ñ—â–æ* –Ω–∞–º —Ü–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ, –¥–∞–≤–∞–π—Ç–µ —Ä–æ–∑–±–µ—Ä–µ–º–æ—Å—è –∑ —Ç–µ–æ—Ä–µ—Ç–∏—á–Ω–∏–º —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç–æ–º, –Ω–∞ —è–∫–æ–º—É –ø–æ–±—É–¥–æ–≤–∞–Ω–∏–π Redux ‚Äî –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–æ—é Flux —Ç–∞ –∫–æ–Ω—Ü–µ–ø—Ü—ñ—è–º–∏ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è.

üëâ [–î–∞–ª—ñ: –§—ñ–ª–æ—Å–æ—Ñ—ñ—è Redux —Ç–∞ –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ Flux](./02.redux-philosophy.md)
