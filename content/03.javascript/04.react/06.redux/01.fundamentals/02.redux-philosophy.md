# –§—ñ–ª–æ—Å–æ—Ñ—ñ—è Redux —Ç–∞ –¢—Ä–∏ –ü—Ä–∏–Ω—Ü–∏–ø–∏

Redux —á–∞—Å—Ç–æ –≤–≤–∞–∂–∞—é—Ç—å —Å–∫–ª–∞–¥–Ω–æ—é –±—ñ–±–ª—ñ–æ—Ç–µ–∫–æ—é, –∞–ª–µ –Ω–∞—Å–ø—Ä–∞–≤–¥—ñ –≤—ñ–Ω –±–∞–∑—É—î—Ç—å—Å—è –Ω–∞ –∫—ñ–ª—å–∫–æ—Ö –¥—É–∂–µ –ø—Ä–æ—Å—Ç–∏—Ö —ñ–¥–µ—è—Ö. –°–∫–ª–∞–¥–Ω—ñ—Å—Ç—å –≤–∏–Ω–∏–∫–∞—î –Ω–µ –∑ —Å–∞–º–æ—ó –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏, –∞ –∑ –Ω–æ–≤–∏—Ö —Ç–µ—Ä–º—ñ–Ω—ñ–≤ —Ç–∞ –æ–±–º–µ–∂–µ–Ω—å, —è–∫—ñ –≤–æ–Ω–∞ –Ω–∞–∫–ª–∞–¥–∞—î.

–ê–ª–µ —Ü—ñ –æ–±–º–µ–∂–µ–Ω–Ω—è —ñ—Å–Ω—É—é—Ç—å –Ω–µ –ø—Ä–æ—Å—Ç–æ —Ç–∞–∫. –í–æ–Ω–∏ ‚Äî —Ü–µ —Ç–µ, —â–æ —Ä–æ–±–∏—Ç—å –≤–∞—à –∫–æ–¥ –ø–µ—Ä–µ–¥–±–∞—á—É–≤–∞–Ω–∏–º.

## –©–æ —Ç–∞–∫–µ Redux?

–§–æ—Ä–º–∞–ª—å–Ω–æ: **Redux** ‚Äî —Ü–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –ø–µ—Ä–µ–¥–±–∞—á—É–≤–∞–Ω–æ–≥–æ —Å—Ç–∞–Ω—É –¥–ª—è JavaScript-–¥–æ–¥–∞—Ç–∫—ñ–≤.

–¶–µ –æ–∑–Ω–∞—á–∞—î, —â–æ:
1.  –í—ñ–Ω –∑–±–µ—Ä—ñ–≥–∞—î –¥–∞–Ω—ñ (–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä).
2.  –î–∞–Ω—ñ –∑–º—ñ–Ω—é—é—Ç—å—Å—è –ø–µ—Ä–µ–¥–±–∞—á—É–≤–∞–Ω–æ (–º–∏ —Ç–æ—á–Ω–æ –∑–Ω–∞—î–º–æ, —Ö—Ç–æ, –∫–æ–ª–∏ —ñ —è–∫ —ó—Ö –∑–º—ñ–Ω–∏–≤).
3.  –í—ñ–Ω –Ω–µ –ø—Ä–∏–≤'—è–∑–∞–Ω–∏–π –¥–æ React (–º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –∑ Angular, Vue, –∞–±–æ –Ω–∞–≤—ñ—Ç—å vanilla JS).

–Ü—Å—Ç–æ—Ä–∏—á–Ω–æ Redux –±—É–≤ —Å—Ç–≤–æ—Ä–µ–Ω–∏–π Dan Abramov —Ç–∞ Andrew Clark —É 2015 —Ä–æ—Ü—ñ —è–∫ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏ **Flux** (–≤—ñ–¥ Facebook), –∞–ª–µ —Å–ø—Ä–æ—â–µ–Ω–∞ —ñ –ø–æ–∫—Ä–∞—â–µ–Ω–∞ —ñ–¥–µ—è–º–∏ –∑ –º–æ–≤–∏ **Elm**.

## –¢—Ä–∏ –ü—Ä–∏–Ω—Ü–∏–ø–∏ Redux

–£—Å—è "–º–∞–≥—ñ—è" Redux —Ç—Ä–∏–º–∞—î—Ç—å—Å—è –Ω–∞ —Ç—Ä—å–æ—Ö –∫–∏—Ç–∞—Ö. –Ø–∫—â–æ –≤–∏ –∑—Ä–æ–∑—É–º—ñ—î—Ç–µ —ó—Ö, –≤–∏ –∑—Ä–æ–∑—É–º—ñ—î—Ç–µ Redux.

### 1. –Ñ–¥–∏–Ω–µ –¥–∂–µ—Ä–µ–ª–æ –ø—Ä–∞–≤–¥–∏ (Single Source of Truth)

> –í–µ—Å—å —Å—Ç–∞–Ω –≤–∞—à–æ–≥–æ –¥–æ–¥–∞—Ç–∫—É –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –≤ –¥–µ—Ä–µ–≤—ñ –æ–±'—î–∫—Ç—ñ–≤ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –æ–¥–Ω–æ–≥–æ **Store**.

–ù–∞ –≤—ñ–¥–º—ñ–Ω—É –≤—ñ–¥ Flux, –¥–µ –º–æ–≥–ª–æ –±—É—Ç–∏ –±–∞–≥–∞—Ç–æ Store-—ñ–≤, —É Redux Store –∑–∞–≤–∂–¥–∏ –æ–¥–∏–Ω. –¶–µ —è–∫ –≥—ñ–≥–∞–Ω—Ç—Å—å–∫–∏–π JSON-–æ–±'—î–∫—Ç, —â–æ –æ–ø–∏—Å—É—î –≤–µ—Å—å –≤–∞—à –¥–æ–¥–∞—Ç–æ–∫.

```javascript
// –ü—Ä–∏–∫–ª–∞–¥ —Ç–æ–≥–æ, —è–∫ –≤–∏–≥–ª—è–¥–∞—î Store –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ
const state = {
  user: {
    id: 1,
    name: 'Ivan',
    role: 'admin'
  },
  todos: [
    { id: 1, text: '–í–∏–≤—á–∏—Ç–∏ Redux', completed: false },
    { id: 2, text: '–ù–∞–ø–∏—Å–∞—Ç–∏ –∫–æ–¥', completed: true }
  ],
  visibilityFilter: 'SHOW_ALL'
};
```

**–ü–µ—Ä–µ–≤–∞–≥–∏:**
-   –õ–µ–≥–∫–æ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ —Å—Ç–∞–Ω –Ω–∞ —Å–µ—Ä–≤–µ—Ä—ñ —Ç–∞ –≤—ñ–¥–Ω–æ–≤–ª—é–≤–∞—Ç–∏ –π–æ–≥–æ (SSR).
-   –õ–µ–≥–∫–æ –¥–µ–±–∞–∂–∏—Ç–∏ (–≤–µ—Å—å —Å—Ç–∞–Ω –≤ –æ–¥–Ω–æ–º—É –º—ñ—Å—Ü—ñ).
-   –õ–µ–≥–∫–æ —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ—ó –Ω–∞ –∫—à—Ç–∞–ª—Ç Undo/Redo.

### 2. –°—Ç–∞–Ω –¥–æ—Å—Ç—É–ø–Ω–∏–π –ª–∏—à–µ –¥–ª—è —á–∏—Ç–∞–Ω–Ω—è (State is Read-Only)

> –Ñ–¥–∏–Ω–∏–π —Å–ø–æ—Å—ñ–± –∑–º—ñ–Ω–∏—Ç–∏ —Å—Ç–∞–Ω ‚Äî —Ü–µ –≤—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ (dispatch) **Action** (–¥—ñ—é), –æ–±'—î–∫—Ç, —â–æ –æ–ø–∏—Å—É—î, —â–æ —Å—Ç–∞–ª–æ—Å—è.

–í–∏ –Ω–µ –º–æ–∂–µ—Ç–µ –Ω–∞–ø–∏—Å–∞—Ç–∏ `state.user.name = 'Petro'`. –¶–µ –∑–∞–±–æ—Ä–æ–Ω–µ–Ω–æ. –ó–∞–º—ñ—Å—Ç—å —Ü—å–æ–≥–æ –≤–∏ –∫–∞–∂–µ—Ç–µ —Å–∏—Å—Ç–µ–º—ñ: "–ì–µ–π, –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á —Ö–æ—á–µ –∑–º—ñ–Ω–∏—Ç–∏ —ñ–º'—è".

–¶–µ —Ä–æ–±–∏—Ç—å—Å—è —á–µ—Ä–µ–∑ –ø—Ä–æ—Å—Ç–∏–π –æ–±'—î–∫—Ç:

```javascript
// Action
{
  type: 'UPDATE_USER_NAME',
  payload: 'Petro'
}
```

–¶–µ –≥–∞—Ä–∞–Ω—Ç—É—î, —â–æ –Ω—ñ –ø–æ—Ç—ñ–∫ –∑ –º–µ—Ä–µ–∂—ñ, –Ω—ñ –ø–æ–¥—ñ—è –º–∏—à—ñ –Ω–µ –º–æ–∂—É—Ç—å –∑–∞–ø–∏—Å–∞—Ç–∏ —â–æ—Å—å —É —Å—Ç–∞–Ω –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ. –£—Å—ñ –∑–º—ñ–Ω–∏ —Ü–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ —Ç–∞ –≤—ñ–¥–±—É–≤–∞—é—Ç—å—Å—è –≤ —Å—Ç—Ä–æ–≥–æ–º—É –ø–æ—Ä—è–¥–∫—É.

### 3. –ó–º—ñ–Ω–∏ –≤–Ω–æ—Å—è—Ç—å—Å—è —á–∏—Å—Ç–∏–º–∏ —Ñ—É–Ω–∫—Ü—ñ—è–º–∏ (Changes are made with Pure Functions)

> –©–æ–± –æ–ø–∏—Å–∞—Ç–∏, —è–∫ —Å–∞–º–µ —Å—Ç–∞–Ω –∑–º—ñ–Ω—é—î—Ç—å—Å—è —É –≤—ñ–¥–ø–æ–≤—ñ–¥—å –Ω–∞ actions, –≤–∏ –ø–∏—à–µ—Ç–µ **Reducers** (—Ä–µ–¥—é—Å–µ—Ä–∏).

**Reducer** ‚Äî —Ü–µ –ø—Ä–æ—Å—Ç–æ —Ñ—É–Ω–∫—Ü—ñ—è, —è–∫–∞ –±–µ—Ä–µ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–π —Å—Ç–∞–Ω —ñ –¥—ñ—é, –∞ –ø–æ–≤–µ—Ä—Ç–∞—î *–Ω–æ–≤–∏–π* —Å—Ç–∞–Ω.

```javascript
// (PreviousState, Action) => NewState
function userReducer(state, action) {
  if (action.type === 'UPDATE_USER_NAME') {
    return {
        ...state,
        name: action.payload
    };
  }
  return state;
}
```

–í–∞–∂–ª–∏–≤–æ: –†–µ–¥—é—Å–µ—Ä **–Ω–µ –∑–º—ñ–Ω—é—î** —ñ—Å–Ω—É—é—á–∏–π –æ–±'—î–∫—Ç `state`. –í—ñ–Ω —Å—Ç–≤–æ—Ä—é—î **–Ω–æ–≤–∏–π** –æ–±'—î–∫—Ç –∑ –æ–Ω–æ–≤–ª–µ–Ω–∏–º–∏ –¥–∞–Ω–∏–º–∏. –¶–µ —ñ —î –ø—Ä–∏–Ω—Ü–∏–ø **–Ü–º–º—É—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—ñ**, –ø—Ä–æ —è–∫–∏–π –º–∏ –ø–æ–≥–æ–≤–æ—Ä–∏–º–æ –¥–µ—Ç–∞–ª—å–Ω—ñ—à–µ –≤ –Ω–∞—Å—Ç—É–ø–Ω–æ–º—É —É—Ä–æ—Ü—ñ.

## –û–¥–Ω–æ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π –ø–æ—Ç—ñ–∫ –¥–∞–Ω–∏—Ö (Data Flow)

–£ Redux –¥–∞–Ω—ñ –∑–∞–≤–∂–¥–∏ —Ä—É—Ö–∞—é—Ç—å—Å—è –≤ –æ–¥–Ω–æ–º—É –Ω–∞–ø—Ä—è–º–∫—É (Unidirectional Data Flow). –¶–µ –≤—ñ–¥—Ä—ñ–∑–Ω—è—î –π–æ–≥–æ –≤—ñ–¥ –¥–≤–æ—Å—Ç–æ—Ä–æ–Ω–Ω—å–æ–≥–æ –∑–≤'—è–∑—É–≤–∞–Ω–Ω—è (Two-way data binding), —è–∫–µ –±—É–ª–æ –ø–æ–ø—É–ª—è—Ä–Ω–µ –≤ —Ä–∞–Ω–Ω—ñ—Ö —Ñ—Ä–µ–π–º–≤–æ—Ä–∫–∞—Ö (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, AngularJS).

–ñ–∏—Ç—Ç—î–≤–∏–π —Ü–∏–∫–ª –¥–∞–Ω–∏—Ö —É Redux –≤–∏–≥–ª—è–¥–∞—î —Ç–∞–∫:

::mermaid
sequenceDiagram
    participant UI as User Interface
    participant Action as Action
    participant Reducer as Reducer
    participant Store as Redux Store
    
    UI->>Store: 1. Dispatch(Action)
    Note over UI, Store: –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–∞—Ç–∏—Å–Ω—É–≤ –∫–Ω–æ–ø–∫—É
    
    Store->>Reducer: 2. Call Reducer(CurrentState, Action)
    
    Reducer->>Reducer: 3. Logic Execution
    Note right of Reducer: –û–±—á–∏—Å–ª–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ —Å—Ç–∞–Ω—É
    
    Reducer->>Store: 4. Return NewState
    
    Store->>UI: 5. Subscribe Notification
    Note over Store, UI: –û–Ω–æ–≤–ª–µ–Ω–Ω—è UI
    
    style UI fill:#3b82f6,stroke:#1d4ed8,color:#ffffff
    style Store fill:#8b5cf6,stroke:#6d28d9,color:#ffffff
    style Reducer fill:#10b981,stroke:#047857,color:#ffffff
    style Action fill:#f59e0b,stroke:#b45309,color:#ffffff
::

### –î–µ—Ç–∞–ª—å–Ω–∏–π —Ä–æ–∑–±—ñ—Ä —Ü–∏–∫–ª—É:

1.  **–ü–æ–¥—ñ—è**: –©–æ—Å—å —Ç—Ä–∞–ø–ª—è—î—Ç—å—Å—è –≤ –¥–æ–¥–∞—Ç–∫—É (–∫–ª—ñ–∫ –∫–Ω–æ–ø–∫–∏, –ø—Ä–∏–π—à–ª–∏ –¥–∞–Ω—ñ –∑ API).
2.  **Dispatch**: UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î **Action** –≤ Store.
    -   `dispatch({ type: 'DEPOSIT', payload: 10 })`
3.  **Reducer**: Store –≤–∏–∫–ª–∏–∫–∞—î —Ñ—É–Ω–∫—Ü—ñ—é-—Ä–µ–¥—é—Å–µ—Ä, –ø–µ—Ä–µ–¥–∞—é—á–∏ —ó–π –ø–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω —ñ —Ü–µ–π action.
    -   `reducer({ balance: 0 }, { type: 'DEPOSIT', payload: 10 })`
4.  **Update**: –†–µ–¥—é—Å–µ—Ä –ø–æ–≤–µ—Ä—Ç–∞—î *–Ω–æ–≤–∏–π* —Å—Ç–∞–Ω.
    -   `return { balance: 10 }`
5.  **Re-render**: Store –∑–±–µ—Ä—ñ–≥–∞—î –Ω–æ–≤–∏–π —Å—Ç–∞–Ω —ñ –ø–æ–≤—ñ–¥–æ–º–ª—è—î –≤—Å—ñ –ø—ñ–¥–ø–∏—Å–∞–Ω—ñ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏, —â–æ –¥–∞–Ω—ñ –∑–º—ñ–Ω–∏–ª–∏—Å—è. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ –ø–µ—Ä–µ–º–∞–ª—å–æ–≤—É—é—Ç—å—Å—è –∑ –Ω–æ–≤–∏–º–∏ –¥–∞–Ω–∏–º–∏.

–¶–µ–π —Ü–∏–∫–ª —Ä–æ–±–∏—Ç—å –ø–æ–≤–µ–¥—ñ–Ω–∫—É –ø—Ä–æ–≥—Ä–∞–º–∏ –Ω–∞–¥–∑–≤–∏—á–∞–π–Ω–æ –ø–µ—Ä–µ–¥–±–∞—á—É–≤–∞–Ω–æ—é. –Ø–∫—â–æ –≤–∏ –±–∞—á–∏—Ç–µ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ñ –¥–∞–Ω—ñ –Ω–∞ –µ–∫—Ä–∞–Ω—ñ, –≤–∏ —Ç–æ—á–Ω–æ –∑–Ω–∞—î—Ç–µ, —â–æ —Ü–µ —Å—Ç–∞–ª–æ—Å—è —á–µ—Ä–µ–∑ —è–∫–∏–π—Å—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π Action, —è–∫–∏–π –±—É–≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–æ–±–ª–µ–Ω–∏–π Reducer-–æ–º.

---

–ê–ª–µ —á–æ–º—É —Ç–∞–∫ –≤–∞–∂–ª–∏–≤–æ "–Ω–µ –∑–º—ñ–Ω—é–≤–∞—Ç–∏" —Å—Ç–∞–Ω, –∞ "—Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –Ω–æ–≤–∏–π"? –ß–æ–º—É –Ω–µ –º–æ–∂–Ω–∞ –ø—Ä–æ—Å—Ç–æ –∑—Ä–æ–±–∏—Ç–∏ `state.value++`? –ü—Ä–æ —Ü–µ ‚Äî —É –Ω–∞—Å—Ç—É–ø–Ω–æ–º—É —Ä–æ–∑–¥—ñ–ª—ñ –ø—Ä–æ —á–∏—Å—Ç–æ—Ç—É —Ñ—É–Ω–∫—Ü—ñ–π.

üëâ [–î–∞–ª—ñ: –ß–∏—Å—Ç—ñ —Ñ—É–Ω–∫—Ü—ñ—ó —Ç–∞ –Ü–º–º—É—Ç–∞–±–µ–ª—å–Ω—ñ—Å—Ç—å](./03.pure-functions-immutability.md)
