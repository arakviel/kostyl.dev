# –ß–∏—Å—Ç—ñ —Ñ—É–Ω–∫—Ü—ñ—ó —Ç–∞ –Ü–º–º—É—Ç–∞–±–µ–ª—å–Ω—ñ—Å—Ç—å

–¶–µ, –º–∞–±—É—Ç—å, —Ç–µ—Ö–Ω—ñ—á–Ω–æ –Ω–∞–π–≤–∞–∂–ª–∏–≤—ñ—à–∏–π —Ä–æ–∑–¥—ñ–ª –¥–ª—è —Ä–æ–∑—É–º—ñ–Ω–Ω—è —Ç–æ–≥–æ, —è–∫ *–ø–∏—Å–∞—Ç–∏* Redux –∫–æ–¥ –ø—Ä–∞–≤–∏–ª—å–Ω–æ. –ë—ñ–ª—å—à—ñ—Å—Ç—å –±–∞–≥—ñ–≤ —É –ø–æ—á–∞—Ç–∫—ñ–≤—Ü—ñ–≤ –≤–∏–Ω–∏–∫–∞—é—Ç—å —Å–∞–º–µ —á–µ—Ä–µ–∑ –ø–æ—Ä—É—à–µ–Ω–Ω—è —Ü–∏—Ö –ø—Ä–∞–≤–∏–ª.

## –ß–∏—Å—Ç—ñ –§—É–Ω–∫—Ü—ñ—ó (Pure Functions)

–ö–æ–Ω—Ü–µ–ø—Ü—ñ—è –ø—Ä–∏–π—à–ª–∞ –∑ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è. –§—É–Ω–∫—Ü—ñ—è –≤–≤–∞–∂–∞—î—Ç—å—Å—è "—á–∏—Å—Ç–æ—é", —è–∫—â–æ –≤–æ–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –¥–≤–æ–º –∫—Ä–∏—Ç–µ—Ä—ñ—è–º:

1.  **–î–µ—Ç–µ—Ä–º—ñ–Ω–æ–≤–∞–Ω—ñ—Å—Ç—å**: –î–ª—è –æ–¥–Ω–∏—Ö —ñ —Ç–∏—Ö —Å–∞–º–∏—Ö –≤—Ö—ñ–¥–Ω–∏—Ö –∞—Ä–≥—É–º–µ–Ω—Ç—ñ–≤ –≤–æ–Ω–∞ **–∑–∞–≤–∂–¥–∏** –ø–æ–≤–µ—Ä—Ç–∞—î –æ–¥–Ω–∞–∫–æ–≤–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç.
2.  **–í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –ø–æ–±—ñ—á–Ω–∏—Ö –µ—Ñ–µ–∫—Ç—ñ–≤ (No Side Effects)**: –í–æ–Ω–∞ –Ω–µ –∑–º—ñ–Ω—é—î –Ω—ñ—á–æ–≥–æ –∑–∞ —Å–≤–æ—ó–º–∏ –º–µ–∂–∞–º–∏ (–≥–ª–æ–±–∞–ª—å–Ω—ñ –∑–º—ñ–Ω–Ω—ñ, —Å—Ç–∞–Ω DOM, –º–µ—Ä–µ–∂–µ–≤—ñ –∑–∞–ø–∏—Ç–∏ —Ç–æ—â–æ) —ñ –Ω–µ –∑–º—ñ–Ω—é—î —Å–≤–æ—ó –∞—Ä–≥—É–º–µ–Ω—Ç–∏.

### –ü—Ä–∏–∫–ª–∞–¥–∏

::code-group
```javascript [Pure ‚úÖ]
// –ß–∏—Å—Ç–∞ —Ñ—É–Ω–∫—Ü—ñ—è
// –ó–∞–≤–∂–¥–∏ –ø–æ–≤–µ—Ä—Ç–∞—î a + b.
// –ù–µ –∑–º—ñ–Ω—é—î –Ω—ñ—á–æ–≥–æ –∑–æ–≤–Ω—ñ.
function add(a, b) {
  return a + b;
}
```

```javascript [Impure (Random) ‚ùå]
// –ù–µ—á–∏—Å—Ç–∞ (–ù–µ–¥–µ—Ç–µ—Ä–º—ñ–Ω–æ–≤–∞–Ω–∞)
// –ü–æ–≤–µ—Ä—Ç–∞—î —Ä—ñ–∑–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è –ø—Ä–∏ –∫–æ–∂–Ω–æ–º—É –≤–∏–∫–ª–∏–∫—É.
function randomId() {
  return Math.random().toString(36);
}
```

```javascript [Impure (Side Effect) ‚ùå]
// –ù–µ—á–∏—Å—Ç–∞ (–ü–æ–±—ñ—á–Ω–∏–π –µ—Ñ–µ–∫—Ç)
// –ó–º—ñ–Ω—é—î –≥–ª–æ–±–∞–ª—å–Ω—É –∑–º—ñ–Ω–Ω—É count.
let count = 0;
function increment() {
  count++; // Side effect!
  return count;
}
```

```javascript [Impure (API Call) ‚ùå]
// –ù–µ—á–∏—Å—Ç–∞ (–ú–µ—Ä–µ–∂–µ–≤–∏–π –∑–∞–ø–∏—Ç)
// –ó–∞–ª–µ–∂–∏—Ç—å –≤—ñ–¥ –∑–æ–≤–Ω—ñ—à–Ω—å–æ–≥–æ —Å–≤—ñ—Ç—É.
async function getUser() {
  return await fetch('/api/user');
}
```
::

::alert{type="danger"}
**–ó–æ–ª–æ—Ç–µ –ø—Ä–∞–≤–∏–ª–æ Redux**: –†–µ–¥—é—Å–µ—Ä–∏ (Reducers) **–ú–£–°–Ø–¢–¨** –±—É—Ç–∏ —á–∏—Å—Ç–∏–º–∏ —Ñ—É–Ω–∫—Ü—ñ—è–º–∏.
::

–¶–µ –æ–∑–Ω–∞—á–∞—î, —â–æ –≤ —Ä–µ–¥—é—Å–µ—Ä—ñ **–ó–ê–ë–û–†–û–ù–ï–ù–û**:
-   –†–æ–±–∏—Ç–∏ `Math.random()`, `Date.now()`.
-   –†–æ–±–∏—Ç–∏ API –∑–∞–ø–∏—Ç–∏ (`fetch`, `axios`).
-   –ó–º—ñ–Ω—é–≤–∞—Ç–∏ –∑–º—ñ–Ω–Ω—ñ –∑–∞ –º–µ–∂–∞–º–∏ —Ä–µ–¥—é—Å–µ—Ä–∞.
-   **–ú—É—Ç—É–≤–∞—Ç–∏ (–∑–º—ñ–Ω—é–≤–∞—Ç–∏) –∞—Ä–≥—É–º–µ–Ω—Ç–∏ `state` –∞–±–æ `action`.**

## –Ü–º–º—É—Ç–∞–±–µ–ª—å–Ω—ñ—Å—Ç—å (Immutability)

–Ü–º–º—É—Ç–∞–±–µ–ª—å–Ω—ñ—Å—Ç—å –æ–∑–Ω–∞—á–∞—î, —â–æ –¥–∞–Ω—ñ –Ω–µ –º–æ–∂–Ω–∞ –∑–º—ñ–Ω—é–≤–∞—Ç–∏ –ø—ñ—Å–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è. –Ø–∫—â–æ –≤–∏ —Ö–æ—á–µ—Ç–µ –∑–º—ñ–Ω–∏—Ç–∏ –¥–∞–Ω—ñ, –≤–∏ –ø–æ–≤–∏–Ω–Ω—ñ —Å—Ç–≤–æ—Ä–∏—Ç–∏ **–∫–æ–ø—ñ—é** –∑ –Ω–æ–≤–∏–º–∏ –∑–Ω–∞—á–µ–Ω–Ω—è–º–∏.

–£ JavaScript –æ–±'—î–∫—Ç–∏ —Ç–∞ –º–∞—Å–∏–≤–∏ —î *–º—É—Ç–∞–±–µ–ª—å–Ω–∏–º–∏* (–∑–º—ñ–Ω–Ω–∏–º–∏) –∑–∞ –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º. –¶–µ –∫–æ—Ä—ñ–Ω—å –∑–ª–∞ –≤ Redux, —è–∫—â–æ –Ω–µ –±—É—Ç–∏ –æ–±–µ—Ä–µ–∂–Ω–∏–º.

### –ú—É—Ç–∞—Ü—ñ—è vs –Ü–º–º—É—Ç–∞–±–µ–ª—å–Ω—ñ—Å—Ç—å

```javascript
const user = { name: 'Ivan', age: 25 };

// ‚ùå –ú–£–¢–ê–¶–Ü–Ø
// –ú–∏ –∑–º—ñ–Ω–∏–ª–∏ —ñ—Å–Ω—É—é—á–∏–π –æ–±'—î–∫—Ç.
// –ü–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –æ–±'—î–∫—Ç –∑–∞–ª–∏—à–∏–ª–æ—Å—è —Ç–∏–º —Å–∞–º–∏–º!
user.age = 26; 

// ‚úÖ –Ü–ú–ú–£–¢–ê–ë–ï–õ–¨–ù–ï –û–ù–û–í–õ–ï–ù–ù–Ø
// –ú–∏ —Å—Ç–≤–æ—Ä–∏–ª–∏ –ù–û–í–ò–ô –æ–±'—î–∫—Ç.
// –ü–æ—Å–∏–ª–∞–Ω–Ω—è –∑–º—ñ–Ω–∏–ª–æ—Å—è!
const updatedUser = { ...user, age: 26 };
```

### –ß–æ–º—É Redux –≤–∏–º–∞–≥–∞—î —ñ–º–º—É—Ç–∞–±–µ–ª—å–Ω–æ—Å—Ç—ñ?

1.  **–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å (Reference Equality Check)**:
    Redux –ø–µ—Ä–µ–≤—ñ—Ä—è—î, —á–∏ –∑–º—ñ–Ω–∏–≤—Å—è —Å—Ç–∞–Ω, –ø–æ—Ä—ñ–≤–Ω—é—é—á–∏ –ø–æ—Å–∏–ª–∞–Ω–Ω—è (`prevProps === nextProps`).
    -   –Ø–∫—â–æ –º–∏ –∑—Ä–æ–±–∏–º–æ –º—É—Ç–∞—Ü—ñ—é (`obj.prop = 1`), –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ `obj` –Ω–µ –∑–º—ñ–Ω–∏—Ç—å—Å—è. React/Redux –ø–æ–¥—É–º–∞—î, —â–æ –Ω—ñ—á–æ–≥–æ –Ω–µ –∑–º—ñ–Ω–∏–ª–æ—Å—è, —ñ **–Ω–µ –æ–Ω–æ–≤–∏—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç**.
    -   –Ø–∫—â–æ –º–∏ —Å—Ç–≤–æ—Ä–∏–º–æ –Ω–æ–≤–∏–π –æ–±'—î–∫—Ç, –ø–æ—Å–∏–ª–∞–Ω–Ω—è –±—É–¥–µ –Ω–æ–≤–∏–º, —ñ Redux –∑—Ä–æ–∑—É–º—ñ—î: "–ê–≥–∞, –¥–∞–Ω—ñ –∑–º—ñ–Ω–∏–ª–∏—Å—è, —Ç—Ä–µ–±–∞ –ø–µ—Ä–µ–º–∞–ª—é–≤–∞—Ç–∏ UI".

2.  **–ü–µ—Ä–µ–¥–±–∞—á—É–≤–∞–Ω—ñ—Å—Ç—å —Ç–∞ Time Travel**:
    –©–æ–± "–≤—ñ–¥–º–æ—Ç–∞—Ç–∏ —á–∞—Å –Ω–∞–∑–∞–¥", Redux DevTools –∑–±–µ—Ä—ñ–≥–∞—î –∫–æ–ø—ñ—ó –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ—Ö —Å—Ç–∞–Ω—ñ–≤. –Ø–∫—â–æ –≤–∏ –º—É—Ç—É—î—Ç–µ —Å—Ç–∞–Ω, –≤–∏ –ø–µ—Ä–µ–∑–∞–ø–∏—Å—É—î—Ç–µ —ñ—Å—Ç–æ—Ä—ñ—é. –ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—è –Ω–∞–∑–∞–¥ —Å—Ç–∞—î –Ω–µ–º–æ–∂–ª–∏–≤–æ.

### –ü–∞—Ç–µ—Ä–Ω–∏ –Ü–º–º—É—Ç–∞–±–µ–ª—å–Ω–æ–≥–æ –û–Ω–æ–≤–ª–µ–Ω–Ω—è

–í–∞–º –¥–æ–≤–µ–¥–µ—Ç—å—Å—è —á–∞—Å—Ç–æ –ø–∏—Å–∞—Ç–∏ —Ç–∞–∫–∏–π –∫–æ–¥ —É –∫–ª–∞—Å–∏—á–Ω–æ–º—É Redux (–∞–±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ Redux Toolkit, —è–∫–∏–π —Ä–æ–±–∏—Ç—å —Ü–µ –∑–∞ –≤–∞—Å).

#### 1. –û–Ω–æ–≤–ª–µ–Ω–Ω—è –æ–±'—î–∫—Ç–∞

–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ Spread Operator (`...`).

```javascript
const state = {
  loading: false,
  data: { id: 1, text: 'Hello' }
};

// ‚ùå –ü–æ–≥–∞–Ω–æ
state.loading = true;

// ‚úÖ –î–æ–±—Ä–µ
return {
  ...state,        // –ö–æ–ø—ñ—é—î–º–æ –≤—Å—ñ –ø–æ–ª—è (data)
  loading: true    // –ü–µ—Ä–µ–∑–∞–ø–∏—Å—É—î–º–æ loading
};
```

#### 2. –û–Ω–æ–≤–ª–µ–Ω–Ω—è –≤–∫–ª–∞–¥–µ–Ω–æ–≥–æ –æ–±'—î–∫—Ç–∞

–¶–µ –Ω–∞–π—Å–∫–ª–∞–¥–Ω—ñ—à–µ. –ü–æ—Ç—Ä—ñ–±–Ω–æ –∫–æ–ø—ñ—é–≤–∞—Ç–∏ –∫–æ–∂–µ–Ω —Ä—ñ–≤–µ–Ω—å –≤–∫–ª–∞–¥–µ–Ω–æ—Å—Ç—ñ (Shallow Copy).

```javascript
// –•–æ—á–µ–º–æ –∑–º—ñ–Ω–∏—Ç–∏ state.data.text
return {
  ...state,
  data: {
    ...state.data, // –ö–æ–ø—ñ—é—î–º–æ –ø–æ–ª—è –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ data
    text: 'Bye'    // –û–Ω–æ–≤–ª—é—î–º–æ text
  }
};
```

#### 3. –î–æ–¥–∞–≤–∞–Ω–Ω—è –≤ –º–∞—Å–∏–≤

```javascript
const todos = [1, 2, 3];

// ‚ùå –ü–æ–≥–∞–Ω–æ (push –º—É—Ç—É—î –º–∞—Å–∏–≤)
todos.push(4);

// ‚úÖ –î–æ–±—Ä–µ
const newTodos = [...todos, 4];
```

#### 4. –í–∏–¥–∞–ª–µ–Ω–Ω—è –∑ –º–∞—Å–∏–≤—É

–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `filter`, –±–æ –≤—ñ–Ω –ø–æ–≤–µ—Ä—Ç–∞—î –Ω–æ–≤–∏–π –º–∞—Å–∏–≤.

```javascript
// –í–∏–¥–∞–ª–∏—Ç–∏ todo –∑ id=2
const newTodos = state.todos.filter(todo => todo.id !== 2);
```

#### 5. –û–Ω–æ–≤–ª–µ–Ω–Ω—è –µ–ª–µ–º–µ–Ω—Ç–∞ –≤ –º–∞—Å–∏–≤—ñ

–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `map`.

```javascript
// –ü–µ—Ä–µ–º–∫–Ω—É—Ç–∏ —Å—Ç–∞—Ç—É—Å todo –∑ id=2
const newTodos = state.todos.map(todo => {
  if (todo.id === 2) {
    // –ó–Ω–∞–π—à–ª–∏ –ø–æ—Ç—Ä—ñ–±–Ω–∏–π? –ü–æ–≤–µ—Ä—Ç–∞—î–º–æ –∫–æ–ø—ñ—é –∑—ñ –∑–º—ñ–Ω–∞–º–∏
    return { ...todo, completed: !todo.completed };
  }
  // –ù–µ —Ç–æ–π? –ü–æ–≤–µ—Ä—Ç–∞—î–º–æ –±–µ–∑ –∑–º—ñ–Ω
  return todo;
});
```

::note
–¶–µ–π –∫–æ–¥ –≤–∏–≥–ª—è–¥–∞—î –≥—Ä–æ–º—ñ–∑–¥–∫–∏–º, —á–∏ –Ω–µ —Ç–∞–∫? –°–∞–º–µ —Ç–æ–º—É –≤ —Å—É—á–∞—Å–Ω–æ–º—É Redux (Toolkit) –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ **Immer**, —è–∫–∞ –¥–æ–∑–≤–æ–ª—è—î –ø–∏—Å–∞—Ç–∏ –º—É—Ç–∞–±–µ–ª—å–Ω–∏–π –∫–æ–¥, –∞ –ø—ñ–¥ –∫–∞–ø–æ—Ç–æ–º –ø–µ—Ä–µ—Ç–≤–æ—Ä—é—î –π–æ–≥–æ –Ω–∞ —ñ–º–º—É—Ç–∞–±–µ–ª—å–Ω–∏–π. –ê–ª–µ –ø—Ä–æ —Ü–µ –ø—ñ–∑–Ω—ñ—à–µ. –°–ø–æ—á–∞—Ç–∫—É –Ω–∞–≤—á–∏–º–æ—Å—è "—Ö–æ–¥–∏—Ç–∏ –ø—ñ—à–∫–∏".
::

---

–¢–µ–ø–µ—Ä, –∫–æ–ª–∏ –º–∏ –æ–∑–±—Ä–æ—î–Ω—ñ —Ç–µ–æ—Ä—ñ—î—é, –¥–∞–≤–∞–π—Ç–µ –Ω–∞–ø–∏—à–µ–º–æ –Ω–∞—à –ø–µ—Ä—à–∏–π —Ä–µ–∞–ª—å–Ω–∏–π Redux –∫–æ–¥.

üëâ [–î–∞–ª—ñ: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è Store —Ç–∞ –ü–µ—Ä—à–∏–π Reducer](../02.classic-redux/01.store-setup.md)
