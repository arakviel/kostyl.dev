# –ö–æ–º–±—ñ–Ω—É–≤–∞–Ω–Ω—è Reducers (Root Reducer)

–£ —Ä–µ–∞–ª—å–Ω–æ–º—É –¥–æ–¥–∞—Ç–∫—É –≤–∏ –Ω–µ –±—É–¥–µ—Ç–µ —Ç—Ä–∏–º–∞—Ç–∏ –≤—Å—é –ª–æ–≥—ñ–∫—É –≤ –æ–¥–Ω–æ–º—É —Ñ–∞–π–ª—ñ `reducer.js`. –¶–µ –∑—Ä–æ–±–∏–ª–æ –± —Ñ–∞–π–ª –±–µ–∑–∫—ñ–Ω–µ—á–Ω–∏–º —ñ –Ω–µ—á–∏—Ç–∞–±–µ–ª—å–Ω–∏–º.

Redux –ø—Ä–æ–ø–æ–Ω—É—î –µ–ª–µ–≥–∞–Ω—Ç–Ω–µ —Ä—ñ—à–µ–Ω–Ω—è: **Reducer Composition** (–ö–æ–º–ø–æ–∑–∏—Ü—ñ—è –†–µ–¥—é—Å–µ—Ä—ñ–≤).

## –Ü–¥–µ—è

–ú–∏ —Ä–æ–∑–±–∏–≤–∞—î–º–æ –Ω–∞—à –≥–ª–æ–±–∞–ª—å–Ω–∏–π —Å—Ç–∞–Ω –Ω–∞ "—Å–ª–∞–π—Å–∏" (—Å–∫–∏–±–∫–∏/—á–∞—Å—Ç–∏–Ω–∏). –ö–æ–∂–µ–Ω —Å–ª–∞–π—Å –∫–µ—Ä—É—î—Ç—å—Å—è —Å–≤–æ—ó–º –≤–ª–∞—Å–Ω–∏–º –º–∞–ª–µ–Ω—å–∫–∏–º —Ä–µ–¥—é—Å–µ—Ä–æ–º.

–ó–∞–º—ñ—Å—Ç—å –æ–¥–Ω–æ–≥–æ –≥—ñ–≥–∞–Ω—Ç–∞, —è–∫–∏–π –∑–Ω–∞—î –≤—Å–µ –ø—Ä–æ –≤—Å–µ:

```javascript
function bigBadReducer(state, action) {
  switch (action.type) {
    case 'ADD_TODO': ...
    case 'SET_USER': ...
    case 'TOGGLE_SIDEBAR': ...
    // 1000 lines later...
  }
}
```

–ú–∏ —Å—Ç–≤–æ—Ä—é—î–º–æ —Å–ø–µ—Ü—ñ–∞–ª—ñ—Å—Ç—ñ–≤:

-   `todosReducer`: –∫–µ—Ä—É—î –º–∞—Å–∏–≤–æ–º –∑–∞–≤–¥–∞–Ω—å.
-   `userReducer`: –∫–µ—Ä—É—î –ø—Ä–æ—Ñ—ñ–ª–µ–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.
-   `uiReducer`: –∫–µ—Ä—É—î —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º.

## `combineReducers`

Redux –Ω–∞–¥–∞—î —É—Ç–∏–ª—ñ—Ç—É `combineReducers`, —è–∫–∞ –æ–±'—î–¥–Ω—É—î —Ü—ñ –º–∞–ª–µ–Ω—å–∫—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –≤ –æ–¥–Ω—É –≤–µ–ª–∏–∫—É (Root Reducer).

```javascript [reducers/index.js]
import { combineReducers } from 'redux';
import { todosReducer } from './todosReducer';
import { userReducer } from './userReducer';
import { uiReducer } from './uiReducer';

const rootReducer = combineReducers({
  // –ö–ª—é—á —Ç—É—Ç –≤–∏–∑–Ω–∞—á–∞—î, —è–∫ –Ω–∞–∑–∏–≤–∞—Ç–∏–º–µ—Ç—å—Å—è –ø–æ–ª–µ –≤ —Å—Ç–µ–π—Ç—ñ!
  todos: todosReducer,
  user: userReducer,
  interface: uiReducer // –ú–æ–∂–Ω–∞ –ø–µ—Ä–µ–π–º–µ–Ω—É–≤–∞—Ç–∏
});

export default rootReducer;
```

–¢–µ–ø–µ—Ä –Ω–∞—à –≥–ª–æ–±–∞–ª—å–Ω–∏–π —Å—Ç–∞–Ω –±—É–¥–µ –≤–∏–≥–ª—è–¥–∞—Ç–∏ —Ç–∞–∫:

```javascript
{
  todos: [...],    // –†–µ–∑—É–ª—å—Ç–∞—Ç —Ä–æ–±–æ—Ç–∏ todosReducer
  user: { ... },   // –†–µ–∑—É–ª—å—Ç–∞—Ç —Ä–æ–±–æ—Ç–∏ userReducer
  interface: { ... } // –†–µ–∑—É–ª—å—Ç–∞—Ç —Ä–æ–±–æ—Ç–∏ uiReducer
}
```

## –Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î –ø—ñ–¥ –∫–∞–ø–æ—Ç–æ–º?

–ö–æ–ª–∏ –≤–∏ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î—Ç–µ action (`store.dispatch(action)`), `rootReducer` —Ä–æ–±–∏—Ç—å –Ω–∞—Å—Ç—É–ø–Ω–µ:

1.  –í—ñ–Ω –≤–∏–∫–ª–∏–∫–∞—î `todosReducer(state.todos, action)`.
2.  –í—ñ–Ω –≤–∏–∫–ª–∏–∫–∞—î `userReducer(state.user, action)`.
3.  –í—ñ–Ω –≤–∏–∫–ª–∏–∫–∞—î `uiReducer(state.interface, action)`.
4.  –í—ñ–Ω –∑–±–∏—Ä–∞—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –≤—ñ–¥ –∫–æ–∂–Ω–æ–≥–æ –∑ –Ω–∏—Ö —ñ –ø–æ–≤–µ—Ä—Ç–∞—î –Ω–æ–≤–∏–π –≤–µ–ª–∏–∫–∏–π –æ–±'—î–∫—Ç —Å—Ç–∞–Ω—É.

::alert{type="info"}
–í–∞–∂–ª–∏–≤–æ —Ä–æ–∑—É–º—ñ—Ç–∏: **–ö–æ–∂–µ–Ω action –ø—Ä–æ—Ö–æ–¥–∏—Ç—å —á–µ—Ä–µ–∑ –í–°–Ü —Ä–µ–¥—é—Å–µ—Ä–∏**. –†–µ–¥—é—Å–µ—Ä–∏ –Ω–µ "–ø—ñ–¥–ø–∏—Å—É—é—Ç—å—Å—è" –Ω–∞ –æ–∫—Ä–µ–º—ñ —Ç–∏–ø–∏ –µ–∫—à–µ–Ω—ñ–≤. –í–æ–Ω–∏ –ø—Ä–æ—Å—Ç–æ —ñ–≥–Ω–æ—Ä—É—é—Ç—å —Ç—ñ, —è–∫—ñ —ó–º –Ω–µ —Ü—ñ–∫–∞–≤—ñ (–ø–æ–≤–µ—Ä—Ç–∞—é—Ç—å `default: state`).
::

## –ü—Ä–∞–∫—Ç–∏—á–Ω–∏–π –ø—Ä–∏–∫–ª–∞–¥

–î–∞–≤–∞–π—Ç–µ —Å—Ç–≤–æ—Ä–∏–º–æ –ø–æ–≤–Ω–æ—Ü—ñ–Ω–Ω—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–ª—è `store`.

::code-tree
```javascript [reducers/todos.js]
export function todosReducer(state = [], action) {
  switch (action.type) {
    case 'ADD_TODO': return [...state, action.payload];
    default: return state;
  }
}
```

```javascript [reducers/visibilityFilter.js]
export function visibilityFilterReducer(state = 'SHOW_ALL', action) {
  switch (action.type) {
    case 'SET_FILTER': return action.payload;
    default: return state;
  }
}
```

```javascript [reducers/index.js]
import { combineReducers } from 'redux';
import { todosReducer } from './todos';
import { visibilityFilterReducer } from './visibilityFilter';

export default combineReducers({
  todos: todosReducer,
  visibilityFilter: visibilityFilterReducer
});
```

```javascript [store.js]
import { createStore } from 'redux';
import rootReducer from './reducers';

const store = createStore(rootReducer);
export default store;
```
::

–¢–µ–ø–µ—Ä `store.getState()` –ø–æ–≤–µ—Ä–Ω–µ:
```javascript
{
  todos: [],
  visibilityFilter: 'SHOW_ALL'
}
```

–¶–µ–π –ø–∞—Ç–µ—Ä–Ω —î —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–º –¥–ª—è –≤—Å—ñ—Ö Redux –¥–æ–¥–∞—Ç–∫—ñ–≤. –ù–∞–≤—ñ—Ç—å –≤ Redux Toolkit, —è–∫–∏–π –º–∏ –±—É–¥–µ–º–æ –≤—á–∏—Ç–∏ –ø—ñ–∑–Ω—ñ—à–µ, –ø—ñ–¥ –∫–∞–ø–æ—Ç–æ–º –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —Ç–æ–π —Å–∞–º–∏–π –ø—Ä–∏–Ω—Ü–∏–ø.

–¢–µ–ø–µ—Ä, –∫–æ–ª–∏ —É –Ω–∞—Å —î —Ä–æ–±–æ—á–∏–π Store, –Ω–∞—Å—Ç–∞–≤ —á–∞—Å –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏ –π–æ–≥–æ –¥–æ React.

üëâ [–î–∞–ª—ñ: –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ React (Provider & Hooks)](./05.react-redux-connection.md)
