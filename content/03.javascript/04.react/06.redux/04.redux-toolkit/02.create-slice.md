# createSlice: "–í—Å–µ –≤ –æ–¥–Ω–æ–º—É"

–ü–∞–º'—è—Ç–∞—î—Ç–µ, —è–∫ –º–∏ —Å—Ç–≤–æ—Ä—é–≤–∞–ª–∏ –æ–∫—Ä–µ–º—ñ —Ñ–∞–π–ª–∏ –¥–ª—è `constants`, `actions` —Ç–∞ `reducers`? –ó–∞–±—É–¥—å—Ç–µ –ø—Ä–æ —Ü–µ.
`createSlice` ‚Äî —Ü–µ —Ñ—É–Ω–∫—Ü—ñ—è, —è–∫–∞ —Ä–æ–±–∏—Ç—å –≤—Å–µ —Ü–µ –∑–∞ –≤–∞—Å –≤ –æ–¥–Ω–æ–º—É —Ñ–∞–π–ª—ñ.

## –ê–Ω–∞—Ç–æ–º—ñ—è Slice

–°—Ç–≤–æ—Ä–∏–º–æ —Ñ–∞–π–ª `counterSlice.js`.

```javascript [features/counter/counterSlice.js]
import { createSlice } from '@reduxjs/toolkit';

const initialState = {
  value: 0,
};

export const counterSlice = createSlice({
  name: 'counter', // –ü—Ä–µ—Ñ—ñ–∫—Å –¥–ª—è action types
  initialState,
  reducers: {
    increment: (state) => {
      // –ú–∞–≥—ñ—è! –ú–∏ –ø–∏—à–µ–º–æ —Ç–∞–∫, –Ω—ñ–±–∏ –º—É—Ç—É—î–º–æ —Å—Ç–∞–Ω.
      state.value += 1;
    },
    decrement: (state) => {
      state.value -= 1;
    },
    incrementByAmount: (state, action) => {
      state.value += action.payload;
    },
  },
});

// RTK –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–≥–µ–Ω–µ—Ä—É–≤–∞–≤ –¥–ª—è –Ω–∞—Å action creators!
export const { increment, decrement, incrementByAmount } = counterSlice.actions;

// –Ü reducer —Ç–∞–∫–æ–∂ –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ
export default counterSlice.reducer;
```

### –Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î?

1.  **Actions**: RTK –¥–∏–≤–∏—Ç—å—Å—è –Ω–∞ –∫–ª—é—á—ñ –æ–±'—î–∫—Ç–∞ `reducers` (`increment`, `decrement`) —ñ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å—Ç–≤–æ—Ä—é—î action creators.
    -   `increment()` –ø–æ–≤–µ—Ä–Ω–µ `{ type: 'counter/increment' }`
    -   `incrementByAmount(10)` –ø–æ–≤–µ—Ä–Ω–µ `{ type: 'counter/incrementByAmount', payload: 10 }`
    
    –í–∞–º –±—ñ–ª—å—à–µ –Ω–µ —Ç—Ä–µ–±–∞ –ø–∏—Å–∞—Ç–∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç–∏ –≤—Ä—É—á–Ω—É! –ù–∞–∑–≤–∞ —Å–∫–ª–∞–¥–∞—î—Ç—å—Å—è –∑ `name` —Å–ª–∞–π—Å—É + –Ω–∞–∑–≤–∞ —Ä–µ–¥—é—Å–µ—Ä–∞.

2.  **Immer**: –í–∏ –ø–æ–º—ñ—Ç–∏–ª–∏ `state.value += 1`?
    –í—Å–µ—Ä–µ–¥–∏–Ω—ñ `createSlice` –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ **Immer**. –í–æ–Ω–∞ –¥–æ–∑–≤–æ–ª—è—î –ø–∏—Å–∞—Ç–∏ –∫–æ–¥ —É "–º—É—Ç–∞–±–µ–ª—å–Ω–æ–º—É" —Å—Ç–∏–ª—ñ, –∞–ª–µ –ø—ñ–¥ –∫–∞–ø–æ—Ç–æ–º –≤–æ–Ω–∞:
    -   –°—Ç–≤–æ—Ä—é—î —á–µ—Ä–Ω–µ—Ç–∫—É (Draft) —Å—Ç–∞–Ω—É.
    -   –ó–∞–ø–∏—Å—É—î –≤–∞—à—ñ –∑–º—ñ–Ω–∏ –≤ —á–µ—Ä–Ω–µ—Ç–∫—É.
    -   –ù–∞ –æ—Å–Ω–æ–≤—ñ —á–µ—Ä–Ω–µ—Ç–∫–∏ –≥–µ–Ω–µ—Ä—É—î **–Ω–æ–≤–∏–π, —ñ–º–º—É—Ç–∞–±–µ–ª—å–Ω–∏–π —Å—Ç–∞–Ω**.
    
    –¶–µ —Ä–æ–±–∏—Ç—å –∫–æ–¥ —Ä–µ–¥—é—Å–µ—Ä—ñ–≤ –Ω–µ–π–º–æ–≤—ñ—Ä–Ω–æ —á–∏—Å—Ç–∏–º —ñ –∑—Ä–æ–∑—É–º—ñ–ª–∏–º. –ë—ñ–ª—å—à–µ –Ω—ñ—è–∫–∏—Ö `{ ...state, user: { ...state.user, data: ... } }`.

### –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ

–ù—ñ—á–æ–≥–æ –Ω–æ–≤–æ–≥–æ, –≤—Å–µ —Ç–∞–∫ —Å–∞–º–æ —è–∫ —ñ —Ä–∞–Ω—ñ—à–µ:

```jsx
import { useSelector, useDispatch } from 'react-redux';
import { increment, incrementByAmount } from './counterSlice';

export function Counter() {
  const count = useSelector((state) => state.counter.value);
  const dispatch = useDispatch();

  return (
    <div>
      <span>{count}</span>
      <button onClick={() => dispatch(increment())}>+</button>
      <button onClick={() => dispatch(incrementByAmount(5))}>+5</button>
    </div>
  );
}
```

## –ü—Ä–∞–≤–∏–ª–∞ Immer

–•–æ—á–∞ Immer –¥–æ–∑–≤–æ–ª—è—î –±–∞–≥–∞—Ç–æ —á–æ–≥–æ, —î –ø—Ä–∞–≤–∏–ª–∞:

1.  **–ê–±–æ –º—É—Ç—É–π—Ç–µ, –∞–±–æ –ø–æ–≤–µ—Ä—Ç–∞–π—Ç–µ, –∞–ª–µ –Ω–µ –æ–±–∏–¥–≤–∞ –æ–¥—Ä–∞–∑—É.**
    ```javascript
    // ‚úÖ –ú—É—Ç–∞—Ü—ñ—è (–Ω—ñ—á–æ–≥–æ –Ω–µ –ø–æ–≤–µ—Ä—Ç–∞—î–º–æ)
    addItem: (state, action) => {
      state.push(action.payload);
    }
    
    // ‚úÖ –ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ —Å—Ç–∞–Ω—É (—è–∫ –≤ –∫–ª–∞—Å–∏—Ü—ñ)
    reset: () => {
      return initialState;
    }
    
    // ‚ùå –ü–æ–º–∏–ª–∫–∞!
    addItemWrong: (state, action) => {
      state.push(action.payload); // –ú—É—Ç–∞—Ü—ñ—è
      return state; // –Ü –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è!
    }
    ```

2.  Immer –ø—Ä–∞—Ü—é—î —Ç—ñ–ª—å–∫–∏ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ `createSlice` (–∞–±–æ `createReducer`). –ù–µ –Ω–∞–º–∞–≥–∞–π—Ç–µ—Å—è –º—É—Ç—É–≤–∞—Ç–∏ –ø—Ä–æ–ø—Å–∏ –≤ React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö!

---

–¢–µ–ø–µ—Ä —É –Ω–∞—Å —î —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞ –ª–æ–≥—ñ–∫–∞. –ê —è–∫ —â–æ–¥–æ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç—ñ? –¢—É—Ç RTK —Ç–µ–∂ –º–∞—î –∫–æ–∑–∏—Ä—è –≤ —Ä—É–∫–∞–≤—ñ.

üëâ [–î–∞–ª—ñ: createAsyncThunk](./03.async-thunks.md)
