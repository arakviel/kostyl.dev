# –ú–µ–º–æ—ñ–∑–∞—Ü—ñ—è —Å–µ–ª–µ–∫—Ç–æ—Ä—ñ–≤ –∑ Reselect

–°–µ–ª–µ–∫—Ç–æ—Ä–∏ (selectors) ‚Äî —Ü–µ —Ñ—É–Ω–∫—Ü—ñ—ó, —è–∫—ñ –≤–∏—Ç—è–≥—É—é—Ç—å –¥–∞–Ω—ñ –∑—ñ state. –ê–ª–µ —î –ø—Ä–æ–±–ª–µ–º–∞: –ø—Ä–∏ –∫–æ–∂–Ω–æ–º—É —Ä–µ-—Ä–µ–Ω–¥–µ—Ä—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≤–∏–∫–ª–∏–∫–∞—î —Å–µ–ª–µ–∫—Ç–æ—Ä –∑–Ω–æ–≤—É, –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ –¥–∞–Ω—ñ –Ω–µ –∑–º—ñ–Ω–∏–ª–∏—Å—è. –¶–µ –ø—Ä–∏–∑–≤–æ–¥–∏—Ç—å –¥–æ –∑–∞–π–≤–∏—Ö –æ–±—á–∏—Å–ª–µ–Ω—å —ñ —Ä–µ-—Ä–µ–Ω–¥–µ—Ä—ñ–≤. **Reselect** —Ç–∞ **createSelector** –≤–∏—Ä—ñ—à—É—é—Ç—å —Ü—é –ø—Ä–æ–±–ª–µ–º—É —á–µ—Ä–µ–∑ –º–µ–º–æ—ñ–∑–∞—Ü—ñ—é.

## –ü—Ä–æ–±–ª–µ–º–∞: –ó–∞–π–≤—ñ –æ–±—á–∏—Å–ª–µ–Ω–Ω—è

```javascript
// ‚ùå –ü—Ä–æ–±–ª–µ–º–Ω–∏–π —Å–µ–ª–µ–∫—Ç–æ—Ä
const selectCompletedTodos = (state) => {
    console.log('Calculating completed todos...')
    return state.todos.filter((todo) => todo.completed)
}

function TodoStats() {
    const completed = useSelector(selectCompletedTodos)
    const count = useSelector((state) => state.todos.length)

    return (
        <div>
            Completed: {completed.length} / {count}
        </div>
    )
}
```

**–©–æ –Ω–µ —Ç–∞–∫?**

- –ü—Ä–∏ –∑–º—ñ–Ω—ñ **–±—É–¥—å-—è–∫–æ–≥–æ** state (–Ω–µ —Ç—ñ–ª—å–∫–∏ todos) —Å–µ–ª–µ–∫—Ç–æ—Ä –ø–µ—Ä–µ—Å—á–∏—Ç—É—î—Ç—å—Å—è
- `.filter()` —Å—Ç–≤–æ—Ä—é—î **–Ω–æ–≤–∏–π –º–∞—Å–∏–≤** –∫–æ–∂–Ω–æ–≥–æ —Ä–∞–∑—É
- React –±–∞—á–∏—Ç—å –Ω–æ–≤–∏–π —Ä–µ—Ñ–µ—Ä–µ–Ω—Å ‚Üí –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ä–µ-—Ä–µ–Ω–¥–µ—Ä–∏—Ç—å—Å—è
- –î–ª—è –≤–µ–ª–∏–∫–∏—Ö —Å–ø–∏—Å–∫—ñ–≤ —Ü–µ **–¥—É–∂–µ –ø–æ–≤—ñ–ª—å–Ω–æ**

::mermaid

```mermaid
graph LR
    A[State change] --> B[Selector –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è]
    B --> C[filter —Å—Ç–≤–æ—Ä—é—î –Ω–æ–≤–∏–π –º–∞—Å–∏–≤]
    C --> D[–ù–æ–≤–∏–π —Ä–µ—Ñ–µ—Ä–µ–Ω—Å]
    D --> E[Component re-render]
    E --> F[Repeat –Ω–∞ –∫–æ–∂–Ω—ñ–π –∑–º—ñ–Ω—ñ]

    style A fill:#ef4444,stroke:#dc2626,color:#ffffff
    style C fill:#f59e0b,stroke:#b45309,color:#ffffff
    style E fill:#ef4444,stroke:#dc2626,color:#ffffff
```

::

---

## –†—ñ—à–µ–Ω–Ω—è: createSelector (Memoization)

```javascript
import { createSelector } from '@reduxjs/toolkit'

// ‚úÖ Memoized —Å–µ–ª–µ–∫—Ç–æ—Ä
const selectCompletedTodos = createSelector(
    [(state) => state.todos], // Input selector
    (todos) => {
        console.log('Calculating completed todos...')
        return todos.filter((todo) => todo.completed)
    },
)
```

**–Ø–∫ –ø—Ä–∞—Ü—é—î:**

1. –í–∏–∫–ª–∏–∫–∞—î input selector: `state => state.todos`
2. –ü–æ—Ä—ñ–≤–Ω—é—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∑ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–º –≤–∏–∫–ª–∏–∫–æ–º
3. **–Ø–∫—â–æ –æ–¥–Ω–∞–∫–æ–≤–∏–π** ‚Üí –ø–æ–≤–µ—Ä—Ç–∞—î –∑–∞–∫–µ—à–æ–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
4. **–Ø–∫—â–æ –∑–º—ñ–Ω–∏–≤—Å—è** ‚Üí –æ–±—á–∏—Å–ª—é—î –∑–Ω–æ–≤—É —Ç–∞ –∫–µ—à—É—î

::tip
**–†–µ–∑—É–ª—å—Ç–∞—Ç**: `console.log` –≤–∏–∫–æ–Ω–∞—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ –ø—Ä–∏ –∑–º—ñ–Ω—ñ `state.todos`, –∞ –Ω–µ –ø—Ä–∏ –∫–æ–∂–Ω–æ–º—É —Ä–µ-—Ä–µ–Ω–¥–µ—Ä—ñ!
::

---

## createSelector API

### –ë–∞–∑–æ–≤–∏–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å

```javascript
const selector = createSelector(
  [inputSelector1, inputSelector2, ...], // Input selectors (–º–∞—Å–∏–≤)
  (result1, result2, ...) => {           // Result function
    // –û–±—á–∏—Å–ª–µ–Ω–Ω—è –Ω–∞ –æ—Å–Ω–æ–≤—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ input selectors
    return computedValue;
  }
);
```

### –ü—Ä–æ—Å—Ç–∏–π –ø—Ä–∏–∫–ª–∞–¥

```javascript
// Input selector
const selectTodos = (state) => state.todos

// Memoized selector
const selectCompletedTodos = createSelector([selectTodos], (todos) => todos.filter((todo) => todo.completed))

// –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
const completedTodos = useSelector(selectCompletedTodos)
```

---

## Patterns –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### 1. –û–¥–∏–Ω input selector

```javascript
const selectTodos = (state) => state.todos

const selectTodoCount = createSelector([selectTodos], (todos) => todos.length)

const selectCompletedCount = createSelector([selectTodos], (todos) => todos.filter((t) => t.completed).length)
```

### 2. –ú–Ω–æ–∂–∏–Ω–Ω—ñ input selectors

```javascript
const selectTodos = (state) => state.todos
const selectFilter = (state) => state.filter
const selectSearchQuery = (state) => state.searchQuery

const selectFilteredTodos = createSelector(
    [selectTodos, selectFilter, selectSearchQuery],
    (todos, filter, searchQuery) => {
        let result = todos

        // –§—ñ–ª—å—Ç—Ä
        if (filter === 'completed') {
            result = result.filter((t) => t.completed)
        } else if (filter === 'active') {
            result = result.filter((t) => !t.completed)
        }

        // –ü–æ—à—É–∫
        if (searchQuery) {
            result = result.filter((t) => t.text.toLowerCase().includes(searchQuery.toLowerCase()))
        }

        return result
    },
)
```

### 3. –ö–æ–º–ø–æ–∑–∏—Ü—ñ—è —Å–µ–ª–µ–∫—Ç–æ—Ä—ñ–≤ (Chaining)

```javascript
// –ë–∞–∑–æ–≤—ñ —Å–µ–ª–µ–∫—Ç–æ—Ä–∏
const selectTodos = (state) => state.todos

// –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î selectTodos
const selectCompletedTodos = createSelector([selectTodos], (todos) => todos.filter((t) => t.completed))

// –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î selectCompletedTodos
const selectCompletedTodoIds = createSelector([selectCompletedTodos], (completed) => completed.map((t) => t.id))

// –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –Ω–∞ –æ—Å–Ω–æ–≤—ñ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ—Ö —Å–µ–ª–µ–∫—Ç–æ—Ä—ñ–≤
const selectTodoStats = createSelector([selectTodos, selectCompletedTodos], (allTodos, completedTodos) => ({
    total: allTodos.length,
    completed: completedTodos.length,
    active: allTodos.length - completedTodos.length,
    percentComplete: (completedTodos.length / allTodos.length) * 100,
}))
```

### 4. –°–µ–ª–µ–∫—Ç–æ—Ä–∏ –∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏

```javascript
// ‚ùå –ù–µ –ø—Ä–∞—Ü—é—î –∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –Ω–∞–ø—Ä—è–º—É
const selectTodoById = createSelector(
    [(state) => state.todos],
    (todos, todoId) => todos.find((t) => t.id === todoId), // todoId –∑–≤—ñ–¥–∫–∏?
)

// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∏–π —Å–ø–æ—Å—ñ–±: factory function
const makeSelectTodoById = () =>
    createSelector(
        [
            (state) => state.todos,
            (state, todoId) => todoId, // –î—Ä—É–≥–∏–π input –ø—Ä–∏–π–º–∞—î –ø–∞—Ä–∞–º–µ—Ç—Ä
        ],
        (todos, todoId) => todos.find((t) => t.id === todoId),
    )

// –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
function TodoItem({ todoId }) {
    const selectTodoById = useMemo(makeSelectTodoById, [])
    const todo = useSelector((state) => selectTodoById(state, todoId))

    return <div>{todo.text}</div>
}
```

::warning
**–í–∞–∂–ª–∏–≤–æ**: –ö–æ–∂–µ–Ω –µ–∫–∑–µ–º–ø–ª—è—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –ø–æ–≤–∏–Ω–µ–Ω –º–∞—Ç–∏ **—Å–≤—ñ–π –≤–ª–∞—Å–Ω–∏–π** —Å–µ–ª–µ–∫—Ç–æ—Ä –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ—ó –º–µ–º–æ—ñ–∑–∞—Ü—ñ—ó!
::

### 5. Denormalization (–∑ Entity Adapter)

```javascript
import { createSelector } from '@reduxjs/toolkit'

// –°–µ–ª–µ–∫—Ç–æ—Ä–∏ –∑ entity adapter
const selectAllPosts = (state) => state.posts.ids.map((id) => state.posts.entities[id])
const selectAllUsers = (state) => state.users.ids.map((id) => state.users.entities[id])

// Denormalize posts –∑ –∞–≤—Ç–æ—Ä–∞–º–∏
const selectPostsWithAuthors = createSelector([selectAllPosts, selectAllUsers], (posts, users) => {
    const usersById = users.reduce((acc, user) => {
        acc[user.id] = user
        return acc
    }, {})

    return posts.map((post) => ({
        ...post,
        author: usersById[post.authorId],
    }))
})
```

### 6. –ê–≥—Ä–µ–≥–∞—Ü—ñ—è —Ç–∞ –≥—Ä—É–ø—É–≤–∞–Ω–Ω—è

```javascript
const selectOrders = (state) => state.orders

const selectOrdersByStatus = createSelector([selectOrders], (orders) => {
    return orders.reduce((acc, order) => {
        const status = order.status
        if (!acc[status]) {
            acc[status] = []
        }
        acc[status].push(order)
        return acc
    }, {})
})

const selectOrderStatistics = createSelector([selectOrders], (orders) => {
    return orders.reduce(
        (stats, order) => {
            stats.totalRevenue += order.total
            stats.orderCount++
            stats.averageOrderValue = stats.totalRevenue / stats.orderCount

            if (order.status === 'completed') {
                stats.completedOrders++
            }

            return stats
        },
        {
            totalRevenue: 0,
            orderCount: 0,
            averageOrderValue: 0,
            completedOrders: 0,
        },
    )
})
```

---

## –Ø–∫ –ø—Ä–∞—Ü—é—î –º–µ–º–æ—ñ–∑–∞—Ü—ñ—è?

::mermaid

```mermaid
sequenceDiagram
    participant C as Component
    participant S as Selector
    participant Cache as Cache

    C->>S: –í–∏–∫–ª–∏–∫ selector(state)
    S->>S: –í–∏–∫–ª–∏–∫ input selectors
    S->>Cache: –ü–æ—Ä—ñ–≤–Ω—è—Ç–∏ –∑ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ–º?

    alt Inputs –Ω–µ –∑–º—ñ–Ω–∏–ª–∏—Å—è
        Cache->>S: –ü–æ–≤–µ—Ä–Ω—É—Ç–∏ cached —Ä–µ–∑—É–ª—å—Ç–∞—Ç
        S->>C: Cached value
        Note over S,Cache: ‚úÖ –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è!
    else Inputs –∑–º—ñ–Ω–∏–ª–∏—Å—è
        S->>S: –û–±—á–∏—Å–ª–∏—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
        S->>Cache: –ó–±–µ—Ä–µ–≥—Ç–∏ –Ω–æ–≤–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
        S->>C: –ù–æ–≤–∏–π value
        Note over S,Cache: –ü–µ—Ä–µ—Ä–∞—Ö—É–Ω–æ–∫ –Ω–µ–æ–±—Ö—ñ–¥–Ω–∏–π
    end
```

::

### –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è —Ä–µ—Ñ–µ—Ä–µ–Ω—Å—ñ–≤

```javascript
// Input selector result
const todos1 = state.todos // [{ id: 1 }, { id: 2 }]
const todos2 = state.todos // –¢–æ–π —Å–∞–º–∏–π –º–∞—Å–∏–≤!

// Reselect –ø–æ—Ä—ñ–≤–Ω—é—î:
todos1 === todos2 // true ‚Üí –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ cache
```

::note
Reselect –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î **strict equality** (`===`) –¥–ª—è –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è. –¢–æ–º—É –≤–∞–∂–ª–∏–≤–æ, —â–æ–± Redux –Ω–µ —Å—Ç–≤–æ—Ä—é–≤–∞–≤ –Ω–æ–≤—ñ –æ–±'—î–∫—Ç–∏ –±–µ–∑ –ø–æ—Ç—Ä–µ–±–∏.
::

---

## Real-World Examples

::accordion

::accordion-item{label="E-commerce: Cart Total" icon="i-lucide-shopping-cart"}

```javascript
const selectCartItems = (state) => state.cart.items

const selectCartTotal = createSelector([selectCartItems], (items) => {
    console.log('Calculating cart total...')
    return items.reduce((total, item) => {
        return total + item.price * item.quantity
    }, 0)
})

const selectCartQuantity = createSelector([selectCartItems], (items) =>
    items.reduce((sum, item) => sum + item.quantity, 0),
)

const selectCartSummary = createSelector(
    [selectCartTotal, selectCartQuantity, selectCartItems],
    (total, quantity, items) => ({
        total,
        quantity,
        itemCount: items.length,
        averagePrice: total / quantity,
    }),
)

// –ö–æ–º–ø–æ–Ω–µ–Ω—Ç
function CartSummary() {
    const summary = useSelector(selectCartSummary)

    return (
        <div>
            <div>Items: {summary.itemCount}</div>
            <div>Total quantity: {summary.quantity}</div>
            <div>Total: ${summary.total.toFixed(2)}</div>
            <div>Avg price: ${summary.averagePrice.toFixed(2)}</div>
        </div>
    )
}
```

::

::accordion-item{label="Dashboard: Analytics" icon="i-lucide-bar-chart"}

```javascript
const selectTransactions = (state) => state.transactions
const selectDateRange = (state) => state.filters.dateRange

const selectFilteredTransactions = createSelector([selectTransactions, selectDateRange], (transactions, dateRange) => {
    if (!dateRange.start || !dateRange.end) {
        return transactions
    }

    return transactions.filter((t) => {
        const date = new Date(t.date)
        return date >= dateRange.start && date <= dateRange.end
    })
})

const selectTransactionStats = createSelector([selectFilteredTransactions], (transactions) => {
    const stats = {
        total: 0,
        count: transactions.length,
        byCategory: {},
        byMonth: {},
    }

    transactions.forEach((t) => {
        stats.total += t.amount

        // By category
        if (!stats.byCategory[t.category]) {
            stats.byCategory[t.category] = { total: 0, count: 0 }
        }
        stats.byCategory[t.category].total += t.amount
        stats.byCategory[t.category].count++

        // By month
        const month = new Date(t.date).toISOString().slice(0, 7)
        if (!stats.byMonth[month]) {
            stats.byMonth[month] = 0
        }
        stats.byMonth[month] += t.amount
    })

    return stats
})
```

::

::accordion-item{label="Social Feed: Sort & Filter" icon="i-lucide-users"}

```javascript
const selectPosts = (state) => state.posts.items
const selectCurrentUser = (state) => state.auth.user
const selectSortBy = (state) => state.ui.sortBy
const selectShowOnlyFollowing = (state) => state.ui.showOnlyFollowing

const selectSortedAndFilteredPosts = createSelector(
    [selectPosts, selectCurrentUser, selectSortBy, selectShowOnlyFollowing],
    (posts, currentUser, sortBy, showOnlyFollowing) => {
        let result = [...posts]

        // Filter
        if (showOnlyFollowing && currentUser) {
            result = result.filter((post) => currentUser.following.includes(post.authorId))
        }

        // Sort
        switch (sortBy) {
            case 'recent':
                result.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt))
                break
            case 'popular':
                result.sort((a, b) => b.likes - a.likes)
                break
            case 'commented':
                result.sort((a, b) => b.comments.length - a.comments.length)
                break
        }

        return result
    },
)
```

::

::accordion-item{label="Permissions System" icon="i-lucide-shield"}

```javascript
const selectCurrentUser = (state) => state.auth.user
const selectAllPermissions = (state) => state.permissions

const selectUserPermissions = createSelector([selectCurrentUser, selectAllPermissions], (user, allPermissions) => {
    if (!user) return []

    const rolePermissions = user.roles.flatMap((role) => allPermissions[role] || [])

    return [...new Set([...rolePermissions, ...user.customPermissions])]
})

const makeSelectCanPerformAction = () =>
    createSelector([selectUserPermissions, (state, action) => action], (permissions, action) =>
        permissions.includes(action),
    )

// –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
function DeleteButton({ itemId }) {
    const selectCanDelete = useMemo(makeSelectCanPerformAction, [])
    const canDelete = useSelector((state) => selectCanDelete(state, 'posts.delete'))

    if (!canDelete) return null

    return <button onClick={() => deletePost(itemId)}>Delete</button>
}
```

::

::

---

## –ü—Ä–æ–±–ª–µ–º–∏ —Ç–∞ —Ä—ñ—à–µ–Ω–Ω—è

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –°–µ–ª–µ–∫—Ç–æ—Ä –∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –Ω–µ –∫–µ—à—É—î—Ç—å—Å—è

```javascript
// ‚ùå –ö–æ–∂–µ–Ω –≤–∏–∫–ª–∏–∫ —Å—Ç–≤–æ—Ä—é—î –Ω–æ–≤–∏–π —Å–µ–ª–µ–∫—Ç–æ—Ä
function TodoItem({ todoId }) {
    const todo = useSelector((state) =>
        createSelector([(s) => s.todos], (todos) => todos.find((t) => t.id === todoId))(state),
    )
}
```

**–†—ñ—à–µ–Ω–Ω—è**: Factory pattern

```javascript
// ‚úÖ –°—Ç–≤–æ—Ä–∏—Ç–∏ —Å–µ–ª–µ–∫—Ç–æ—Ä –æ–¥–∏–Ω —Ä–∞–∑
function TodoItem({ todoId }) {
    const selectTodoById = useMemo(
        () =>
            createSelector([(state) => state.todos, (state, id) => id], (todos, id) => todos.find((t) => t.id === id)),
        [],
    )

    const todo = useSelector((state) => selectTodoById(state, todoId))
}
```

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –°–µ–ª–µ–∫—Ç–æ—Ä —É —Å–ø–∏—Å–∫—É –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤

```javascript
// ‚ùå –í—Å—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å –æ–¥–∏–Ω —Å–µ–ª–µ–∫—Ç–æ—Ä
const selectUserById = createSelector([(state) => state.users, (state, userId) => userId], (users, userId) =>
    users.find((u) => u.id === userId),
)

function UserList({ userIds }) {
    return userIds.map((id) => <UserItem key={id} userId={id} />)
}

function UserItem({ userId }) {
    const user = useSelector((state) => selectUserById(state, userId))
    // –ü—Ä–æ–±–ª–µ–º–∞: –≤—Å—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ –¥—ñ–ª—è—Ç—å –æ–¥–∏–Ω cache!
}
```

**–†—ñ—à–µ–Ω–Ω—è**: –ö–æ–∂–µ–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –º–∞—î —Å–≤—ñ–π —Å–µ–ª–µ–∫—Ç–æ—Ä

```javascript
// ‚úÖ Factory –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–∏—Ö —Å–µ–ª–µ–∫—Ç–æ—Ä—ñ–≤
const makeSelectUserById = () =>
    createSelector([(state) => state.users, (state, userId) => userId], (users, userId) =>
        users.find((u) => u.id === userId),
    )

function UserItem({ userId }) {
    const selectUserById = useMemo(makeSelectUserById, [])
    const user = useSelector((state) => selectUserById(state, userId))
}
```

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –ì–ª–∏–±–æ–∫—ñ –ø–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –æ–±'—î–∫—Ç—ñ–≤

```javascript
// Input –ø–æ–≤–µ—Ä—Ç–∞—î –Ω–æ–≤–∏–π –æ–±'—î–∫—Ç –∫–æ–∂–Ω–æ–≥–æ —Ä–∞–∑—É
const selectFilters = (state) => ({
    status: state.filters.status,
    category: state.filters.category,
}) // –ù–æ–≤–∏–π –æ–±'—î–∫—Ç! {} !== {}

const selectFilteredItems = createSelector([selectFilters], (filters) => {
    /* ... */
}) // –ó–∞–≤–∂–¥–∏ –ø–µ—Ä–µ—Ä–∞—Ö–æ–≤—É—î—Ç—å—Å—è!
```

**–†—ñ—à–µ–Ω–Ω—è**: –ù–µ —Å—Ç–≤–æ—Ä—é–π—Ç–µ –æ–±'—î–∫—Ç–∏ –≤ input selectors

```javascript
// ‚úÖ –û–∫—Ä–µ–º—ñ input selectors
const selectStatus = (state) => state.filters.status
const selectCategory = (state) => state.filters.category

const selectFilteredItems = createSelector([selectStatus, selectCategory], (status, category) => {
    /* ... */
})
```

---

## Performance Tips

::card-group
::card{title="‚úÖ –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –¥–ª—è —Å–∫–ª–∞–¥–Ω–∏—Ö –æ–±—á–∏—Å–ª–µ–Ω—å" icon="i-lucide-zap"}
–§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è, —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è, –∞–≥—Ä–µ–≥–∞—Ü—ñ—è ‚Äî —ñ–¥–µ–∞–ª—å–Ω—ñ use cases
::

::card{title="‚ö†Ô∏è –ù–µ –∑–ª–æ–≤–∂–∏–≤–∞–π—Ç–µ" icon="i-lucide-alert-triangle"}
–î–ª—è –ø—Ä–æ—Å—Ç–∏—Ö –≤–∏–±–æ—Ä—ñ–≤ (state.user.name) createSelector –Ω–∞–¥–º—ñ—Ä–Ω–∏–π
::

::card{title="‚úÖ –ö–æ–º–ø–æ–∑–∏—Ü—ñ—è —Å–µ–ª–µ–∫—Ç–æ—Ä—ñ–≤" icon="i-lucide-layers"}
–ë–∞–∑–æ–≤—ñ —Å–µ–ª–µ–∫—Ç–æ—Ä–∏ + memoized po–≤–µ—Ä—Ö –Ω–∏—Ö
::

::card{title="‚ö° Denormalization" icon="i-lucide-link"}
–ó'—î–¥–Ω—É–π—Ç–µ normalized –¥–∞–Ω—ñ –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ
::
::

---

## –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è: –∑ —Ç–∞ –±–µ–∑ –º–µ–º–æ—ñ–∑–∞—Ü—ñ—ó

| –ö—Ä–∏—Ç–µ—Ä—ñ–π                | –ë–µ–∑ createSelector               | –ó createSelector                   |
| ----------------------- | -------------------------------- | ---------------------------------- |
| **–û–±—á–∏—Å–ª–µ–Ω–Ω—è**          | –ü—Ä–∏ –∫–æ–∂–Ω–æ–º—É –≤–∏–∫–ª–∏–∫—É              | –¢—ñ–ª—å–∫–∏ –ø—Ä–∏ –∑–º—ñ–Ω—ñ inputs            |
| **–†–µ—Ñ–µ—Ä–µ–Ω—Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É** | –ó–∞–≤–∂–¥–∏ –Ω–æ–≤–∏–π                     | –¢–æ–π —Å–∞–º–∏–π —è–∫—â–æ inputs –Ω–µ –∑–º—ñ–Ω–∏–ª–∏—Å—è |
| **Re-renders**          | –ß–∞—Å—Ç—ñ—à—ñ                          | –†—ñ–¥—à–µ                              |
| **Performance**         | –ü–æ–≤—ñ–ª—å–Ω—ñ—à–µ –¥–ª—è —Å–∫–ª–∞–¥–Ω–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π | –®–≤–∏–¥—à–µ                             |
| **–ö–æ–¥**                 | –ü—Ä–æ—Å—Ç—ñ—à–µ                         | –¢—Ä–æ—Ö–∏ —Å–∫–ª–∞–¥–Ω—ñ—à–µ                    |

---

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∏ (RTK 2.0+)

Redux Toolkit 2.0 –¥–æ–¥–∞—î –≤–±—É–¥–æ–≤–∞–Ω—ñ —Å–µ–ª–µ–∫—Ç–æ—Ä–∏ –≤ slices:

```javascript
const todosSlice = createSlice({
    name: 'todos',
    initialState: { items: [] },
    reducers: {
        /* ... */
    },
    selectors: {
        selectAll: (state) => state.items,
        selectCompleted: createSelector([(state) => state.items], (items) => items.filter((t) => t.completed)),
    },
})

export const { selectAll, selectCompleted } = todosSlice.selectors
```

::tip
**RTK 2.0+**: –°—Ç–≤–æ—Ä—é–π—Ç–µ memoized —Å–µ–ª–µ–∫—Ç–æ—Ä–∏ –ø—Ä—è–º–æ –≤ slice –¥–ª—è –∫—Ä–∞—â–æ—ó –æ—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—ó!
::

---

## –í–∏—Å–Ω–æ–≤–æ–∫

`createSelector` –∑–∞–±–µ–∑–ø–µ—á—É—î:

‚úÖ –ú–µ–º–æ—ñ–∑–∞—Ü—ñ—é —Å–∫–ª–∞–¥–Ω–∏—Ö –æ–±—á–∏—Å–ª–µ–Ω—å  
‚úÖ –ó–º–µ–Ω—à–µ–Ω–Ω—è –Ω–µ–ø–æ—Ç—Ä—ñ–±–Ω–∏—Ö —Ä–µ-—Ä–µ–Ω–¥–µ—Ä—ñ–≤  
‚úÖ –ö–æ–º–ø–æ–∑–∏—Ü—ñ—é —Å–µ–ª–µ–∫—Ç–æ—Ä—ñ–≤  
‚úÖ Performance optimization  
‚úÖ Denormalization –¥–∞–Ω–∏—Ö

::tip
**–ó–æ–ª–æ—Ç–µ –ø—Ä–∞–≤–∏–ª–æ**: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `createSelector` –¥–ª—è –±—É–¥—å-—è–∫–∏—Ö —Å–∫–ª–∞–¥–Ω–∏—Ö –æ–±—á–∏—Å–ª–µ–Ω—å –∞–±–æ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü—ñ–π –¥–∞–Ω–∏—Ö –∑—ñ state.
::

---

## –ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏

–¢–µ–ø–µ—Ä, –∫–æ–ª–∏ –≤–∏ –∑–Ω–∞—î—Ç–µ, —è–∫ –æ–ø—Ç–∏–º—ñ–∑—É–≤–∞—Ç–∏ —á–∏—Ç–∞–Ω–Ω—è –∑—ñ state, –¥–∞–≤–∞–π—Ç–µ –ø–æ–¥–∏–≤–∏–º–æ—Å—è –Ω–∞ –Ω–∞–π–ø–æ—Ç—É–∂–Ω—ñ—à–∏–π —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è data fetching!

üëâ [–î–∞–ª—ñ: RTK Query - —Ä–µ–≤–æ–ª—é—Ü—ñ—è –≤ data fetching](./02.rtk-query-intro.md)
