# Board Slice: –°–µ—Ä—Ü–µ –î–æ—à–∫–∏

–ú–∏ –≤–∏—Ä—ñ—à–∏–ª–∏ —Ç—Ä–∏–º–∞—Ç–∏ —Å—Ç–∞–Ω –¥–æ—à–∫–∏ –ª–æ–∫–∞–ª—å–Ω–æ –¥–ª—è –º–∏—Ç—Ç—î–≤–∏—Ö –æ–Ω–æ–≤–ª–µ–Ω—å. –î–∞–≤–∞–π—Ç–µ —Å—Ç–≤–æ—Ä–∏–º–æ `boardSlice`.

–ß–æ–º—É –æ–¥–∏–Ω —Å–ª–∞–π—Å, –∞ –Ω–µ –æ–∫—Ä–µ–º—ñ `tasksSlice` —Ç–∞ `columnsSlice`?
–¢–æ–º—É —â–æ –æ–ø–µ—Ä–∞—Ü—ñ—è Drag & Drop —á–∞—Å—Ç–æ –∑–∞—á—ñ–ø–∞—î –æ–±–∏–¥–≤—ñ —Å—É—Ç–Ω–æ—Å—Ç—ñ –æ–¥–Ω–æ—á–∞—Å–Ω–æ (–≤–∏–¥–∞–ª–µ–Ω–Ω—è ID –∑ –æ–¥–Ω—ñ—î—ó –∫–æ–ª–æ–Ω–∫–∏ —ñ –¥–æ–¥–∞–≤–∞–Ω–Ω—è –≤ —ñ–Ω—à—É). –†–æ–±–∏—Ç–∏ —Ü–µ –≤ –æ–¥–Ω–æ–º—É —Ä–µ–¥—é—Å–µ—Ä—ñ –Ω–∞–±–∞–≥–∞—Ç–æ –ø—Ä–æ—Å—Ç—ñ—à–µ —ñ –≥–∞—Ä–∞–Ω—Ç—É—î —Ü—ñ–ª—ñ—Å–Ω—ñ—Å—Ç—å –¥–∞–Ω–∏—Ö (Atomicity).

## –ü–æ—á–∞—Ç–∫–æ–≤–∏–π —Å—Ç–∞–Ω (Mock Data)

–ü–æ–∫–∏ —â–æ –º–∏ –∑–∞—Ö–∞—Ä–¥–∫–æ–¥–∏–º–æ –¥–∞–Ω—ñ, —â–æ–± –ø—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ UI.

```typescript [src/features/board/boardSlice.ts]
import { createSlice, PayloadAction } from '@reduxjs/toolkit';
import { BoardData } from '../../types/kanban';

const initialState: BoardData = {
  tasks: {
    'task-1': { id: 'task-1', content: '–ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –ø—Ä–æ—î–∫—Ç', createdAt: '2023-10-01' },
    'task-2': { id: 'task-2', content: '–í–∏–≤—á–∏—Ç–∏ RTK Query', createdAt: '2023-10-02' },
    'task-3': { id: 'task-3', content: '–ó—Ä–æ–±–∏—Ç–∏ –∫–∞–≤—É', createdAt: '2023-10-03' },
  },
  columns: {
    'column-1': {
      id: 'column-1',
      title: 'To Do',
      taskIds: ['task-1', 'task-2', 'task-3'],
    },
    'column-2': {
      id: 'column-2',
      title: 'In Progress',
      taskIds: [],
    },
    'column-3': {
      id: 'column-3',
      title: 'Done',
      taskIds: [],
    },
  },
  columnOrder: ['column-1', 'column-2', 'column-3'],
};

export const boardSlice = createSlice({
  name: 'board',
  initialState,
  reducers: {
    // –¢—É—Ç –±—É–¥–µ –Ω–∞—à–∞ –º–∞–≥—ñ—è –ø–µ—Ä–µ–º—ñ—â–µ–Ω–Ω—è
  },
});

export default boardSlice.reducer;
```

## –î–æ–¥–∞–≤–∞–Ω–Ω—è –≤ Store

–ü—ñ–¥–∫–ª—é—á—ñ—Ç—å —Ü–µ–π —Ä–µ–¥—é—Å–µ—Ä —É `src/app/store.ts`.

```typescript [src/app/store.ts]
import { configureStore } from '@reduxjs/toolkit';
import boardReducer from '../features/board/boardSlice';

export const store = configureStore({
  reducer: {
    board: boardReducer,
  },
});
// ...
```

## –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö

–¢–µ–ø–µ—Ä —Å—Ç–≤–æ—Ä–∏–º–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è. –ù–∞–º –ø–æ—Ç—Ä—ñ–±–Ω—ñ:
1.  `Board`: –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä.
2.  `Column`: –ö–æ–ª–æ–Ω–∫–∞.
3.  `Task`: –ö–∞—Ä—Ç–∫–∞ –∑–∞–≤–¥–∞–Ω–Ω—è.

–°—Ç–≤–æ—Ä–∏–º–æ –ø—Ä–æ—Å—Ç–∏–π –∫–∞—Ä–∫–∞—Å –±–µ–∑ DnD, —â–æ–± –ø–µ—Ä–µ–∫–æ–Ω–∞—Ç–∏—Å—è, —â–æ Redux –ø—Ä–∞—Ü—é—î.

```tsx [src/features/board/Board.tsx]
import React from 'react';
import { useAppSelector } from '../../app/hooks';
import { Column } from './Column';

export const Board: React.FC = () => {
  const columnOrder = useAppSelector((state) => state.board.columnOrder);
  const columns = useAppSelector((state) => state.board.columns);
  
  return (
    <div className="flex h-full gap-4 p-4 overflow-x-auto bg-blue-500">
      {columnOrder.map((columnId) => {
        const column = columns[columnId];
        return <Column key={column.id} column={column} />;
      })}
    </div>
  );
};
```

```tsx [src/features/board/Column.tsx]
import React from 'react';
import { Column as ColumnType } from '../../types/kanban';
import { Task } from './Task';
import { useAppSelector } from '../../app/hooks';

interface Props {
  column: ColumnType;
}

export const Column: React.FC<Props> = ({ column }) => {
  // –í–∞–∂–ª–∏–≤–æ: –º–∏ –¥—ñ—Å—Ç–∞—î–º–æ –∑–∞–¥–∞—á—ñ —Ç—É—Ç, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ selector
  // –¶–µ –¥–æ–∑–≤–æ–ª—è—î —É–Ω–∏–∫–Ω—É—Ç–∏ –∑–∞–π–≤–∏—Ö —Ä–µ—Ä–µ–Ω–¥–µ—Ä—ñ–≤ –±–∞—Ç—å–∫—ñ–≤—Å—å–∫–æ–≥–æ Board
  const tasks = useAppSelector((state) => 
    column.taskIds.map(taskId => state.board.tasks[taskId])
  );

  return (
    <div className="w-72 bg-gray-100 rounded-md p-2 flex flex-col shrink-0">
      <h3 className="font-bold mb-2 p-2">{column.title}</h3>
      <div className="flex flex-col gap-2 min-h-[100px]">
        {tasks.map((task) => (
          <Task key={task.id} task={task} />
        ))}
      </div>
    </div>
  );
};
```

```tsx [src/features/board/Task.tsx]
import React from 'react';
import { Task as TaskType } from '../../types/kanban';

interface Props {
  task: TaskType;
}

export const Task: React.FC<Props> = ({ task }) => {
  return (
    <div className="bg-white p-2 rounded shadow-sm border border-gray-200">
      {task.content}
    </div>
  );
};
```

–¢–µ–ø–µ—Ä, –∫–æ–ª–∏ –º–∏ –±–∞—á–∏–º–æ –Ω–∞—à—ñ –∫–æ–ª–æ–Ω–∫–∏, –Ω–∞—Å—Ç–∞–≤ —á–∞—Å –¥–æ–¥–∞—Ç–∏ –ª–æ–≥—ñ–∫—É –ø–µ—Ä–µ–º—ñ—â–µ–Ω–Ω—è. –¶–µ –±—É–¥–µ –Ω–∞–π—Å–∫–ª–∞–¥–Ω—ñ—à–∏–π, –∞–ª–µ –Ω–∞–π—Ü—ñ–∫–∞–≤—ñ—à–∏–π —Ä–µ–¥—é—Å–µ—Ä.

üëâ [–î–∞–ª—ñ: –õ–æ–≥—ñ–∫–∞ Drag & Drop](./04.drag-and-drop-logic.md)
