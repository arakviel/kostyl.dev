---
title: '–ü—Ä–æ–¥–∞–∫—à–Ω —Ç–∞ –ï–∫–æ—Å–∏—Å—Ç–µ–º–∞: Advanced Config & Workflow'
description: '–Ø–∫ –∂–∏—Ç–∏ –∑ TypeScript —É —Ä–µ–∞–ª—å–Ω–æ–º—É —Å–≤—ñ—Ç—ñ. tsconfig, –º–æ–Ω–æ—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó, Zod, tRPC —Ç–∞ –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ.'
---

# –†–æ–∑–¥—ñ–ª 5: Advanced Patterns —Ç–∞ –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è

–ú–∏ –≤–∏–≤—á–∏–ª–∏ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å. –¢–µ–ø–µ—Ä –ø–æ–≥–æ–≤–æ—Ä–∏–º–æ –ø—Ä–æ —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É.
TypeScript ‚Äî —Ü–µ –Ω–µ —Ç—ñ–ª—å–∫–∏ –º–æ–≤–∞, —Ü–µ **–∫–æ–º–ø—ñ–ª—è—Ç–æ—Ä**, —ñ –≤—ñ–¥ –π–æ–≥–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–∞–ª–µ–∂–∏—Ç—å –≤–∞—à–µ –∂–∏—Ç—Ç—è (—ñ —à–≤–∏–¥–∫—ñ—Å—Ç—å CI/CD).

–£ —Ü—å–æ–º—É —Ñ—ñ–Ω–∞–ª—å–Ω–æ–º—É —Ä–æ–∑–¥—ñ–ª—ñ –º–∏ —Ä–æ–∑–±–µ—Ä–µ–º–æ –≤—Å–µ, —â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å–µ—Ä–π–æ–∑–Ω–∏—Ö –ø—Ä–æ–µ–∫—Ç—ñ–≤ —Ç–∞ –±—ñ–±–ª—ñ–æ—Ç–µ–∫.

---

## 1. –ê–Ω–∞—Ç–æ–º—ñ—è `tsconfig.json`

–ë—ñ–ª—å—à—ñ—Å—Ç—å –ª—é–¥–µ–π –∫–æ–ø—ñ—é—î —Ü–µ–π —Ñ–∞–π–ª –∑—ñ StackOverflow. –î–∞–≤–∞–π—Ç–µ –∑—Ä–æ–∑—É–º—ñ—î–º–æ, —â–æ —Ç–∞–º –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è.

### –û—Å–Ω–æ–≤–Ω—ñ —Å–µ–∫—Ü—ñ—ó

```json
{
    "compilerOptions": {
        /* Basic Options */
        "target": "ES2022", // –Ø–∫—É –≤–µ—Ä—Å—ñ—é JS –≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏
        "module": "NodeNext", // –Ø–∫—É —Å–∞–º–µ —Å–∏—Å—Ç–µ–º—É –º–æ–¥—É–ª—ñ–≤ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ (CommonJS vs ESM)
        "lib": ["DOM", "ESNext"], // –Ø–∫—ñ –≥–ª–æ–±–∞–ª—å–Ω—ñ —Ç–∏–ø–∏ –¥–æ—Å—Ç—É–ø–Ω—ñ (window, document, Array.flat)

        /* Strictness */
        "strict": true, // –í–º–∏–∫–∞—î –∫—É–ø—É –ø–µ—Ä–µ–≤—ñ—Ä–æ–∫
        "noImplicitReturns": true, // –ó–∞—Å—Ç–∞–≤–ª—è—î –ø–æ–≤–µ—Ä—Ç–∞—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è –∑ —É—Å—ñ—Ö –≥—ñ–ª–æ–∫ —Ñ—É–Ω–∫—Ü—ñ—ó
        "noUncheckedIndexedAccess": true, // –†–æ–±–∏—Ç—å –¥–æ—Å—Ç—É–ø –ø–æ —ñ–Ω–¥–µ–∫—Å—É (arr[0]) -> T | undefined

        /* Emit */
        "outDir": "./dist", // –ö—É–¥–∏ –∫–ª–∞—Å—Ç–∏ .js —Ñ–∞–π–ª–∏
        "rootDir": "./src", // –î–µ –ª–µ–∂–∞—Ç—å .ts —Ñ–∞–π–ª–∏
        "declaration": true, // –ì–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ .d.ts —Ñ–∞–π–ª–∏ (–¥–ª—è –±—ñ–±–ª—ñ–æ—Ç–µ–∫)
        "sourceMap": true, // –î–ª—è –¥–µ–±–∞–≥–≥–∏–Ω–≥—É
        "removeComments": true // –í–∏–¥–∞–ª—è—Ç–∏ –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ –∑ JS
    },
    "include": ["src/**/*"], // –©–æ –∫–æ–º–ø—ñ–ª—é–≤–∞—Ç–∏
    "exclude": ["node_modules", "**/*.test.ts"] // –©–æ —ñ–≥–Ω–æ—Ä—É–≤–∞—Ç–∏
}
```

### `noUncheckedIndexedAccess`

–¶–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è, —è–∫–µ —è —Ä–µ–∫–æ–º–µ–Ω–¥—É—é –≤–º–∏–∫–∞—Ç–∏ –≤—Å—ñ–º.

```typescript
// –ë–µ–∑ –Ω—å–æ–≥–æ
const users: User[] = []
const user = users[0] // –¢–∏–ø: User. –†–µ–∞–ª—å–Ω—ñ—Å—Ç—å: undefined.
// user.name -> CRASH

// –ó –Ω–∏–º (true)
const user = users[0] // –¢–∏–ø: User | undefined.
// user.name -> Error: Object is possibly 'undefined'.
```

–¶–µ —Ä—è—Ç—É—î –≤—ñ–¥ —Ç–∏—Å—è—á –±–∞–≥—ñ–≤.

---

## 2. –ú–æ–Ω–æ—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó —Ç–∞ Project References

–í–µ–ª–∏–∫—ñ –ø—Ä–æ–µ–∫—Ç–∏ —Ä–æ–∑–±–∏–≤–∞—é—Ç—å –Ω–∞ —á–∞—Å—Ç–∏–Ω–∏. –ó–∞–º—ñ—Å—Ç—å –æ–¥–Ω–æ–≥–æ –≥—ñ–≥–∞–Ω—Ç—Å—å–∫–æ–≥–æ `tsconfig.json`, –º–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –∫–æ–º–ø–æ–∑–∏—Ü—ñ—é.

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–∞–ø–æ–∫

```text
/repo
  /packages
    /core
      tsconfig.json
    /ui
      tsconfig.json (depends on core)
  tsconfig.json (root)
```

### –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

**Core (`packages/core/tsconfig.json`):**

```json
{
    "compilerOptions": {
        "composite": true, // –î–æ–∑–≤–æ–ª—è—î —ñ–Ω—à–∏–º –ø—Ä–æ–µ–∫—Ç–∞–º –ø–æ—Å–∏–ª–∞—Ç–∏—Å—è –Ω–∞ —Ü–µ–π
        "declaration": true
    }
}
```

**UI (`packages/ui/tsconfig.json`):**

```json
{
    "references": [{ "path": "../core" }]
}
```

**Root (`tsconfig.json`):**

```json
{
    "files": [],
    "references": [{ "path": "./packages/core" }, { "path": "./packages/ui" }]
}
```

–¢–µ–ø–µ—Ä, –∫–æ–ª–∏ –≤–∏ –º—ñ–Ω—è—î—Ç–µ `core`, TypeScript (–≤ —Ä–µ–∂–∏–º—ñ `--build`) –ø–µ—Ä–µ–∫–æ–º–ø—ñ–ª—é—î —Ç—ñ–ª—å–∫–∏ –∑–∞–ª–µ–∂–Ω—ñ —á–∞—Å—Ç–∏–Ω–∏ `ui`, –∞ –Ω–µ –≤–µ—Å—å –ø—Ä–æ–µ–∫—Ç. –¶–µ –ø—Ä–∏—Å–∫–æ—Ä—é—î –∑–±—ñ—Ä–∫—É –≤ —Ä–∞–∑–∏.

---

## 3. Namespaces vs Modules

–¶–µ –¥–∂–µ—Ä–µ–ª–æ –ø–ª—É—Ç–∞–Ω–∏–Ω–∏.

### Modules (`import/export`)

–¶–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç ES6. –ö–æ–∂–µ–Ω —Ñ–∞–π–ª ‚Äî —Ü–µ –º–æ–¥—É–ª—å.
**–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —Ü–µ —É 99% –≤–∏–ø–∞–¥–∫—ñ–≤.**

### Namespaces (`namespace X { ... }`)

–¶–µ —Å—Ç–∞—Ä–∏–π —Å–ø–æ—Å—ñ–± TS –≥—Ä—É–ø—É–≤–∞—Ç–∏ –∫–æ–¥ —É –≥–ª–æ–±–∞–ª—å–Ω–æ–º—É –æ–±'—î–∫—Ç—ñ (–∞–Ω–∞–ª–æ–≥ IIFE).

```typescript
namespace Validation {
    export const emailRegex = /.../
}

// Validation.emailRegex
```

**–ö–æ–ª–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ Namespaces?**
–¢—ñ–ª—å–∫–∏ –¥–ª—è –Ω–∞–ø–∏—Å–∞–Ω–Ω—è —Ç–∏–ø—ñ–≤ (`.d.ts`) –¥–ª—è —Å—Ç–∞—Ä–∏—Ö –±—ñ–±–ª—ñ–æ—Ç–µ–∫, —è–∫—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å –≥–ª–æ–±–∞–ª—å–Ω—ñ –∑–º—ñ–Ω–Ω—ñ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, jQuery –ø–ª–∞–≥—ñ–Ω–∏).

---

## 4. Declaration Files (`.d.ts`)

–¶–µ —Ñ–∞–π–ª–∏, —è–∫—ñ –º—ñ—Å—Ç—è—Ç—å **—Ç—ñ–ª—å–∫–∏ —Ç–∏–ø–∏**, –±–µ–∑ –∫–æ–¥—É.
–í–æ–Ω–∏ –¥–æ–∑–≤–æ–ª—è—é—Ç—å TS —Ä–æ–∑—É–º—ñ—Ç–∏ JS –∫–æ–¥.

### Ambient Declarations (`declare`)

–£—è–≤—ñ—Ç—å, —â–æ –≤–∏ –ø—ñ–¥–∫–ª—é—á–∏–ª–∏ –±—ñ–±–ª—ñ–æ—Ç–µ–∫—É `super-lib` —á–µ—Ä–µ–∑ CDN (–≥–ª–æ–±–∞–ª—å–Ω–∞ –∑–º—ñ–Ω–Ω–∞ `SuperLib`).
TS –ø—Ä–æ –Ω–µ—ó –Ω–µ –∑–Ω–∞—î. –î–∞–π—Ç–µ –π–æ–º—É –ø—ñ–¥–∫–∞–∑–∫—É.

```typescript
// globals.d.ts
declare const SuperLib: {
    init(config: any): void
    version: string
}
```

### –†–æ–∑—à–∏—Ä–µ–Ω–Ω—è —ñ—Å–Ω—É—é—á–∏—Ö –º–æ–¥—É–ª—ñ–≤ (Module Augmentation)

–í–∏ —Ö–æ—á–µ—Ç–µ –¥–æ–¥–∞—Ç–∏ –ø–æ–ª–µ –¥–æ `Request` –≤ Express.

```typescript
// express.d.ts
import { User } from './user'

declare module 'express-serve-static-core' {
    interface Request {
        user?: User // –ú–∏ –¥–æ–¥–∞–ª–∏ —Ü–µ –ø–æ–ª–µ!
    }
}
```

–¢–µ–ø–µ—Ä `req.user` –ø—Ä–∞—Ü—é–≤–∞—Ç–∏–º–µ —É –≤—Å—å–æ–º—É –ø—Ä–æ–µ–∫—Ç—ñ.

---

## 5. Triple-Slash Directives

–í–∏ —ñ–Ω–æ–¥—ñ –±–∞—á–∏—Ç–µ —Ç–∞–∫—ñ –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ:

```typescript
/// <reference path="..." />
/// <reference types="node" />
```

–¶–µ XML-–ø–æ–¥—ñ–±–Ω—ñ –¥–∏—Ä–µ–∫—Ç–∏–≤–∏ –¥–ª—è –∫–æ–º–ø—ñ–ª—è—Ç–æ—Ä–∞.

- `path`: –∫–∞–∂–µ "–≤–∫–ª—é—á–∏ —Ü–µ–π —Ñ–∞–π–ª —É –∫–æ–º–ø—ñ–ª—è—Ü—ñ—é". –ü–æ—Ç—Ä—ñ–±–Ω–æ —Ç—ñ–ª—å–∫–∏ —è–∫—â–æ –≤–∏ –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ –º–æ–¥—É–ª—ñ (–¥—É–∂–µ —Å—Ç–∞—Ä–∏–π –ø—Ä–æ–µ–∫—Ç).
- `types`: –∫–∞–∂–µ "–∑–∞–≤–∞–Ω—Ç–∞–∂ —Ç–∏–ø–∏ –¥–ª—è —Ü—ñ—î—ó –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏" (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `node`, `jest`). –ó–∞–∑–≤–∏—á–∞–π —Ü–µ —Ä–æ–±–∏—Ç—å—Å—è —á–µ—Ä–µ–∑ `tsconfig` (`"types": ["node"]`), –∞–ª–µ —ñ–Ω–æ–¥—ñ –∫–æ—Ä–∏—Å–Ω–æ –≤ –æ–∫—Ä–µ–º–æ–º—É —Ñ–∞–π–ª—ñ.

---

## 6. Ambient Context: `declare global`

–Ø–∫—â–æ –≤–∏ –∑–Ω–∞—Ö–æ–¥–∏—Ç–µ—Å—å –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –º–æ–¥—É–ª—è (—î `import/export`), –∞–ª–µ —Ö–æ—á–µ—Ç–µ –¥–æ–¥–∞—Ç–∏ —â–æ—Å—å –≥–ª–æ–±–∞–ª—å–Ω–æ.

```typescript
export {} // –†–æ–±–∏–º–æ —Ñ–∞–π–ª –º–æ–¥—É–ª–µ–º

declare global {
    interface Window {
        __REDUX_DEVTOOLS_EXTENSION__: any
    }
}

// –¢–µ–ø–µ—Ä —Ü–µ –ø—Ä–∞—Ü—é—î –≤—Å—é–¥–∏
// window.__REDUX_DEVTOOLS_EXTENSION__
```

---

## 7. Error Handling Patterns

TypeScript –¥–æ–∑–≤–æ–ª—è—î —Ä–æ–±–∏—Ç–∏ –ø–æ–º–∏–ª–∫–∏ –±–µ–∑–ø–µ—á–Ω–∏–º–∏.

### `unknown` –≤ catch

–ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º `error` –≤ catch –±–ª–æ—Ü—ñ ‚Äî `any`. –¶–µ –ø–æ–≥–∞–Ω–æ.
–í–º–∏–∫–∞–π—Ç–µ `"useUnknownInCatchVariables": true` –≤ tsconfig.

```typescript
try {
    // ...
} catch (e: unknown) {
    // –¢–µ–ø–µ—Ä –º–∏ –ø–æ–≤–∏–Ω–Ω—ñ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ç–∏–ø
    if (e instanceof Error) {
        console.error(e.message)
    } else {
        console.error('Unknown error', e)
    }
}
```

### Custom Error Classes

```typescript
class HttpError extends Error {
    constructor(
        public status: number,
        message: string,
    ) {
        super(message)
        this.name = 'HttpError' // –í–∞–∂–ª–∏–≤–æ –¥–ª—è –ª–æ–≥—É–≤–∞–Ω–Ω—è
    }
}

function fetchUser() {
    throw new HttpError(404, 'User not found')
}
```

### Result Pattern (Functional)

–ó–∞–º—ñ—Å—Ç—å `throw`, –ø–æ–≤–µ—Ä—Ç–∞–π—Ç–µ –æ–±'—î–∫—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É (—è–∫ –≤ Rust –∞–±–æ Go).

```typescript
type Result<T, E = Error> = { ok: true; value: T } | { ok: false; error: E }

function divide(a: number, b: number): Result<number, string> {
    if (b === 0) return { ok: false, error: 'Division by zero' }
    return { ok: true, value: a / b }
}

const res = divide(10, 0)
if (res.ok) {
    console.log(res.value)
} else {
    console.log(res.error)
}
```

–¶–µ–π –ø–∞—Ç–µ—Ä–Ω –ø—Ä–∏–º—É—à—É—î –æ–±—Ä–æ–±–ª—è—Ç–∏ –ø–æ–º–∏–ª–∫–∏.

---

## 8. –ï–∫–æ—Å–∏—Å—Ç–µ–º–∞: Zod (Validation)

TypeScript –ø–µ—Ä–µ–≤—ñ—Ä—è—î —Ç–∏–ø–∏ –ø—ñ–¥ —á–∞—Å –∫–æ–º–ø—ñ–ª—è—Ü—ñ—ó. Zod –ø–µ—Ä–µ–≤—ñ—Ä—è—î —ó—Ö –ø—ñ–¥ —á–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è (Runtime).
–¶–µ —ñ–¥–µ–∞–ª—å–Ω–∞ –ø–∞—Ä–∞.

```typescript
import { z } from 'zod'

// 1. –°—Ç–≤–æ—Ä—é—î–º–æ —Å—Ö–µ–º—É
const UserSchema = z.object({
    id: z.number(),
    email: z.string().email(),
    website: z.string().url().optional(),
})

// 2. –û—Ç—Ä–∏–º—É—î–º–æ TS —Ç–∏–ø –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ!
type User = z.infer<typeof UserSchema>

// 3. –í–∞–ª—ñ–¥—É—î–º–æ –¥–∞–Ω—ñ (–∑ API)
function saveUser(input: unknown) {
    const result = UserSchema.safeParse(input)

    if (!result.success) {
        console.error('Validation failed:', result.error)
        return
    }

    // –¢—É—Ç input –≤–∂–µ —Ç–∏–ø—ñ–∑–æ–≤–∞–Ω–∏–π —è–∫ User
    const user = result.data
    console.log(user.email)
}
```

–¶–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç –¥–µ-—Ñ–∞–∫—Ç–æ –¥–ª—è –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó —Ñ–æ—Ä–º —Ç–∞ API –≤ —Å—É—á–∞—Å–Ω–æ–º—É TS.

---

## 9. –ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å –ö–æ–º–ø—ñ–ª—è—Ü—ñ—ó

–ö–æ–ª–∏ –ø—Ä–æ–µ–∫—Ç —Ä–æ—Å—Ç–µ, `tsc` —Å—Ç–∞—î –ø–æ–≤—ñ–ª—å–Ω–∏–º.
–Ø–∫ –ø—Ä–∏—Å–∫–æ—Ä–∏—Ç–∏?

1.  **–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `incremental: true`**. TS –±—É–¥–µ –∫–µ—à—É–≤–∞—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ—ó –∑–±—ñ—Ä–∫–∏.
2.  **`skipLibCheck: true`**. –ù–µ –ø–µ—Ä–µ–≤—ñ—Ä—è–π—Ç–µ —Ç–∏–ø–∏ –≤ `node_modules`. –î–æ–≤—ñ—Ä—è–π—Ç–µ –∞–≤—Ç–æ—Ä–∞–º –±—ñ–±–ª—ñ–æ—Ç–µ–∫.
3.  **–£–Ω–∏–∫–∞–π—Ç–µ –≤–µ–ª–∏–∫–∏—Ö Union Types**.
    ```typescript
    // –¶–µ –ø–æ–≤—ñ–ª—å–Ω–æ, —è–∫—â–æ —ñ–∫–æ–Ω–æ–∫ 1000+
    type IconName = "icon-1" | "icon-2" | ...;
    ```
4.  **–î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**. –ó–∞–ø—É—Å—Ç—ñ—Ç—å `tsc --extendedDiagnostics`, —â–æ–± –ø–æ–±–∞—á–∏—Ç–∏, —Å–∫—ñ–ª—å–∫–∏ —á–∞—Å—É –π–¥–µ –Ω–∞ —â–æ.

---

## 10. tRPC (TypeScript RPC)

–¶–µ –º–∞–≥—ñ—è. –Ø–∫—â–æ —É –≤–∞—Å TS –Ω–∞ –±–µ–∫–µ–Ω–¥—ñ —ñ TS –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—ñ, –≤–∏ –º–æ–∂–µ—Ç–µ **—ñ–º–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ —Ç–∏–ø–∏** –±–µ–∫–µ–Ω–¥—É –ø—Ä—è–º–æ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥.
–ñ–æ–¥–Ω–∏—Ö –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ñ–≤, –∂–æ–¥–Ω–∏—Ö `swagger.yaml`.

```typescript
// Backend
const appRouter = router({
    getUser: publicProcedure.input(z.string()).query((req) => {
        return { id: req.input, name: 'Alice' }
    }),
})

export type AppRouter = typeof appRouter
```

```typescript
// Frontend
const user = await trpc.getUser.query('123')
// user.name -> –ê–≤—Ç–æ–¥–æ–ø–æ–≤–Ω–µ–Ω–Ω—è –ø—Ä–∞—Ü—é—î!
// –Ø–∫—â–æ –∑–º—ñ–Ω–∏—Ç–∏ —ñ–º'—è –Ω–∞ –±–µ–∫–µ–Ω–¥—ñ, —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –≤–ø–∞–¥–µ –ø—Ä–∏ –∫–æ–º–ø—ñ–ª—è—Ü—ñ—ó.
```

–¶–µ –º–∞–π–±—É—Ç–Ω—î –≤–µ–±-—Ä–æ–∑—Ä–æ–±–∫–∏.

---

## 11. Final Exam: Mini-Library Build

–í–∞—à–µ –∑–∞–≤–¥–∞–Ω–Ω—è ‚Äî —Å—Ç–≤–æ—Ä–∏—Ç–∏ –º—ñ–Ω—ñ-–±—ñ–±–ª—ñ–æ—Ç–µ–∫—É –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ localStorage, —è–∫–∞ –±—É–¥–µ –ø–æ–≤–Ω—ñ—Å—Ç—é —Ç–∏–ø—ñ–∑–æ–≤–∞–Ω–∞.

### –í–∏–º–æ–≥–∏

1.  –ö–ª–∞—Å `TypedStorage<Schema>`.
2.  –°—Ö–µ–º–∞ –ø–µ—Ä–µ–¥–∞—î—Ç—å—Å—è —è–∫ Generic (–∫–ª—é—á -> —Ç–∏–ø).
3.  –ú–µ—Ç–æ–¥–∏ `getItem`, `setItem` –ø–æ–≤–∏–Ω–Ω—ñ –ø—Ä–∏–π–º–∞—Ç–∏ —Ç—ñ–ª—å–∫–∏ –≤–∞–ª—ñ–¥–Ω—ñ –∫–ª—é—á—ñ —ñ –ø–æ–≤–µ—Ä—Ç–∞—Ç–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ñ —Ç–∏–ø–∏.
4.  –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ —Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó (JSON.stringify/parse) –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ.

### –ü—Ä–∏–∫–ª–∞–¥

```typescript
interface MyStorage {
    theme: 'dark' | 'light'
    volume: number
}

const store = new TypedStorage<MyStorage>()

store.setItem('theme', 'dark') // ‚úÖ
store.setItem('volume', 50) // ‚úÖ
// store.setItem("theme", 123); // üõë Error

const t = store.getItem('theme') // Type: "dark" | "light" | null
```

---

## 12. –®–ø–∞—Ä–≥–∞–ª–∫–∞ (Cheatsheet)

| –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è / –ü–æ–Ω—è—Ç—Ç—è | –û–ø–∏—Å                                             |
| :--------------------- | :----------------------------------------------- |
| `strict: true`         | Must have. –í–º–∏–∫–∞—î —Å—É–≤–æ—Ä—ñ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏.              |
| `skipLibCheck: true`   | –ü—Ä–∏—Å–∫–æ—Ä—é—î –∑–±—ñ—Ä–∫—É, —ñ–≥–Ω–æ—Ä—É—é—á–∏ `node_modules`.      |
| `.d.ts`                | –§–∞–π–ª–∏ –¥–µ–∫–ª–∞—Ä–∞—Ü—ñ–π (—Ç—ñ–ª—å–∫–∏ —Ç–∏–ø–∏).                  |
| `declare global`       | –†–æ–∑—à–∏—Ä–µ–Ω–Ω—è –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Å–∫–æ—É–ø—É (Window, Process). |
| `unknown`              | –ë–µ–∑–ø–µ—á–Ω–∏–π –∞–Ω–∞–ª–æ–≥ `any`.                          |
| `zod`                  | Runtime –≤–∞–ª—ñ–¥–∞—Ü—ñ—è + –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è —Ç–∏–ø—ñ–≤.             |
| `Monorepo`             | `references` + `composite`.                      |

---

## 13. Advanced `tsconfig` Options

–ú–∏ —Ä–æ–∑–≥–ª—è–Ω—É–ª–∏ –±–∞–∑—É, —Ç–µ–ø–µ—Ä ‚Äî –ø—Ä–æ—Å—É–Ω—É—Ç—ñ —Ñ—ñ—à–∫–∏.

### `paths` (Module Resolution)

–ú–∞–≥—ñ—è –∞–±—Å–æ–ª—é—Ç–Ω–∏—Ö —ñ–º–ø–æ—Ä—Ç—ñ–≤. –ó–∞–º—ñ—Å—Ç—å `../../../../components/Button` –ø–∏—à–µ–º–æ `@/components/Button`.

```json
{
    "compilerOptions": {
        "baseUrl": "./src",
        "paths": {
            "@/*": ["*"],
            "@components/*": ["components/*"]
        }
    }
}
```

::warning
–¶–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è **—Ç—ñ–ª—å–∫–∏ –¥–ª—è TS**.
–í–∞–º –≤—Å–µ –æ–¥–Ω–æ —Ç—Ä–µ–±–∞ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ Webpack/Vite/Jest, —â–æ–± –≤–æ–Ω–∏ —Ä–æ–∑—É–º—ñ–ª–∏ —Ü—ñ –∞–ª—ñ–∞—Å–∏.
::

### `rootDirs` (Virtual Directories)

–î–æ–∑–≤–∞–ª—è—î –æ–±'—î–¥–Ω–∞—Ç–∏ –¥–µ–∫—ñ–ª—å–∫–∞ –ø–∞–ø–æ–∫ –≤ –æ–¥–Ω—É "–≤—ñ—Ä—Ç—É–∞–ª—å–Ω—É".
–ö–æ—Ä–∏—Å–Ω–æ, —è–∫—â–æ –≤–∏ –≥–µ–Ω–µ—Ä—É—î—Ç–µ —á–∞—Å—Ç–∏–Ω—É –∫–æ–¥—É –≤ `src/generated`, –∞–ª–µ —Ö–æ—á–µ—Ç–µ —ñ–º–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ –π–æ–≥–æ —è–∫ `import ... from './generated'`.

### `preserveConstEnums`

–ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º `const enum` –≤–∏–¥–∞–ª—è—î—Ç—å—Å—è —ñ –∑–∞–º—ñ–Ω—é—î—Ç—å—Å—è –Ω–∞ —á–∏—Å–ª–æ (—ñ–Ω–ª–∞–π–Ω).
–Ø–∫—â–æ –≤–∏ –ø–∏—à–µ—Ç–µ –±—ñ–±–ª—ñ–æ—Ç–µ–∫—É, —Ü–µ –º–æ–∂–µ –±—É—Ç–∏ –ø—Ä–æ–±–ª–µ–º–æ—é –¥–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤. –°—Ç–∞–≤—Ç–µ `true`, —â–æ–± –∑–±–µ—Ä–µ–≥—Ç–∏ –æ–±'—î–∫—Ç enum –≤ JS.

---

## 14. Compilation Pipelines: `tsc` vs The World

–£ 2024 —Ä–æ—Ü—ñ –º–∏ —Ä—ñ–¥–∫–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ `tsc` –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó JS.

1.  **`tsc`**: –ù–∞–π–ø–æ–≤—ñ–ª—å–Ω—ñ—à–∏–π. –†–æ–±–∏—Ç—å –ø–µ—Ä–µ–≤—ñ—Ä–∫—É —Ç–∏–ø—ñ–≤ + —Ç—Ä–∞–Ω—Å–ø—ñ–ª—è—Ü—ñ—é.
2.  **`Babel`**: –í–∏—Ä—ñ–∑–∞—î —Ç–∏–ø–∏ (strip types). –î—É–∂–µ —à–≤–∏–¥–∫–∏–π. –ê–ª–µ –Ω–µ –ø–µ—Ä–µ–≤—ñ—Ä—è—î –ø–æ–º–∏–ª–∫–∏.
3.  **`swc` / `esbuild`**: –ù–∞–ø–∏—Å–∞–Ω—ñ –Ω–∞ Rust/Go. –í 20-100 —Ä–∞–∑—ñ–≤ —à–≤–∏–¥—à—ñ –∑–∞ Babel.

**–Ü–¥–µ–∞–ª—å–Ω–∏–π –ø–∞–π–ø–ª–∞–π–Ω:**

- **Dev Server (Vite/Next)**: `swc`/`esbuild` (—â–æ–± –≤—Å–µ –ª—ñ—Ç–∞–ª–æ).
- **CI / Pre-commit**: `tsc --noEmit` (—Ç—ñ–ª—å–∫–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ç–∏–ø—ñ–≤).
- **Build**: `swc`/`esbuild` (–≥–µ–Ω–µ—Ä–∞—Ü—ñ—è –±–∞–Ω–¥–ª—É).

---

## 15. ESM vs CJS Interop (–ü–µ–∫–ª–æ –ú–æ–¥—É–ª—ñ–≤)

–ù–∞–π–±—ñ–ª—å—à–∏–π –±—ñ–ª—å –≤ –µ–∫–æ—Å–∏—Å—Ç–µ–º—ñ Node.js/TS ‚Äî —Ü–µ —ñ–º–ø–æ—Ä—Ç CommonJS –º–æ–¥—É–ª—ñ–≤ –≤ ESM –ø—Ä–æ—î–∫—Ç.

–ü–æ–º–∏–ª–∫–∞:
`TypeError: React is not a function` –∞–±–æ `Has no default export`.

**–†—ñ—à–µ–Ω–Ω—è:**
–í–º–∏–∫–∞–π—Ç–µ —Ü—ñ –ø—Ä–∞–ø–æ—Ä—Ü—ñ –≤ `tsconfig.json`:

```json
{
    "compilerOptions": {
        "esModuleInterop": true,
        "allowSyntheticDefaultImports": true
    }
}
```

–¶–µ –¥–æ–∑–≤–æ–ª—è—î –ø–∏—Å–∞—Ç–∏ `import React from 'react'` –∑–∞–º—ñ—Å—Ç—å `import * as React from 'react'`, –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ –Ω–∞–ø–∏—Å–∞–Ω–∞ –≤ CommonJS.

---

## 16. Performance Optimization

–Ø–∫ –ø–∏—Å–∞—Ç–∏ –∫–æ–¥, —è–∫–∏–π –º–µ–Ω—à–µ –Ω–∞–≤–∞–Ω—Ç–∞–∂—É—î –∫–æ–º–ø—ñ–ª—è—Ç–æ—Ä —ñ –±—Ä–∞—É–∑–µ—Ä?

### `const enum`

–ó–≤–∏—á–∞–π–Ω–∏–π `enum` –≥–µ–Ω–µ—Ä—É—î IIFE –æ–±'—î–∫—Ç. `const enum` –ø—Ä–æ—Å—Ç–æ –ø—ñ–¥—Å—Ç–∞–≤–ª—è—î –∑–Ω–∞—á–µ–Ω–Ω—è.

```typescript
const enum Direction {
    Up,
    Down,
}
const d = Direction.Up

// JS output:
// const d = 0; // –ù—É–ª—å –æ–≤–µ—Ä—Ö–µ–¥—É!
```

### `import type`

–î–æ–ø–æ–º–∞–≥–∞—î –±–∞–Ω–¥–ª–µ—Ä–∞–º (Webpack) –µ—Ñ–µ–∫—Ç–∏–≤–Ω—ñ—à–µ –≤–∏–¥–∞–ª—è—Ç–∏ –∑–∞–π–≤–∏–π –∫–æ–¥ (Tree Shaking).

```typescript
import { type User, createUser } from './user'

// User –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ —è–∫ —Ç–∏–ø, —Ç–æ–º—É —Ü–µ–π —ñ–º–ø–æ—Ä—Ç –ø–æ–≤–Ω—ñ—Å—Ç—é –∑–Ω–∏–∫–Ω–µ –∑ JS –±–∞–Ω–¥–ª—É,
// —è–∫—â–æ createUser –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è.
```

---

## 17. Case Study: Type-Safe API Client

–î–∞–≤–∞–π—Ç–µ —Å—Ç–≤–æ—Ä–∏–º–æ –æ–±–≥–æ—Ä—Ç–∫—É –Ω–∞–¥ `fetch` –∑ Zod.

```typescript
// api.ts
async function request<T>(url: string, schema: z.ZodType<T>): Promise<T> {
    const response = await fetch(url)
    const data = await response.json()

    // Parse –∫–∏–Ω–µ –ø–æ–º–∏–ª–∫—É, —è–∫—â–æ –¥–∞–Ω—ñ –Ω–µ –≤–∞–ª—ñ–¥–Ω—ñ!
    return schema.parse(data)
}

// user-service.ts
const UserResponseSchema = z.object({
    id: z.number(),
    name: z.string(),
    company: z.object({
        name: z.string(),
    }),
})

// –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π –≤–∏–≤—ñ–¥ —Ç–∏–ø—É –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
async function getUser(id: number) {
    // result –º–∞—î —Ç–∏–ø { id: number; name: string; ... }
    const result = await request(`/users/${id}`, UserResponseSchema)
    console.log(result.company.name)
}
```

–¶–µ "–∑–∞–ª—ñ–∑–æ–±–µ—Ç–æ–Ω–Ω–∞" –≥–∞—Ä–∞–Ω—Ç—ñ—è, —â–æ –≤–∞—à —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –Ω–µ –≤–ø–∞–¥–µ —á–µ—Ä–µ–∑ –Ω–µ—Å–ø–æ–¥—ñ–≤–∞–Ω—É –∑–º—ñ–Ω—É API.

---

## 18. Global Types Augmentation: `process.env`

–í Node.js `process.env` —Ç–∏–ø—ñ–∑–æ–≤–∞–Ω–∏–π —è–∫ `Dict<string>`.
–î–∞–≤–∞–π—Ç–µ –¥–æ–¥–∞–º–æ –Ω–∞—à—ñ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞.

```typescript
// env.d.ts
namespace NodeJS {
    interface ProcessEnv {
        DATABASE_URL: string
        PORT: string
        NODE_ENV: 'development' | 'production'
    }
}
```

–¢–µ–ø–µ—Ä:

```typescript
process.env.DATABASE_URL // string
process.env.PORT // string
// process.env.UNKNOWN // üõë Error
```

---

## 19. Final Challenge: Fully Typed Redux Clone

–ú–∏ —Ä–æ–±–∏–ª–∏ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∏. –¢–µ–ø–µ—Ä –ø–æ–≤–Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏.

```typescript
type Action<T = any> = { type: T }
type Reducer<S, A extends Action> = (state: S, action: A) => S
type Listener = () => void

class Store<S, A extends Action> {
    private state: S
    private listeners: Listener[] = []

    constructor(
        private reducer: Reducer<S, A>,
        initialState: S,
    ) {
        this.state = initialState
    }

    getState(): S {
        return this.state
    }

    dispatch(action: A): void {
        this.state = this.reducer(this.state, action)
        this.listeners.forEach((l) => l())
    }

    subscribe(listener: Listener): () => void {
        this.listeners.push(listener)
        return () => {
            this.listeners = this.listeners.filter((l) => l !== listener)
        }
    }
}
```

–ó–∞–≤–¥–∞–Ω–Ω—è:
–î–æ–¥–∞–π—Ç–µ –ø—ñ–¥—Ç—Ä–∏–º–∫—É `Variable Arguments` –≤ `dispatch` —è–∫—â–æ action creator –ø—Ä–∏–π–º–∞—î –∞—Ä–≥—É–º–µ–Ω—Ç–∏. (–ü—ñ–¥–∫–∞–∑–∫–∞: `Parameters<T>`).

---

## 20. –®–ø–∞—Ä–≥–∞–ª–∫–∞ (Cheatsheet)

| –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è / –ü–æ–Ω—è—Ç—Ç—è | –û–ø–∏—Å                                             |
| :--------------------- | :----------------------------------------------- |
| `strict: true`         | Must have. –í–º–∏–∫–∞—î —Å—É–≤–æ—Ä—ñ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏.              |
| `skipLibCheck: true`   | –ü—Ä–∏—Å–∫–æ—Ä—é—î –∑–±—ñ—Ä–∫—É, —ñ–≥–Ω–æ—Ä—É—é—á–∏ `node_modules`.      |
| `.d.ts`                | –§–∞–π–ª–∏ –¥–µ–∫–ª–∞—Ä–∞—Ü—ñ–π (—Ç—ñ–ª—å–∫–∏ —Ç–∏–ø–∏).                  |
| `declare global`       | –†–æ–∑—à–∏—Ä–µ–Ω–Ω—è –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Å–∫–æ—É–ø—É (Window, Process). |
| `unknown`              | –ë–µ–∑–ø–µ—á–Ω–∏–π –∞–Ω–∞–ª–æ–≥ `any`.                          |
| `zod`                  | Runtime –≤–∞–ª—ñ–¥–∞—Ü—ñ—è + –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è —Ç–∏–ø—ñ–≤.             |
| `Monorepo`             | `references` + `composite`.                      |
| `paths`                | –ê–ª—ñ–∞—Å–∏ —à–ª—è—Ö—ñ–≤ (`@/components`).                  |
| `esModuleInterop`      | –Ü–º–ø–æ—Ä—Ç CJS –ø–∞–∫–µ—Ç—ñ–≤ —è–∫ ESM.                       |

---

## –§—ñ–Ω–∞–ª

–í–∏ –ø—Ä–æ–π—à–ª–∏ —à–ª—è—Ö –≤—ñ–¥ `console.log` –¥–æ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏ —Å–∫–ª–∞–¥–Ω–∏—Ö —Å–∏—Å—Ç–µ–º.
TypeScript ‚Äî —Ü–µ —ñ–Ω–≤–µ—Å—Ç–∏—Ü—ñ—è. –°–ø–æ—á–∞—Ç–∫—É –≤–∏ –≤–∏—Ç—Ä–∞—á–∞—î—Ç–µ —á–∞—Å –Ω–∞ –Ω–∞–ø–∏—Å–∞–Ω–Ω—è —Ç–∏–ø—ñ–≤, –∞–ª–µ –ø–æ—Ç—ñ–º –≤–æ–Ω–∏ –µ–∫–æ–Ω–æ–º–ª—è—Ç—å –≤–∞–º –≥–æ–¥–∏–Ω–∏ –Ω–∞ –¥–µ–±–∞–≥–≥–∏–Ω–≥—É —Ç–∞ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥—É.

**–©–æ –¥–∞–ª—ñ?**

- –ß–∏—Ç–∞–π—Ç–µ –≤–∏—Ö—ñ–¥–Ω–∏–π –∫–æ–¥ –ø–æ–ø—É–ª—è—Ä–Ω–∏—Ö –±—ñ–±–ª—ñ–æ—Ç–µ–∫ (RxJS, TypeORM, Zod). –¶–µ –Ω–∞–π–∫—Ä–∞—â–∏–π –ø—ñ–¥—Ä—É—á–Ω–∏–∫.
- –°–ø—Ä–æ–±—É–π—Ç–µ –Ω–∞–ø–∏—Å–∞—Ç–∏ —Å–≤–æ—ó —Ç–∏–ø–∏ –¥–ª—è –Ω–µ—Ç–∏–ø—ñ–∑–æ–≤–∞–Ω–æ—ó –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ (`DefinitelyTyped`).
- –ü–æ—á–Ω—ñ—Ç—å –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ TS –≤ –∫–æ–∂–Ω–æ–º—É –Ω–æ–≤–æ–º—É –ø—Ä–æ–µ–∫—Ç—ñ.

–£—Å–ø—ñ—Ö—ñ–≤ —É –ø—ñ–¥–∫–æ—Ä–µ–Ω–Ω—ñ —Ç–∏–ø—ñ–≤!

::card{type="success" title="–ö—É—Ä—Å –∑–∞–≤–µ—Ä—à–µ–Ω–æ!"}
–í—ñ—Ç–∞—é! –í–∏ –æ—Å–≤–æ—ó–ª–∏ TypeScript –≤—ñ–¥ –ê –¥–æ –Ø.
::
