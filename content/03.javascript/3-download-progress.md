---
title: –í—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –ø—Ä–æ–≥—Ä–µ—Å—É –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
description: –ù–∞–≤—á—ñ—Ç—å—Å—è –≤—ñ–¥—Å—Ç–µ–∂—É–≤–∞—Ç–∏ –ø—Ä–æ–≥—Ä–µ—Å –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–∞–π–ª—ñ–≤ —á–µ—Ä–µ–∑ ReadableStream API, —á–∏—Ç–∞—Ç–∏ –¥–∞–Ω—ñ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞–º–∏ —Ç–∞ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –ø—Ä–æ–≥—Ä–µ—Å-—ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä–∏
---

# –í—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –ø—Ä–æ–≥—Ä–µ—Å—É –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è

## –í—Å—Ç—É–ø —Ç–∞ –ö–æ–Ω—Ç–µ–∫—Å—Ç

–£—è–≤—ñ—Ç—å, —â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –∑–∞–≤–∞–Ω—Ç–∞–∂—É—î –≤–µ–ª–∏–∫–∏–π —Ñ–∞–π–ª ‚Äî –≤—ñ–¥–µ–æ, –∞—Ä—Ö—ñ–≤ —á–∏ –Ω–∞–±—ñ—Ä –¥–∞–Ω–∏—Ö. –ë–µ–∑ —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞ –ø—Ä–æ–≥—Ä–µ—Å—É —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –≤—Ä–∞–∂–µ–Ω–Ω—è, —â–æ –¥–æ–¥–∞—Ç–æ–∫ "–∑–∞–≤—ñ—Å". –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–µ –∑–Ω–∞—î: –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –π–¥–µ, —á–∏ —â–æ—Å—å –∑–ª–∞–º–∞–ª–æ—Å—è? –°–∫—ñ–ª—å–∫–∏ —â–µ —á–µ–∫–∞—Ç–∏?

**–ü—Ä–æ–≥—Ä–µ—Å-–±–∞—Ä** ‚Äî —Ü–µ –Ω–µ –ø—Ä–æ—Å—Ç–æ –µ—Å—Ç–µ—Ç–∏—á–Ω–∞ –¥–µ—Ç–∞–ª—å, —Ü–µ –∫—Ä–∏—Ç–∏—á–Ω–æ –≤–∞–∂–ª–∏–≤–∏–π –µ–ª–µ–º–µ–Ω—Ç UX. –í—ñ–Ω —ñ–Ω—Ñ–æ—Ä–º—É—î –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞, –∑–Ω–∏–∂—É—î —Ç—Ä–∏–≤–æ–∂–Ω—ñ—Å—Ç—å –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è —ñ –¥–∞—î –∫–æ–Ω—Ç—Ä–æ–ª—å (–º–æ–∂–ª–∏–≤—ñ—Å—Ç—å —Å–∫–∞—Å—É–≤–∞—Ç–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è, —è–∫—â–æ –≤–æ–Ω–æ –π–¥–µ –∑–∞–Ω–∞–¥—Ç–æ –¥–æ–≤–≥–æ).

Fetch API –Ω–∞–¥–∞—î –ø–æ—Ç—É–∂–Ω–∏–π, –∞–ª–µ —á–∞—Å—Ç–æ –Ω–µ–¥–æ–æ—Ü—ñ–Ω–µ–Ω–∏–π —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è —Ü—å–æ–≥–æ ‚Äî **`ReadableStream`**. –í—ñ–Ω –¥–æ–∑–≤–æ–ª—è—î —á–∏—Ç–∞—Ç–∏ –¥–∞–Ω—ñ —Ñ—Ä–∞–≥–º–µ–Ω—Ç –∑–∞ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–º, –≤ –º—ñ—Ä—É —ó—Ö –Ω–∞–¥—Ö–æ–¥–∂–µ–Ω–Ω—è, —â–æ –≤—ñ–¥–∫—Ä–∏–≤–∞—î –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ –¥–ª—è:

- üìä –í—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –ø—Ä–æ–≥—Ä–µ—Å—É –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
- üé¨ –ü—Ä–æ–≥—Ä–µ—Å–∏–≤–Ω–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥—É –∫–æ–Ω—Ç–µ–Ω—Ç—É
- üíæ –û–±—Ä–æ–±–∫–∏ –¥–∞–Ω–∏—Ö "–Ω–∞ –ª—å–æ—Ç—É" –±–µ–∑ –ø–æ–≤–Ω–æ–≥–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≤ –ø–∞–º'—è—Ç—å

::warning
**–í–∞–∂–ª–∏–≤–µ –æ–±–º–µ–∂–µ–Ω–Ω—è**

Fetch API **–Ω–µ –ø—ñ–¥—Ç—Ä–∏–º—É—î** –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –ø—Ä–æ–≥—Ä–µ—Å—É **–≤—ñ–¥–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è** (upload progress). –î–ª—è —Ü—å–æ–≥–æ –≤—Å–µ —â–µ –ø–æ—Ç—Ä—ñ–±–µ–Ω `XMLHttpRequest`. –¶–µ–π —Ä–æ–∑–¥—ñ–ª —Å—Ç–æ—Å—É—î—Ç—å—Å—è –ª–∏—à–µ **–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è** (download) –¥–∞–Ω–∏—Ö –∑ —Å–µ—Ä–≤–µ—Ä–∞.
::

### –©–æ –º–∏ –Ω–∞–≤—á–∏–º–æ—Å—è —Ä–æ–±–∏—Ç–∏?

- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `response.body.getReader()` –¥–ª—è –¥–æ—Å—Ç—É–ø—É –¥–æ –ø–æ—Ç–æ–∫—É
- –ß–∏—Ç–∞—Ç–∏ –¥–∞–Ω—ñ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞–º–∏ —á–µ—Ä–µ–∑ `ReadableStream`
- –û–±—á–∏—Å–ª—é–≤–∞—Ç–∏ –ø—Ä–æ–≥—Ä–µ—Å –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —É –≤—ñ–¥—Å–æ—Ç–∫–∞—Ö
- –°—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –≤—ñ–∑—É–∞–ª—å–Ω–∏–π –ø—Ä–æ–≥—Ä–µ—Å-—ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä
- –û–±'—î–¥–Ω—É–≤–∞—Ç–∏ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∏ –¥–∞–Ω–∏—Ö —É —Ñ—ñ–Ω–∞–ª—å–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

## –§—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ñ –ö–æ–Ω—Ü–µ–ø—Ü—ñ—ó

### –©–æ —Ç–∞–∫–µ ReadableStream?

**ReadableStream** ‚Äî —Ü–µ –æ–±'—î–∫—Ç, —â–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—î –ø–æ—Ç—ñ–∫ –¥–∞–Ω–∏—Ö, —è–∫—ñ —á–∏—Ç–∞—é—Ç—å—Å—è —Ñ—Ä–∞–≥–º–µ–Ω—Ç –∑–∞ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–º. –ù–∞ –≤—ñ–¥–º—ñ–Ω—É –≤—ñ–¥ –º–µ—Ç–æ–¥—ñ–≤ `response.json()` —á–∏ `response.text()`, —è–∫—ñ —á–µ–∫–∞—é—Ç—å –ø–æ–≤–Ω–æ–≥–æ

 –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è, ReadableStream –Ω–∞–¥–∞—î –¥–∞–Ω—ñ —ñ–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ.

```javascript
// –ó–∞–º—ñ—Å—Ç—å —Ü—å–æ–≥–æ (—á–µ–∫–∞—î –ø–æ–≤–Ω–æ–≥–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è):
const data = await response.json();

// –ú–æ–∂–Ω–∞ –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–æ—Å—Ç—É–ø –¥–æ –ø–æ—Ç–æ–∫—É:
const reader = response.body.getReader();
```

### –ö–ª—é—á–æ–≤—ñ –æ—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ

::field-group

:::field{name="response.body" type="ReadableStream"}
–í–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å `Response`, —è–∫–∞ –ø–æ–≤–µ—Ä—Ç–∞—î –ø–æ—Ç—ñ–∫ –¥–ª—è —á–∏—Ç–∞–Ω–Ω—è —Ç—ñ–ª–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
:::

:::field{name="getReader()" type="Method"}
–°—Ç–≤–æ—Ä—é—î –æ–±'—î–∫—Ç-—á–∏—Ç–∞—á –¥–ª—è –ø–æ—Å–ª—ñ–¥–æ–≤–Ω–æ–≥–æ —á–∏—Ç–∞–Ω–Ω—è —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ñ–≤ –¥–∞–Ω–∏—Ö
:::

:::field{name="reader.read()" type="Method"}
–ü–æ–≤–µ—Ä—Ç–∞—î Promise –∑ –æ–±'—î–∫—Ç–æ–º `{done: boolean, value: Uint8Array}`
:::

:::field{name="done" type="boolean"}
`true`, –∫–æ–ª–∏ –ø–æ—Ç—ñ–∫ –∑–∞–≤–µ—Ä—à–µ–Ω–æ (–≤—Å—ñ –¥–∞–Ω—ñ –ø—Ä–æ—á–∏—Ç–∞–Ω—ñ)
:::

:::field{name="value" type="Uint8Array"}
–§—Ä–∞–≥–º–µ–Ω—Ç –±—ñ–Ω–∞—Ä–Ω–∏—Ö –¥–∞–Ω–∏—Ö (—Ç–∏–ø—ñ–∑–æ–≤–∞–Ω–∏–π –º–∞—Å–∏–≤ –±–∞–π—Ç—ñ–≤)
:::

::

### –ñ–∏—Ç—Ç—î–≤–∏–π —Ü–∏–∫–ª —á–∏—Ç–∞–Ω–Ω—è –ø–æ—Ç–æ–∫—É

::mermaid

```mermaid
sequenceDiagram
    participant JS as JavaScript
    participant F as fetch()
    participant S as Server
    participant RS as ReadableStream
    participant R as Reader
    
    JS->>F: fetch(url)
    F->>S: HTTP Request
    S-->>F: Headers (Content-Length)
    F->>RS: response.body
    
    JS->>RS: getReader()
    RS->>R: Create Reader
    
    loop Read chunks
        JS->>R: reader.read()
        S-->>R: Data chunk
        R-->>JS: {done: false, value: Uint8Array}
        Note over JS: Process chunk<br/>Update progress
    end
    
    S-->>R: Final chunk
    R-->>JS: {done: true}
    
    Note over JS: All data received<br/>Combine chunks
    
    style RS fill:#3b82f6,stroke:#1d4ed8,color:#ffffff
    style R fill:#f59e0b,stroke:#b45309,color:#ffffff
```

::

## –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ —Ç–∞ –ú–µ—Ö–∞–Ω—ñ–∫–∞

### –ü—Ä–æ—Ü–µ—Å —á–∏—Ç–∞–Ω–Ω—è –ø–æ—Ç–æ–∫—É: –ø–æ–∫—Ä–æ–∫–æ–≤–∏–π –∞–ª–≥–æ—Ä–∏—Ç–º

::steps

### –ö—Ä–æ–∫ 1: –û—Ç—Ä–∏–º–∞–Ω–Ω—è ReadableStream

–û—Ç—Ä–∏–º—É—î–º–æ reader –¥–ª—è –ø–æ—Ç–æ–∫—É `response.body`

```javascript
const response = await fetch(url);
const reader = response.body.getReader();
```

### –ö—Ä–æ–∫ 2: –í–∏–∑–Ω–∞—á–µ–Ω–Ω—è –∑–∞–≥–∞–ª—å–Ω–æ–≥–æ —Ä–æ–∑–º—ñ—Ä—É

–ß–∏—Ç–∞—î–º–æ –∑–∞–≥–æ–ª–æ–≤–æ–∫ `Content-Length` (—è–∫—â–æ –¥–æ—Å—Ç—É–ø–Ω–∏–π)

```javascript
const contentLength = +response.headers.get('Content-Length');
```

### –ö—Ä–æ–∫ 3: –ß–∏—Ç–∞–Ω–Ω—è —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ñ–≤ —É —Ü–∏–∫–ª—ñ

–ß–∏—Ç–∞—î–º–æ –¥–∞–Ω—ñ —Ñ—Ä–∞–≥–º–µ–Ω—Ç –∑–∞ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–º –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è

```javascript
while (true) {
  const {done, value} = await reader.read();
  if (done) break;
  
  // value - —Ü–µ Uint8Array –∑ –±–∞–π—Ç–∞–º–∏
  chunks.push(value);
  receivedLength += value.length;
}
```

### –ö—Ä–æ–∫ 4: –û–±'—î–¥–Ω–∞–Ω–Ω—è —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ñ–≤

–°—Ç–≤–æ—Ä—é—î–º–æ —î–¥–∏–Ω–∏–π –º–∞—Å–∏–≤ –∑ —É—Å—ñ—Ö —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ñ–≤

```javascript
const allChunks = new Uint8Array(receivedLength);
let position = 0;
for (let chunk of chunks) {
  allChunks.set(chunk, position);
  position += chunk.length;
}
```

### –ö—Ä–æ–∫ 5: –î–µ–∫–æ–¥—É–≤–∞–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É

–ü–µ—Ä–µ—Ç–≤–æ—Ä—é—î–º–æ –±–∞–π—Ç–∏ —É –ø–æ—Ç—Ä—ñ–±–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç (—Ç–µ–∫—Å—Ç, JSON, Blob)

```javascript
const result = new TextDecoder('utf-8').decode(allChunks);
const data = JSON.parse(result);
```

::

::note
**Content-Length –º–æ–∂–µ –±—É—Ç–∏ –≤—ñ–¥—Å—É—Ç–Ω—ñ–º**

–ó–∞–≥–æ–ª–æ–≤–æ–∫ `Content-Length` –º–æ–∂–µ –Ω–µ –Ω–∞–¥–∞–≤–∞—Ç–∏—Å—è —Å–µ—Ä–≤–µ—Ä–æ–º, –æ—Å–æ–±–ª–∏–≤–æ –¥–ª—è:
- CORS-–∑–∞–ø–∏—Ç—ñ–≤ (—è–∫—â–æ –Ω–µ –¥–æ–∑–≤–æ–ª–µ–Ω–æ —è–≤–Ω–æ)
- –î–∏–Ω–∞–º—ñ—á–Ω–æ –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç—É
- –ü–æ—Ç–æ–∫–æ–≤–æ–≥–æ –ø–µ—Ä–µ–¥–∞–≤–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö

–£ —Ü—å–æ–º—É –≤–∏–ø–∞–¥–∫—É –º–æ–∂–Ω–∞ –≤—ñ–¥—Å—Ç–µ–∂—É–≤–∞—Ç–∏ –ª–∏—à–µ –∞–±—Å–æ–ª—é—Ç–Ω–∏–π –æ–±—Å—è–≥ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–∏—Ö –±–∞–π—Ç—ñ–≤, –∞ –Ω–µ –≤—ñ–¥—Å–æ—Ç–æ–∫.
::

## –ü—Ä–∞–∫—Ç–∏—á–Ω–∞ –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è

### –ë–∞–∑–æ–≤–∏–π –ø—Ä–∏–∫–ª–∞–¥: —á–∏—Ç–∞–Ω–Ω—è –∑ –ª–æ–≥—É–≤–∞–Ω–Ω—è–º –ø—Ä–æ–≥—Ä–µ—Å—É

–ü–æ—á–Ω–µ–º–æ –∑ –ø—Ä–æ—Å—Ç–æ–≥–æ –ø—Ä–∏–∫–ª–∞–¥—É, —è–∫–∏–π –≤–∏–≤–æ–¥–∏—Ç—å –ø—Ä–æ–≥—Ä–µ—Å —É –∫–æ–Ω—Å–æ–ª—å:

```javascript showLineNumbers
async function downloadWithProgress(url) {
  // –ö—Ä–æ–∫ 1: –†–æ–∑–ø–æ—á–∏–Ω–∞—î–º–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
  const response = await fetch(url);
  
  if (!response.ok) {
    throw new Error(`HTTP –ø–æ–º–∏–ª–∫–∞: ${response.status}`);
  }
  
  // –ö—Ä–æ–∫ 2: –û—Ç—Ä–∏–º—É—î–º–æ reader
  const reader = response.body.getReader();
  
  // –ö—Ä–æ–∫ 3: –û—Ç—Ä–∏–º—É—î–º–æ –∑–∞–≥–∞–ª—å–Ω—É –¥–æ–≤–∂–∏–Ω—É (—è–∫—â–æ –¥–æ—Å—Ç—É–ø–Ω–∞)
  const contentLength = response.headers.get('Content-Length');
  const total = contentLength ? parseInt(contentLength, 10) : 0;
  
  // –ö—Ä–æ–∫ 4: –ß–∏—Ç–∞—î–º–æ –¥–∞–Ω—ñ
  let receivedLength = 0;
  const chunks = [];
  
  while (true) {
    const {done, value} = await reader.read();
    
    if (done) {
      break;
    }
    
    chunks.push(value);
    receivedLength += value.length;
    
    // –í–∏–≤–æ–¥–∏–º–æ –ø—Ä–æ–≥—Ä–µ—Å
    if (total) {
      const progress = Math.round((receivedLength / total) * 100);
      console.log(`–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ: ${progress}% (${receivedLength} / ${total} –±–∞–π—Ç)`);
    } else {
      console.log(`–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ: ${receivedLength} –±–∞–π—Ç`);
    }
  }
  
  // –ö—Ä–æ–∫ 5: –û–±'—î–¥–Ω—É—î–º–æ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∏
  const allChunks = new Uint8Array(receivedLength);
  let position = 0;
  for (let chunk of chunks) {
    allChunks.set(chunk, position);
    position += chunk.length;
  }
  
  // –ö—Ä–æ–∫ 6: –î–µ–∫–æ–¥—É—î–º–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç
  const result = new TextDecoder('utf-8').decode(allChunks);
  
  return result;
}

// –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
try {
  const data = await downloadWithProgress(
    'https://api.github.com/repos/microsoft/vscode/commits?per_page=100'
  );
  console.log('‚úÖ –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑–∞–≤–µ—Ä—à–µ–Ω–æ!');
  console.log('–†–æ–∑–º—ñ—Ä –¥–∞–Ω–∏—Ö:', data.length, '—Å–∏–º–≤–æ–ª—ñ–≤');
} catch (error) {
  console.error('‚ùå –ü–æ–º–∏–ª–∫–∞:', error);
}
```

**–†–æ–∑–±—ñ—Ä –∫–æ–¥—É:**

- **–†—è–¥–æ–∫ 10:** `response.body.getReader()` ‚Äî –æ—Ç—Ä–∏–º—É—î–º–æ reader –¥–ª—è –ø–æ—Ç–æ–∫—É
- **–†—è–¥–æ–∫ 14:** –ö–æ–Ω–≤–µ—Ä—Ç—É—î–º–æ `Content-Length` —É —á–∏—Å–ª–æ (–º–æ–∂–µ –±—É—Ç–∏ `null`)
- **–†—è–¥–æ–∫ 21:** `reader.read()` ‚Äî —á–∏—Ç–∞—î–º–æ –Ω–∞—Å—Ç—É–ø–Ω–∏–π —Ñ—Ä–∞–≥–º–µ–Ω—Ç
- **–†—è–¥–æ–∫ 32:** –û–±—á–∏—Å–ª—é—î–º–æ –ø—Ä–æ–≥—Ä–µ—Å —É –≤—ñ–¥—Å–æ—Ç–∫–∞—Ö
- **–†—è–¥–æ–∫ 42:** `allChunks.set(chunk, position)` ‚Äî –∫–æ–ø—ñ—é—î–º–æ —Ñ—Ä–∞–≥–º–µ–Ω—Ç —É —Ä–µ–∑—É–ª—å—Ç—É—é—á–∏–π –º–∞—Å–∏–≤

### –í—ñ–∑—É–∞–ª—å–Ω–∏–π –ø—Ä–æ–≥—Ä–µ—Å-–±–∞—Ä

–°—Ç–≤–æ—Ä–∏–º–æ —Ä–µ–∞–ª—å–Ω–∏–π UI –∑ –ø—Ä–æ–≥—Ä–µ—Å-–±–∞—Ä–æ–º:

```html
<!DOCTYPE html>
<html>
<head>
  <title>–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑ –ø—Ä–æ–≥—Ä–µ—Å–æ–º</title>
  <style>
    .progress-container {
      width: 100%;
      max-width: 500px;
      margin: 20px auto;
      font-family: Arial, sans-serif;
    }
    
    .progress-bar {
      width: 100%;
      height: 30px;
      background: #f0f0f0;
      border-radius: 15px;
      overflow: hidden;
      position: relative;
    }
    
    .progress-fill {
      height: 100%;
      background: linear-gradient(90deg, #3b82f6, #2563eb);
      width: 0%;
      transition: width 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-weight: bold;
    }
    
    .stats {
      margin-top: 10px;
      color: #666;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <div class="progress-container">
    <h2>–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö</h2>
    <div class="progress-bar">
      <div class="progress-fill" id="progressFill">0%</div>
    </div>
    <div class="stats" id="stats">–û—á—ñ–∫—É–≤–∞–Ω–Ω—è...</div>
  </div>

  <script>
    async function downloadWithUI(url) {
      const progressFill = document.getElementById('progressFill');
      const stats = document.getElementById('stats');
      
      const response = await fetch(url);
      
      if (!response.ok) {
        throw new Error(`HTTP ${response.status}`);
      }
      
      const reader = response.body.getReader();
      const contentLength = response.headers.get('Content-Length');
      const total = contentLength ? parseInt(contentLength, 10) : 0;
      
      let receivedLength = 0;
      const chunks = [];
      const startTime = Date.now();
      
      while (true) {
        const {done, value} = await reader.read();
        
        if (done) break;
        
        chunks.push(value);
        receivedLength += value.length;
        
        // –û–Ω–æ–≤–ª—é—î–º–æ UI
        if (total) {
          const progress = Math.round((receivedLength / total) * 100);
          progressFill.style.width = progress + '%';
          progressFill.textContent = progress + '%';
          
          const elapsed = (Date.now() - startTime) / 1000;
          const speed = (receivedLength / 1024 / elapsed).toFixed(2);
          
          stats.textContent = `${receivedLength} / ${total} –±–∞–π—Ç ‚Ä¢ ${speed} KB/s`;
        } else {
          const kb = (receivedLength / 1024).toFixed(2);
          stats.textContent = `–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ: ${kb} KB`;
        }
      }
      
      // –û–±'—î–¥–Ω—É—î–º–æ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∏
      const allChunks = new Uint8Array(receivedLength);
      let position = 0;
      for (let chunk of chunks) {
        allChunks.set(chunk, position);
        position += chunk.length;
      }
      
      const result = new TextDecoder('utf-8').decode(allChunks);
      
      stats.textContent = '‚úÖ –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑–∞–≤–µ—Ä—à–µ–Ω–æ!';
      
      return result;
    }
    
    // –ê–≤—Ç–æ–∑–∞–ø—É—Å–∫ –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏
    window.addEventListener('load', async () => {
      try {
        const data = await downloadWithUI(
          'https://api.github.com/repos/microsoft/typescript/commits?per_page=100'
        );
        console.log('–î–∞–Ω—ñ –æ—Ç—Ä–∏–º–∞–Ω–æ:', JSON.parse(data).length, '–∫–æ–º–º—ñ—Ç—ñ–≤');
      } catch (error) {
        document.getElementById('stats').textContent = '‚ùå –ü–æ–º–∏–ª–∫–∞: ' + error.message;
      }
    });
  </script>
</body>
</html>
```

**–ö–ª—é—á–æ–≤—ñ –º–æ–º–µ–Ω—Ç–∏:**

- **–†—è–¥–æ–∫ 78:** –û–±—á–∏—Å–ª—é—î–º–æ –ø—Ä–æ–≥—Ä–µ—Å —É –≤—ñ–¥—Å–æ—Ç–∫–∞—Ö
- **–†—è–¥–æ–∫ 79-80:** –û–Ω–æ–≤–ª—é—î–º–æ —à–∏—Ä–∏–Ω—É —Ç–∞ —Ç–µ–∫—Å—Ç –ø—Ä–æ–≥—Ä–µ—Å-–±–∞—Ä—É
- **–†—è–¥–æ–∫ 83:** –û–±—á–∏—Å–ª—é—î–º–æ —à–≤–∏–¥–∫—ñ—Å—Ç—å –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è (KB/s)

### –†–æ–±–æ—Ç–∞ –∑ —Ä—ñ–∑–Ω–∏–º–∏ —Ñ–æ—Ä–º–∞—Ç–∞–º–∏

::tabs

:::tab{label="JSON"}

```javascript
async function downloadJSON(url) {
  const response = await fetch(url);
  const reader = response.body.getReader();
  
  let receivedLength = 0;
  const chunks = [];
  
  while (true) {
    const {done, value} = await reader.read();
    if (done) break;
    
    chunks.push(value);
    receivedLength += value.length;
    
    console.log(`–û—Ç—Ä–∏–º–∞–Ω–æ: ${receivedLength} –±–∞–π—Ç`);
  }
  
  // –û–±'—î–¥–Ω–∞–Ω–Ω—è —Ç–∞ –¥–µ–∫–æ–¥—É–≤–∞–Ω–Ω—è
  const allChunks = new Uint8Array(receivedLength);
  let position = 0;
  for (let chunk of chunks) {
    allChunks.set(chunk, position);
    position += chunk.length;
  }
  
  const text = new TextDecoder('utf-8').decode(allChunks);
  return JSON.parse(text);
}

// –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
const commits = await downloadJSON(
  'https://api.github.com/repos/facebook/react/commits'
);
console.log('–ö–æ–º–º—ñ—Ç—ñ–≤:', commits.length);
```

:::

:::tab{label="Blob (–ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è)"}

```javascript
async function downloadImage(url, onProgress) {
  const response = await fetch(url);
  const reader = response.body.getReader();
  const contentLength = +response.headers.get('Content-Length');
  
  let receivedLength = 0;
  const chunks = [];
  
  while (true) {
    const {done, value} = await reader.read();
    if (done) break;
    
    chunks.push(value);
    receivedLength += value.length;
    
    // Callback –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è UI
    if (onProgress && contentLength) {
      onProgress(receivedLength, contentLength);
    }
  }
  
  // –°—Ç–≤–æ—Ä—é—î–º–æ Blob –ù–ê–ü–†–Ø–ú–£ –∑ chunks (–ø—Ä–æ—Å—Ç—ñ—à–µ!)
  const blob = new Blob(chunks);
  
  return blob;
}

// –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∑ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è–º
const img = document.createElement('img');
document.body.appendChild(img);

const blob = await downloadImage(
  'https://picsum.photos/1920/1080',
  (received, total) => {
    const percent = Math.round((received / total) * 100);
    console.log(`–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è: ${percent}%`);
  }
);

img.src = URL.createObjectURL(blob);

// –û—á–∏—Å—Ç–∏—Ç–∏ –ø–∞–º'—è—Ç—å –ø—ñ—Å–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
img.onload = () => {
  URL.revokeObjectURL(img.src);
};
```

:::

:::tab{label="–¢–µ–∫—Å—Ç–æ–≤–∏–π —Ñ–∞–π–ª"}

```javascript
async function downloadText(url) {
  const response = await fetch(url);
  const reader = response.body.getReader();
  
  const chunks = [];
  
  while (true) {
    const {done, value} = await reader.read();
    if (done) break;
    
    chunks.push(value);
  }
  
  // –î–ª—è —Ç–µ–∫—Å—Ç—É –ø—Ä–æ—Å—Ç—ñ—à–µ:
  const blob = new Blob(chunks);
  const text = await blob.text();
  
  return text;
}

// –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è README
const readme = await downloadText(
  'https://raw.githubusercontent.com/nodejs/node/main/README.md'
);

console.log('README —Ä–æ–∑–º—ñ—Ä:', readme.length, '—Å–∏–º–≤–æ–ª—ñ–≤');
console.log('–ü–µ—Ä—à—ñ 200 —Å–∏–º–≤–æ–ª—ñ–≤:', readme.slice(0, 200));
```

:::

::

::tip
**–ü—Ä–æ—Å—Ç—ñ—à–µ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è Blob**

–ó–∞–º—ñ—Å—Ç—å –æ–±'—î–¥–Ω–∞–Ω–Ω—è `Uint8Array` —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ñ–≤ –≤—Ä—É—á–Ω—É, –¥–ª—è Blob –º–æ–∂–Ω–∞ –ø—Ä–æ—Å—Ç–æ:

```javascript
const blob = new Blob(chunks);
```

–ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä Blob –ø—Ä–∏–π–º–∞—î –º–∞—Å–∏–≤ `Uint8Array` —ñ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ–±'—î–¥–Ω—É—î —ó—Ö!
::

## –ü—Ä–∞–∫—Ç–∏—á–Ω—ñ –°—Ü–µ–Ω–∞—Ä—ñ—ó

### –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≤–µ–ª–∏–∫–æ–≥–æ —Ñ–∞–π–ª—É –∑ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—é —Å–∫–∞—Å—É–≤–∞–Ω–Ω—è

```html
<!DOCTYPE html>
<html>
<head>
  <title>–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ñ–∞–π–ª—É –∑ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—é —Å–∫–∞—Å—É–≤–∞–Ω–Ω—è</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      max-width: 600px;
      margin: 50px auto;
      padding: 20px;
    }
    
    .download-container {
      border: 2px solid #3b82f6;
      border-radius: 8px;
      padding: 20px;
      background: #f8fafc;
    }
    
    .controls {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
    }
    
    button {
      padding: 10px 20px;
      font-size: 16px;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      transition: background 0.3s;
    }
    
    #downloadBtn {
      background: #3b82f6;
      color: white;
    }
    
    #downloadBtn:hover {
      background: #2563eb;
    }
    
    #cancelBtn {
      background: #ef4444;
      color: white;
    }
    
    #cancelBtn:hover {
      background: #dc2626;
    }
    
    #cancelBtn:disabled {
      background: #cbd5e1;
      cursor: not-allowed;
    }
    
    .progress-container {
      margin-top: 20px;
    }
    
    progress {
      width: 100%;
      height: 30px;
      border-radius: 5px;
    }
    
    .status {
      margin-top: 10px;
      color: #64748b;
      font-size: 14px;
    }
  </style>
</head>
<body>
  <div class="download-container">
    <h2>–ú–µ–Ω–µ–¥–∂–µ—Ä –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω—å</h2>
    
    <div class="controls">
      <button id="downloadBtn">üì• –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –≤—ñ–¥–µ–æ</button>
      <button id="cancelBtn" disabled>‚ùå –°–∫–∞—Å—É–≤–∞—Ç–∏</button>
    </div>
    
    <div class="progress-container">
      <progress id="progress" value="0" max="100"></progress>
      <div class="status" id="status">–ì–æ—Ç–æ–≤–∏–π –¥–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è</div>
    </div>
  </div>

  <script>
    class DownloadManager {
      constructor() {
        this.controller = null;
        this.reader = null;
      }
      
      async download(url, onProgress) {
        // –°—Ç–≤–æ—Ä—é—î–º–æ AbortController –¥–ª—è –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ —Å–∫–∞—Å—É–≤–∞–Ω–Ω—è
        this.controller = new AbortController();
        
        try {
          const response = await fetch(url, {
            signal: this.controller.signal
          });
          
          if (!response.ok) {
            throw new Error(`HTTP ${response.status}`);
          }
          
          this.reader = response.body.getReader();
          const contentLength = +response.headers.get('Content-Length') || 0;
          
          let receivedLength = 0;
          const chunks = [];
          
          while (true) {
            const {done, value} = await this.reader.read();
            
            if (done) break;
            
            chunks.push(value);
            receivedLength += value.length;
            
            // –û–Ω–æ–≤–ª—é—î–º–æ –ø—Ä–æ–≥—Ä–µ—Å
            if (onProgress) {
              onProgress({
                received: receivedLength,
                total: contentLength,
                progress: contentLength ? (receivedLength / contentLength) * 100 : 0
              });
            }
          }
          
          return new Blob(chunks);
          
        } catch (error) {
          if (error.name === 'AbortError') {
            console.log('–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å–∫–∞—Å–æ–≤–∞–Ω–æ');
          } else {
            console.error('–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è:', error);
          }
          throw error;
        }
      }
      
      cancel() {
        if (this.controller) {
          this.controller.abort();
        }
        if (this.reader) {
          this.reader.cancel();
        }
      }
    }
    
    // –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
    const manager = new DownloadManager();
    
    const downloadBtn = document.getElementById('downloadBtn');
    const cancelBtn = document.getElementById('cancelBtn');
    const progressBar = document.getElementById('progress');
    const statusDiv = document.getElementById('status');
    
    downloadBtn.addEventListener('click', async () => {
      downloadBtn.disabled = true;
      cancelBtn.disabled = false;
      progressBar.value = 0;
      statusDiv.textContent = '–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Ä–æ–∑–ø–æ—á–∞—Ç–æ...';
      
      try {
        const startTime = Date.now();
        
        const blob = await manager.download(
          'http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4',
          ({received, total, progress}) => {
            progressBar.value = progress;
            
            const elapsed = (Date.now() - startTime) / 1000;
            const speed = (received / 1024 / elapsed).toFixed(2);
            const receivedMB = (received / 1024 / 1024).toFixed(2);
            const totalMB = (total / 1024 / 1024).toFixed(2);
            
            statusDiv.textContent = `${progress.toFixed(1)}% - ${receivedMB}/${totalMB} MB @ ${speed} KB/s`;
          }
        );
        
        console.log('‚úÖ –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ:', blob.size, '–±–∞–π—Ç');
        statusDiv.textContent = `‚úÖ –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑–∞–≤–µ—Ä—à–µ–Ω–æ! –†–æ–∑–º—ñ—Ä: ${(blob.size / 1024 / 1024).toFixed(2)} MB`;
        
        // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ —Ñ–∞–π–ª
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'BigBuckBunny.mp4';
        a.click();
        URL.revokeObjectURL(url);
        
      } catch (error) {
        if (error.name === 'AbortError') {
          statusDiv.textContent = '‚ö†Ô∏è –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å–∫–∞—Å–æ–≤–∞–Ω–æ';
        } else {
          statusDiv.textContent = '‚ùå –ü–æ–º–∏–ª–∫–∞: ' + error.message;
          console.error('–ü–æ–º–∏–ª–∫–∞:', error);
        }
      } finally {
        downloadBtn.disabled = false;
        cancelBtn.disabled = true;
      }
    });
    
    cancelBtn.addEventListener('click', () => {
      manager.cancel();
      cancelBtn.disabled = true;
    });
  </script>
</body>
</html>
```

### –ü–æ—Ç–æ–∫–æ–≤–∞ –æ–±—Ä–æ–±–∫–∞ –¥–∞–Ω–∏—Ö –±–µ–∑ –ø–æ–≤–Ω–æ–≥–æ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è

–î–ª—è –¥—É–∂–µ –≤–µ–ª–∏–∫–∏—Ö —Ñ–∞–π–ª—ñ–≤ –º–æ–∂–Ω–∞ –æ–±—Ä–æ–±–ª—è—Ç–∏ –¥–∞–Ω—ñ —Ñ—Ä–∞–≥–º–µ–Ω—Ç –∑–∞ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–º, –Ω–µ –∑–±–µ—Ä—ñ–≥–∞—é—á–∏ –≤—Å–µ –≤ –ø–∞–º'—è—Ç—ñ:

```javascript
async function processLargeFile(url, processChunk) {
  const response = await fetch(url);
  const reader = response.body.getReader();
  
  let receivedLength = 0;
  
  try {
    while (true) {
      const {done, value} = await reader.read();
      
      if (done) break;
      
      // –û–±—Ä–æ–±–ª—è—î–º–æ –∫–æ–∂–µ–Ω —Ñ—Ä–∞–≥–º–µ–Ω—Ç –æ–∫—Ä–µ–º–æ
      await processChunk(value);
      
      receivedLength += value.length;
      console.log(`–û–±—Ä–æ–±–ª–µ–Ω–æ: ${(receivedLength / 1024 / 1024).toFixed(2)} MB`);
    }
  } finally {
    reader.releaseLock();
  }
  
  return receivedLength;
}

// –ü—Ä–∏–∫–ª–∞–¥: –ø—ñ–¥—Ä–∞—Ö—É–Ω–æ–∫ —Ä—è–¥–∫—ñ–≤ —É —Ç–µ–∫—Å—Ç–æ–≤–æ–º—É —Ñ–∞–π–ª—ñ
let lineCount = 0;
const decoder = new TextDecoder('utf-8');
let buffer = '';

const totalBytes = await processLargeFile(
  'https://example.com/huge-log-file.txt',
  async (chunk) => {
    // –î–µ–∫–æ–¥—É—î–º–æ —Ñ—Ä–∞–≥–º–µ–Ω—Ç
    buffer += decoder.decode(chunk, {stream: true});
    
    // –†–∞—Ö—É—î–º–æ —Ä—è–¥–∫–∏
    const lines = buffer.split('\n');
    lineCount += lines.length - 1;
    
    // –ó–±–µ—Ä—ñ–≥–∞—î–º–æ –Ω–µ–ø–æ–≤–Ω–∏–π —Ä—è–¥–æ–∫ –¥–ª—è –Ω–∞—Å—Ç—É–ø–Ω–æ—ó —ñ—Ç–µ—Ä–∞—Ü—ñ—ó
    buffer = lines[lines.length - 1];
  }
);

console.log(`–û–±—Ä–æ–±–ª–µ–Ω–æ ${totalBytes} –±–∞–π—Ç, –∑–Ω–∞–π–¥–µ–Ω–æ ${lineCount} —Ä—è–¥–∫—ñ–≤`);
```

::caution
**–û–±–º–µ–∂–µ–Ω–Ω—è –ø–∞–º'—è—Ç—ñ**

–Ø–∫—â–æ —Ä–æ–∑–º—ñ—Ä —Ñ–∞–π–ª—É –Ω–µ–≤—ñ–¥–æ–º–∏–π (`Content-Length` –≤—ñ–¥—Å—É—Ç–Ω—ñ–π), –æ–±–æ–≤'—è–∑–∫–æ–≤–æ –≤—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –ª—ñ–º—ñ—Ç –Ω–∞ `receivedLength`, —â–æ–± —É–Ω–µ–º–æ–∂–ª–∏–≤–∏—Ç–∏ –ø–µ—Ä–µ–ø–æ–≤–Ω–µ–Ω–Ω—è –ø–∞–º'—è—Ç—ñ:

```javascript
const MAX_SIZE = 50 * 1024 * 1024; // 50 MB

while (true) {
  const {done, value} = await reader.read();
  if (done) break;
  
  receivedLength += value.length;
  
  if (receivedLength > MAX_SIZE) {
    reader.cancel();
    throw new Error('–§–∞–π–ª –∑–∞–Ω–∞–¥—Ç–æ –≤–µ–ª–∏–∫–∏–π');
  }
  
  chunks.push(value);
}
```
::

## –ü—ñ–¥—Å—É–º–∫–∏

ReadableStream API –Ω–∞–¥–∞—î –ø–æ–≤–Ω–∏–π –∫–æ–Ω—Ç—Ä–æ–ª—å –Ω–∞–¥ –ø—Ä–æ—Ü–µ—Å–æ–º –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö:

::card-group

:::card{icon="lucide:gauge"}
#title
–ü—Ä–æ–≥—Ä–µ—Å –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è

#description
- –ß–∏—Ç–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö —Ñ—Ä–∞–≥–º–µ–Ω—Ç –∑–∞ —Ñ—Ä–∞–≥–º–µ–Ω—Ç–æ–º
- –û–±—á–∏—Å–ª–µ–Ω–Ω—è –ø—Ä–æ–≥—Ä–µ—Å—É —É –≤—ñ–¥—Å–æ—Ç–∫–∞—Ö
- –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤—ñ–∑—É–∞–ª—å–Ω–∏—Ö —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä—ñ–≤
- –û–±—á–∏—Å–ª–µ–Ω–Ω—è —à–≤–∏–¥–∫–æ—Å—Ç—ñ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
:::

:::card{icon="lucide:code-2"}
#title
–û—Å–Ω–æ–≤–Ω–∏–π –ø–∞—Ç–µ—Ä–Ω

#description
```javascript
const reader = response.body.getReader();
const contentLength = +response.headers.get('Content-Length');

let received = 0;
const chunks = [];

while (true) {
  const {done, value} = await reader.read();
  if (done) break;
  
  chunks.push(value);
  received += value.length;
  
  console.log(`${Math.round(received/contentLength*100)}%`);
}

const blob = new Blob(chunks);
```
:::

:::card{icon="lucide:database"}
#title
–û–±'—î–¥–Ω–∞–Ω–Ω—è —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ñ–≤

#description
**–î–ª—è Blob (–ø—Ä–æ—Å—Ç—ñ—à–µ):**
```javascript
const blob = new Blob(chunks);
```

**–î–ª—è —Ç–µ–∫—Å—Ç—É:**
```javascript
const allChunks = new Uint8Array(received);
let pos = 0;
for (let chunk of chunks) {
  allChunks.set(chunk, pos);
  pos += chunk.length;
}
const text = new TextDecoder().decode(allChunks);
```
:::

:::card{icon="lucide:alert-triangle"}
#title
–í–∞–∂–ª–∏–≤—ñ –æ–±–º–µ–∂–µ–Ω–Ω—è

#description
- ‚ùå **Upload progress** –Ω–µ –ø—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è
- ‚ö†Ô∏è `Content-Length` –º–æ–∂–µ –±—É—Ç–∏ –≤—ñ–¥—Å—É—Ç–Ω—ñ–º
- üí° –ü–æ—Ç—Ä—ñ–±–µ–Ω AbortController –¥–ª—è —Å–∫–∞—Å—É–≤–∞–Ω–Ω—è
- üîí –ü—ñ—Å–ª—è —á–∏—Ç–∞–Ω–Ω—è –ø–æ—Ç—ñ–∫ –Ω–µ –º–æ–∂–Ω–∞ "–ø–µ—Ä–µ—á–∏—Ç–∞—Ç–∏"
:::

::

### –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –ø—ñ–¥—Ö–æ–¥—ñ–≤

| –ê—Å–ø–µ–∫—Ç | ReadableStream | response.json() |
| :--- | :--- | :--- |
| **–ü—Ä–æ–≥—Ä–µ—Å** | ‚úÖ –ú–æ–∂–Ω–∞ –≤—ñ–¥—Å—Ç–µ–∂—É–≤–∞—Ç–∏ | ‚ùå –ù—ñ |
| **–ü–∞–º'—è—Ç—å** | üíö –ö–æ–Ω—Ç—Ä–æ–ª—å–æ–≤–∞–Ω–∞ | ‚ö†Ô∏è –í–µ—Å—å —Ñ–∞–π–ª –≤ RAM |
| **–®–≤–∏–¥–∫—ñ—Å—Ç—å —Å—Ç–∞—Ä—Ç—É** | ‚ö° –ú–∏—Ç—Ç—î–≤–æ | ‚è≥ –ß–µ–∫–∞—î –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è |
| **–°–∫–ª–∞–¥–Ω—ñ—Å—Ç—å** | üî¥ –í–∏—Å–æ–∫–∞ | üü¢ –ü—Ä–æ—Å—Ç–∞ |
| **–°–∫–∞—Å—É–≤–∞–Ω–Ω—è** | ‚úÖ –ü—ñ–¥—Ç—Ä–∏–º—É—î | ‚ùå –ù–µ –º–æ–∂–Ω–∞ |

**–ö–æ–ª–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ ReadableStream:**

- –í–µ–ª–∏–∫—ñ —Ñ–∞–π–ª–∏ (>1MB)
- –ü–æ—Ç—Ä—ñ–±–µ–Ω –ø—Ä–æ–≥—Ä–µ—Å-—ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä
- –û–±–º–µ–∂–µ–Ω–∞ –ø–∞–º'—è—Ç—å
- –ü–æ—Ç–æ–∫–æ–≤–∞ –æ–±—Ä–æ–±–∫–∞ –¥–∞–Ω–∏—Ö

**–ö–æ–ª–∏ –¥–æ—Å—Ç–∞—Ç–Ω—å–æ response.json():**

- –ú–∞–ª—ñ –∑–∞–ø–∏—Ç–∏ (<100KB)
- –®–≤–∏–¥–∫—ñ—Å—Ç—å –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–∞
- –ü—Ä–æ—Å—Ç–æ—Ç–∞ –∫–æ–¥—É –≤–∞–∂–ª–∏–≤—ñ—à–∞

–£ –Ω–∞—Å—Ç—É–ø–Ω–æ–º—É —Ä–æ–∑–¥—ñ–ª—ñ –º–∏ —Ä–æ–∑–≥–ª—è–Ω–µ–º–æ `AbortController` ‚Äî —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –ø–µ—Ä–µ—Ä–∏–≤–∞–Ω–Ω—è fetch-–∑–∞–ø–∏—Ç—ñ–≤, —è–∫–∏–π —ñ–¥–µ–∞–ª—å–Ω–æ –ø–æ—î–¥–Ω—É—î—Ç—å—Å—è –∑ ReadableStream –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–æ–≤–Ω–æ—Ü—ñ–Ω–Ω–∏—Ö —Å–∏—Å—Ç–µ–º –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—é —Å–∫–∞—Å—É–≤–∞–Ω–Ω—è.

## –î–æ–¥–∞—Ç–∫–æ–≤—ñ —Ä–µ—Å—É—Ä—Å–∏

- [MDN: ReadableStream](https://developer.mozilla.org/en-US/docs/Web/API/ReadableStream) ‚Äî –ø–æ–≤–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
- [Streams API Specification](https://streams.spec.whatwg.org/) ‚Äî –æ—Ñ—ñ—Ü—ñ–π–Ω–∞ —Å–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ—è
- [MDN: TextDecoder](https://developer.mozilla.org/en-US/docs/Web/API/TextDecoder) ‚Äî –¥–µ–∫–æ–¥—É–≤–∞–Ω–Ω—è –±–∞–π—Ç—ñ–≤ —É —Ç–µ–∫—Å—Ç
- [MDN: Uint8Array](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Uint8Array) ‚Äî —Ä–æ–±–æ—Ç–∞ –∑ –±—ñ–Ω–∞—Ä–Ω–∏–º–∏ –¥–∞–Ω–∏–º–∏
