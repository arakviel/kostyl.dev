---
title: –¢–∏–ø–∏ –¥–∞–Ω–∏—Ö —É MS SQL Server
description: –í—Å–µ–æ—Ö–æ–ø–ª—é—é—á–µ –¥–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è —Ç–∏–ø—ñ–≤ –¥–∞–Ω–∏—Ö Microsoft SQL Server - —Ü—ñ–ª–æ—á–∏—Å–µ–ª—å–Ω—ñ, —Ç–µ–∫—Å—Ç–æ–≤—ñ, –¥—ñ–π—Å–Ω—ñ, –¥–∞—Ç–∞/—á–∞—Å —Ç–∞ —Å–ø–µ—Ü—ñ–∞–ª—å–Ω—ñ —Ç–∏–ø–∏
---

# –¢–∏–ø–∏ –¥–∞–Ω–∏—Ö —É MS SQL Server

## –í—Å—Ç—É–ø: –ù–∞–≤—ñ—â–æ –ø–æ—Ç—Ä—ñ–±–Ω—ñ —Ä—ñ–∑–Ω—ñ —Ç–∏–ø–∏ –¥–∞–Ω–∏—Ö?

–£—è–≤—ñ—Ç—å, —â–æ –≤–∏ –±—É–¥—É—î—Ç–µ –±—É–¥–∏–Ω–æ–∫. –ß–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞–ª–∏ –± –≤–∏ –æ–¥–Ω–∞–∫–æ–≤–∏–π –º–∞—Ç–µ—Ä—ñ–∞–ª –¥–ª—è —Ñ—É–Ω–¥–∞–º–µ–Ω—Ç—É, —Å—Ç—ñ–Ω —Ç–∞ –¥–∞—Ö—É? –ó–≤–∏—á–∞–π–Ω–æ –Ω—ñ ‚Äî –∫–æ–∂–Ω–∞ —á–∞—Å—Ç–∏–Ω–∞ –±—É–¥—ñ–≤–ª—ñ –ø–æ—Ç—Ä–µ–±—É—î –º–∞—Ç–µ—Ä—ñ–∞–ª—É –∑ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–º–∏ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—è–º–∏. –¢–∞–∫ —Å–∞–º–æ —ñ –∑ –±–∞–∑–∞–º–∏ –¥–∞–Ω–∏—Ö: —Ä—ñ–∑–Ω—ñ —Ç–∏–ø–∏ –¥–∞–Ω–∏—Ö —ñ—Å–Ω—É—é—Ç—å –Ω–µ –ø—Ä–æ—Å—Ç–æ –¥–ª—è —Ä—ñ–∑–Ω–æ–º–∞–Ω—ñ—Ç–Ω–æ—Å—Ç—ñ, –∞ –¥–ª—è **–æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ, –µ–∫–æ–Ω–æ–º—ñ—ó –ø–∞–º'—è—Ç—ñ —Ç–∞ –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è —Ç–æ—á–Ω–æ—Å—Ç—ñ**.

::note
**–ö–ª—é—á–æ–≤–∞ —ñ–¥–µ—è**: –ü—Ä–∞–≤–∏–ª—å–Ω–∏–π –≤–∏–±—ñ—Ä —Ç–∏–ø—É –¥–∞–Ω–∏—Ö ‚Äî —Ü–µ –Ω–µ –ø—Ä–æ—Å—Ç–æ "—â–æ–± –ø—Ä–∞—Ü—é–≤–∞–ª–æ". –¶–µ —Ä—ñ—à–µ–Ω–Ω—è, —è–∫–µ –≤–ø–ª–∏–≤–∞—î –Ω–∞:

- **–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å** ‚Äî —à–≤–∏–¥–∫—ñ—Å—Ç—å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –∑–∞–ø–∏—Ç—ñ–≤
- **–†–æ–∑–º—ñ—Ä –±–∞–∑–∏ –¥–∞–Ω–∏—Ö** ‚Äî –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –¥–∏—Å–∫–æ–≤–æ–≥–æ –ø—Ä–æ—Å—Ç–æ—Ä—É
- **–¢–æ—á–Ω—ñ—Å—Ç—å** ‚Äî –∫–æ—Ä–µ–∫—Ç–Ω—ñ—Å—Ç—å –æ–±—á–∏—Å–ª–µ–Ω—å
- **–¶—ñ–ª—ñ—Å–Ω—ñ—Å—Ç—å** ‚Äî –≤–∞–ª—ñ–¥–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö –Ω–∞ —Ä—ñ–≤–Ω—ñ –ë–î

::

### –†–µ–∞–ª—å–Ω–∏–π —Å—Ü–µ–Ω–∞—Ä—ñ–π: E-commerce —Å–∏—Å—Ç–µ–º–∞

–ü—Ä–∏–ø—É—Å—Ç–∏–º–æ, –º–∏ —Ä–æ–∑—Ä–æ–±–ª—è—î–º–æ —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω. –ü–æ–¥–∏–≤–∏–º–æ—Å—è, —è–∫ –≤–∏–±—ñ—Ä —Ç–∏–ø—É –¥–∞–Ω–∏—Ö –≤–ø–ª–∏–≤–∞—î –Ω–∞ —Ä—ñ–∑–Ω—ñ –ø–æ–ª—è:

| –ü–æ–ª–µ           | –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –≤–∏–±—ñ—Ä | –ù–∞—Å–ª—ñ–¥–∫–∏                                | –ü—Ä–∞–≤–∏–ª—å–Ω–∏–π –≤–∏–±—ñ—Ä   |
| :------------- | :----------------- | :-------------------------------------- | :----------------- |
| `product_id`   | `VARCHAR(50)`      | –ü–æ–≤—ñ–ª—å–Ω—ñ JOIN'–∏, 50 –±–∞–π—Ç –Ω–∞ ID          | `INT` (4 –±–∞–π—Ç–∏)    |
| `price`        | `FLOAT`            | –ü–æ–º–∏–ª–∫–∏ –æ–∫—Ä—É–≥–ª–µ–Ω–Ω—è ($0.1 + $0.2 ‚â† $0.3) | `DECIMAL(10,2)`    |
| `product_name` | `NVARCHAR(MAX)`    | 2 –ì–ë –Ω–∞ –Ω–∞–∑–≤—É —Ç–æ–≤–∞—Ä—É!                   | `NVARCHAR(200)`    |
| `in_stock`     | `TINYINT`          | –ù–µ–∑—Ä–æ–∑—É–º—ñ–ª–µ –∑–Ω–∞—á–µ–Ω–Ω—è (0/1/2/3?)         | `BIT` (TRUE/FALSE) |

::warning
**–†–æ–∑–º—ñ—Ä –º–∞—î –∑–Ω–∞—á–µ–Ω–Ω—è**: –Ø–∫—â–æ —É –≤–∞—Å 10 –º—ñ–ª—å–π–æ–Ω—ñ–≤ —Ç–æ–≤–∞—Ä—ñ–≤, —ñ –≤–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ `VARCHAR(50)` –∑–∞–º—ñ—Å—Ç—å `INT` –¥–ª—è ID, –≤–∏ –≤–∏—Ç—Ä–∞—Ç–∏—Ç–µ –¥–æ–¥–∞—Ç–∫–æ–≤–æ **460 –ú–ë** –ª–∏—à–µ –Ω–∞ –æ–¥–∏–Ω —Å—Ç–æ–≤–ø–µ—Ü—å!
::

---

## –Ü—Å—Ç–æ—Ä–∏—á–Ω–∞ –µ–≤–æ–ª—é—Ü—ñ—è —Ç–∏–ø—ñ–≤ –¥–∞–Ω–∏—Ö

–¢–∏–ø–∏ –¥–∞–Ω–∏—Ö —É SQL Server –µ–≤–æ–ª—é—Ü—ñ–æ–Ω—É–≤–∞–ª–∏ —Ä–∞–∑–æ–º –∑ –ø–æ—Ç—Ä–µ–±–∞–º–∏ —ñ–Ω–¥—É—Å—Ç—Ä—ñ—ó:

::mermaid

```mermaid
timeline
    title –ï–≤–æ–ª—é—Ü—ñ—è —Ç–∏–ø—ñ–≤ –¥–∞–Ω–∏—Ö —É SQL Server
    section 1990s
        SQL Server 6.5 : char, varchar, int, datetime, text, image
    section 2000s
        SQL Server 2005 : xml, varchar(MAX), –Ω–æ–≤–∏–π GUID
    section 2008
        SQL Server 2008 : date, time, datetime2, datetimeoffset<br/>geography, geometry, hierarchyid
    section 2012+
        SQL Server 2012+ : Columnstore, Temporal tables<br/>JSON support (2016)
```

::

::tip
**–ü—Ä–æ deprecated —Ç–∏–ø–∏**: `TEXT`, `NTEXT` —Ç–∞ `IMAGE` –∑–∞—Å—Ç–∞—Ä—ñ–ª–∏ –∑ SQL Server 2005. –ó–∞–º—ñ—Å—Ç—å –Ω–∏—Ö –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `VARCHAR(MAX)`, `NVARCHAR(MAX)` —Ç–∞ `VARBINARY(MAX)` –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ.
::

---

## –¶—ñ–ª–æ—á–∏—Å–µ–ª—å–Ω—ñ —Ç–∏–ø–∏ –¥–∞–Ω–∏—Ö

### –ù–∞–≤—ñ—â–æ –ø–æ—Ç—Ä—ñ–±–Ω—ñ —Ä—ñ–∑–Ω—ñ —Ä–æ–∑–º—ñ—Ä–∏ —Ü—ñ–ª–∏—Ö —á–∏—Å–µ–ª?

**–ü—Ä–æ–±–ª–µ–º–∞**: –Ø–∫–±–∏ —ñ—Å–Ω—É–≤–∞–≤ –ª–∏—à–µ –æ–¥–∏–Ω —Ü—ñ–ª–æ—á–∏—Å–µ–ª—å–Ω–∏–π —Ç–∏–ø, –º–∏ –± –∞–±–æ:

1. –í–∏—Ç—Ä–∞—á–∞–ª–∏ –Ω–∞–¥—Ç–æ –±–∞–≥–∞—Ç–æ –ø–∞–º'—è—Ç—ñ –Ω–∞ –º–∞–ª–µ–Ω—å–∫—ñ —á–∏—Å–ª–∞
2. –ê–±–æ –Ω–µ –º–∞–ª–∏ –± –¥–æ—Å—Ç–∞—Ç–Ω—å–æ –º—ñ—Å—Ü—è –¥–ª—è –≤–µ–ª–∏–∫–∏—Ö —á–∏—Å–µ–ª

**–†—ñ—à–µ–Ω–Ω—è**: SQL Server –Ω–∞–¥–∞—î **5 —Ü—ñ–ª–æ—á–∏—Å–µ–ª—å–Ω–∏—Ö —Ç–∏–ø—ñ–≤** —Ä—ñ–∑–Ω–∏—Ö —Ä–æ–∑–º—ñ—Ä—ñ–≤.

### –¢–∞–±–ª–∏—Ü—è —Ü—ñ–ª–æ—á–∏—Å–µ–ª—å–Ω–∏—Ö —Ç–∏–ø—ñ–≤

| –¢–∏–ø        | –î—ñ–∞–ø–∞–∑–æ–Ω                                                | –ü–∞–º'—è—Ç—å | –¢–∏–ø–æ–≤–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è                                   |
| :--------- | :------------------------------------------------------ | :------ | :---------------------------------------------------- |
| `TINYINT`  | 0 –¥–æ 255                                                | 1 –±–∞–π—Ç  | –í—ñ–∫ –ª—é–¥–∏–Ω–∏, –∫—ñ–ª—å–∫—ñ—Å—Ç—å –¥–Ω—ñ–≤ —É –º—ñ—Å—è—Ü—ñ, –≤—ñ–¥—Å–æ—Ç–∫–∏ (0-100) |
| `SMALLINT` | -32,768 –¥–æ 32,767                                       | 2 –±–∞–π—Ç–∏ | –†—ñ–∫ –Ω–∞—Ä–æ–¥–∂–µ–Ω–Ω—è, –Ω–æ–º–µ—Ä –∫—ñ–º–Ω–∞—Ç–∏                         |
| `INT`      | -2,147,483,648 –¥–æ 2,147,483,647                         | 4 –±–∞–π—Ç–∏ | **Primary Keys**, –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ç–æ–≤–∞—Ä—ñ–≤, —Ü—ñ–Ω–∞ –≤ –∫–æ–ø—ñ–π–∫–∞—Ö  |
| `BIGINT`   | -9,223,372,036,854,775,808 –¥–æ 9,223,372,036,854,775,807 | 8 –±–∞–π—Ç  | Timestamps (Unix time), –≤–µ–ª–∏–∫—ñ —Å—É–º–∏ –≥—Ä–æ—à–µ–π            |
| `BIT`      | 0, 1 –∞–±–æ NULL                                           | 1 –±—ñ—Ç\* | Boolean –∑–Ω–∞—á–µ–Ω–Ω—è (—Ç–∞–∫/–Ω—ñ, –∞–∫—Ç–∏–≤–Ω–∏–π/–Ω–µ–∞–∫—Ç–∏–≤–Ω–∏–π)        |

::note
**–û—Å–æ–±–ª–∏–≤—ñ—Å—Ç—å BIT**: SQL Server –æ–ø—Ç–∏–º—ñ–∑—É—î –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è ‚Äî –ø–µ—Ä—à—ñ 8 `BIT` —Å—Ç–æ–≤–ø—Ü—ñ–≤ –∑–∞–π–º–∞—é—Ç—å 1 –±–∞–π—Ç —Ä–∞–∑–æ–º, –Ω–∞—Å—Ç—É–ø–Ω—ñ 8 ‚Äî —â–µ 1 –±–∞–π—Ç, —ñ —Ç–∞–∫ –¥–∞–ª—ñ.
::

### –ü—Ä–∞–∫—Ç–∏—á–Ω–∏–π –ø—Ä–∏–∫–ª–∞–¥: –í–∏–±—ñ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Ç–∏–ø—É

```sql
-- ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û: –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è BIGINT –¥–ª—è –≤—Å—å–æ–≥–æ
CREATE TABLE Products_Bad (
    product_id BIGINT,           -- 8 –±–∞–π—Ç (–Ω–∞–¥–ª–∏—à–æ–∫!)
    category_id BIGINT,          -- 8 –±–∞–π—Ç (–Ω–∞–¥–ª–∏—à–æ–∫!)
    stock_quantity BIGINT,       -- 8 –±–∞–π—Ç (–Ω–∞–≤—Ä—è–¥ —á–∏ –±—É–¥–µ 9 –∫–≤—ñ–Ω—Ç–∏–ª—å–π–æ–Ω—ñ–≤ —Ç–æ–≤–∞—Ä—ñ–≤)
    is_active BIGINT             -- 8 –±–∞–π—Ç –¥–ª—è TRUE/FALSE?!
);
```

**–ü—Ä–æ–±–ª–µ–º–∞**: –î–ª—è 1 –º–ª–Ω —Ç–æ–≤–∞—Ä—ñ–≤ —Ü—è —Ç–∞–±–ª–∏—Ü—è –∑–∞–π–º–µ **32 –ú–ë** –ª–∏—à–µ –Ω–∞ —Ü—ñ 4 –ø–æ–ª—è.

```sql
-- ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û: –û–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
CREATE TABLE Products_Good (
    product_id INT,              -- 4 –±–∞–π—Ç–∏ (–¥–æ 2 –º–ª—Ä–¥ —Ç–æ–≤–∞—Ä—ñ–≤)
    category_id SMALLINT,        -- 2 –±–∞–π—Ç–∏ (–¥–æ 32K –∫–∞—Ç–µ–≥–æ—Ä—ñ–π)
    stock_quantity INT,          -- 4 –±–∞–π—Ç–∏ (–¥–æ—Å—Ç–∞—Ç–Ω—å–æ –¥–ª—è —Å–∫–ª–∞–¥—É)
    is_active BIT                -- 1 –±—ñ—Ç
);
```

**–í–∏–≥—Ä–∞—à**: –î–ª—è 1 –º–ª–Ω —Ç–æ–≤–∞—Ä—ñ–≤ —Ü—è —Ç–∞–±–ª–∏—Ü—è –∑–∞–π–º–µ –ª–∏—à–µ **10 –ú–ë** ‚Äî –µ–∫–æ–Ω–æ–º—ñ—è **68%**!

### –ê–Ω–∞—Ç–æ–º—ñ—è –∫–æ–¥—É: IDENTITY —Ç–∞ –∞–≤—Ç–æ—ñ–Ω–∫—Ä–µ–º–µ–Ω—Ç

```sql {2,9-10} showLineNumbers
CREATE TABLE Students (
    Id INT IDENTITY(1,1) PRIMARY KEY,  -- –ü–æ—á–∏–Ω–∞—î—Ç—å—Å—è –∑ 1, –∑–±—ñ–ª—å—à—É—î—Ç—å—Å—è –Ω–∞ 1
    LastName NVARCHAR(50),
    FirstName NVARCHAR(50)
);
```

**–ü–æ—è—Å–Ω–µ–Ω–Ω—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó `IDENTITY(1,1)`**:

- `IDENTITY` ‚Äî –≤–∫–∞–∑—É—î, —â–æ —Ü–µ –∞–≤—Ç–æ—ñ–Ω–∫—Ä–µ–º–µ–Ω—Ç–Ω–µ –ø–æ–ª–µ
- –ü–µ—Ä—à–∏–π –ø–∞—Ä–∞–º–µ—Ç—Ä `(1, ...)` ‚Äî **SEED** (–ø–æ—á–∞—Ç–∫–æ–≤–µ –∑–Ω–∞—á–µ–Ω–Ω—è): –∑ —è–∫–æ–≥–æ —á–∏—Å–ª–∞ –ø–æ—á–∏–Ω–∞—Ç–∏ (1)
- –î—Ä—É–≥–∏–π –ø–∞—Ä–∞–º–µ—Ç—Ä `(..., 1)` ‚Äî **INCREMENT** (–∫—Ä–æ–∫): –Ω–∞ —Å–∫—ñ–ª—å–∫–∏ –∑–±—ñ–ª—å—à—É–≤–∞—Ç–∏ (1)

::tip
**–ü—Ä–∞–∫—Ç–∏—á–Ω–∏–π –∫–µ–π—Å**: –Ø–∫—â–æ –≤–∏ —ñ–º–ø–æ—Ä—Ç—É—î—Ç–µ –¥–∞–Ω—ñ —ñ —Ö–æ—á–µ—Ç–µ —É–Ω–∏–∫–Ω—É—Ç–∏ –∫–æ–Ω—Ñ–ª—ñ–∫—Ç—ñ–≤ ID, –º–æ–∂–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ `IDENTITY(10000, 1)` ‚Äî –Ω–æ–≤—ñ –∑–∞–ø–∏—Å–∏ –ø–æ—á–Ω—É—Ç—å—Å—è –∑ 10,000.
::

**–ü—Ä–∏–∫–ª–∞–¥ –∑ —Ä—ñ–∑–Ω–∏–º –∫—Ä–æ–∫–æ–º**:

```sql
-- –ü–∞—Ä–Ω—ñ –Ω–æ–º–µ—Ä–∏ –∑–∞–º–æ–≤–ª–µ–Ω—å –¥–ª—è —Ñ—ñ–ª—ñ—ó A
CREATE TABLE Orders_BranchA (
    order_id INT IDENTITY(2, 2)  -- 2, 4, 6, 8, 10...
);

-- –ù–µ–ø–∞—Ä–Ω—ñ –Ω–æ–º–µ—Ä–∏ –∑–∞–º–æ–≤–ª–µ–Ω—å –¥–ª—è —Ñ—ñ–ª—ñ—ó B
CREATE TABLE Orders_BranchB (
    order_id INT IDENTITY(1, 2)  -- 1, 3, 5, 7, 9...
);
```

### –ö–æ–ª–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –∫–æ–∂–µ–Ω —Ç–∏–ø: Decision Tree

::mermaid

```mermaid
graph TD
    A[–ü–æ—Ç—Ä—ñ–±–µ–Ω —Ü—ñ–ª–æ—á–∏—Å–µ–ª—å–Ω–∏–π —Ç–∏–ø?] --> B{–ú–æ–∂–µ –±—É—Ç–∏ –≤—ñ–¥'—î–º–Ω–∏–º?}
    B -->|–ù—ñ, —Ç—ñ–ª—å–∫–∏ 0-255| C[TINYINT]
    B -->|–¢–∞–∫| D{–†–æ–∑–º—ñ—Ä –∑–Ω–∞—á–µ–Ω–Ω—è?}
    D -->|–ú–∞–ª–∏–π<br/>–¥–æ ¬±32K| E[SMALLINT]
    D -->|–°–µ—Ä–µ–¥–Ω—ñ–π<br/>–¥–æ ¬±2 –º–ª—Ä–¥| F[INT]
    D -->|–í–µ–ª–∏—á–µ–∑–Ω–∏–π<br/>–±—ñ–ª—å—à–µ ¬±2 –º–ª—Ä–¥| G[BIGINT]
    A --> H{TRUE/FALSE?}
    H -->|–¢–∞–∫| I[BIT]

    style C fill:#10b981,color:#fff
    style E fill:#3b82f6,color:#fff
    style F fill:#f59e0b,color:#333
    style G fill:#ef4444,color:#fff
    style I fill:#8b5cf6,color:#fff
```

::

---

## –¢–µ–∫—Å—Ç–æ–≤—ñ —Ç–∏–ø–∏ –¥–∞–Ω–∏—Ö

### –ü—Ä–æ–±–ª–µ–º–∞: –§—ñ–∫—Å–æ–≤–∞–Ω–∞ vs –ó–º—ñ–Ω–Ω–∞ –¥–æ–≤–∂–∏–Ω–∞

**–°—Ü–µ–Ω–∞—Ä—ñ–π**: –ú–∏ –∑–±–µ—Ä—ñ–≥–∞—î–º–æ –∫–æ–¥–∏ –∫—Ä–∞—ó–Ω (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, "UA", "US", "GB").

::tabs
::tabs-item{label="CHAR (—Ñ—ñ–∫—Å–æ–≤–∞–Ω–∞)"}

```sql
CREATE TABLE Countries (
    code CHAR(2)  -- –ó–∞–≤–∂–¥–∏ –≤–∏–¥—ñ–ª—è—î 2 –±–∞–π—Ç–∏
);
INSERT INTO Countries VALUES ('UA');  -- –ó–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è —è–∫ 'UA'
```

**–ü–∞–º'—è—Ç—å**: –ó–∞–≤–∂–¥–∏ **2 –±–∞–π—Ç–∏**, –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ –∫–æ–¥ –∑ 1 —Å–∏–º–≤–æ–ª—É.  
**–ü–µ—Ä–µ–≤–∞–≥–∏**: –®–≤–∏–¥—à–µ (–ø–µ—Ä–µ–¥–±–∞—á—É–≤–∞–Ω–∏–π —Ä–æ–∑–º—ñ—Ä)  
**–ù–µ–¥–æ–ª—ñ–∫–∏**: –í—Ç—Ä–∞—Ç–∞ –º—ñ—Å—Ü—è –ø—Ä–∏ –∫–æ—Ä–æ—Ç–∫–∏—Ö –∑–Ω–∞—á–µ–Ω–Ω—è—Ö
::

::tabs-item{label="VARCHAR (–∑–º—ñ–Ω–Ω–∞)"}

```sql
CREATE TABLE Countries (
    code VARCHAR(2)  -- –í–∏–¥—ñ–ª—è—î —Å—Ç—ñ–ª—å–∫–∏, —Å–∫—ñ–ª—å–∫–∏ –ø–æ—Ç—Ä—ñ–±–Ω–æ
);
INSERT INTO Countries VALUES ('UA');  -- –ó–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è —è–∫ 'UA' (2 –±–∞–π—Ç–∏)
INSERT INTO Countries VALUES ('U');   -- –ó–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è —è–∫ 'U' (1 –±–∞–π—Ç)
```

**–ü–∞–º'—è—Ç—å**: –í—ñ–¥ **1 –¥–æ N –±–∞–π—Ç** + 2 –±–∞–π—Ç–∏ –Ω–∞ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –¥–æ–≤–∂–∏–Ω–∏  
**–ü–µ—Ä–µ–≤–∞–≥–∏**: –ï–∫–æ–Ω–æ–º—ñ—è –º—ñ—Å—Ü—è  
**–ù–µ–¥–æ–ª—ñ–∫–∏**: Overhead –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –¥–æ–≤–∂–∏–Ω–∏
::
::

### Unicode vs Non-Unicode: NVARCHAR vs VARCHAR

**–©–æ —Ç–∞–∫–µ Unicode?**  
Unicode (UTF-16) ‚Äî —Ü–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç –∫–æ–¥—É–≤–∞–Ω–Ω—è, —â–æ –ø—ñ–¥—Ç—Ä–∏–º—É—î **–≤—Å—ñ –º–æ–≤–∏ —Å–≤—ñ—Ç—É**: –∫–∏—Ä–∏–ª–∏—Ü—é, —ñ—î—Ä–æ–≥–ª—ñ—Ñ–∏, –∞—Ä–∞–±—Å—å–∫—É, –µ–º–æ–¥–∑—ñ —Ç–æ—â–æ.

| –¢–∏–ø           | –ö–æ–¥—É–≤–∞–Ω–Ω—è  | –ë–∞–π—Ç –Ω–∞ —Å–∏–º–≤–æ–ª | –ü—ñ–¥—Ç—Ä–∏–º—É—î                       | –ö–æ–ª–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏                                |
| :------------ | :--------- | :------------- | :------------------------------ | :-------------------------------------------------- |
| `CHAR(n)`     | ASCII/ANSI | 1              | –õ–∏—à–µ –ª–∞—Ç–∏–Ω–∏—Ü—é —Ç–∞ –±–∞–∑–æ–≤—ñ —Å–∏–º–≤–æ–ª–∏ | –ö–æ–¥–∏, MD5 —Ö–µ—à—ñ, —Å—Ç–∞—Ä—ñ –∞–Ω–≥–ª–æ–º–æ–≤–Ω—ñ —Å–∏—Å—Ç–µ–º–∏            |
| `VARCHAR(n)`  | ASCII/ANSI | 1              | –õ–∏—à–µ –ª–∞—Ç–∏–Ω–∏—Ü—é —Ç–∞ –±–∞–∑–æ–≤—ñ —Å–∏–º–≤–æ–ª–∏ | Email, URL (—è–∫—â–æ —Ç–æ—á–Ω–æ –ª–∏—à–µ –ª–∞—Ç–∏–Ω–∏—Ü—è)               |
| `NCHAR(n)`    | Unicode    | 2              | **–í—Å—ñ –º–æ–≤–∏**                    | –ú—ñ–∂–Ω–∞—Ä–æ–¥–Ω—ñ –∫–æ–¥–∏ –∑ —Å–∏–º–≤–æ–ª–∞–º–∏                         |
| `NVARCHAR(n)` | Unicode    | 2              | **–í—Å—ñ –º–æ–≤–∏**                    | **–Ü–º–µ–Ω–∞, –∞–¥—Ä–µ—Å–∏, –±—É–¥—å-—è–∫–∏–π —Ç–µ–∫—Å—Ç –≤—ñ–¥ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤** |

::warning
**–ö—Ä–∏—Ç–∏—á–Ω–∞ –ø–æ–º–∏–ª–∫–∞**: –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è `VARCHAR` –¥–ª—è —É–∫—Ä–∞—ó–Ω—Å—å–∫–∏—Ö —ñ–º–µ–Ω –ø—Ä–∏–∑–≤–µ–¥–µ –¥–æ "–∫—Ä–∞–∫–æ–∑—è–±—Ä" (ÔøΩÔøΩÔøΩ) –∞–±–æ –≤—Ç—Ä–∞—Ç–∏ –¥–∞–Ω–∏—Ö!
::

**–ü—Ä–∏–∫–ª–∞–¥ –ø—Ä–æ–±–ª–µ–º–∏ –∑ VARCHAR**:

```sql
-- ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û –¥–ª—è —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—ó –º–æ–≤–∏
CREATE TABLE Users (
    name VARCHAR(100)
);
INSERT INTO Users VALUES ('–¢–∞—Ä–∞—Å –®–µ–≤—á–µ–Ω–∫–æ');
-- –ú–æ–∂–µ –∑–±–µ—Ä–µ–≥—Ç–∏—Å—è —è–∫ "????? ????????" –∞–±–æ –≤–∑–∞–≥–∞–ª—ñ –ø—É—Å—Ç–æ!
```

```sql
-- ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û –¥–ª—è –±—É–¥—å-—è–∫–æ—ó –º–æ–≤–∏
CREATE TABLE Users (
    name NVARCHAR(100)
);
INSERT INTO Users VALUES ('–¢–∞—Ä–∞—Å –®–µ–≤—á–µ–Ω–∫–æ');  -- –ó–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –∫–æ—Ä–µ–∫—Ç–Ω–æ
INSERT INTO Users VALUES ('Áî∞‰∏≠Â§™ÈÉé');        -- –¢–∞–∫–æ–∂ –ø—Ä–∞—Ü—é—î!
INSERT INTO Users VALUES ('ŸÖÿ≠ŸÖÿØ');           -- –Ü —Ü–µ —Ç–µ–∂!
```

### VARCHAR(MAX) vs VARCHAR(8000)

SQL Server –º–∞—î –æ–±–º–µ–∂–µ–Ω–Ω—è: `VARCHAR(n)` –º–æ–∂–µ –±—É—Ç–∏ –º–∞–∫—Å–∏–º—É–º **8000 –±–∞–π—Ç**, `NVARCHAR(n)` ‚Äî **4000 —Å–∏–º–≤–æ–ª—ñ–≤**.

::tabs
::tabs-item{label="VARCHAR(8000)"}
**–ó–±–µ—Ä—ñ–≥–∞–Ω–Ω—è**: –í –æ—Å–Ω–æ–≤–Ω—ñ–π —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ –¥–∞–Ω–∏—Ö (8 –ö–ë)  
**–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å**: –®–≤–∏–¥–∫–∞  
**–ö–æ–ª–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏**: –ö–æ—Ä–æ—Ç–∫—ñ –æ–ø–∏—Å–∏, –∫–æ–º–µ–Ω—Ç–∞—Ä—ñ –¥–æ 8000 —Å–∏–º–≤–æ–ª—ñ–≤
::

::tabs-item{label="VARCHAR(MAX)"}
**–ó–±–µ—Ä—ñ–≥–∞–Ω–Ω—è**: –î–æ **2 –ì–ë**! –í–µ–ª–∏–∫—ñ –∑–Ω–∞—á–µ–Ω–Ω—è –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –æ–∫—Ä–µ–º–æ (LOB)  
**–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å**: –ü–æ–≤—ñ–ª—å–Ω—ñ—à–∞ –¥–ª—è –≤–µ–ª–∏–∫–∏—Ö –∑–Ω–∞—á–µ–Ω—å  
**–ö–æ–ª–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏**: –°—Ç–∞—Ç—Ç—ñ –±–ª–æ–≥—É, JSON, XML, –ª–æ–≥–∏
::
::

**Deprecated —Ç–∏–ø–∏ (–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ!)**:

```sql
-- ‚ùå –ó–ê–°–¢–ê–†–Ü–õ–û –∑ SQL Server 2005
CREATE TABLE Articles_Old (
    content TEXT        -- –ó–∞–º—ñ–Ω—ñ—Ç—å –Ω–∞ VARCHAR(MAX)
);

-- ‚úÖ –°–£–ß–ê–°–ù–ò–ô –ü–Ü–î–•–Ü–î
CREATE TABLE Articles_New (
    content VARCHAR(MAX)  -- –î–æ 2 –ì–ë, –∫—Ä–∞—â—ñ —Ñ—É–Ω–∫—Ü—ñ—ó, –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ JSON
);
```

---

## –î—ñ–π—Å–Ω—ñ —Ç–∏–ø–∏ –¥–∞–Ω–∏—Ö

### FLOAT vs REAL: –®–≤–∏–¥–∫—ñ—Å—Ç—å —á–∏ —Ç–æ—á–Ω—ñ—Å—Ç—å?

**–ü—Ä–æ–±–ª–µ–º–∞**: –ù–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ —á–∏—Å–ª–∞ –∑ –∫–æ–º–æ—é. –Ø–∫ –≤–∏–±—Ä–∞—Ç–∏ –º—ñ–∂ `FLOAT` —Ç–∞ `DECIMAL`?

| –¢–∏–ø     | –î—ñ–∞–ø–∞–∑–æ–Ω   | –¢–æ—á–Ω—ñ—Å—Ç—å   | –ü–∞–º'—è—Ç—å | –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è                                   |
| :------ | :--------- | :--------- | :------ | :--------------------------------------------- |
| `REAL`  | ¬±3.40E+38  | ~7 –∑–Ω–∞–∫—ñ–≤  | 4 –±–∞–π—Ç–∏ | –ù–∞—É–∫–æ–≤—ñ —Ä–æ–∑—Ä–∞—Ö—É–Ω–∫–∏, —Å–µ–Ω—Å–æ—Ä–Ω—ñ –¥–∞–Ω—ñ              |
| `FLOAT` | ¬±1.79E+308 | ~15 –∑–Ω–∞–∫—ñ–≤ | 8 –±–∞–π—Ç  | GPS –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏, —Å–∫–ª–∞–¥–Ω—ñ –º–∞—Ç–µ–º–∞—Ç–∏—á–Ω—ñ –æ–±—á–∏—Å–ª–µ–Ω–Ω—è |

::warning
**–ö—Ä–∏—Ç–∏—á–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ –∑ FLOAT**: –¶–µ **–Ω–∞–±–ª–∏–∂–µ–Ω—ñ** —á–∏—Å–ª–∞! –ú–æ–∂—É—Ç—å –±—É—Ç–∏ –ø–æ–º–∏–ª–∫–∏ –æ–∫—Ä—É–≥–ª–µ–Ω–Ω—è.
::

**–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—è –ø—Ä–æ–±–ª–µ–º–∏**:

```sql
DECLARE @a FLOAT = 0.1;
DECLARE @b FLOAT = 0.2;
DECLARE @sum FLOAT = @a + @b;

SELECT @sum;  -- –û—á—ñ–∫—É—î–º–æ 0.3
-- –†–µ–∑—É–ª—å—Ç–∞—Ç: 0.30000000000000004  ‚ùå
```

**–ß–æ–º—É —Ç–∞–∫ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è?**  
`FLOAT` –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î **–±—ñ–Ω–∞—Ä–Ω–µ** –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—è. –î–µ—è–∫—ñ –¥–µ—Å—è—Ç–∫–æ–≤—ñ –¥—Ä–æ–±–∏ (—è–∫ 0.1) –Ω–µ –º–æ–∂—É—Ç—å –±—É—Ç–∏ —Ç–æ—á–Ω–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω—ñ –≤ –±—ñ–Ω–∞—Ä–Ω—ñ–π —Ñ–æ—Ä–º—ñ, —Ç–∞–∫ —Å–∞–º–æ —è–∫ 1/3 –Ω–µ –º–æ–∂–Ω–∞ —Ç–æ—á–Ω–æ –∑–∞–ø–∏—Å–∞—Ç–∏ –≤ –¥–µ—Å—è—Ç–∫–æ–≤—ñ–π (0.333...).

### –ö–æ–ª–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ FLOAT

::tip
**–ó–æ–ª–æ—Ç–µ –ø—Ä–∞–≤–∏–ª–æ**: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `FLOAT` –ª–∏—à–µ –¥–ª—è –Ω–∞—É–∫–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö, –¥–µ –ø–æ—Ç—Ä—ñ–±–Ω–∞ **—à–≤–∏–¥–∫—ñ—Å—Ç—å**, –∞ –Ω–µ **–∞–±—Å–æ–ª—é—Ç–Ω–∞ —Ç–æ—á–Ω—ñ—Å—Ç—å**.
::

**–ü—Ä–∏–∫–ª–∞–¥–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è**:

```sql
-- ‚úÖ –ú–µ—Ç–µ–æ —Å—Ç–∞–Ω—Ü—ñ—è (—Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞, —Ç–∏—Å–∫)
CREATE TABLE SensorData (
    temperature REAL,      -- –¢–æ—á–Ω—ñ—Å—Ç—å ¬±0.01¬∞C –¥–æ—Å—Ç–∞—Ç–Ω—è
    pressure REAL,
    humidity REAL
);

-- ‚úÖ GPS –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∏
CREATE TABLE Locations (
    latitude FLOAT,        -- –¢–æ—á–Ω—ñ—Å—Ç—å 15 –∑–Ω–∞–∫—ñ–≤ –¥–æ—Å—Ç–∞—Ç–Ω—è
    longitude FLOAT
);
```

**–ü—Ä–∏–∫–ª–∞–¥–∏ –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û–ì–û –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è**:

```sql
-- ‚ùå –ù–ï –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –¥–ª—è —Ñ—ñ–Ω–∞–Ω—Å—ñ–≤!
CREATE TABLE Invoices_Bad (
    total_amount FLOAT     -- –ü–æ–º–∏–ª–∫–∏ –æ–∫—Ä—É–≥–ª–µ–Ω–Ω—è –Ω–∞–∫–æ–ø–∏—á—É—é—Ç—å—Å—è!
);
```

---

## –¢–∏–ø–∏ –¥–∞–Ω–∏—Ö –¥–ª—è –¥–∞—Ç–∏ —Ç–∞ —á–∞—Å—É

### –ï–≤–æ–ª—é—Ü—ñ—è —Ç–∏–ø—ñ–≤ –¥–∞—Ç–∏

–î–æ SQL Server 2008 —ñ—Å–Ω—É–≤–∞–≤ –ª–∏—à–µ `DATETIME`. –ê–ª–µ –≤—ñ–Ω –º–∞–≤ –ø—Ä–æ–±–ª–µ–º–∏:

- –ó–∞–Ω–∞–¥—Ç–æ –≤–µ–ª–∏–∫–∞ —Ç–æ—á–Ω—ñ—Å—Ç—å –¥–ª—è –ø—Ä–æ—Å—Ç–∏—Ö –¥–∞—Ç
- –í—ñ–¥—Å—É—Ç–Ω—ñ—Å—Ç—å –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ —á–∞—Å–æ–≤–∏—Ö –ø–æ—è—Å—ñ–≤
- –ù–µ–º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ –ª–∏—à–µ —á–∞—Å –∞–±–æ –ª–∏—à–µ –¥–∞—Ç—É

SQL Server 2008 –≤–∏—Ä—ñ—à–∏–≤ —Ü–µ, –¥–æ–¥–∞–≤—à–∏ **5 –Ω–æ–≤–∏—Ö —Ç–∏–ø—ñ–≤**!

### –ü–æ—Ä—ñ–≤–Ω—è–ª—å–Ω–∞ —Ç–∞–±–ª–∏—Ü—è

| –¢–∏–ø              | –§–æ—Ä–º–∞—Ç                             | –î—ñ–∞–ø–∞–∑–æ–Ω                 | –¢–æ—á–Ω—ñ—Å—Ç—å       | –ü–∞–º'—è—Ç—å  | Timezone |
| :--------------- | :--------------------------------- | :----------------------- | :------------- | :------- | :------- |
| `DATE`           | YYYY-MM-DD                         | 0001-01-01 –¥–æ 9999-12-31 | –î–µ–Ω—å           | 3 –±–∞–π—Ç–∏  | ‚ùå       |
| `TIME`           | HH:MM:SS.nnnnnnn                   | 00:00:00 –¥–æ 23:59:59     | 100 –Ω–∞–Ω–æ—Å–µ–∫—É–Ω–¥ | 3-5 –±–∞–π—Ç | ‚ùå       |
| `SMALLDATETIME`  | YYYY-MM-DD HH:MM                   | 1900-01-01 –¥–æ 2079-06-06 | –•–≤–∏–ª–∏–Ω–∞        | 4 –±–∞–π—Ç–∏  | ‚ùå       |
| `DATETIME`       | YYYY-MM-DD HH:MM:SS.nnn            | 1753-01-01 –¥–æ 9999-12-31 | 3.33 –º—Å        | 8 –±–∞–π—Ç   | ‚ùå       |
| `DATETIME2`      | YYYY-MM-DD HH:MM:SS.nnnnnnn        | 0001-01-01 –¥–æ 9999-12-31 | 100 –Ω–∞–Ω–æ—Å–µ–∫—É–Ω–¥ | 6-8 –±–∞–π—Ç | ‚ùå       |
| `DATETIMEOFFSET` | YYYY-MM-DD HH:MM:SS.nnnnnnn +HH:MM | 0001-01-01 –¥–æ 9999-12-31 | 100 –Ω–∞–Ω–æ—Å–µ–∫—É–Ω–¥ | 10 –±–∞–π—Ç  | ‚úÖ       |

### –ü—Ä–∞–∫—Ç–∏—á–Ω—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—ó –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

::code-group

```sql [–î–∞—Ç–∞ –Ω–∞—Ä–æ–¥–∂–µ–Ω–Ω—è]
CREATE TABLE Employees (
    employee_id INT PRIMARY KEY,
    birth_date DATE  -- –ù–µ –ø–æ—Ç—Ä—ñ–±–µ–Ω —á–∞—Å!
);
INSERT INTO Employees VALUES (1, '1985-05-15');
```

```sql [–†–æ–±–æ—á–∏–π —á–∞—Å]
CREATE TABLE WorkSchedule (
    shift_start TIME,  -- –õ–∏—à–µ —á–∞—Å
    shift_end TIME
);
INSERT INTO WorkSchedule VALUES ('09:00', '17:00');
```

```sql [–Ü—Å—Ç–æ—Ä—ñ—è –∑–∞–º–æ–≤–ª–µ–Ω—å]
CREATE TABLE Orders (
    order_date DATETIME2  -- –¢–æ—á–Ω–∏–π —á–∞—Å + —à–∏—Ä–æ–∫–∏–π –¥—ñ–∞–ø–∞–∑–æ–Ω
);
```

```sql [–ì–ª–æ–±–∞–ª—å–Ω–∞ —Å–∏—Å—Ç–µ–º–∞]
CREATE TABLE EventLog (
    event_time DATETIMEOFFSET  -- –ó–±–µ—Ä—ñ–≥–∞—î —á–∞—Å–æ–≤–∏–π –ø–æ—è—Å!
);
INSERT INTO EventLog VALUES ('2024-02-06 14:30:00 +02:00');  -- –ö–∏—ó–≤
INSERT INTO EventLog VALUES ('2024-02-06 05:30:00 -07:00');  -- –õ–æ—Å-–ê–Ω–¥–∂–µ–ª–µ—Å
```

::

### –ü—Ä–æ–±–ª–µ–º–∞ —á–∞—Å–æ–≤–∏—Ö –ø–æ—è—Å—ñ–≤

**–°—Ü–µ–Ω–∞—Ä—ñ–π**: –ö–æ–º–ø–∞–Ω—ñ—è –º–∞—î –æ—Ñ—ñ—Å–∏ –≤ –ö–∏—î–≤—ñ, –õ–æ–Ω–¥–æ–Ω—ñ —Ç–∞ –ù—å—é-–ô–æ—Ä–∫—É. –ó—É—Å—Ç—Ä—ñ—á –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–∞ –Ω–∞ "14:00".

::tabs
::tabs-item{label="‚ùå –ë–µ–∑ Timezone (DATETIME2)"}

```sql
CREATE TABLE Meetings (
    meeting_time DATETIME2
);
INSERT INTO Meetings VALUES ('2024-02-06 14:00:00');
```

**–ü—Ä–æ–±–ª–µ–º–∞**: 14:00 **–¥–µ**? –£ –ö–∏—î–≤—ñ —Ü–µ 12:00 —É –õ–æ–Ω–¥–æ–Ω—ñ —ñ 07:00 —É –ù—å—é-–ô–æ—Ä–∫—É!
::

::tabs-item{label="‚úÖ –ó Timezone (DATETIMEOFFSET)"}

```sql
CREATE TABLE Meetings (
    meeting_time DATETIMEOFFSET
);
-- –ö–∏—ó–≤—Å—å–∫–∏–π —á–∞—Å
INSERT INTO Meetings VALUES ('2024-02-06 14:00:00 +02:00');

-- –ó–∞–ø–∏—Ç –ø–æ–∫–∞–∂–µ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π —á–∞—Å –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –æ—Ñ—ñ—Å—É
SELECT meeting_time AT TIME ZONE 'GMT Standard Time' AS London_Time;
-- –†–µ–∑—É–ª—å—Ç–∞—Ç: 2024-02-06 12:00:00
```

::
::

---

## DECIMAL —Ç–∞ NUMERIC: –§—ñ–Ω–∞–Ω—Å–æ–≤—ñ –¥–∞–Ω—ñ

### DECIMAL(p, s) ‚Äî –ê–Ω–∞—Ç–æ–º—ñ—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤

```sql
DECIMAL(10, 2)
        ‚Üë   ‚Üë
        ‚îÇ   ‚îî‚îÄ Scale (s): –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ü–∏—Ñ—Ä –ü–Ü–°–õ–Ø –∫–æ–º–∏ (0-2)
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ Precision (p): –ó–ê–ì–ê–õ–¨–ù–ê –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ü–∏—Ñ—Ä (0-38)
```

**–ü—Ä–∏–∫–ª–∞–¥ –¥–µ–∫–æ–¥—É–≤–∞–Ω–Ω—è**:

- `DECIMAL(10, 2)` –æ–∑–Ω–∞—á–∞—î: –º–∞–∫—Å–∏–º—É–º **10 —Ü–∏—Ñ—Ä –∑–∞–≥–∞–ª–æ–º**, –∑ –Ω–∏—Ö **2 –ø—ñ—Å–ª—è –∫–æ–º–∏**
    - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–µ —á–∏—Å–ª–æ: `99999999.99` (8 —Ü–∏—Ñ—Ä –¥–æ –∫–æ–º–∏ + 2 –ø—ñ—Å–ª—è)
    - –ú—ñ–Ω—ñ–º–∞–ª—å–Ω–µ: `-99999999.99`

### –ü—Ä–∞–∫—Ç–∏—á–Ω—ñ –ø—Ä–∏–∫–ª–∞–¥–∏

```sql
-- –¶—ñ–Ω–∏ –≤ –º–∞–≥–∞–∑–∏–Ω—ñ (–¥–æ 999,999.99 –≥—Ä–Ω)
CREATE TABLE Products (
    price DECIMAL(8, 2)  -- 6 —Ü–∏—Ñ—Ä –¥–æ –∫–æ–º–∏, 2 –ø—ñ—Å–ª—è
);
INSERT INTO Products VALUES (1299.99);    -- ‚úÖ OK
INSERT INTO Products VALUES (1000000.00); -- ‚ùå –ü–æ–º–∏–ª–∫–∞! –ü–µ—Ä–µ–≤–∏—â–µ–Ω–æ precision
```

```sql
-- –í—ñ–¥—Å–æ—Ç–∫–∏ (0.00% –¥–æ 100.00%)
CREATE TABLE Discounts (
    discount_percent DECIMAL(5, 2)  -- –ú–∞–∫—Å 100.00
);
INSERT INTO Discounts VALUES (15.50);  -- ‚úÖ 15.50%
INSERT INTO Discounts VALUES (100.00); -- ‚úÖ 100%
INSERT INTO Discounts VALUES (100.01); -- ‚ùå –ü–æ–º–∏–ª–∫–∞!
```

### DECIMAL vs FLOAT –¥–ª—è —Ñ—ñ–Ω–∞–Ω—Å—ñ–≤

::code-group

```sql [‚ùå FLOAT - –ö–ê–¢–ê–°–¢–†–û–§–ê]
DECLARE @balance FLOAT = 1000.00;
DECLARE @withdrawal FLOAT = 999.90;
DECLARE @remaining FLOAT = @balance - @withdrawal;

SELECT @remaining;
-- –û—á—ñ–∫—É—î–º–æ: 0.10
-- –û—Ç—Ä–∏–º—É—î–º–æ: 0.09999999999999964 üò±
-- –ù–∞ –±–∞–Ω–∫—ñ–≤—Å—å–∫–æ–º—É —Ä–∞—Ö—É–Ω–∫—É —Ü–µ –Ω–µ–ø—Ä–∏–ø—É—Å—Ç–∏–º–æ!
```

```sql [‚úÖ DECIMAL - –¢–û–ß–ù–û]
DECLARE @balance DECIMAL(10, 2) = 1000.00;
DECLARE @withdrawal DECIMAL(10, 2) = 999.90;
DECLARE @remaining DECIMAL(10, 2) = @balance - @withdrawal;

SELECT @remaining;
-- –†–µ–∑—É–ª—å—Ç–∞—Ç: 0.10 ‚úÖ
-- –°–∞–º–µ —Ç–µ, —â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ!
```

::

::warning
**–ó–æ–ª–æ—Ç–µ –ø—Ä–∞–≤–∏–ª–æ —Ñ—ñ–Ω–∞–Ω—Å—ñ–≤**: –ó–ê–í–ñ–î–ò –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `DECIMAL` –∞–±–æ `MONEY` –¥–ª—è –≥—Ä–æ—à–æ–≤–∏—Ö —Å—É–º. –ù–Ü–ö–û–õ–ò –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `FLOAT`!
::

---

## MONEY —Ç–∞ SMALLMONEY

### –°–ø–µ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ —Ç–∏–ø–∏ –¥–ª—è –≤–∞–ª—é—Ç

| –¢–∏–ø          | –î—ñ–∞–ø–∞–∑–æ–Ω                  | –¢–æ—á–Ω—ñ—Å—Ç—å           | –ü–∞–º'—è—Ç—å |
| :----------- | :------------------------ | :----------------- | :------ |
| `SMALLMONEY` | ¬±214,748.3648             | 4 –∑–Ω–∞–∫–∏ –ø—ñ—Å–ª—è –∫–æ–º–∏ | 4 –±–∞–π—Ç–∏ |
| `MONEY`      | ¬±922,337,203,685,477.5807 | 4 –∑–Ω–∞–∫–∏ –ø—ñ—Å–ª—è –∫–æ–º–∏ | 8 –±–∞–π—Ç  |

```sql
-- –ü–æ–∫—É–ø–∫–∏ –≤ –º–∞–≥–∞–∑–∏–Ω—ñ
CREATE TABLE Transactions (
    amount MONEY
);
INSERT INTO Transactions VALUES ($1299.99);
INSERT INTO Transactions VALUES (1299.99);  -- –°–∏–º–≤–æ–ª $ –æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–∏–π
```

### MONEY vs DECIMAL: –©–æ –≤–∏–±—Ä–∞—Ç–∏?

::tabs
::tabs-item{label="MONEY"}
**–ü–µ—Ä–µ–≤–∞–≥–∏**:

- –û–ø—Ç–∏–º—ñ–∑–æ–≤–∞–Ω–∏–π –¥–ª—è –≤–∞–ª—é—Ç
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ–∫—Ä—É–≥–ª–µ–Ω–Ω—è –¥–æ 4 –∑–Ω–∞–∫—ñ–≤

**–ù–µ–¥–æ–ª—ñ–∫–∏**:

- –§—ñ–∫—Å–æ–≤–∞–Ω—ñ 4 –∑–Ω–∞–∫–∏ –ø—ñ—Å–ª—è –∫–æ–º–∏
- –ü—Ä–∏–≤'—è–∑–∞–Ω–∏–π –¥–æ –æ–¥–Ω—ñ—î—ó –≤–∞–ª—é—Ç–∏

::

::tabs-item{label="DECIMAL"}
**–ü–µ—Ä–µ–≤–∞–≥–∏**:

- –ì–Ω—É—á–∫—ñ—Å—Ç—å precision/scale
- –ü—ñ–¥—Ö–æ–¥–∏—Ç—å –¥–ª—è –º—É–ª—å—Ç–∏–≤–∞–ª—é—Ç–Ω–∏—Ö —Å–∏—Å—Ç–µ–º

**–ù–µ–¥–æ–ª—ñ–∫–∏**:

- –ü–æ—Ç—Ä—ñ–±–Ω–æ –≤—Ä—É—á–Ω—É –∑–∞–¥–∞–≤–∞—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏

::

::

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è**: –î–ª—è —Å—É—á–∞—Å–Ω–∏—Ö —Å–∏—Å—Ç–µ–º –∫—Ä–∞—â–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `DECIMAL(19, 4)` ‚Äî —Ü–µ –¥–∞—î –±—ñ–ª—å—à–µ –∫–æ–Ω—Ç—Ä–æ–ª—é.

---

## Binary —Ç–∏–ø–∏ –¥–∞–Ω–∏—Ö

### –ö–æ–ª–∏ –ø–æ—Ç—Ä—ñ–±–Ω—ñ –±—ñ–Ω–∞—Ä–Ω—ñ –¥–∞–Ω—ñ?

–ë—ñ–Ω–∞—Ä–Ω—ñ —Ç–∏–ø–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è –¥–ª—è –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è:

- **–ë–µ–∑–ø–µ—á–Ω–∏—Ö —Ö–µ—à—ñ–≤ –ø–∞—Ä–æ–ª—ñ–≤** (bcrypt, Argon2, PBKDF2)
- –§–∞–π–ª—ñ–≤ (–∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è, PDF, –¥–æ–∫—É–º–µ–Ω—Ç–∏)
- –ö—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ—ñ—á–Ω–∏—Ö –∫–ª—é—á—ñ–≤ —Ç–∞ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç—ñ–≤
- –¶–∏—Ñ—Ä–æ–≤–∏—Ö –ø—ñ–¥–ø–∏—Å—ñ–≤
- –ë—ñ–Ω–∞—Ä–Ω–∏—Ö –ø—Ä–æ—Ç–æ–∫–æ–ª—ñ–≤ —Ç–∞ —Ç–æ–∫–µ–Ω—ñ–≤

| –¢–∏–ø              | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∏–π —Ä–æ–∑–º—ñ—Ä | –ü–∞–º'—è—Ç—å            | –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è                        |
| :--------------- | :------------------ | :----------------- | :---------------------------------- |
| `BINARY(n)`      | 8000 –±–∞–π—Ç           | –§—ñ–∫—Å–æ–≤–∞–Ω–∞ (n –±–∞–π—Ç) | –•–µ—à—ñ —Ñ—ñ–∫—Å–æ–≤–∞–Ω–æ—ó –¥–æ–≤–∂–∏–Ω–∏, —Ç–æ–∫–µ–Ω–∏     |
| `VARBINARY(n)`   | 8000 –±–∞–π—Ç           | –ó–º—ñ–Ω–Ω–∞             | –•–µ—à—ñ –ø–∞—Ä–æ–ª—ñ–≤, –Ω–µ–≤–µ–ª–∏–∫—ñ —Ñ–∞–π–ª–∏, –∫–ª—é—á—ñ |
| `VARBINARY(MAX)` | 2 –ì–ë                | –ó–º—ñ–Ω–Ω–∞             | –í–µ–ª–∏–∫—ñ —Ñ–∞–π–ª–∏, –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è, –¥–æ–∫—É–º–µ–Ω—Ç–∏ |

::warning
**Deprecated**: –¢–∏–ø `IMAGE` –∑–∞—Å—Ç–∞—Ä—ñ–ª–∏–π –∑ SQL Server 2005. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `VARBINARY(MAX)`.
::

### –ü—Ä–∞–∫—Ç–∏—á–Ω—ñ –ø—Ä–∏–∫–ª–∞–¥–∏

::tabs
::tabs-item{label="‚úÖ –ë–µ–∑–ø–µ—á–Ω–µ —Ö–µ—à—É–≤–∞–Ω–Ω—è –ø–∞—Ä–æ–ª—ñ–≤"}

```sql
-- –ü–†–ê–í–ò–õ–¨–ù–û: –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è bcrypt/Argon2 –Ω–∞ —Ä—ñ–≤–Ω—ñ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É
CREATE TABLE Users (
    user_id INT PRIMARY KEY,
    username NVARCHAR(50) UNIQUE NOT NULL,
    -- bcrypt —Å—Ç–≤–æ—Ä—é—î —Ö–µ—à ~60 —Å–∏–º–≤–æ–ª—ñ–≤ (–∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ –≤–µ—Ä—Å—ñ—ó)
    password_hash VARBINARY(128) NOT NULL,  -- –î–æ—Å—Ç–∞—Ç–Ω—å–æ –º—ñ—Å—Ü—è –¥–ª—è bcrypt/Argon2
    salt VARBINARY(32),                     -- Salt –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –æ–∫—Ä–µ–º–æ (–æ–ø—Ü—ñ–π–Ω–æ)
    created_at DATETIME2 DEFAULT SYSDATETIME()
);
```

::warning
**–ö–†–ò–¢–ò–ß–ù–û**: SQL Server –ù–ï –º–∞—î –≤–±—É–¥–æ–≤–∞–Ω–æ–≥–æ bcrypt –∞–±–æ Argon2!  
–•–µ—à—É–≤–∞–Ω–Ω—è –ø–∞—Ä–æ–ª—ñ–≤ **–ó–ê–í–ñ–î–ò** –º–∞—î –≤—ñ–¥–±—É–≤–∞—Ç–∏—Å—è –Ω–∞ —Ä—ñ–≤–Ω—ñ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É (C#, Python, Node.js).
::

**C# –ø—Ä–∏–∫–ª–∞–¥ (–∑ BCrypt.Net)**:

```csharp
using BCrypt.Net;

// –•–µ—à—É–≤–∞–Ω–Ω—è –ø–∞—Ä–æ–ª—è (–∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≥–µ–Ω–µ—Ä—É—î salt)
string password = "MySecurePassword123";
string passwordHash = BCrypt.HashPassword(password, workFactor: 12);
// –†–µ–∑—É–ª—å—Ç–∞—Ç: $2a$12$R9h/cIPz0gi.URNNX3kh2O... (60 –±–∞–π—Ç)

// –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –≤ –ë–î
byte[] hashBytes = Encoding.UTF8.GetBytes(passwordHash);
// INSERT INTO Users (username, password_hash) VALUES ('john_doe', @hashBytes);

// –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–∞—Ä–æ–ª—è
bool isValid = BCrypt.Verify(password, passwordHash);  // true
```

::

::tabs-item{label="‚ùå –ù–ï–ë–ï–ó–ü–ï–ß–ù–û: SHA-256/MD5"}

```sql
-- ‚ùå –ù–Ü–ö–û–õ–ò –ù–ï –†–û–ë–Ü–¢–¨ –¢–ê–ö –î–õ–Ø –ü–ê–†–û–õ–Ü–í!
DECLARE @password NVARCHAR(50) = 'MySecurePassword123';
DECLARE @hash BINARY(32) = HASHBYTES('SHA2_256', @password);

-- –ü–†–û–ë–õ–ï–ú–ò:
-- 1. SHA-256 –∑–∞–Ω–∞–¥—Ç–æ –®–í–ò–î–ö–ò–ô ‚Üí –º–æ–∂–Ω–∞ –ø–µ—Ä–µ–±—Ä–∞—Ç–∏ –º—ñ–ª—å—è—Ä–¥–∏ –ø–∞—Ä–æ–ª—ñ–≤/—Å–µ–∫
-- 2. –ë–µ–∑ SALT ‚Üí –æ–¥–Ω–∞–∫–æ–≤—ñ –ø–∞—Ä–æ–ª—ñ –º–∞—é—Ç—å –æ–¥–Ω–∞–∫–æ–≤–∏–π —Ö–µ—à
-- 3. –í—Ä–∞–∑–ª–∏–≤–∏–π –¥–æ rainbow tables
-- 4. MD5 –≤–∑–∞–≥–∞–ª—ñ –∑–ª–∞–º–∞–Ω–∏–π, –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ!
```

::caution
**–ß–æ–º—É SHA-256 –Ω–µ–±–µ–∑–ø–µ—á–Ω–∏–π –¥–ª—è –ø–∞—Ä–æ–ª—ñ–≤?**

–°—É—á–∞—Å–Ω–∞ –≤—ñ–¥–µ–æ–∫–∞—Ä—Ç–∞ –º–æ–∂–µ –æ–±—á–∏—Å–ª–∏—Ç–∏ **~10 –º–ª—Ä–¥ SHA-256 —Ö–µ—à—ñ–≤/—Å–µ–∫—É–Ω–¥—É**.  
–¶–µ –æ–∑–Ω–∞—á–∞—î, —â–æ 8-—Å–∏–º–≤–æ–ª—å–Ω–∏–π –ø–∞—Ä–æ–ª—å –º–æ–∂–Ω–∞ –∑–ª–∞–º–∞—Ç–∏ –∑–∞ **—Ö–≤–∏–ª–∏–Ω–∏**.

–ù–∞—Ç–æ–º—ñ—Å—Ç—å, **bcrypt** –Ω–∞–≤–º–∏—Å–Ω–æ –ø–æ–≤—ñ–ª—å–Ω–∏–π (–∫–µ—Ä–æ–≤–∞–Ω–∏–π work factor):

- bcrypt –∑ work factor 12: ~3-5 —Ö–µ—à—ñ–≤/—Å–µ–∫—É–Ω–¥—É
- –¢–æ–π —Å–∞–º–∏–π –ø–∞—Ä–æ–ª—å –∑–ª–∞–º–∞—Ç–∏ –±—É–¥–µ **—Ä–æ–∫–∏** –∑–∞–º—ñ—Å—Ç—å —Ö–≤–∏–ª–∏–Ω

::

::

::tabs-item{label="–§–∞–π–ª–∏ —Ç–∞ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è"}

```sql
-- –ê–≤–∞—Ç–∞—Ä–∫–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
CREATE TABLE UserProfiles (
    user_id INT PRIMARY KEY,
    avatar VARBINARY(MAX),              -- –î–æ 2 –ì–ë
    avatar_mime_type VARCHAR(50),        -- 'image/jpeg', 'image/png'
    avatar_size_bytes INT,
    uploaded_at DATETIME2 DEFAULT SYSDATETIME()
);

-- –í—Å—Ç–∞–≤–∫–∞ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è
INSERT INTO UserProfiles (user_id, avatar, avatar_mime_type)
VALUES (
    1,
    (SELECT * FROM OPENROWSET(BULK 'C:\images\avatar.jpg', SINGLE_BLOB) AS img),
    'image/jpeg'
);
```

::

::tabs-item{label="–ö—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ—ñ—á–Ω—ñ —Ç–æ–∫–µ–Ω–∏"}

```sql
-- –¢–æ–∫–µ–Ω–∏ –¥–ª—è –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–∞—Ä–æ–ª—è –∞–±–æ API keys
CREATE TABLE PasswordResetTokens (
    token_id UNIQUEIDENTIFIER DEFAULT NEWID(),
    user_id INT FOREIGN KEY REFERENCES Users(user_id),
    -- –•–µ—à —Ç–æ–∫–µ–Ω—É (–¥–ª—è –±–µ–∑–ø–µ–∫–∏ –Ω–µ –∑–±–µ—Ä—ñ–≥–∞—î–º–æ plain text)
    token_hash BINARY(32) NOT NULL,      -- SHA-256 –ø—Ä–∏–π–Ω—è—Ç–Ω–∏–π –¥–ª—è —Ç–æ–∫–µ–Ω—ñ–≤!
    expires_at DATETIME2 NOT NULL,
    created_at DATETIME2 DEFAULT SYSDATETIME()
);
```

::note
**–î–ª—è —Ç–æ–∫–µ–Ω—ñ–≤ SHA-256 –ø—Ä–∏–π–Ω—è—Ç–Ω–∏–π**, –±–æ:

- –¢–æ–∫–µ–Ω–∏ –≥–µ–Ω–µ—Ä—É—é—Ç—å—Å—è –∫—Ä–∏–ø—Ç–æ–≥—Ä–∞—Ñ—ñ—á–Ω–æ –≤–∏–ø–∞–¥–∫–æ–≤–æ (–Ω–µ –ø–∞—Ä–æ–ª—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤)
- –¢–æ–∫–µ–Ω–∏ –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ñ —Ç–∞ –∫–æ—Ä–æ—Ç–∫–æ—Ç–µ—Ä–º—ñ–Ω–æ–≤—ñ
- –ê—Ç–∞–∫–∞ –ø–µ—Ä–µ–±–æ—Ä–æ–º –Ω–µ–º–æ–∂–ª–∏–≤–∞ —á–µ—Ä–µ–∑ –≤–∏—Å–æ–∫—É –µ–Ω—Ç—Ä–æ–ø—ñ—é

::

::

::

### –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω—ñ –∞–ª–≥–æ—Ä–∏—Ç–º–∏ –¥–ª—è –ø–∞—Ä–æ–ª—ñ–≤ (2024+)

| –ê–ª–≥–æ—Ä–∏—Ç–º     | –†—ñ–∫  | –ë–µ–∑–ø–µ—á–Ω—ñ—Å—Ç—å          | Work Factor                    | –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è            |
| :----------- | :--- | :------------------- | :----------------------------- | :---------------------- |
| **Argon2id** | 2015 | ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê –ù–∞–π–∫—Ä–∞—â–∏–π | –ù–∞–ª–∞—à—Ç–æ–≤—É—î—Ç—å—Å—è (memory + time) | –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ OWASP     |
| **bcrypt**   | 1999 | ‚≠ê‚≠ê‚≠ê‚≠ê –î—É–∂–µ –¥–æ–±—Ä–∏–π | 10-12 (2024)                   | –®–∏—Ä–æ–∫–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è |
| **scrypt**   | 2009 | ‚≠ê‚≠ê‚≠ê‚≠ê –î—É–∂–µ –¥–æ–±—Ä–∏–π | –ù–∞–ª–∞—à—Ç–æ–≤—É—î—Ç—å—Å—è                 | Memory-hard             |
| **PBKDF2**   | 2000 | ‚≠ê‚≠ê‚≠ê –ü—Ä–∏–π–Ω—è—Ç–Ω–∏–π    | 600,000+ —ñ—Ç–µ—Ä–∞—Ü—ñ–π              | –ó–∞—Å—Ç–∞—Ä—ñ–ª–∏–π, –∞–ª–µ OK      |
| ~~SHA-256~~  | 2001 | ‚≠ê –ù–ï–ë–ï–ó–ü–ï–ß–ù–û        | N/A                            | ‚ùå –ù–ï –¥–ª—è –ø–∞—Ä–æ–ª—ñ–≤       |
| ~~MD5~~      | 1991 | ‚ò†Ô∏è –ó–õ–ê–ú–ê–ù–ò–ô          | N/A                            | ‚ùå –ù–ï –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏   |

::tip
**OWASP –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—è 2024**:

1. **–ü–µ—Ä—à–∏–π –≤–∏–±—ñ—Ä**: Argon2id (memory cost: 19MB, time cost: 2, parallelism: 1)
2. **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞**: bcrypt –∑ work factor ‚â• 12
3. **Legacy —Å–∏—Å—Ç–µ–º–∏**: PBKDF2-SHA256 –∑ ‚â•600,000 —ñ—Ç–µ—Ä–∞—Ü—ñ—è–º–∏

::

### –ü—Ä–∏–∫–ª–∞–¥: –ü—Ä–∞–≤–∏–ª—å–Ω–∞ –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞

```sql
-- –¢–∞–±–ª–∏—Ü—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
CREATE TABLE Users (
    user_id INT IDENTITY(1,1) PRIMARY KEY,
    email NVARCHAR(100) UNIQUE NOT NULL,
    username NVARCHAR(50) UNIQUE NOT NULL,

    -- –•–µ—à —Å—Ç–≤–æ—Ä–µ–Ω–∏–π bcrypt/Argon2 –Ω–∞ —Ä—ñ–≤–Ω—ñ –∑–∞—Å—Ç–æ—Å—É–Ω–∫—É
    password_hash VARBINARY(128) NOT NULL,

    -- –ú–µ—Ç–∞–¥–∞–Ω—ñ –±–µ–∑–ø–µ–∫–∏
    password_changed_at DATETIME2,
    failed_login_attempts TINYINT DEFAULT 0,
    account_locked_until DATETIME2,

    created_at DATETIME2 DEFAULT SYSDATETIME(),
    updated_at DATETIME2 DEFAULT SYSDATETIME()
);

-- –ê—É–¥–∏—Ç —Å–ø—Ä–æ–± –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó
CREATE TABLE LoginAttempts (
    attempt_id BIGINT IDENTITY(1,1) PRIMARY KEY,
    user_id INT FOREIGN KEY REFERENCES Users(user_id),
    success BIT NOT NULL,
    ip_address VARCHAR(45),  -- IPv6 –ø—ñ–¥—Ç—Ä–∏–º–∫–∞
    user_agent NVARCHAR(500),
    attempted_at DATETIME2 DEFAULT SYSDATETIME()
);
```

---

## –°–ø–µ—Ü—ñ–∞–ª—å–Ω—ñ —Ç–∏–ø–∏ –¥–∞–Ω–∏—Ö

### XML ‚Äî –°—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω—ñ –¥–æ–∫—É–º–µ–Ω—Ç–∏

SQL Server –º–∞—î –≤–±—É–¥–æ–≤–∞–Ω—É –ø—ñ–¥—Ç—Ä–∏–º–∫—É XML –∑ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—é —ñ–Ω–¥–µ–∫—Å—É–≤–∞–Ω–Ω—è —Ç–∞ querying!

```sql
CREATE TABLE ProductCatalog (
    product_id INT PRIMARY KEY,
    specifications XML
);

INSERT INTO ProductCatalog VALUES (1,
'<product>
    <name>Laptop</name>
    <specs>
        <cpu>Intel i7</cpu>
        <ram>16GB</ram>
    </specs>
</product>');

-- XQuery –¥–ª—è –ø–æ—à—É–∫—É
SELECT specifications.query('/product/specs/cpu')
FROM ProductCatalog
WHERE product_id = 1;
```

### GEOGRAPHY —Ç–∞ GEOMETRY ‚Äî –ü—Ä–æ—Å—Ç–æ—Ä–æ–≤—ñ –¥–∞–Ω—ñ

**GEOGRAPHY**: –î–ª—è —Ä–µ–∞–ª—å–Ω–∏—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –Ω–∞ –ó–µ–º–ª—ñ (—à–∏—Ä–æ—Ç–∞/–¥–æ–≤–≥–æ—Ç–∞).  
**GEOMETRY**: –î–ª—è –¥–≤–æ–≤–∏–º—ñ—Ä–Ω–∏—Ö –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –Ω–∞ –ø–ª–æ—â–∏–Ω—ñ.

```sql
-- –õ–æ–∫–∞—Ü—ñ—ó —Ä–µ—Å—Ç–æ—Ä–∞–Ω—ñ–≤
CREATE TABLE Restaurants (
    restaurant_id INT PRIMARY KEY,
    name NVARCHAR(100),
    location GEOGRAPHY
);

-- –ö–∏—ó–≤, –ú–∞–π–¥–∞–Ω –ù–µ–∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
INSERT INTO Restaurants VALUES (
    1,
    '–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–µ –∫–∞—Ñ–µ',
    GEOGRAPHY::Point(50.4501, 30.5234, 4326)  -- SRID 4326 = WGS84
);

-- –ó–Ω–∞–π—Ç–∏ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∏ –≤ —Ä–∞–¥—ñ—É—Å—ñ 5 –∫–º
DECLARE @myLocation GEOGRAPHY = GEOGRAPHY::Point(50.4547, 30.5238, 4326);

SELECT name, location.STDistance(@myLocation) / 1000 AS distance_km
FROM Restaurants
WHERE location.STDistance(@myLocation) <= 5000;
```

### UNIQUEIDENTIFIER ‚Äî –ì–ª–æ–±–∞–ª—å–Ω–æ —É–Ω—ñ–∫–∞–ª—å–Ω—ñ —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä–∏

```sql
CREATE TABLE Orders (
    order_guid UNIQUEIDENTIFIER DEFAULT NEWID(),  -- –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü—ñ—è GUID
    customer_id INT
);

-- GUID: 6F9619FF-8B86-D011-B42D-00C04FC964FF
-- –£–Ω—ñ–∫–∞–ª—å–Ω–∏–π –≤ –£–°–¨–û–ú–£ –°–í–Ü–¢–Ü, –π–º–æ–≤—ñ—Ä–Ω—ñ—Å—Ç—å –∫–æ–ª—ñ–∑—ñ—ó –ø—Ä–∞–∫—Ç–∏—á–Ω–æ 0
```

::tip
**–ö–æ–ª–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ GUID**:

- –†–æ–∑–ø–æ–¥—ñ–ª–µ–Ω—ñ —Å–∏—Å—Ç–µ–º–∏ (–º—ñ–∫—Ä–æ—Å–µ—Ä–≤—ñ—Å–∏)
- –†–µ–ø–ª—ñ–∫–∞—Ü—ñ—è –º—ñ–∂ —Å–µ—Ä–≤–µ—Ä–∞–º–∏
- –ë–µ–∑–ø–µ–∫–∞ (–Ω–µ–ø–µ—Ä–µ–¥–±–∞—á—É–≤–∞–Ω—ñ ID)

**–ù–µ–¥–æ–ª—ñ–∫–∏**:

- 16 –±–∞–π—Ç (–ø—Ä–æ—Ç–∏ 4 –±–∞–π—Ç —É INT)
- –ü–æ–≤—ñ–ª—å–Ω—ñ—à—ñ —ñ–Ω–¥–µ–∫—Å–∏

::

---

## –í–∏–±—ñ—Ä –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ —Ç–∏–ø—É –¥–∞–Ω–∏—Ö: Decision Matrix

### –ê–ª–≥–æ—Ä–∏—Ç–º –ø—Ä–∏–π–Ω—è—Ç—Ç—è —Ä—ñ—à–µ–Ω–Ω—è

::mermaid

```mermaid
graph TD
    Start[–Ø–∫–µ –ø–æ–ª–µ —Å—Ç–≤–æ—Ä—é—î–º–æ?] --> Numbers{–ß–∏—Å–ª–∞?}
    Numbers -->|–¢–∞–∫| Integer{–¶—ñ–ª–µ —á–∏—Å–ª–æ?}
    Integer -->|–¢–∞–∫| Range{–î—ñ–∞–ø–∞–∑–æ–Ω?}
    Range -->|0-100| TinyInt[TINYINT]
    Range -->|–†—ñ–∫, –Ω–æ–º–µ—Ä| SmallInt[SMALLINT]
    Range -->|ID, quantity| Int[INT]
    Range -->|Timestamp, huge| BigInt[BIGINT]

    Integer -->|–ù—ñ| Money{–ì—Ä–æ—à—ñ?}
    Money -->|–¢–∞–∫| UseMoney[DECIMAL p,2<br/>–∞–±–æ MONEY]
    Money -->|–ù—ñ| Science{–ù–∞—É–∫–∞?}
    Science -->|–¢–∞–∫| UseFloat[FLOAT/REAL]
    Science -->|–ù—ñ| UseDecimal[DECIMAL p,s]

    Numbers -->|–ù—ñ| Text{–¢–µ–∫—Å—Ç?}
    Text -->|–¢–∞–∫| Unicode{–ú—É–ª—å—Ç–∏–º–æ–≤–Ω—ñ—Å—Ç—å?}
    Unicode -->|–¢–∞–∫| Size1{–†–æ–∑–º—ñ—Ä?}
    Size1 -->|–§—ñ–∫—Å–æ–≤–∞–Ω–∏–π| NChar[NCHAR n]
    Size1 -->|–ó–º—ñ–Ω–Ω–∏–π| NVarchar[NVARCHAR n]
    Size1 -->|–í–µ–ª–∏–∫–∏–π| NVarcharMax[NVARCHAR MAX]

    Unicode -->|–ù—ñ –ª–∞—Ç–∏–Ω–∏—Ü—è| Size2{–†–æ–∑–º—ñ—Ä?}
    Size2 -->|–§—ñ–∫—Å–æ–≤–∞–Ω–∏–π| Char[CHAR n]
    Size2 -->|–ó–º—ñ–Ω–Ω–∏–π| Varchar[VARCHAR n]
    Size2 -->|–í–µ–ª–∏–∫–∏–π| VarcharMax[VARCHAR MAX]

    Text -->|–ù—ñ| DateTime{–î–∞—Ç–∞/—á–∞—Å?}
    DateTime -->|–õ–∏—à–µ –¥–∞—Ç–∞| UseDate[DATE]
    DateTime -->|–õ–∏—à–µ —á–∞—Å| UseTime[TIME]
    DateTime -->|–î–∞—Ç–∞+—á–∞—Å| TZ{Timezone?}
    TZ -->|–¢–∞–∫| UseDateTimeOffset[DATETIMEOFFSET]
    TZ -->|–ù—ñ| UseDateTime2[DATETIME2]

    DateTime -->|–ù—ñ| Binary{–ë—ñ–Ω–∞—Ä–Ω—ñ?}
    Binary -->|–¢–∞–∫| BinSize{–†–æ–∑–º—ñ—Ä?}
    BinSize -->|–ú–∞–ª–∏–π| VarBinary[VARBINARY n]
    BinSize -->|–í–µ–ª–∏–∫–∏–π| VarBinaryMax[VARBINARY MAX]

    Binary -->|–ù—ñ| Special{–°–ø–µ—Ü—ñ–∞–ª—å–Ω—ñ?}
    Special -->|XML| UseXML[XML]
    Special -->|GPS| UseGeo[GEOGRAPHY]
    Special -->|GUID| UseGuid[UNIQUEIDENTIFIER]

    style TinyInt fill:#10b981,color:#fff
    style Int fill:#f59e0b,color:#333
    style UseMoney fill:#ef4444,color:#fff
    style NVarchar fill:#3b82f6,color:#fff
    style UseDateTime2 fill:#8b5cf6,color:#fff
```

::

### –ß–µ–∫–ª–∏—Å—Ç –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó

::note
**–ü–µ—Ä–µ–¥ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è–º –ø–æ–ª—è –∑–∞–ø–∏—Ç–∞–π—Ç–µ —Å–µ–±–µ**:

1. **–Ø–∫–∏–π –¥—ñ–∞–ø–∞–∑–æ–Ω –∑–Ω–∞—á–µ–Ω—å?** (–≤–∏–±—ñ—Ä –º—ñ–∂ INT, SMALLINT, BIGINT)
2. **–ü–æ—Ç—Ä—ñ–±–Ω–∞ —Ç–æ—á–Ω—ñ—Å—Ç—å —á–∏ —à–≤–∏–¥–∫—ñ—Å—Ç—å?** (DECIMAL vs FLOAT)
3. **–ú—É–ª—å—Ç–∏–º–æ–≤–Ω—ñ—Å—Ç—å?** (NVARCHAR vs VARCHAR)
4. **–§—ñ–∫—Å–æ–≤–∞–Ω–∏–π —á–∏ –∑–º—ñ–Ω–Ω–∏–π —Ä–æ–∑–º—ñ—Ä?** (CHAR vs VARCHAR)
5. **–ß–∏ –∑–º—ñ–Ω—é–≤–∞—Ç–∏–º–µ—Ç—å—Å—è —Ü–µ –ø–æ–ª–µ —á–∞—Å—Ç–æ?** (–≤–ø–ª–∏–≤ –Ω–∞ —ñ–Ω–¥–µ–∫—Å–∏)
6. **–°–∫—ñ–ª—å–∫–∏ —Ç–∞–∫–∏—Ö –∑–∞–ø–∏—Å—ñ–≤ –±—É–¥–µ?** (1000 vs 1 –º–ª–Ω ‚Äî —Ä—ñ–∑–Ω–∏—Ü—è —É –≤–ø–ª–∏–≤—ñ –Ω–∞ —Ä–æ–∑–º—ñ—Ä –ë–î)

::

---

## –ü—Ä–∞–∫—Ç–∏—á–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è

### –ó–∞–≤–¥–∞–Ω–Ω—è 1: –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è —Ç–∞–±–ª–∏—Ü—ñ

–î–∞–Ω–æ –Ω–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω–∞ —Ç–∞–±–ª–∏—Ü—è:

```sql
CREATE TABLE Students_Bad (
    id BIGINT,
    first_name VARCHAR(MAX),
    last_name VARCHAR(MAX),
    age BIGINT,
    gpa FLOAT,
    is_active BIGINT,
    birth_date DATETIME
);
```

**–ó–∞–≤–¥–∞–Ω–Ω—è**: –ü–µ—Ä–µ—Ä–æ–±—ñ—Ç—å —Ç–∞–±–ª–∏—Ü—é, –≤–∏–±—Ä–∞–≤—à–∏ –æ–ø—Ç–∏–º–∞–ª—å–Ω—ñ —Ç–∏–ø–∏ –¥–∞–Ω–∏—Ö. –ü–æ—è—Å–Ω—ñ—Ç—å –∫–æ–∂–Ω–µ —Ä—ñ—à–µ–Ω–Ω—è.

<details>
<summary>üí° –†–æ–∑–≤'—è–∑–æ–∫</summary>

```sql
CREATE TABLE Students_Good (
    id INT IDENTITY(1,1) PRIMARY KEY,     -- INT –¥–æ—Å—Ç–∞—Ç–Ω—å–æ, –∞–≤—Ç–æ—ñ–Ω–∫—Ä–µ–º–µ–Ω—Ç
    first_name NVARCHAR(50),              -- Unicode –¥–ª—è —ñ–º–µ–Ω, —Ä–æ–∑—É–º–Ω–∞ –¥–æ–≤–∂–∏–Ω–∞
    last_name NVARCHAR(50),               -- Unicode –¥–ª—è –ø—Ä—ñ–∑–≤–∏—â
    age TINYINT,                          -- 0-255, –≤—ñ–∫ –Ω–µ –ø–µ—Ä–µ–≤–∏—â–∏—Ç—å
    gpa DECIMAL(3, 2),                    -- –§—ñ–∫—Å–æ–≤–∞–Ω–∞ —Ç–æ—á–∫–∞: 0.00-4.00
    is_active BIT,                        -- TRUE/FALSE
    birth_date DATE                       -- –ù–µ –ø–æ—Ç—Ä—ñ–±–µ–Ω —á–∞—Å
);
```

**–ï–∫–æ–Ω–æ–º—ñ—è –ø–∞–º'—è—Ç—ñ –Ω–∞ 1 –º–ª–Ω —Å—Ç—É–¥–µ–Ω—Ç—ñ–≤**:

- `id`: 4 –ú–ë –∑–∞–º—ñ—Å—Ç—å 8 –ú–ë
- `first_name`/`last_name`: –¥–∏–Ω–∞–º—ñ—á–Ω–∞ –µ–∫–æ–Ω–æ–º—ñ—è
- `age`: 1 –ú–ë –∑–∞–º—ñ—Å—Ç—å 8 –ú–ë
- `gpa`: 5 –ú–ë –∑–∞–º—ñ—Å—Ç—å 8 –ú–ë
- `is_active`: 0.125 –ú–ë –∑–∞–º—ñ—Å—Ç—å 8 –ú–ë
- `birth_date`: 3 –ú–ë –∑–∞–º—ñ—Å—Ç—å 8 –ú–ë

**–ó–∞–≥–∞–ª—å–Ω–∞ –µ–∫–æ–Ω–æ–º—ñ—è**: ~30+ –ú–ë –Ω–∞ –º—ñ–ª—å–π–æ–Ω –∑–∞–ø–∏—Å—ñ–≤!

</details>

### –ó–∞–≤–¥–∞–Ω–Ω—è 2: E-commerce –ë–î

–°—Ç–≤–æ—Ä—ñ—Ç—å —Ç–∞–±–ª–∏—Ü—ñ –¥–ª—è —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω—É –∑ –ø–æ–ª—è–º–∏:

1. **Products**: ID, –Ω–∞–∑–≤–∞, –æ–ø–∏—Å, —Ü—ñ–Ω–∞, –∫—ñ–ª—å–∫—ñ—Å—Ç—å –Ω–∞ —Å–∫–ª–∞–¥—ñ, –∞–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å
2. **Orders**: ID –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è, –¥–∞—Ç–∞/—á–∞—Å, –∑–∞–≥–∞–ª—å–Ω–∞ —Å—É–º–∞, —Å—Ç–∞—Ç—É—Å
3. **Customers**: ID, —ñ–º'—è, email, –¥–∞—Ç–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó, –∞–¥—Ä–µ—Å–∞

<details>
<summary>üí° –†–æ–∑–≤'—è–∑–æ–∫</summary>

```sql
CREATE TABLE Products (
    product_id INT IDENTITY(1,1) PRIMARY KEY,
    name NVARCHAR(200) NOT NULL,
    description NVARCHAR(MAX),
    price DECIMAL(10, 2) NOT NULL,
    stock_quantity INT DEFAULT 0,
    is_active BIT DEFAULT 1
);

CREATE TABLE Customers (
    customer_id INT IDENTITY(1,1) PRIMARY KEY,
    first_name NVARCHAR(50) NOT NULL,
    last_name NVARCHAR(50) NOT NULL,
    email VARCHAR(100) UNIQUE NOT NULL,  -- Email –ª–∏—à–µ –ª–∞—Ç–∏–Ω–∏—Ü—è
    registered_at DATETIME2 DEFAULT SYSDATETIME(),
    shipping_address NVARCHAR(500)
);

CREATE TABLE Orders (
    order_id UNIQUEIDENTIFIER DEFAULT NEWID() PRIMARY KEY,  -- GUID –¥–ª—è –±–µ–∑–ø–µ–∫–∏
    customer_id INT FOREIGN KEY REFERENCES Customers(customer_id),
    order_date DATETIMEOFFSET DEFAULT SYSDATETIMEOFFSET(),  -- –ó timezone
    total_amount DECIMAL(12, 2) NOT NULL,
    status NVARCHAR(20) DEFAULT 'Pending'
);
```

</details>

---

## JSON —É MS SQL Server

### –Ü—Å—Ç–æ—Ä—ñ—è –ø—ñ–¥—Ç—Ä–∏–º–∫–∏ JSON

JSON (JavaScript Object Notation) —Å—Ç–∞–≤ –¥–µ-—Ñ–∞–∫—Ç–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–æ–º –¥–ª—è –æ–±–º—ñ–Ω—É –¥–∞–Ω–∏–º–∏ –º—ñ–∂ —Å–∏—Å—Ç–µ–º–∞–º–∏. Microsoft –¥–æ–¥–∞–ª–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫—É JSON —É **SQL Server 2016**, —â–æ–± –∫–æ–Ω–∫—É—Ä—É–≤–∞—Ç–∏ –∑ NoSQL –±–∞–∑–∞–º–∏ –¥–∞–Ω–∏—Ö —Ç–∞ PostgreSQL.

::mermaid

```mermaid
timeline
    title –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ JSON —É –°–£–ë–î
    section 2009-2012
        MongoDB : –ù–∞—Ç–∏–≤–Ω–∞ JSON –ø—ñ–¥—Ç—Ä–∏–º–∫–∞<br/>NoSQL —Ä–µ–≤–æ–ª—é—Ü—ñ—è
        PostgreSQL 9.2 : JSON —Ç–∏–ø –¥–∞–Ω–∏—Ö (2012)
    section 2014-2016
        PostgreSQL 9.4 : JSONB (binary JSON, 2014)
        SQL Server 2016 : JSON —Ñ—É–Ω–∫—Ü—ñ—ó (2016)
    section 2017+
        SQL Server 2017+ : JSON –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è<br/>SQL:2016 —Å—Ç–∞–Ω–¥–∞—Ä—Ç
```

::

### –ö–ª—é—á–æ–≤–∞ –æ—Å–æ–±–ª–∏–≤—ñ—Å—Ç—å: –ù–µ–º–∞—î –æ–∫—Ä–µ–º–æ–≥–æ —Ç–∏–ø—É JSON!

::warning
**–ù–∞ –≤—ñ–¥–º—ñ–Ω—É –≤—ñ–¥ PostgreSQL —Ç–∞ SQL:2016 —Å—Ç–∞–Ω–¥–∞—Ä—Ç—É**, SQL Server **–ù–ï –º–∞—î –æ–∫—Ä–µ–º–æ–≥–æ —Ç–∏–ø—É –¥–∞–Ω–∏—Ö JSON**.  
JSON –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è —è–∫ –∑–≤–∏—á–∞–π–Ω–∏–π **NVARCHAR(MAX)** —Ç–µ–∫—Å—Ç.
::

| –°–£–ë–î           | –¢–∏–ø –¥–∞–Ω–∏—Ö JSON  | –ó–±–µ—Ä—ñ–≥–∞–Ω–Ω—è                   | –í–∞–ª—ñ–¥–∞—Ü—ñ—è                   |
| :------------- | :-------------- | :--------------------------- | :-------------------------- |
| **PostgreSQL** | `JSON`, `JSONB` | –ë—ñ–Ω–∞—Ä–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç (JSONB)      | ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞              |
| **SQL Server** | ‚ùå –ù–µ–º–∞—î        | `NVARCHAR(MAX)` (—Ç–µ–∫—Å—Ç)      | ‚úÖ –ß–µ—Ä–µ–∑ —Ñ—É–Ω–∫—Ü—ñ—ó `ISJSON()` |
| **MySQL**      | `JSON`          | –ë—ñ–Ω–∞—Ä–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç              | ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞              |
| **Oracle**     | `JSON`          | –†—ñ–∑–Ω—ñ (BLOB, CLOB, VARCHAR2) | ‚úÖ –ß–µ—Ä–µ–∑ constraints        |

### –ó–±–µ—Ä—ñ–≥–∞–Ω–Ω—è JSON —É SQL Server

```sql
-- JSON –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è —è–∫ –∑–≤–∏—á–∞–π–Ω–∏–π —Ç–µ–∫—Å—Ç
CREATE TABLE Products (
    product_id INT PRIMARY KEY,
    name NVARCHAR(100),
    -- JSON –∞—Ç—Ä–∏–±—É—Ç–∏ (–∫–æ–ª—ñ—Ä, —Ä–æ–∑–º—ñ—Ä, –º–∞—Ç–µ—Ä—ñ–∞–ª)
    attributes NVARCHAR(MAX),
    -- –í–∞–ª—ñ–¥–∞—Ü—ñ—è —á–µ—Ä–µ–∑ CHECK constraint
    CONSTRAINT CK_ValidJSON CHECK (ISJSON(attributes) = 1)
);

-- –í—Å—Ç–∞–≤–∫–∞ JSON –¥–∞–Ω–∏—Ö
INSERT INTO Products (product_id, name, attributes)
VALUES (
    1,
    'T-Shirt',
    '{"color": "blue", "size": "M", "material": "cotton", "tags": ["casual", "summer"]}'
);
```

::note
**–ü–µ—Ä–µ–≤–∞–≥–∏ NVARCHAR(MAX)**:

- –ì–Ω—É—á–∫—ñ—Å—Ç—å (–º–æ–∂–Ω–∞ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ –±—É–¥—å-—è–∫–∏–π —Ç–µ–∫—Å—Ç)
- –°—É–º—ñ—Å–Ω—ñ—Å—Ç—å –∑ —ñ—Å–Ω—É—é—á–∏–º–∏ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º–∏
- –ú–µ–Ω—à–µ –∑–º—ñ–Ω —É —Å—Ç—Ä—É–∫—Ç—É—Ä—ñ –ë–î

**–ù–µ–¥–æ–ª—ñ–∫–∏**:

- –ë—ñ–ª—å—à–∏–π —Ä–æ–∑–º—ñ—Ä (—Ç–µ–∫—Å—Ç vs –±—ñ–Ω–∞—Ä–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç)
- –ü–æ–≤—ñ–ª—å–Ω—ñ—à–µ –ø–∞—Ä—Å–∏–Ω–≥
- –ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å –∑–±–µ—Ä–µ–≥—Ç–∏ –Ω–µ–≤–∞–ª—ñ–¥–Ω–∏–π JSON (–±–µ–∑ CHECK constraint)

::

### –í–±—É–¥–æ–≤–∞–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ JSON

SQL Server –Ω–∞–¥–∞—î **–±–∞–≥–∞—Ç–∏–π –Ω–∞–±—ñ—Ä —Ñ—É–Ω–∫—Ü—ñ–π** –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ JSON:

::tabs
::tabs-item{label="JSON_VALUE - –û—Ç—Ä–∏–º–∞—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è"}

```sql
-- –û—Ç—Ä–∏–º–∞—Ç–∏ —Å–∫–∞–ª—è—Ä–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è –∑ JSON
DECLARE @json NVARCHAR(MAX) = N'{
    "product": {
        "name": "Laptop",
        "price": 1299.99,
        "specs": {
            "cpu": "Intel i7",
            "ram": "16GB"
        }
    }
}';

-- –ü—Ä–æ—Å—Ç–∏–π —à–ª—è—Ö
SELECT JSON_VALUE(@json, '$.product.name') AS ProductName;
-- –†–µ–∑—É–ª—å—Ç–∞—Ç: 'Laptop'

-- –í–∫–ª–∞–¥–µ–Ω–∏–π —à–ª—è—Ö
SELECT JSON_VALUE(@json, '$.product.specs.cpu') AS CPU;
-- –†–µ–∑—É–ª—å—Ç–∞—Ç: 'Intel i7'

-- –ó —Ä–µ–∞–ª—å–Ω–æ—ó —Ç–∞–±–ª–∏—Ü—ñ
SELECT
    product_id,
    name,
    JSON_VALUE(attributes, '$.color') AS Color,
    JSON_VALUE(attributes, '$.size') AS Size
FROM Products;
```

::

::tabs-item{label="JSON_QUERY - –û—Ç—Ä–∏–º–∞—Ç–∏ –æ–±'—î–∫—Ç/–º–∞—Å–∏–≤"}

```sql
-- JSON_QUERY –ø–æ–≤–µ—Ä—Ç–∞—î JSON –æ–±'—î–∫—Ç –∞–±–æ –º–∞—Å–∏–≤ (–Ω–µ —Å–∫–∞–ª—è—Ä!)
DECLARE @json NVARCHAR(MAX) = N'{
    "product": {
        "name": "Laptop",
        "tags": ["electronics", "computers", "portable"]
    }
}';

-- –û—Ç—Ä–∏–º–∞—Ç–∏ –≤–µ—Å—å –æ–±'—î–∫—Ç product
SELECT JSON_QUERY(@json, '$.product') AS Product;
-- –†–µ–∑—É–ª—å—Ç–∞—Ç: {"name": "Laptop", "tags": ["electronics", "computers", "portable"]}

-- –û—Ç—Ä–∏–º–∞—Ç–∏ –º–∞—Å–∏–≤ tags
SELECT JSON_QUERY(@json, '$.product.tags') AS Tags;
-- –†–µ–∑—É–ª—å—Ç–∞—Ç: ["electronics", "computers", "portable"]

-- ‚ùå –ü–æ–º–∏–ª–∫–∞: JSON_VALUE –Ω–µ –ø—Ä–∞—Ü—é—î –∑ –º–∞—Å–∏–≤–∞–º–∏/–æ–±'—î–∫—Ç–∞–º–∏
SELECT JSON_VALUE(@json, '$.product.tags');  -- NULL
```

::

::tabs-item{label="OPENJSON - –ü–∞—Ä—Å–∏–Ω–≥ —É —Ç–∞–±–ª–∏—Ü—é"}

```sql
-- –ü–µ—Ä–µ—Ç–≤–æ—Ä–∏—Ç–∏ JSON –º–∞—Å–∏–≤ —É —Ç–∞–±–ª–∏—á–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç
DECLARE @json NVARCHAR(MAX) = N'[
    {"id": 1, "name": "Alice", "age": 25},
    {"id": 2, "name": "Bob", "age": 30},
    {"id": 3, "name": "Charlie", "age": 35}
]';

-- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –ø–∞—Ä—Å–∏–Ω–≥
SELECT *
FROM OPENJSON(@json)
WITH (
    id INT '$.id',
    name NVARCHAR(50) '$.name',
    age INT '$.age'
);

-- –†–µ–∑—É–ª—å—Ç–∞—Ç:
-- id  name     age
-- 1   Alice    25
-- 2   Bob      30
-- 3   Charlie  35
```

**–ü—Ä–∞–∫—Ç–∏—á–Ω–∏–π –∫–µ–π—Å: –†–æ–∑–ø–∞–∫—É–≤–∞—Ç–∏ –≤–∫–ª–∞–¥–µ–Ω–∏–π JSON**

```sql
SELECT
    product_id,
    name,
    tag.value AS Tag
FROM Products
CROSS APPLY OPENJSON(attributes, '$.tags') AS tag;

-- –Ø–∫—â–æ —É –ø—Ä–æ–¥—É–∫—Ç—É tags: ["casual", "summer", "cotton"]
-- product_id  name      Tag
-- 1           T-Shirt   casual
-- 1           T-Shirt   summer
-- 1           T-Shirt   cotton
```

::

::tabs-item{label="FOR JSON - –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è JSON"}

```sql
-- –ü–µ—Ä–µ—Ç–≤–æ—Ä–∏—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ SELECT —É JSON
SELECT product_id, name, price
FROM Products
WHERE price > 100
FOR JSON PATH;

-- –†–µ–∑—É–ª—å—Ç–∞—Ç:
-- [{"product_id":1,"name":"Laptop","price":1299.99},
--  {"product_id":2,"name":"Phone","price":899.00}]

-- –ó –≤–∫–ª–∞–¥–µ–Ω–æ—é —Å—Ç—Ä—É–∫—Ç—É—Ä–æ—é
SELECT
    o.order_id,
    o.order_date,
    (
        SELECT p.product_id, p.name, p.price
        FROM OrderItems oi
        INNER JOIN Products p ON oi.product_id = p.product_id
        WHERE oi.order_id = o.order_id
        FOR JSON PATH
    ) AS items
FROM Orders o
FOR JSON PATH;

-- –†–µ–∑—É–ª—å—Ç–∞—Ç: JSON –∑ –≤–∫–ª–∞–¥–µ–Ω–∏–º–∏ –º–∞—Å–∏–≤–∞–º–∏ items
```

::

::tabs-item{label="ISJSON - –í–∞–ª—ñ–¥–∞—Ü—ñ—è"}

```sql
-- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤–∞–ª—ñ–¥–Ω–æ—Å—Ç—ñ JSON
SELECT ISJSON('{"name": "test"}');  -- 1 (TRUE)
SELECT ISJSON('{invalid json}');    -- 0 (FALSE)
SELECT ISJSON('plain text');        -- 0 (FALSE)

-- –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≤ WHERE
SELECT product_id, name
FROM Products
WHERE ISJSON(attributes) = 1;  -- –õ–∏—à–µ –≤–∞–ª—ñ–¥–Ω—ñ JSON

-- –£ CHECK constraint (–¥–∏–≤. –≤–∏—â–µ)
ALTER TABLE Products
ADD CONSTRAINT CK_ValidJSON CHECK (ISJSON(attributes) = 1);
```

::

::tabs-item{label="JSON_MODIFY - –ó–º—ñ–Ω–∞ JSON"}

```sql
-- –î–æ–¥–∞—Ç–∏ –∞–±–æ –∑–º—ñ–Ω–∏—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è –≤ JSON
DECLARE @json NVARCHAR(MAX) = N'{"name": "Laptop", "price": 1299.99}';

-- –ó–º—ñ–Ω–∏—Ç–∏ —ñ—Å–Ω—É—é—á–µ –∑–Ω–∞—á–µ–Ω–Ω—è
SET @json = JSON_MODIFY(@json, '$.price', 1199.99);
-- –†–µ–∑—É–ª—å—Ç–∞—Ç: {"name":"Laptop","price":1199.99}

-- –î–æ–¥–∞—Ç–∏ –Ω–æ–≤–µ –ø–æ–ª–µ
SET @json = JSON_MODIFY(@json, '$.discount', 10);
-- –†–µ–∑—É–ª—å—Ç–∞—Ç: {"name":"Laptop","price":1199.99,"discount":10}

-- –í–∏–¥–∞–ª–∏—Ç–∏ –ø–æ–ª–µ (–≤—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ NULL)
SET @json = JSON_MODIFY(@json, '$.discount', NULL);
-- –†–µ–∑—É–ª—å—Ç–∞—Ç: {"name":"Laptop","price":1199.99}

-- UPDATE –≤ —Ç–∞–±–ª–∏—Ü—ñ
UPDATE Products
SET attributes = JSON_MODIFY(attributes, '$.color', 'red')
WHERE product_id = 1;
```

::
::

### –Ü–Ω–¥–µ–∫—Å—É–≤–∞–Ω–Ω—è JSON –¥–∞–Ω–∏—Ö

**–ü—Ä–æ–±–ª–µ–º–∞**: –ü–æ—à—É–∫ –ø–æ JSON –ø–æ–ª—è–º –ø–æ–≤—ñ–ª—å–Ω–∏–π, –±–æ SQL Server —Ä–æ–±–∏—Ç—å **full table scan**.

**–†—ñ—à–µ–Ω–Ω—è**: –°—Ç–≤–æ—Ä–∏—Ç–∏ **computed columns** –∑ —ñ–Ω–¥–µ–∫—Å–∞–º–∏!

```sql
-- –°—Ç–≤–æ—Ä–∏—Ç–∏ –æ–±—á–∏—Å–ª—é–≤–∞–Ω—ñ —Å—Ç–æ–≤–ø—Ü—ñ –∑ JSON
ALTER TABLE Products
ADD
    color AS JSON_VALUE(attributes, '$.color') PERSISTED,
    size AS JSON_VALUE(attributes, '$.size') PERSISTED,
    price_json AS CAST(JSON_VALUE(attributes, '$.price') AS DECIMAL(10,2)) PERSISTED;

-- –Ü–Ω–¥–µ–∫—Å—É–≤–∞—Ç–∏ –æ–±—á–∏—Å–ª—é–≤–∞–Ω—ñ —Å—Ç–æ–≤–ø—Ü—ñ
CREATE INDEX IX_Products_Color ON Products(color);
CREATE INDEX IX_Products_Size ON Products(size);
CREATE INDEX IX_Products_Price ON Products(price_json);

-- –¢–µ–ø–µ—Ä –∑–∞–ø–∏—Ç–∏ —à–≤–∏–¥–∫—ñ!
SELECT product_id, name, attributes
FROM Products
WHERE color = 'blue';  -- –í–∏–∫–æ—Ä–∏—Å—Ç–∞—î —ñ–Ω–¥–µ–∫—Å IX_Products_Color ‚ö°
```

::tip
**Best Practice**: –Ø–∫—â–æ —á–∞—Å—Ç–æ —Ñ—ñ–ª—å—Ç—Ä—É—î—Ç–µ –ø–æ –ø–µ–≤–Ω–∏–º JSON –ø–æ–ª—è–º, —Å—Ç–≤–æ—Ä—ñ—Ç—å computed columns –∑ —ñ–Ω–¥–µ–∫—Å–∞–º–∏.
::

### –ü–æ–≤–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤–∏–π –ø–æ—à—É–∫ —É JSON

```sql
-- –°—Ç–≤–æ—Ä–∏—Ç–∏ Full-Text Index –¥–ª—è –ø–æ—à—É–∫—É –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ JSON
CREATE FULLTEXT INDEX ON Products(attributes)
KEY INDEX PK_Products;

-- –ü–æ—à—É–∫ –ø–æ JSON —Ç–µ–∫—Å—Ç—É
SELECT product_id, name, attributes
FROM Products
WHERE CONTAINS(attributes, 'cotton OR polyester');
```

---

### SQL Server vs PostgreSQL: –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è JSON

::code-group

```sql [SQL Server]
-- –¢–∏–ø –¥–∞–Ω–∏—Ö: NVARCHAR(MAX)
CREATE TABLE Products (
    id INT PRIMARY KEY,
    data NVARCHAR(MAX),
    CONSTRAINT CK_JSON CHECK (ISJSON(data) = 1)
);

-- –û—Ç—Ä–∏–º–∞—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è
SELECT JSON_VALUE(data, '$.name') FROM Products;

-- Computed column –¥–ª—è —ñ–Ω–¥–µ–∫—Å—É–≤–∞–Ω–Ω—è
ALTER TABLE Products
ADD name AS JSON_VALUE(data, '$.name') PERSISTED;
CREATE INDEX IX_Name ON Products(name);
```

```sql [PostgreSQL]
-- –ù–∞—Ç–∏–≤–Ω–∏–π —Ç–∏–ø JSONB (binary JSON)
CREATE TABLE products (
    id INT PRIMARY KEY,
    data JSONB  -- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è
);

-- –û—Ç—Ä–∏–º–∞—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è (–ø—Ä–æ—Å—Ç—ñ—à–∏–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å)
SELECT data->>'name' FROM products;

-- GIN index (Generalized Inverted Index)
CREATE INDEX idx_data ON products USING GIN(data);

-- –ü–æ—à—É–∫ –ø–æ –≤–∫–ª–∞–¥–µ–Ω–∏–º –ø–æ–ª—è–º (–¥—É–∂–µ —à–≤–∏–¥–∫–æ)
SELECT * FROM products WHERE data @> '{"category": "electronics"}';
```

::

**–ü–æ—Ä—ñ–≤–Ω—è–ª—å–Ω–∞ —Ç–∞–±–ª–∏—Ü—è –º–æ–∂–ª–∏–≤–æ—Å—Ç–µ–π**:

| –§—É–Ω–∫—Ü—ñ—è            | SQL Server              | PostgreSQL           | –ü–µ—Ä–µ–º–æ–∂–µ—Ü—å |
| :----------------- | :---------------------- | :------------------- | :--------- |
| **–ù–∞—Ç–∏–≤–Ω–∏–π —Ç–∏–ø**   | ‚ùå NVARCHAR(MAX)        | ‚úÖ JSON, JSONB       | PostgreSQL |
| **–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å** | ‚≠ï –°–µ—Ä–µ–¥–Ω—è (—Ç–µ–∫—Å—Ç)      | ‚úÖ –í–∏—Å–æ–∫–∞ (–±—ñ–Ω–∞—Ä–Ω–∏–π) | PostgreSQL |
| **–Ü–Ω–¥–µ–∫—Å—É–≤–∞–Ω–Ω—è**   | ‚≠ï Computed columns     | ‚úÖ GIN indexes       | PostgreSQL |
| **–í–∞–ª—ñ–¥–∞—Ü—ñ—è**      | ‚úÖ ISJSON()             | ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∞       | –ù—ñ—á–∏—è      |
| **–§—É–Ω–∫—Ü—ñ—ó**        | ‚úÖ JSON_VALUE, OPENJSON | ‚úÖ ->, ->>, @>       | –ù—ñ—á–∏—è      |
| **FOR JSON**       | ‚úÖ –í–±—É–¥–æ–≤–∞–Ω–æ            | ‚úÖ row_to_json()     | –ù—ñ—á–∏—è      |
| **–ï–∫–æ—Å–∏—Å—Ç–µ–º–∞**     | ‚≠ï Microsoft only       | ‚úÖ Open-source       | PostgreSQL |

::note
**–ß–æ–º—É SQL Server –Ω–µ –∑—Ä–æ–±–∏–≤ –æ–∫—Ä–µ–º–∏–π —Ç–∏–ø?**

Microsoft –ø–æ—è—Å–Ω—é—î —Ü–µ **–∑–≤–æ—Ä–æ—Ç–Ω–æ—é —Å—É–º—ñ—Å–Ω—ñ—Å—Ç—é** —Ç–∞ **–ø—Ä–æ—Å—Ç–æ—Ç–æ—é —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó**. –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è NVARCHAR(MAX) –æ–∑–Ω–∞—á–∞—î:

- –ü—Ä–∞—Ü—é—î –∑ —ñ—Å–Ω—É—é—á–∏–º–∏ backup/restore
- –°—É–º—ñ—Å–Ω–æ –∑—ñ —Å—Ç–∞—Ä–∏–º–∏ –∫–ª—ñ—î–Ω—Ç—Å—å–∫–∏–º–∏ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞–º–∏
- –ù–µ –ø–æ—Ç—Ä—ñ–±–Ω–∞ –º—ñ–≥—Ä–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö

–ê–ª–µ –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ PostgreSQL **—à–≤–∏–¥—à–∏–π –¥–ª—è JSON workloads**.
::

---

### –ö–æ–ª–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ JSON —É SQL Server?

::tabs
::tabs-item{label="‚úÖ –î–æ–±—Ä—ñ –∫–µ–π—Å–∏"}
**1. Flexible schema (–≥–Ω—É—á–∫–∞ —Å—Ö–µ–º–∞)**

```sql
-- –†—ñ–∑–Ω—ñ –ø—Ä–æ–¥—É–∫—Ç–∏ –º–∞—é—Ç—å —Ä—ñ–∑–Ω—ñ –∞—Ç—Ä–∏–±—É—Ç–∏
-- Laptop: cpu, ram, storage
-- T-Shirt: size, color, material
-- –ë–µ–∑ JSON –ø–æ—Ç—Ä—ñ–±–Ω—ñ –æ–∫—Ä–µ–º—ñ —Ç–∞–±–ª–∏—Ü—ñ –∞–±–æ EAV pattern
CREATE TABLE Products (
    product_id INT PRIMARY KEY,
    category NVARCHAR(50),  -- 'Electronics', 'Clothing'
    attributes NVARCHAR(MAX)  -- –†—ñ–∑–Ω—ñ –¥–ª—è –∫–æ–∂–Ω–æ—ó –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó
);
```

**2. Audit logs / Event sourcing**

```sql
CREATE TABLE ActivityLog (
    log_id BIGINT IDENTITY PRIMARY KEY,
    event_type NVARCHAR(50),
    event_data NVARCHAR(MAX),  -- –î–µ—Ç–∞–ª—ñ –ø–æ–¥—ñ—ó —É JSON
    created_at DATETIME2 DEFAULT SYSDATETIME()
);
```

**3. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è/–∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó**

```sql
CREATE TABLE UserSettings (
    user_id INT PRIMARY KEY,
    preferences NVARCHAR(MAX)  -- {"theme": "dark", "language": "uk", ...}
);
```

**4. API responses / –ö–µ—à—É–≤–∞–Ω–Ω—è**

```sql
CREATE TABLE APICache (
    cache_key VARCHAR(100) PRIMARY KEY,
    response_json NVARCHAR(MAX),
    expires_at DATETIME2
);
```

::

::tabs-item{label="‚ùå –ü–æ–≥–∞–Ω—ñ –∫–µ–π—Å–∏"}
**1. –ß–∞—Å—Ç—ñ –∑–∞–ø–∏—Ç–∏ –∑–∞ —Å–ø–µ—Ü–∏—Ñ—ñ—á–Ω–∏–º–∏ –ø–æ–ª—è–º–∏**

```sql
-- ‚ùå –ü–æ–≥–∞–Ω–æ: WHERE –ø–æ JSON (–ø–æ–≤—ñ–ª—å–Ω–æ)
SELECT * FROM Products
WHERE JSON_VALUE(attributes, '$.price') > 100;

-- ‚úÖ –ö—Ä–∞—â–µ: Normalized schema
CREATE TABLE Products (
    product_id INT PRIMARY KEY,
    price DECIMAL(10,2) -- –Ü–Ω–¥–µ–∫—Å—É—î—Ç—å—Å—è —à–≤–∏–¥–∫–æ
);
```

**2. –°–∫–ª–∞–¥–Ω—ñ JOIN'–∏**

```sql
-- ‚ùå –ù–µ–º–æ–∂–ª–∏–≤–æ –∑—Ä–æ–±–∏—Ç–∏ –µ—Ñ–µ–∫—Ç–∏–≤–Ω–∏–π JOIN –ø–æ JSON –ø–æ–ª—é
```

**3. –¢—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π–Ω—ñ –¥–∞–Ω—ñ –∑ —á—ñ—Ç–∫–æ—é —Å—Ö–µ–º–æ—é**

```sql
-- ‚ùå –ü–æ–≥–∞–Ω–æ –¥–ª—è Orders, Invoices, Transactions
-- ‚úÖ –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –Ω–æ—Ä–º–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ —Ç–∞–±–ª–∏—Ü—ñ
```

**4. –í–µ–ª–∏–∫—ñ –æ–±'—î–º–∏ –¥–∞–Ω–∏—Ö –¥–ª—è –∞–Ω–∞–ª—ñ—Ç–∏–∫–∏**

```sql
-- ‚ùå JSON –ø–æ–≤—ñ–ª—å–Ω–∏–π –¥–ª—è aggregations
-- ‚úÖ –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ columnstore indexes + normalized data
```

::
::

---

### –ü—Ä–∞–∫—Ç–∏—á–Ω–∏–π –ø—Ä–∏–∫–ª–∞–¥: E-commerce –∑ JSON

```sql
-- –ü—Ä–æ–¥—É–∫—Ç–∏ –∑ —Ä—ñ–∑–Ω–∏–º–∏ –∞—Ç—Ä–∏–±—É—Ç–∞–º–∏
CREATE TABLE Products (
    product_id INT IDENTITY(1,1) PRIMARY KEY,
    category NVARCHAR(50) NOT NULL,
    name NVARCHAR(200) NOT NULL,
    base_price DECIMAL(10,2) NOT NULL,  -- –Ü–Ω–¥–µ–∫—Å—É—î—Ç—å—Å—è

    -- –ì–Ω—É—á–∫—ñ –∞—Ç—Ä–∏–±—É—Ç–∏ —É JSON
    attributes NVARCHAR(MAX),
    CONSTRAINT CK_Attributes_Valid CHECK (ISJSON(attributes) = 1),

    created_at DATETIME2 DEFAULT SYSDATETIME()
);

-- Computed columns –¥–ª—è –ø–æ–ø—É–ª—è—Ä–Ω–∏—Ö —Ñ—ñ–ª—å—Ç—Ä—ñ–≤
ALTER TABLE Products ADD
    color AS JSON_VALUE(attributes, '$.color') PERSISTED,
    size AS JSON_VALUE(attributes, '$.size') PERSISTED;

CREATE INDEX IX_Products_Color ON Products(color)
    WHERE color IS NOT NULL;
CREATE INDEX IX_Products_Size ON Products(size)
    WHERE size IS NOT NULL;

-- –í—Å—Ç–∞–≤–∫–∞ —Ä—ñ–∑–Ω–∏—Ö —Ç–∏–ø—ñ–≤ –ø—Ä–æ–¥—É–∫—Ç—ñ–≤
INSERT INTO Products (category, name, base_price, attributes)
VALUES
    ('Electronics', 'Gaming Laptop', 1499.99,
     '{"brand": "ASUS", "cpu": "Intel i7", "ram": "32GB", "storage": "1TB SSD", "gpu": "RTX 4070"}'),

    ('Clothing', 'Cotton T-Shirt', 29.99,
     '{"brand": "Nike", "color": "blue", "size": "M", "material": "100% cotton", "tags": ["casual", "summer"]}'),

    ('Books', 'SQL Server 2022 Guide', 59.99,
     '{"author": "John Doe", "pages": 500, "isbn": "978-1234567890", "format": "Hardcover"}');

-- –ó–∞–ø–∏—Ç–∏
-- 1. –ó–Ω–∞–π—Ç–∏ —Å–∏–Ω—ñ —Ñ—É—Ç–±–æ–ª–∫–∏ —Ä–æ–∑–º—ñ—Ä—É M
SELECT product_id, name, base_price, attributes
FROM Products
WHERE category = 'Clothing'
  AND color = 'blue'      -- –í–∏–∫–æ—Ä–∏—Å—Ç–∞—î —ñ–Ω–¥–µ–∫—Å
  AND size = 'M';         -- –í–∏–∫–æ—Ä–∏—Å—Ç–∞—î —ñ–Ω–¥–µ–∫—Å

-- 2. –û—Ç—Ä–∏–º–∞—Ç–∏ –≤—Å—ñ –Ω–æ—É—Ç–±—É–∫–∏ –∑ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º–∏ —É –∑—Ä—É—á–Ω–æ–º—É —Ñ–æ—Ä–º–∞—Ç—ñ
SELECT
    product_id,
    name,
    base_price,
    JSON_VALUE(attributes, '$.brand') AS Brand,
    JSON_VALUE(attributes, '$.cpu') AS CPU,
    JSON_VALUE(attributes, '$.ram') AS RAM,
    JSON_VALUE(attributes, '$.gpu') AS GPU
FROM Products
WHERE category = 'Electronics';

-- 3. –ó–Ω–∞–π—Ç–∏ –ø—Ä–æ–¥—É–∫—Ç–∏ –∑ –ø–µ–≤–Ω–∏–º —Ç–µ–≥–æ–º
SELECT product_id, name, category
FROM Products
CROSS APPLY OPENJSON(attributes, '$.tags') AS tags
WHERE tags.value = 'summer';
```

---

### –†–µ–∑—é–º–µ: JSON —É SQL Server

::tip
**–ö–ª—é—á–æ–≤—ñ –≤–∏—Å–Ω–æ–≤–∫–∏**:

1. **–ù–µ–º–∞—î –æ–∫—Ä–µ–º–æ–≥–æ —Ç–∏–ø—É**: JSON –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è —è–∫ `NVARCHAR(MAX)`
2. **–í–∞–ª—ñ–¥–∞—Ü—ñ—è**: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `ISJSON()` —É CHECK constraints
3. **–§—É–Ω–∫—Ü—ñ—ó**: `JSON_VALUE`, `JSON_QUERY`, `OPENJSON`, `FOR JSON`, `JSON_MODIFY`
4. **–Ü–Ω–¥–µ–∫—Å—É–≤–∞–Ω–Ω—è**: –°—Ç–≤–æ—Ä—é–π—Ç–µ **computed columns** –∑ —ñ–Ω–¥–µ–∫—Å–∞–º–∏ –¥–ª—è –ø–æ–ø—É–ª—è—Ä–Ω–∏—Ö —Ñ—ñ–ª—å—Ç—Ä—ñ–≤
5. **–ö–æ–ª–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏**: Flexible schemas, configurations, –Ω–µ –¥–ª—è transactional data
6. **VS PostgreSQL**: PostgreSQL —à–≤–∏–¥—à–∏–π –¥–ª—è JSON –∑–∞–≤–¥—è–∫–∏ JSONB, –∞–ª–µ SQL Server —Ü—ñ–ª–∫–æ–º –ø—Ä–∏–π–Ω—è—Ç–Ω–∏–π

::

::warning
**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞**: –Ø–∫—â–æ –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–∞ **–≤–∏—Å–æ–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å JSON**, —Ä–æ–∑–≥–ª—è–Ω—å—Ç–µ:

- PostgreSQL –∑ JSONB
- MongoDB (–Ω–∞—Ç–∏–≤–Ω–∏–π JSON/BSON)
- SQL Server –∑ –Ω–æ—Ä–º–∞–ª—ñ–∑–æ–≤–∞–Ω–æ—é —Å—Ö–µ–º–æ—é + materialized views

::

## –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–Ω–∞–Ω—å

–ó–∞–∫—Ä—ñ–ø—ñ—Ç—å –æ—Ç—Ä–∏–º–∞–Ω—ñ –∑–Ω–∞–Ω–Ω—è, –ø—Ä–æ–π—à–æ–≤—à–∏ –∫–æ—Ä–æ—Ç–∫–∏–π —Ç–µ—Å—Ç:

::tally-embed{id="mLQBJX" title="–¢–µ—Å—Ç: –¢–∏–ø–∏ –¥–∞–Ω–∏—Ö MS SQL Server"}
::

::note
**–ü—Ä–∏–º—ñ—Ç–∫–∞**: –Ø–∫—â–æ —Ç–µ—Å—Ç –Ω–µ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è, –ø–µ—Ä–µ–π–¥—ñ—Ç—å –∑–∞ [–ø—Ä—è–º–∏–º –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º](https://tally.so/r/mLQBJX).
::

---

## –†–µ–∑—é–º–µ

::tip
**–ö–ª—é—á–æ–≤—ñ –≤–∏—Å–Ω–æ–≤–∫–∏**:

1. **–¶—ñ–ª—ñ —á–∏—Å–ª–∞**: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π –¥–æ—Å—Ç–∞—Ç–Ω—ñ–π —Ç–∏–ø (TINYINT ‚Üí SMALLINT ‚Üí INT ‚Üí BIGINT)
2. **–¢–µ–∫—Å—Ç**: NVARCHAR –¥–ª—è –º—É–ª—å—Ç–∏–º–æ–≤–Ω–æ—Å—Ç—ñ, VARCHAR –ª–∏—à–µ –¥–ª—è –≥–∞—Ä–∞–Ω—Ç–æ–≤–∞–Ω–æ –ª–∞—Ç–∏–Ω–∏—Ü—ñ
3. **–ì—Ä–æ—à—ñ**: DECIMAL –∞–±–æ MONEY, –ù–Ü–ö–û–õ–ò FLOAT
4. **–î–∞—Ç–∏**: DATE –¥–ª—è –¥–∞—Ç, DATETIME2 –¥–ª—è timestamps, DATETIMEOFFSET –¥–ª—è –≥–ª–æ–±–∞–ª—å–Ω–∏—Ö —Å–∏—Å—Ç–µ–º
5. **–û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è**: –ü—Ä–∞–≤–∏–ª—å–Ω–∏–π –≤–∏–±—ñ—Ä —Ç–∏–ø—É –µ–∫–æ–Ω–æ–º–∏—Ç—å –ø–∞–º'—è—Ç—å —ñ –ø–æ–∫—Ä–∞—â—É—î –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å

::

**–ù–∞—Å—Ç—É–ø–Ω–∞ —Ç–µ–º–∞**: [–Ü–Ω–¥–µ–∫—Å–∏ —É MS SQL Server](./03.indexes.md) ‚Äî –¥—ñ–∑–Ω–∞—î–º–æ—Å—è, —è–∫ –ø—Ä–∏—Å–∫–æ—Ä–∏—Ç–∏ –∑–∞–ø–∏—Ç–∏ –≤ —Å–æ—Ç–Ω—ñ —Ä–∞–∑—ñ–≤!
