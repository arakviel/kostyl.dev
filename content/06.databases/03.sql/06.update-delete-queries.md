---
title: UPDATE —Ç–∞ DELETE –∑–∞–ø–∏—Ç–∏
description: –î–µ—Ç–∞–ª—å–Ω–∏–π —Ä–æ–∑–±—ñ—Ä UPDATE —Ç–∞ DELETE –∑–∞–ø–∏—Ç—ñ–≤ - –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö, –≤–∏–¥–∞–ª–µ–Ω–Ω—è —Ä—è–¥–∫—ñ–≤, —Ä–æ–±–æ—Ç–∞ –∑ WHERE, OUTPUT clause, –±–µ–∑–ø–µ—á–Ω—ñ –ø—Ä–∞–∫—Ç–∏–∫–∏
---

# UPDATE —Ç–∞ DELETE –∑–∞–ø–∏—Ç–∏

## –ó–º—ñ–Ω–∞ —Ç–∞ –≤–∏–¥–∞–ª–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö

–ü—ñ—Å–ª—è —Ç–æ–≥–æ —è–∫ –¥–∞–Ω—ñ –¥–æ–¥–∞–Ω–æ –≤ —Ç–∞–±–ª–∏—Ü—é (INSERT), —á–∞—Å—Ç–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ —ó—Ö **–æ–Ω–æ–≤–∏—Ç–∏** (UPDATE) –∞–±–æ **–≤–∏–¥–∞–ª–∏—Ç–∏** (DELETE).

::mermaid

```mermaid
flowchart TD
    Start[–î–∞–Ω—ñ –≤ —Ç–∞–±–ª–∏—Ü—ñ] --> Decision{–©–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ?}
    Decision -->|–ó–º—ñ–Ω–∏—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è| UPDATE[UPDATE<br/>–ú–æ–¥–∏—Ñ—ñ–∫–∞—Ü—ñ—è —ñ—Å–Ω—É—é—á–∏—Ö —Ä—è–¥–∫—ñ–≤]
    Decision -->|–í–∏–¥–∞–ª–∏—Ç–∏ —Ä—è–¥–∫–∏| DELETE[DELETE<br/>–í–∏–¥–∞–ª–µ–Ω–Ω—è —Ä—è–¥–∫—ñ–≤]
    Decision -->|–û—á–∏—Å—Ç–∏—Ç–∏ –≤—Å—é —Ç–∞–±–ª–∏—Ü—é| TRUNCATE[TRUNCATE<br/>–®–≤–∏–¥–∫–µ –æ—á–∏—â–µ–Ω–Ω—è]

    UPDATE --> WHERE1{WHERE clause?}
    WHERE1 -->|–¢–∞–∫| SafeUpdate[‚úÖ –û–Ω–æ–≤–ª—é—î –≤–∏–±—Ä–∞–Ω—ñ —Ä—è–¥–∫–∏]
    WHERE1 -->|–ù—ñ| DangerUpdate[‚ö†Ô∏è –û–Ω–æ–≤–ª—é—î –í–°–Ü —Ä—è–¥–∫–∏!]

    DELETE --> WHERE2{WHERE clause?}
    WHERE2 -->|–¢–∞–∫| SafeDelete[‚úÖ –í–∏–¥–∞–ª—è—î –≤–∏–±—Ä–∞–Ω—ñ —Ä—è–¥–∫–∏]
    WHERE2 -->|–ù—ñ| DangerDelete[‚ö†Ô∏è –í–∏–¥–∞–ª—è—î –í–°–Ü —Ä—è–¥–∫–∏!]

    style DangerUpdate fill:#f44336,color:#fff
    style DangerDelete fill:#f44336,color:#fff
```

::

::caution
**–ö–†–ò–¢–ò–ß–ù–û –í–ê–ñ–õ–ò–í–û**: UPDATE —Ç–∞ DELETE **–ë–ï–ó WHERE** –∑–º—ñ–Ω—è—Ç—å/–≤–∏–¥–∞–ª—è—Ç—å **–í–°–Ü** —Ä—è–¥–∫–∏ –≤ —Ç–∞–±–ª–∏—Ü—ñ! –ó–∞–≤–∂–¥–∏ –ø–µ—Ä–µ–≤—ñ—Ä—è–π—Ç–µ WHERE clause –ø–µ—Ä–µ–¥ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è–º!
::

---

## UPDATE: –û–Ω–æ–≤–ª–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö

**UPDATE** –∑–º—ñ–Ω—é—î –∑–Ω–∞—á–µ–Ω–Ω—è —Å—Ç–æ–≤–ø—Ü—ñ–≤ –≤ **—ñ—Å–Ω—É—é—á–∏—Ö** —Ä—è–¥–∫–∞—Ö.

### –ë–∞–∑–æ–≤–∏–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å

```sql
UPDATE table_name
SET column1 = value1, column2 = value2, ...
WHERE condition;
```

### –ü—Ä–∏–∫–ª–∞–¥ 1: –û–Ω–æ–≤–ª–µ–Ω–Ω—è –æ–¥–Ω–æ–≥–æ —Ä—è–¥–∫–∞

```sql
-- –ó–º—ñ–Ω–∏—Ç–∏ email —Å—Ç—É–¥–µ–Ω—Ç–∞ –∑ Id = 1
UPDATE Students
SET Email = 'new.email@example.com'
WHERE Id = 1;

-- –†–µ–∑—É–ª—å—Ç–∞—Ç: (1 row affected)
```

**–©–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è**:

1. SQL Server –∑–Ω–∞—Ö–æ–¥–∏—Ç—å —Ä—è–¥–∫–∏ —â–æ –∑–∞–¥–æ–≤–æ–ª—å–Ω—è—é—Ç—å WHERE (Id = 1)
2. –î–ª—è –∑–Ω–∞–π–¥–µ–Ω–∏—Ö —Ä—è–¥–∫—ñ–≤ –∑–º—ñ–Ω—é—î Email
3. –ü–µ—Ä–µ–≤—ñ—Ä—è—î constraints (NOT NULL, CHECK, UNIQUE, FK)
4. –Ø–∫—â–æ –≤—Å–µ –û–ö - –∑–±–µ—Ä—ñ–≥–∞—î –∑–º—ñ–Ω–∏
5. –ü–æ–≤–µ—Ä—Ç–∞—î –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∑–º—ñ–Ω–µ–Ω–∏—Ö —Ä—è–¥–∫—ñ–≤

### –ü—Ä–∏–∫–ª–∞–¥ 2: –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∫—ñ–ª—å–∫–æ—Ö —Å—Ç–æ–≤–ø—Ü—ñ–≤

```sql
-- –û–Ω–æ–≤–∏—Ç–∏ —Å—Ç–∏–ø–µ–Ω–¥—ñ—é —Ç–∞ email
UPDATE Students
SET
    Grants = 1600,
    Email = 'ivan.petrenko@university.edu'
WHERE Id = 1;
```

### –ü—Ä–∏–∫–ª–∞–¥ 3: –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∫—ñ–ª—å–∫–æ—Ö —Ä—è–¥–∫—ñ–≤

```sql
-- –ó–±—ñ–ª—å—à–∏—Ç–∏ —Å—Ç–∏–ø–µ–Ω–¥—ñ—é –Ω–∞ 10% –¥–ª—è –≤—Å—ñ—Ö —Å—Ç—É–¥–µ–Ω—Ç—ñ–≤ 1998 —Ä–æ–∫—É
UPDATE Students
SET Grants = Grants * 1.1
WHERE YEAR(BirthDate) = 1998 AND Grants IS NOT NULL;

-- –†–µ–∑—É–ª—å—Ç–∞—Ç: (5 rows affected) - —è–∫—â–æ 5 —Å—Ç—É–¥–µ–Ω—Ç—ñ–≤
```

---

## UPDATE –∑ –æ–±—á–∏—Å–ª–µ–Ω–Ω—è–º–∏

### –ü—Ä–∏–∫–ª–∞–¥ 1: –ê—Ä–∏—Ñ–º–µ—Ç–∏—á–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó

```sql
-- –ó–±—ñ–ª—å—à–∏—Ç–∏ —Å—Ç–∏–ø–µ–Ω–¥—ñ—é –Ω–∞ 200
UPDATE Students
SET Grants = Grants + 200
WHERE Grants < 1500;

-- –ü–æ–¥–≤–æ—ó—Ç–∏ —Å—Ç–∏–ø–µ–Ω–¥—ñ—é
UPDATE Students
SET Grants = Grants * 2
WHERE LastName = '–ü–µ—Ç—Ä–µ–Ω–∫–æ';
```

### –ü—Ä–∏–∫–ª–∞–¥ 2: –†—è–¥–∫–æ–≤—ñ —Ñ—É–Ω–∫—Ü—ñ—ó

```sql
-- –ó–º—ñ–Ω–∏—Ç–∏ email –Ω–∞ lowercase
UPDATE Students
SET Email = LOWER(Email)
WHERE Email IS NOT NULL;

-- –î–æ–¥–∞—Ç–∏ –ø—Ä–µ—Ñ—ñ–∫—Å –¥–æ –ø—Ä—ñ–∑–≤–∏—â–∞
UPDATE Students
SET LastName = 'Ms. ' + LastName
WHERE FirstName LIKE '[–ê–ï–ò–Ü–û–£–∞–µ–∏–æ—É]%';  -- –ü–æ—á–∏–Ω–∞—î—Ç—å—Å—è –∑ –≥–æ–ª–æ—Å–Ω–æ—ó
```

### –ü—Ä–∏–∫–ª–∞–¥ 3: –§—É–Ω–∫—Ü—ñ—ó –¥–∞—Ç

```sql
-- –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ –¥–∞—Ç—É —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó –Ω–∞ —Ä—ñ–∫ –Ω–∞–∑–∞–¥ –≤—ñ–¥ –¥–Ω—è –Ω–∞—Ä–æ–¥–∂–µ–Ω–Ω—è
UPDATE Students
SET EnrollmentDate = DATEADD(YEAR, -1, BirthDate)
WHERE EnrollmentDate IS NULL;
```

---

## UPDATE –∑ CASE: –£–º–æ–≤–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è

**CASE** –¥–æ–∑–≤–æ–ª—è—î –∑–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏ —Ä—ñ–∑–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ —É–º–æ–≤–∏.

### –°–∏–Ω—Ç–∞–∫—Å–∏—Å

```sql
UPDATE table_name
SET column = CASE
    WHEN condition1 THEN value1
    WHEN condition2 THEN value2
    ELSE default_value
END
WHERE condition;
```

### –ü—Ä–∏–∫–ª–∞–¥ 1: –î–∏—Ñ–µ—Ä–µ–Ω—Ü—ñ–π–æ–≤–∞–Ω–µ –∑–±—ñ–ª—å—à–µ–Ω–Ω—è

```sql
-- –†—ñ–∑–Ω–µ –∑–±—ñ–ª—å—à–µ–Ω–Ω—è —Å—Ç–∏–ø–µ–Ω–¥—ñ—ó –∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ —Ä–æ–∫—É –Ω–∞—Ä–æ–¥–∂–µ–Ω–Ω—è
UPDATE Students
SET Grants = CASE
    WHEN YEAR(BirthDate) = 1997 THEN Grants * 1.15  -- +15%
    WHEN YEAR(BirthDate) = 1998 THEN Grants * 1.10  -- +10%
    WHEN YEAR(BirthDate) = 1999 THEN Grants * 1.05  -- +5%
    ELSE Grants  -- –ë–µ–∑ –∑–º—ñ–Ω
END
WHERE Grants IS NOT NULL;
```

### –ü—Ä–∏–∫–ª–∞–¥ 2: –ö–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü—ñ—è

```sql
-- –î–æ–¥–∞—î–º–æ —Å—Ç–æ–≤–ø–µ—Ü—å Category
ALTER TABLE Students ADD Category NVARCHAR(20);

-- –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ –∫–∞—Ç–µ–≥–æ—Ä—ñ—é –Ω–∞ –æ—Å–Ω–æ–≤—ñ —Å—Ç–∏–ø–µ–Ω–¥—ñ—ó
UPDATE Students
SET Category = CASE
    WHEN Grants >= 1700 THEN 'Excellent'
    WHEN Grants >= 1400 THEN 'Good'
    WHEN Grants >= 1200 THEN 'Average'
    ELSE 'No scholarship'
END;
```

---

## UPDATE –∑ JOIN: –û–Ω–æ–≤–ª–µ–Ω–Ω—è –∑ —ñ–Ω—à–æ—ó —Ç–∞–±–ª–∏—Ü—ñ

–ú–æ–∂–Ω–∞ –æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏ –¥–∞–Ω—ñ –Ω–∞ –æ—Å–Ω–æ–≤—ñ –∑–Ω–∞—á–µ–Ω—å –∑ **—ñ–Ω—à–æ—ó** —Ç–∞–±–ª–∏—Ü—ñ.

### –°–∏–Ω—Ç–∞–∫—Å–∏—Å

```sql
UPDATE t1
SET t1.column = t2.column
FROM table1 AS t1
INNER JOIN table2 AS t2 ON t1.key = t2.key
WHERE condition;
```

### –ü—Ä–∏–∫–ª–∞–¥

```sql
-- –ü—Ä–∏–ø—É—Å—Ç–∏–º–æ —î —Ç–∞–±–ª–∏—Ü—è DepartmentBudgets
CREATE TABLE DepartmentBudgets (
    DepartmentId INT PRIMARY KEY,
    ScholarshipIncrease DECIMAL(5, 2)  -- –í—ñ–¥—Å–æ—Ç–æ–∫ –∑–±—ñ–ª—å—à–µ–Ω–Ω—è
);

INSERT INTO DepartmentBudgets VALUES (1, 15.5), (2, 10.0);

-- –û–Ω–æ–≤–∏—Ç–∏ —Å—Ç–∏–ø–µ–Ω–¥—ñ—ó –Ω–∞ –æ—Å–Ω–æ–≤—ñ –±—é–¥–∂–µ—Ç—É –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç—É
UPDATE Students
SET Grants = Grants * (1 + db.ScholarshipIncrease / 100)
FROM Students AS s
INNER JOIN DepartmentBudgets AS db ON s.DepartmentId = db.DepartmentId
WHERE s.Grants IS NOT NULL;
```

---

## OUTPUT –≤ UPDATE

**OUTPUT** –¥–æ–∑–≤–æ–ª—è—î –ø–æ–±–∞—á–∏—Ç–∏, —è–∫—ñ –¥–∞–Ω—ñ –±—É–ª–∏ **–¥–æ** —Ç–∞ **–ø—ñ—Å–ª—è** –æ–Ω–æ–≤–ª–µ–Ω–Ω—è.

### –°–∏–Ω—Ç–∞–∫—Å–∏—Å

```sql
UPDATE table_name
SET column = value
OUTPUT
    DELETED.column AS OldValue,  -- –°—Ç–∞—Ä–µ –∑–Ω–∞—á–µ–Ω–Ω—è
    INSERTED.column AS NewValue  -- –ù–æ–≤–µ –∑–Ω–∞—á–µ–Ω–Ω—è
WHERE condition;
```

### –ü—Ä–∏–∫–ª–∞–¥ 1: –ü–æ–∫–∞–∑–∞—Ç–∏ –∑–º—ñ–Ω–∏

```sql
UPDATE Students
SET Grants = Grants * 1.1
OUTPUT
    INSERTED.Id,
    INSERTED.FirstName,
    DELETED.Grants AS OldGrants,
    INSERTED.Grants AS NewGrants
WHERE Id IN (1, 2, 3);

-- –†–µ–∑—É–ª—å—Ç–∞—Ç:
-- Id | FirstName | OldGrants | NewGrants
-- 1  | –Ü–≤–∞–Ω      | 1200.00   | 1320.00
-- 2  | –ú–∞—Ä—ñ—è     | 1500.00   | 1650.00
-- 3  | –î–º–∏—Ç—Ä–æ    | 1350.00   | 1485.00
```

### –ü—Ä–∏–∫–ª–∞–¥ 2: –ó–±–µ—Ä–µ–≥—Ç–∏ –ª–æ–≥ –∑–º—ñ–Ω

```sql
-- –¢–∞–±–ª–∏—Ü—è –¥–ª—è –ª–æ–≥—É–≤–∞–Ω–Ω—è
CREATE TABLE UpdateLog (
    LogId INT IDENTITY PRIMARY KEY,
    StudentId INT,
    OldGrants DECIMAL(10, 2),
    NewGrants DECIMAL(10, 2),
    UpdatedAt DATETIME DEFAULT GETDATE()
);

-- UPDATE –∑ –ª–æ–≥—É–≤–∞–Ω–Ω—è–º
UPDATE Students
SET Grants = Grants + 100
OUTPUT
    INSERTED.Id,
    DELETED.Grants,
    INSERTED.Grants,
    GETDATE()
INTO UpdateLog (StudentId, OldGrants, NewGrants, UpdatedAt)
WHERE Grants < 1500;

-- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ª–æ–≥
SELECT * FROM UpdateLog;
```

---

## DELETE: –í–∏–¥–∞–ª–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö

**DELETE** –≤–∏–¥–∞–ª—è—î —Ä—è–¥–∫–∏ –∑ —Ç–∞–±–ª–∏—Ü—ñ **–Ω–∞–∑–∞–≤–∂–¥–∏** (–±–µ–∑ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –±–µ–∑ backup).

### –ë–∞–∑–æ–≤–∏–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å

```sql
DELETE FROM table_name
WHERE condition;
```

::caution
**DELETE –ë–ï–ó WHERE** –≤–∏–¥–∞–ª–∏—Ç—å **–í–°–Ü** —Ä—è–¥–∫–∏!

```sql
DELETE FROM Students;  -- ‚ö†Ô∏è –í–∏–¥–∞–ª–∏—Ç—å –í–°–Ü–• —Å—Ç—É–¥–µ–Ω—Ç—ñ–≤!
```

::

### –ü—Ä–∏–∫–ª–∞–¥ 1: –í–∏–¥–∞–ª–µ–Ω–Ω—è –æ–¥–Ω–æ–≥–æ —Ä—è–¥–∫–∞

```sql
-- –í–∏–¥–∞–ª–∏—Ç–∏ —Å—Ç—É–¥–µ–Ω—Ç–∞ –∑ Id = 100
DELETE FROM Students
WHERE Id = 100;

-- –†–µ–∑—É–ª—å—Ç–∞—Ç: (1 row affected)
```

### –ü—Ä–∏–∫–ª–∞–¥ 2: –í–∏–¥–∞–ª–µ–Ω–Ω—è –∫—ñ–ª—å–∫–æ—Ö —Ä—è–¥–∫—ñ–≤

```sql
-- –í–∏–¥–∞–ª–∏—Ç–∏ —Å—Ç—É–¥–µ–Ω—Ç—ñ–≤ –±–µ–∑ email
DELETE FROM Students
WHERE Email IS NULL;

-- –†–µ–∑—É–ª—å—Ç–∞—Ç: (3 rows affected)
```

### –ü—Ä–∏–∫–ª–∞–¥ 3: –í–∏–¥–∞–ª–µ–Ω–Ω—è –∑ —É–º–æ–≤–æ—é

```sql
-- –í–∏–¥–∞–ª–∏—Ç–∏ —Å—Ç—É–¥–µ–Ω—Ç—ñ–≤ –Ω–∞—Ä–æ–¥–∂–µ–Ω–∏—Ö –ø—ñ—Å–ª—è 1999 —Ä–æ–∫—É –±–µ–∑ —Å—Ç–∏–ø–µ–Ω–¥—ñ—ó
DELETE FROM Students
WHERE YEAR(BirthDate) > 1999 AND Grants IS NULL;
```

---

## DELETE –∑ OUTPUT

–ü–æ–¥—ñ–±–Ω–æ –¥–æ UPDATE, –º–æ–∂–Ω–∞ –ø–æ–±–∞—á–∏—Ç–∏ –≤–∏–¥–∞–ª–µ–Ω—ñ –¥–∞–Ω—ñ.

### –ü—Ä–∏–∫–ª–∞–¥ 1: –ü–æ–∫–∞–∑–∞—Ç–∏ –≤–∏–¥–∞–ª–µ–Ω—ñ —Ä—è–¥–∫–∏

```sql
DELETE FROM Students
OUTPUT
    DELETED.Id,
    DELETED.FirstName,
    DELETED.LastName,
    DELETED.Email
WHERE Grants IS NULL AND Email IS NULL;

-- –†–µ–∑—É–ª—å—Ç–∞—Ç –ø–æ–∫–∞–∑—É—î –≤–∏–¥–∞–ª–µ–Ω–∏—Ö —Å—Ç—É–¥–µ–Ω—Ç—ñ–≤:
-- Id | FirstName | LastName | Email
-- 15 | –¢–µ—Å—Ç1     | –¢–µ—Å—Ç–æ–≤   | NULL
-- 16 | –¢–µ—Å—Ç2     | –¢–µ—Å—Ç–æ–≤–∞  | NULL
```

### –ü—Ä–∏–∫–ª–∞–¥ 2: –ê—Ä—Ö—ñ–≤—É–≤–∞–Ω–Ω—è –ø–µ—Ä–µ–¥ –≤–∏–¥–∞–ª–µ–Ω–Ω—è–º

```sql
-- –¢–∞–±–ª–∏—Ü—è –∞—Ä—Ö—ñ–≤—É
CREATE TABLE DeletedStudents (
    Id INT,
    FirstName NVARCHAR(50),
    LastName NVARCHAR(50),
    DeletedAt DATETIME DEFAULT GETDATE()
);

-- –í–∏–¥–∞–ª–µ–Ω–Ω—è –∑ –∞—Ä—Ö—ñ–≤—É–≤–∞–Ω–Ω—è–º
DELETE FROM Students
OUTPUT
    DELETED.Id,
    DELETED.FirstName,
    DELETED.LastName,
    GETDATE()
INTO DeletedStudents
WHERE YEAR(BirthDate) < 1995;

-- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∞—Ä—Ö—ñ–≤
SELECT * FROM DeletedStudents;
```

---

## DELETE –∑ JOIN

–í–∏–¥–∞–ª–µ–Ω–Ω—è –Ω–∞ –æ—Å–Ω–æ–≤—ñ –¥–∞–Ω–∏—Ö –∑ —ñ–Ω—à–æ—ó —Ç–∞–±–ª–∏—Ü—ñ.

### –°–∏–Ω—Ç–∞–∫—Å–∏—Å

```sql
DELETE t1
FROM table1 AS t1
INNER JOIN table2 AS t2 ON t1.key = t2.key
WHERE condition;
```

### –ü—Ä–∏–∫–ª–∞–¥

```sql
-- –í–∏–¥–∞–ª–∏—Ç–∏ —Å—Ç—É–¥–µ–Ω—Ç—ñ–≤ –∑ –Ω–µ–∞–∫—Ç–∏–≤–Ω–∏—Ö –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç—ñ–≤
DELETE s
FROM Students AS s
INNER JOIN Departments AS d ON s.DepartmentId = d.DepartmentId
WHERE d.IsActive = 0;
```

---

## TRUNCATE TABLE vs DELETE

–û–±–∏–¥–≤—ñ –∫–æ–º–∞–Ω–¥–∏ –≤–∏–¥–∞–ª—è—é—Ç—å –¥–∞–Ω—ñ, –∞–ª–µ –º–∞—é—Ç—å **–∑–Ω–∞—á–Ω—ñ –≤—ñ–¥–º—ñ–Ω–Ω–æ—Å—Ç—ñ**.

### –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞  | DELETE                                                  | TRUNCATE                                                              |
| :-------------- | :------------------------------------------------------ | :-------------------------------------------------------------------- |
| –°–∏–Ω—Ç–∞–∫—Å–∏—Å WHERE | :icon{name="i-lucide-check" class="text-green-500"} –¢–∞–∫ | :icon{name="i-lucide-x" class="text-red-500"} –ù—ñ (—Ç—ñ–ª—å–∫–∏ –≤—Å—è —Ç–∞–±–ª–∏—Ü—è) |
| –®–≤–∏–¥–∫—ñ—Å—Ç—å       | –ü–æ–≤—ñ–ª—å–Ω—ñ—à–µ                                              | :icon{name="i-lucide-zap" class="text-green-500"} –î—É–∂–µ —à–≤–∏–¥–∫–æ         |
| –õ–æ–≥—É–≤–∞–Ω–Ω—è       | –ö–æ–∂–µ–Ω —Ä—è–¥–æ–∫                                             | –ú—ñ–Ω—ñ–º–∞–ª—å–Ω–µ                                                            |
| IDENTITY reset  | –ù—ñ                                                      | :icon{name="i-lucide-check" class="text-green-500"} –¢–∞–∫               |
| Triggers        | –°–ø—Ä–∞—Ü—å–æ–≤—É—é—Ç—å                                            | –ù–ï —Å–ø—Ä–∞—Ü—å–æ–≤—É—é—Ç—å                                                       |
| Rollback        | –ú–æ–∂–ª–∏–≤–∏–π                                                | –û–±–º–µ–∂–µ–Ω–∏–π                                                             |
| –ó Foreign Keys  | –ú–æ–∂–ª–∏–≤–æ\*                                               | :icon{name="i-lucide-x" class="text-red-500"} –ü–æ–º–∏–ª–∫–∞                 |

_\* –Ø–∫—â–æ –Ω–µ–º–∞—î –ø–æ—Å–∏–ª–∞–Ω—å –∞–±–æ ON DELETE CASCADE_

### –ü—Ä–∏–∫–ª–∞–¥–∏

::code-group

```sql [DELETE (–∑ WHERE)]
-- –í–∏–¥–∞–ª–∏—Ç–∏ —Å—Ç–∞—Ä–∏—Ö —Å—Ç—É–¥–µ–Ω—Ç—ñ–≤
DELETE FROM Students
WHERE YEAR(BirthDate) < 1995;
```

```sql [DELETE (–≤—Å—ñ)]
-- –í–∏–¥–∞–ª–∏—Ç–∏ –≤—Å—ñ—Ö —Å—Ç—É–¥–µ–Ω—Ç—ñ–≤ (–ø–æ–≤—ñ–ª—å–Ω–æ)
DELETE FROM Students;
-- IDENTITY –ø—Ä–æ–¥–æ–≤–∂–∏—Ç—å: –±—É–≤ 100, –Ω–æ–≤–∏–π –±—É–¥–µ 101
```

```sql [TRUNCATE]
-- –û—á–∏—Å—Ç–∏—Ç–∏ —Ç–∞–±–ª–∏—Ü—é (—à–≤–∏–¥–∫–æ)
TRUNCATE TABLE Students;
-- IDENTITY —Å–∫–∏–Ω–µ—Ç—å—Å—è: –Ω–æ–≤–∏–π –±—É–¥–µ 1
```

::

::tip
**–ö–æ–ª–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —â–æ**:

- **DELETE** ‚Äî –∫–æ–ª–∏ –ø–æ—Ç—Ä—ñ–±–µ–Ω WHERE, –∞–±–æ —Ç–∞–±–ª–∏—Ü—è –º–∞—î FK references
- **TRUNCATE** ‚Äî –¥–ª—è —à–≤–∏–¥–∫–æ–≥–æ –æ—á–∏—â–µ–Ω–Ω—è –≤—Å—î—ó —Ç–∞–±–ª–∏—Ü—ñ (—Ç–µ—Å—Ç–æ–≤—ñ –¥–∞–Ω—ñ, staging)
  ::

---

## –ë–µ–∑–ø–µ—á–Ω—ñ –ø—Ä–∞–∫—Ç–∏–∫–∏

### 1. –ó–ê–í–ñ–î–ò –ø–µ—Ä–µ–≤—ñ—Ä—è–π—Ç–µ WHERE –∑ SELECT

**–ó–æ–ª–æ—Ç–µ –ø—Ä–∞–≤–∏–ª–æ**: –ü–µ—Ä–µ–¥ UPDATE/DELETE —Å–ø–æ—á–∞—Ç–∫—É –≤–∏–∫–æ–Ω–∞–π—Ç–µ SELECT!

```sql
-- ‚ùå –ù–ï–ë–ï–ó–ü–ï–ß–ù–û - –æ–¥—Ä–∞–∑—É UPDATE
UPDATE Students SET Grants = 2000 WHERE LastName = '–ü–µ—Ç—Ä–µ–Ω–∫–æ';

-- ‚úÖ –ë–ï–ó–ü–ï–ß–ù–û - —Å–ø–æ—á–∞—Ç–∫—É SELECT
SELECT * FROM Students WHERE LastName = '–ü–µ—Ç—Ä–µ–Ω–∫–æ';
-- –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ: —Ç–∞–∫, —Ü–µ —Ç–æ–π —Å—Ç—É–¥–µ–Ω—Ç
UPDATE Students SET Grants = 2000 WHERE LastName = '–ü–µ—Ç—Ä–µ–Ω–∫–æ';
```

### 2. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó

```sql
BEGIN TRANSACTION;

UPDATE Students SET Grants = Grants * 1.5 WHERE Id = 1;

-- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∑–º—ñ–Ω–∏
SELECT * FROM Students WHERE Id = 1;

-- –Ø–∫—â–æ –≤—Å–µ –¥–æ–±—Ä–µ:
COMMIT;

-- –Ø–∫—â–æ –ø–æ–º–∏–ª–∫–∞:
-- ROLLBACK;
```

### 3. –ü–µ—Ä–µ–≤—ñ—Ä—è–π—Ç–µ @@ROWCOUNT

```sql
UPDATE Students
SET Email = 'newemail@example.com'
WHERE Id = 999;

IF @@ROWCOUNT = 0
BEGIN
    PRINT '–ñ–æ–¥–µ–Ω —Ä—è–¥–æ–∫ –Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–æ - —Å—Ç—É–¥–µ–Ω—Ç –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–∏–π!';
END
ELSE
BEGIN
    PRINT CAST(@@ROWCOUNT AS NVARCHAR) + ' —Ä—è–¥–∫—ñ–≤ –æ–Ω–æ–≤–ª–µ–Ω–æ';
END
```

### 4. Backup –ø–µ—Ä–µ–¥ –º–∞—Å–æ–≤–∏–º–∏ –∑–º—ñ–Ω–∞–º–∏

```sql
-- –°—Ç–≤–æ—Ä–∏—Ç–∏ backup —Ç–∞–±–ª–∏—Ü—ñ
SELECT * INTO Students_Backup_20240207 FROM Students;

-- –¢–µ–ø–µ—Ä –º–æ–∂–Ω–∞ –±–µ–∑–ø–µ—á–Ω–æ —Ä–æ–±–∏—Ç–∏ UPDATE/DELETE
UPDATE Students SET Grants = Grants * 1.2;

-- –Ø–∫—â–æ —â–æ—Å—å –ø—ñ—à–ª–æ –Ω–µ —Ç–∞–∫:
-- DELETE FROM Students;
-- INSERT INTO Students SELECT * FROM Students_Backup_20240207;
```

---

## –ü—Ä–∞–∫—Ç–∏—á–Ω—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—ó

### –°—Ü–µ–Ω–∞—Ä—ñ–π 1: –ú–∞—Å–æ–≤–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∑ –ø–µ—Ä–µ–≤—ñ—Ä–∫–æ—é

```sql
BEGIN TRANSACTION;

-- –û–Ω–æ–≤–∏—Ç–∏ email –¥–æ–º–µ–Ω –¥–ª—è –≤—Å—ñ—Ö
UPDATE Students
SET Email = REPLACE(Email, '@example.com', '@university.edu')
OUTPUT
    INSERTED.Id,
    DELETED.Email AS OldEmail,
    INSERTED.Email AS NewEmail
WHERE Email LIKE '%@example.com';

-- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏
SELECT COUNT(*) AS UpdatedCount
FROM Students
WHERE Email LIKE '%@university.edu';

COMMIT;
```

### –°—Ü–µ–Ω–∞—Ä—ñ–π 2: Soft Delete (–º'—è–∫–µ –≤–∏–¥–∞–ª–µ–Ω–Ω—è)

–ó–∞–º—ñ—Å—Ç—å —Ñ—ñ–∑–∏—á–Ω–æ–≥–æ –≤–∏–¥–∞–ª–µ–Ω–Ω—è - –ø–æ–∑–Ω–∞—á–∏—Ç–∏ —è–∫ –≤–∏–¥–∞–ª–µ–Ω–∏–π:

```sql
-- –î–æ–¥–∞—Ç–∏ —Å—Ç–æ–≤–ø–µ—Ü—å
ALTER TABLE Students ADD IsDeleted BIT DEFAULT 0;

-- "–í–∏–¥–∞–ª–∏—Ç–∏" —Å—Ç—É–¥–µ–Ω—Ç–∞ (–Ω–∞—Å–ø—Ä–∞–≤–¥—ñ –ø—Ä–æ—Å—Ç–æ –ø–æ–∑–Ω–∞—á–∏—Ç–∏)
UPDATE Students
SET IsDeleted = 1, DeletedAt = GETDATE()
WHERE Id = 100;

-- –ü—Ä–∏ SELECT —ñ–≥–Ω–æ—Ä—É–≤–∞—Ç–∏ "–≤–∏–¥–∞–ª–µ–Ω–∏—Ö"
SELECT * FROM Students WHERE IsDeleted = 0;
```

### –°—Ü–µ–Ω–∞—Ä—ñ–π 3: –ö–∞—Å–∫–∞–¥–Ω–µ –≤–∏–¥–∞–ª–µ–Ω–Ω—è –≤—Ä—É—á–Ω—É

```sql
BEGIN TRANSACTION;

-- –°–ø–æ—á–∞—Ç–∫—É –≤–∏–¥–∞–ª–∏—Ç–∏ –∑–∞–ª–µ–∂–Ω—ñ –∑–∞–ø–∏—Å–∏
DELETE FROM Enrollments WHERE StudentId = 100;

-- –ü–æ—Ç—ñ–º —Å–∞–º–æ–≥–æ —Å—Ç—É–¥–µ–Ω—Ç–∞
DELETE FROM Students WHERE Id = 100;

COMMIT;
```

---

## –ü—Ä–∞–∫—Ç–∏—á–Ω—ñ –∑–∞–≤–¥–∞–Ω–Ω—è

::accordion

::accordion-item{label="–ó–∞–≤–¥–∞–Ω–Ω—è 1: –ë–∞–∑–æ–≤–∏–π UPDATE" icon="i-lucide-edit"}

–ó–±—ñ–ª—å—à—ñ—Ç—å —Å—Ç–∏–ø–µ–Ω–¥—ñ—é –Ω–∞ 15% –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç—ñ–≤ –∑ –ø—Ä—ñ–∑–≤–∏—â–µ–º "–ü–µ—Ç—Ä–µ–Ω–∫–æ".

<details>
<summary>üí° –†–æ–∑–≤'—è–∑–æ–∫</summary>

```sql
-- –°–ø–æ—á–∞—Ç–∫—É –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞
SELECT * FROM Students WHERE LastName = '–ü–µ—Ç—Ä–µ–Ω–∫–æ';

-- UPDATE
UPDATE Students
SET Grants = Grants * 1.15
WHERE LastName = '–ü–µ—Ç—Ä–µ–Ω–∫–æ';

-- –ü–æ–≤—Ç–æ—Ä–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞
SELECT * FROM Students WHERE LastName = '–ü–µ—Ç—Ä–µ–Ω–∫–æ';
```

</details>

::

::accordion-item{label="–ó–∞–≤–¥–∞–Ω–Ω—è 2: UPDATE –∑ CASE" icon="i-lucide-git-branch"}

–í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∫–∞—Ç–µ–≥–æ—Ä—ñ—é —Å—Ç—É–¥–µ–Ω—Ç—ñ–≤:

- 'Top' —è–∫—â–æ —Å—Ç–∏–ø–µ–Ω–¥—ñ—è >= 1600
- 'Medium' —è–∫—â–æ >= 1300
- 'Low' —ñ–Ω–∞–∫—à–µ

<details>
<summary>üí° –†–æ–∑–≤'—è–∑–æ–∫</summary>

```sql
-- –î–æ–¥–∞—Ç–∏ —Å—Ç–æ–≤–ø–µ—Ü—å
ALTER TABLE Students ADD Category NVARCHAR(20);

-- –û–Ω–æ–≤–∏—Ç–∏ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó
UPDATE Students
SET Category = CASE
    WHEN Grants >= 1600 THEN 'Top'
    WHEN Grants >= 1300 THEN 'Medium'
    ELSE 'Low'
END;

-- –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞
SELECT FirstName, LastName, Grants, Category FROM Students;
```

</details>

::

::accordion-item{label="–ó–∞–≤–¥–∞–Ω–Ω—è 3: DELETE –∑ —É–º–æ–≤–æ—é" icon="i-lucide-trash-2"}

–í–∏–¥–∞–ª—ñ—Ç—å —Å—Ç—É–¥–µ–Ω—Ç—ñ–≤ –±–µ–∑ email —Ç–∞ –±–µ–∑ —Å—Ç–∏–ø–µ–Ω–¥—ñ—ó, –∞–ª–µ —Å–ø–æ—á–∞—Ç–∫—É –∑–±–µ—Ä–µ–∂—ñ—Ç—å —ó—Ö –≤ –∞—Ä—Ö—ñ–≤–Ω—É —Ç–∞–±–ª–∏—Ü—é.

<details>
<summary>üí° –†–æ–∑–≤'—è–∑–æ–∫</summary>

```sql
-- –°—Ç–≤–æ—Ä–∏—Ç–∏ –∞—Ä—Ö—ñ–≤
CREATE TABLE StudentsArchive (
    Id INT,
    FirstName NVARCHAR(50),
    LastName NVARCHAR(50),
    ArchivedAt DATETIME
);

-- –í–∏–¥–∞–ª–∏—Ç–∏ –∑ –∞—Ä—Ö—ñ–≤—É–≤–∞–Ω–Ω—è–º
DELETE FROM Students
OUTPUT
    DELETED.Id,
    DELETED.FirstName,
    DELETED.LastName,
    GETDATE()
INTO StudentsArchive
WHERE Email IS NULL AND Grants IS NULL;

-- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∞—Ä—Ö—ñ–≤
SELECT * FROM StudentsArchive;
```

</details>

::

::accordion-item{label="–ó–∞–≤–¥–∞–Ω–Ω—è 4: UPDATE –∑ OUTPUT" icon="i-lucide-eye"}

–ü–æ–¥–≤–æ–π—Ç–µ —Å—Ç–∏–ø–µ–Ω–¥—ñ—é –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç—ñ–≤ –Ω–∞—Ä–æ–¥–∂–µ–Ω–∏—Ö –≤ 1998, –ø–æ–∫–∞–∂—ñ—Ç—å —Å—Ç–∞—Ä—ñ —Ç–∞ –Ω–æ–≤—ñ –∑–Ω–∞—á–µ–Ω–Ω—è.

<details>
<summary>üí° –†–æ–∑–≤'—è–∑–æ–∫</summary>

```sql
UPDATE Students
SET Grants = Grants * 2
OUTPUT
    INSERTED.Id,
    INSERTED.FirstName,
    INSERTED.LastName,
    DELETED.Grants AS OldGrants,
    INSERTED.Grants AS NewGrants,
    INSERTED.Grants - DELETED.Grants AS Increase
WHERE YEAR(BirthDate) = 1998 AND Grants IS NOT NULL;
```

</details>

::

::

---

## –†–µ–∑—é–º–µ

::tip
**–ö–ª—é—á–æ–≤—ñ –º–æ–º–µ–Ω—Ç–∏ UPDATE —Ç–∞ DELETE**:

1. **UPDATE —Å–∏–Ω—Ç–∞–∫—Å–∏—Å**: `UPDATE table SET col=val WHERE condition`
2. **DELETE —Å–∏–Ω—Ç–∞–∫—Å–∏—Å**: `DELETE FROM table WHERE condition`
3. **–ó–ê–í–ñ–î–ò –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ WHERE** (—ñ–Ω–∞–∫—à–µ –∑–º—ñ–Ω—è—Ç—å—Å—è/–≤–∏–¥–∞–ª—è—Ç—å—Å—è –í–°–Ü —Ä—è–¥–∫–∏!)
4. **–°–ø–æ—á–∞—Ç–∫—É SELECT** ‚Äî –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ WHERE –ø–µ—Ä–µ–¥ UPDATE/DELETE
5. **OUTPUT clause** ‚Äî –ø–æ–∫–∞–∑—É—î —Å—Ç–∞—Ä—ñ (DELETED) —Ç–∞ –Ω–æ–≤—ñ (INSERTED) –∑–Ω–∞—á–µ–Ω–Ω—è
6. **@@ROWCOUNT** ‚Äî –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∑–º—ñ–Ω–µ–Ω–∏—Ö/–≤–∏–¥–∞–ª–µ–Ω–∏—Ö —Ä—è–¥–∫—ñ–≤
7. **CASE –≤ UPDATE** ‚Äî —É–º–æ–≤–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
8. **JOIN –≤ UPDATE/DELETE** ‚Äî –æ–Ω–æ–≤–ª–µ–Ω–Ω—è/–≤–∏–¥–∞–ª–µ–Ω–Ω—è –Ω–∞ –æ—Å–Ω–æ–≤—ñ —ñ–Ω—à–∏—Ö —Ç–∞–±–ª–∏—Ü—å
9. **TRUNCATE vs DELETE** ‚Äî TRUNCATE —à–≤–∏–¥—à–∏–π, –∞–ª–µ –±–µ–∑ WHERE
10. **–¢—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó** ‚Äî –¥–ª—è –±–µ–∑–ø–µ—á–Ω–∏—Ö –º–∞—Å–æ–≤–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π
11. **Soft Delete** ‚Äî –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ —Ñ—ñ–∑–∏—á–Ω–æ–º—É –≤–∏–¥–∞–ª–µ–Ω–Ω—é

**–ù–∞—Å—Ç—É–ø–Ω–∏–π –∫—Ä–æ–∫**: –í–∏–≤—á—ñ—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó –¥–ª—è –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è —Ü—ñ–ª—ñ—Å–Ω–æ—Å—Ç—ñ –¥–∞–Ω–∏—Ö.
::

---

**–ü–æ–≤'—è–∑–∞–Ω—ñ —Ç–µ–º–∏**:

- [–ü–æ–ø–µ—Ä–µ–¥–Ω—è: INSERT –∑–∞–ø–∏—Ç–∏](./05.insert-queries.md)
- [–ù–∞—Å—Ç—É–ø–Ω–∞: –¢—Ä–∞–Ω–∑–∞–∫—Ü—ñ—ó](./07.transactions.md)
- [SELECT –∑–∞–ø–∏—Ç–∏ - –û—Å–Ω–æ–≤–∏](./03.select-queries-fundamentals.md)
- [ALTER TABLE](./02.ddl-alter-drop-table.md)
