---
title: '–û–±—Ä–æ–±–∫–∞ –í–∏–Ω—è—Ç–∫—ñ–≤'
description: '–ì–ª–∏–±–æ–∫–µ —Ä–æ–∑—É–º—ñ–Ω–Ω—è –º–µ—Ö–∞–Ω—ñ–∑–º—ñ–≤ –æ–±—Ä–æ–±–∫–∏ –≤–∏–Ω—è—Ç–∫—ñ–≤ —É C# ‚Äî –≤—ñ–¥ –±–∞–∑–æ–≤–∏—Ö –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ–π –¥–æ –ø—Ä–æ—Ñ–µ—Å—ñ–π–Ω–∏—Ö –ø—Ä–∞–∫—Ç–∏–∫ –Ω–∞–ø–∏—Å–∞–Ω–Ω—è –Ω–∞–¥—ñ–π–Ω–æ–≥–æ –∫–æ–¥—É'
---

# –û–±—Ä–æ–±–∫–∞ –í–∏–Ω—è—Ç–∫—ñ–≤

## –í—Å—Ç—É–ø —Ç–∞ –ö–æ–Ω—Ç–µ–∫—Å—Ç

–£—è–≤—ñ—Ç—å, —â–æ –≤–∏ —Å—Ç–≤–æ—Ä—é—î—Ç–µ —Å–∏—Å—Ç–µ–º—É –æ–±—Ä–æ–±–∫–∏ –±–∞–Ω–∫—ñ–≤—Å—å–∫–∏—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü—ñ–π. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–≤–æ–¥–∏—Ç—å —Å—É–º—É –ø–µ—Ä–µ–∫–∞–∑—É, –Ω–∞—Ç–∏—Å–∫–∞—î "–ü—ñ–¥—Ç–≤–µ—Ä–¥–∏—Ç–∏", —ñ —Ä–∞–ø—Ç–æ–º... –±–∞–∑–∞ –¥–∞–Ω–∏—Ö –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞. –ê–±–æ —Ñ–∞–π–ª –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó –ø–æ—à–∫–æ–¥–∂–µ–Ω–∏–π. –ê–±–æ —Å—É–º–∞ –ø–µ—Ä–µ–≤–∏—â—É—î –¥–æ—Å—Ç—É–ø–Ω–∏–π –±–∞–ª–∞–Ω—Å. –Ø–∫ –≤–∞—à–∞ –ø—Ä–æ–≥—Ä–∞–º–∞ –º–∞—î –≤—ñ–¥—Ä–µ–∞–≥—É–≤–∞—Ç–∏ –Ω–∞ —Ü—ñ —Å–∏—Ç—É–∞—Ü—ñ—ó?

::note
**–ü—Ä–æ–±–ª–µ–º–∞**: –£ —Ä–∞–Ω–Ω—ñ—Ö –º–æ–≤–∞—Ö –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è (C, Pascal) –ø–æ–º–∏–ª–∫–∏ –æ–±—Ä–æ–±–ª—è–ª–∏ —á–µ—Ä–µ–∑ –∫–æ–¥–∏ –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è. –ö–æ–∂–µ–Ω –≤–∏–∫–ª–∏–∫ —Ñ—É–Ω–∫—Ü—ñ—ó –ø–æ—Ç—Ä—ñ–±–Ω–æ –±—É–ª–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—Ç–∏ –≤—Ä—É—á–Ω—É. –¶–µ –ø—Ä–∏–∑–≤–æ–¥–∏–ª–æ –¥–æ –≥—Ä–æ–º—ñ–∑–¥–∫–æ–≥–æ, –≤–∞–∂–∫–æ—á–∏—Ç–∞–±–µ–ª—å–Ω–æ–≥–æ –∫–æ–¥—É, –¥–µ –ª–æ–≥—ñ–∫–∞ –±—ñ–∑–Ω–µ—Å—É –∑–º—ñ—à—É–≤–∞–ª–∞—Å—è –∑ –ø–µ—Ä–µ–≤—ñ—Ä–∫–æ—é –ø–æ–º–∏–ª–æ–∫.
::

**–í–∏–Ω—è—Ç–∫–∏ (Exceptions)** –≤–∏—Ä—ñ—à—É—é—Ç—å —Ü—é –ø—Ä–æ–±–ª–µ–º—É –µ–ª–µ–≥–∞–Ω—Ç–Ω–æ. –í–æ–Ω–∏ –¥–æ–∑–≤–æ–ª—è—é—Ç—å **–≤—ñ–¥–æ–∫—Ä–µ–º–∏—Ç–∏** –Ω–æ—Ä–º–∞–ª—å–Ω—É –ª–æ–≥—ñ–∫—É –ø—Ä–æ–≥—Ä–∞–º–∏ –≤—ñ–¥ –∫–æ–¥—É –æ–±—Ä–æ–±–∫–∏ –ø–æ–º–∏–ª–æ–∫, –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø–µ—Ä–µ–¥–∞—é—Ç—å —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –ø–æ–º–∏–ª–∫—É –≤–≥–æ—Ä—É –ø–æ —Å—Ç–µ–∫—É –≤–∏–∫–ª–∏–∫—ñ–≤ —ñ –≥–∞—Ä–∞–Ω—Ç—É—é—Ç—å, —â–æ –∫—Ä–∏—Ç–∏—á–Ω—ñ —Ä–µ—Å—É—Ä—Å–∏ –±—É–¥—É—Ç—å –∑–≤—ñ–ª—å–Ω–µ–Ω—ñ –Ω–∞–≤—ñ—Ç—å —É –≤–∏–ø–∞–¥–∫—É –∑–±–æ—é.

### –ï–≤–æ–ª—é—Ü—ñ—è –û–±—Ä–æ–±–∫–∏ –ü–æ–º–∏–ª–æ–∫

::mermaid

```mermaid
graph LR
    A[Error Codes ‚ùå –ì—Ä–æ–º—ñ–∑–¥–∫–æ] -->|–ü—Ä–æ–±–ª–µ–º–∞: –ª–µ–≥–∫–æ –∑–∞–±—É—Ç–∏ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏| B[Assertions ‚ùå –¢—ñ–ª—å–∫–∏ –¥–ª—è debug]
    B -->|–ü–æ—Ç—Ä—ñ–±–µ–Ω runtime –º–µ—Ö–∞–Ω—ñ–∑–º| C[–í–∏–Ω—è—Ç–∫–∏ ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω—ñ]
    C -->|–†–æ–∑–≤–∏—Ç–æ–∫| D[Exception Filters ‚úÖ when clause]
    D -->|–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞| E[Result Pattern ‚úÖ –ë–µ–∑ overhead]

    style A fill:#64748b,stroke:#334155,color:#ffffff
    style B fill:#64748b,stroke:#334155,color:#ffffff
    style C fill:#3b82f6,stroke:#1d4ed8,color:#ffffff
    style D fill:#f59e0b,stroke:#b45309,color:#ffffff
    style E fill:#3b82f6,stroke:#1d4ed8,color:#ffffff
```

::

### –ü–µ—Ä–µ–¥—É–º–æ–≤–∏

–ü–µ—Ä–µ–¥ –≤–∏–≤—á–µ–Ω–Ω—è–º —Ü—ñ—î—ó —Ç–µ–º–∏ –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ —Ä–æ–∑—É–º—ñ—Ç–∏:

-   –ú–µ—Ç–æ–¥–∏ —Ç–∞ —ó—Ö –≤–∏–∫–ª–∏–∫–∏
-   –ü–æ–Ω—è—Ç—Ç—è —Å—Ç–µ–∫—É –≤–∏–∫–ª–∏–∫—ñ–≤ (call stack)
-   –ë–∞–∑–æ–≤—ñ –∫–æ–Ω—Ü–µ–ø—Ü—ñ—ó –û–û–ü (–∫–ª–∞—Å–∏, –Ω–∞—Å–ª—ñ–¥—É–≤–∞–Ω–Ω—è)
-   [–Ü–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∏](./3.interfaces-deep-dive.md) (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è —Ä–æ–∑—É–º—ñ–Ω–Ω—è `IDisposable`)

## –§—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ñ –ö–æ–Ω—Ü–µ–ø—Ü—ñ—ó

### –©–æ —Ç–∞–∫–µ –í–∏–Ω—è—Ç–æ–∫?

[**–í–∏–Ω—è—Ç–æ–∫** (Exception)](https://learn.microsoft.com/en-us/dotnet/csharp/fundamentals/exceptions/) ‚Äî —Ü–µ –æ–±'—î–∫—Ç, —â–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—î –ø–æ–º–∏–ª–∫—É –∞–±–æ –≤–∏–Ω—è—Ç–∫–æ–≤—É —Å–∏—Ç—É–∞—Ü—ñ—é, —è–∫–∞ –≤–∏–Ω–∏–∫–∞—î –ø—ñ–¥ —á–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –ø—Ä–æ–≥—Ä–∞–º–∏. –ö–æ–ª–∏ –≤–∏–Ω–∏–∫–∞—î –≤–∏–Ω—è—Ç–æ–∫, –Ω–æ—Ä–º–∞–ª—å–Ω–∏–π –ø–æ—Ç—ñ–∫ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –ø—Ä–æ–≥—Ä–∞–º–∏ **–ø–µ—Ä–µ—Ä–∏–≤–∞—î—Ç—å—Å —è**, —ñ —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø–µ—Ä–µ–¥–∞—î—Ç—å—Å—è –¥–æ –Ω–∞–π–±–ª–∏–∂—á–æ–≥–æ –æ–±—Ä–æ–±–Ω–∏–∫–∞ –≤–∏–Ω—è—Ç–∫—ñ–≤ (exception handler).

**–¢–µ–æ—Ä—ñ—è: –í–∏–Ω—è—Ç–∫–∏ vs –ü–æ–º–∏–ª–∫–∏ –õ–æ–≥—ñ–∫–∏**

–í–∞–∂–ª–∏–≤–æ —Ä–æ–∑—É–º—ñ—Ç–∏ —Ä—ñ–∑–Ω–∏—Ü—é –º—ñ–∂ **–≤–∏–Ω—è—Ç–∫–∞–º–∏** —Ç–∞ **–ø–æ–º–∏–ª–∫–∞–º–∏ –ª–æ–≥—ñ–∫–∏**:

-   **–í–∏–Ω—è—Ç–∫–∏** (Exceptions) ‚Äî —Ü–µ **–Ω–µ—Å–ø–æ–¥—ñ–≤–∞–Ω—ñ —Å–∏—Ç—É–∞—Ü—ñ—ó**, —è–∫—ñ –ø—Ä–æ–≥—Ä–∞–º–∞ –º–æ–∂–µ —Å–ø—Ä–æ–±—É–≤–∞—Ç–∏ –æ–±—Ä–æ–±–∏—Ç–∏: –≤—ñ–¥—Å—É—Ç–Ω—ñ–π —Ñ–∞–π–ª, –ø—Ä–æ–±–ª–µ–º–∏ –∑ –º–µ—Ä–µ–∂–µ—é, –Ω–µ–≤–∞–ª—ñ–¥–Ω–∏–π –≤–≤—ñ–¥ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞.
-   **–ü–æ–º–∏–ª–∫–∏ –ª–æ–≥—ñ–∫–∏** (Bugs) ‚Äî —Ü–µ **–¥–µ—Ñ–µ–∫—Ç–∏ –≤ –∫–æ–¥—ñ**: –∑–≤–µ—Ä–Ω–µ–Ω–Ω—è –¥–æ `null` –ø–æ—Å–∏–ª–∞–Ω–Ω—è —á–µ—Ä–µ–∑ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—É –ª–æ–≥—ñ–∫—É, –≤–∏—Ö—ñ–¥ –∑–∞ –º–µ–∂—ñ –º–∞—Å–∏–≤—É —á–µ—Ä–µ–∑ –Ω–µ–∫–æ—Ä–µ–∫—Ç–Ω–∏–π —ñ–Ω–¥–µ–∫—Å. –¶–µ –º–∞—î –±—É—Ç–∏ –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–æ –Ω–∞ –µ—Ç–∞–ø—ñ —Ä–æ–∑—Ä–æ–±–∫–∏, –∞ –Ω–µ –æ–±—Ä–æ–±–ª–µ–Ω–æ –≤ runtime.

### –Ü—î—Ä–∞—Ä—Ö—ñ—è –í–∏–Ω—è—Ç–∫—ñ–≤

–£—Å—ñ –≤–∏–Ω—è—Ç–∫–∏ –≤ .NET —É—Å–ø–∞–¥–∫–æ–≤—É—é—Ç—å—Å—è –≤—ñ–¥ –±–∞–∑–æ–≤–æ–≥–æ –∫–ª–∞—Å—É [`System.Exception`](https://learn.microsoft.com/en-us/dotnet/api/system.exception):

::mermaid

```mermaid
classDiagram
    Exception <|-- SystemException
    Exception <|-- ApplicationException

    SystemException <|-- ArgumentException
    SystemException <|-- InvalidOperationException
    SystemException <|-- NullReferenceException
    SystemException <|-- IndexOutOfRangeException
    SystemException <|-- DivideByZeroException
    SystemException <|-- IOException

    ArgumentException <|-- ArgumentNullException
    ArgumentException <|-- ArgumentOutOfRangeException

    IOException <|-- FileNotFoundException
    IOException <|-- DirectoryNotFoundException

    class Exception {
        +string Message
        +string StackTrace
        +Exception InnerException
        +string Source
        +GetBaseException()
    }

    class SystemException {
        ¬´CLR generated¬ª
    }

    class ApplicationException {
        ¬´User defined¬ª
    }

    style Exception fill:#3b82f6,stroke:#1d4ed8,color:#ffffff
    style SystemException fill:#64748b,stroke:#334155,color:#ffffff
    style ApplicationException fill:#f59e0b,stroke:#b45309,color:#ffffff
```

::

**–ö–ª—é—á–æ–≤—ñ —Ç–∏–ø–∏ –≤–∏–Ω—è—Ç–∫—ñ–≤:**

| –¢–∏–ø                           | –ö–æ–ª–∏ –≤–∏–Ω–∏–∫–∞—î                                      | –ü—Ä–∏–∫–ª–∞–¥                              |
| :---------------------------- | :------------------------------------------------ | :----------------------------------- |
| `ArgumentNullException`       | –ü–∞—Ä–∞–º–µ—Ç—Ä –º–µ—Ç–æ–¥—É —î `null`, –∞ –º–µ—Ç–æ–¥ –æ—á—ñ–∫—É—î –∑–Ω–∞—á–µ–Ω–Ω—è | –ü–µ—Ä–µ–¥–∞—á–∞ `null` —É `string.Format`    |
| `ArgumentOutOfRangeException` | –ê—Ä–≥—É–º–µ–Ω—Ç –ø–æ–∑–∞ –¥–æ–ø—É—Å—Ç–∏–º–∏–º –¥—ñ–∞–ø–∞–∑–æ–Ω–æ–º               | –í—ñ–¥'—î–º–Ω–∏–π —ñ–Ω–¥–µ–∫—Å –º–∞—Å–∏–≤—É              |
| `InvalidOperationException`   | –û–ø–µ—Ä–∞—Ü—ñ—è –Ω–µ–¥—ñ–π—Å–Ω–∞ –≤ –ø–æ—Ç–æ—á–Ω–æ–º—É —Å—Ç–∞–Ω—ñ –æ–±'—î–∫—Ç–∞       | –ß–∏—Ç–∞–Ω–Ω—è –∑ –∑–∞–∫—Ä–∏—Ç–æ–≥–æ `Stream`         |
| `NullReferenceException`      | –°–ø—Ä–æ–±–∞ –¥–æ—Å—Ç—É–ø—É –¥–æ —á–ª–µ–Ω–∞ `null` –ø–æ—Å–∏–ª–∞–Ω–Ω—è          | `string s = null; s.Length;`         |
| `IndexOutOfRangeException`    | –Ü–Ω–¥–µ–∫—Å –º–∞—Å–∏–≤—É –∑–∞ –º–µ–∂–∞–º–∏                           | `arr[100]` –¥–ª—è –º–∞—Å–∏–≤—É –∑ 10 –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ |
| `DivideByZeroException`       | –î—ñ–ª–µ–Ω–Ω—è –Ω–∞ –Ω—É–ª—å (—Ç—ñ–ª—å–∫–∏ –¥–ª—è —Ü—ñ–ª–∏—Ö —á–∏—Å–µ–ª)          | `int x = 5 / 0;`                     |
| `FileNotFoundException`       | –§–∞–π–ª –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ                                  | `File.ReadAllText("missing.txt")`    |
| `IOException`                 | –ü–æ–º–∏–ª–∫–∞ –≤–≤–µ–¥–µ–Ω–Ω—è-–≤–∏–≤–µ–¥–µ–Ω–Ω—è                        | –ù–µ–º–∞—î –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø—É –¥–æ —Ñ–∞–π–ª—É          |

### –ê–Ω–∞—Ç–æ–º—ñ—è –í–∏–Ω—è—Ç–∫—É

–ö–æ–∂–µ–Ω –æ–±'—î–∫—Ç –≤–∏–Ω—è—Ç–∫—É –º—ñ—Å—Ç–∏—Ç—å –∫—Ä–∏—Ç–∏—á–Ω–æ –≤–∞–∂–ª–∏–≤—É –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏—á–Ω—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é:

```csharp [ExceptionAnatomy.cs] showLineNumbers
try
{
    int[] numbers = [1, 2, 3];
    Console.WriteLine(numbers[10]); // –í–∏—Ö—ñ–¥ –∑–∞ –º–µ–∂—ñ –º–∞—Å–∏–≤—É
}
catch (IndexOutOfRangeException ex)
{
    Console.WriteLine($"Message: {ex.Message}");
    Console.WriteLine($"StackTrace:\n{ex.StackTrace}");
    Console.WriteLine($"Source: {ex.Source}");
    Console.WriteLine($"TargetSite: {ex.TargetSite}");
}

/* –í–∏–≤—ñ–¥:
Message: Index was outside the bounds of the array.
StackTrace:
   at Program.<Main>$(String[] args) in Program.cs:line 4
Source: YourProgramName
TargetSite: Void <Main>$(System.String[])
*/
```

**–ö–ª—é—á–æ–≤—ñ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ:**

-   **`Message`**: –ó—Ä–æ–∑—É–º—ñ–ª–µ –ª—é–¥–∏–Ω—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –ø–æ–º–∏–ª–∫—É.
-   **`StackTrace`**: –ü–æ—Å–ª—ñ–¥–æ–≤–Ω—ñ—Å—Ç—å –≤–∏–∫–ª–∏–∫—ñ–≤ –º–µ—Ç–æ–¥—ñ–≤, —â–æ –ø—Ä–∏–∑–≤–µ–ª–∞ –¥–æ –ø–æ–º–∏–ª–∫–∏ (–∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è –Ω–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è).
-   **`InnerException`**: –í–∫–ª–∞–¥–µ–Ω–∏–π –≤–∏–Ω—è—Ç–æ–∫, —è–∫—â–æ –ø–æ—Ç–æ—á–Ω–∏–π –≤–∏–Ω—è—Ç–æ–∫ –±—É–≤ –≤–∏–∫–ª–∏–∫–∞–Ω–∏–π —ñ–Ω—à–∏–º.
-   **`Source`**: –Ü–º'—è –¥–æ–¥–∞—Ç–∫—É –∞–±–æ –æ–±'—î–∫—Ç–∞, —â–æ –≤–∏–∫–ª–∏–∫–∞–≤ –≤–∏–Ω—è—Ç–æ–∫.
-   **`TargetSite`**: –ú–µ—Ç–æ–¥, —â–æ –≤–∏–∫–∏–Ω—É–≤ –≤–∏–Ω—è—Ç–æ–∫.

## Try-Catch-Finally

–û—Å–Ω–æ–≤–Ω–∞ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –¥–ª—è –æ–±—Ä–æ–±–∫–∏ –≤–∏–Ω—è—Ç–∫—ñ–≤ —Å–∫–ª–∞–¥–∞—î—Ç—å—Å—è –∑ —Ç—Ä—å–æ—Ö –±–ª–æ–∫—ñ–≤: `try`, `catch` —Ç–∞ `finally`.

### –ë–∞–∑–æ–≤–∏–π –°–∏–Ω—Ç–∞–∫—Å–∏—Å

```csharp [TryCatchBasic.cs] showLineNumbers
try
{
    // –ö–æ–¥, —è–∫–∏–π –º–æ–∂–µ –≤–∏–∫–∏–Ω—É—Ç–∏ –≤–∏–Ω—è—Ç–æ–∫
    int result = 10 / 0;
}
catch (DivideByZeroException ex)
{
    // –û–±—Ä–æ–±–∫–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ç–∏–ø—É –≤–∏–Ω—è—Ç–∫—É
    Console.WriteLine($"–ü–æ–º–∏–ª–∫–∞: {ex.Message}");
}
finally
{
    // –ö–æ–¥, —è–∫–∏–π –≤–∏–∫–æ–Ω–∞—î—Ç—å—Å—è –∑–∞–≤–∂–¥–∏ (–Ω–∞–≤—ñ—Ç—å —è–∫—â–æ –≤–∏–Ω—è—Ç–æ–∫ –Ω–µ –±—É–ª–æ)
    Console.WriteLine("–û—á–∏—â–µ–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—ñ–≤...");
}
```

**–Ø–∫ —Ü–µ –ø—Ä–∞—Ü—é—î:**

1. **`try` –±–ª–æ–∫**: –ö–æ–¥ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ `try` –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è —è–∫ –∑–∞–∑–≤–∏—á–∞–π.
2. **–Ø–∫—â–æ –≤–∏–Ω—è—Ç–æ–∫ –≤–∏–Ω–∏–∫–∞—î**: CLR —à—É–∫–∞—î –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏–π `catch` –±–ª–æ–∫.
3. **`catch` –±–ª–æ–∫**: –í–∏–∫–æ–Ω—É—î—Ç—å—Å—è, —è–∫—â–æ —Ç–∏–ø –≤–∏–Ω—è—Ç–∫—É —Å–ø—ñ–≤–ø–∞–¥–∞—î.
4. **`finally` –±–ª–æ–∫**: –í–∏–∫–æ–Ω—É—î—Ç—å—Å—è **–∑–∞–≤–∂–¥–∏** ‚Äî –Ω–µ–∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ —Ç–æ–≥–æ, –≤–∏–Ω–∏–∫ –≤–∏–Ω—è—Ç–æ–∫ —á–∏ –Ω—ñ, –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ –≤ `catch` —î `return`.

::mermaid

```mermaid
graph TD
    A[–ü–æ—á–∞—Ç–æ–∫ try –±–ª–æ–∫—É] --> B{–í–∏–Ω–∏–∫–∞—î –≤–∏–Ω—è—Ç–æ–∫?}
    B -->|–ù—ñ| C[–í–∏–∫–æ–Ω–∞—Ç–∏ –≤–µ—Å—å try –±–ª–æ–∫]
    B -->|–¢–∞–∫| D[–ó—É–ø–∏–Ω–∏—Ç–∏ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è try]

    D --> E{–Ñ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–∏–π catch?}
    E -->|–¢–∞–∫| F[–í–∏–∫–æ–Ω–∞—Ç–∏ catch –±–ª–æ–∫]
    E -->|–ù—ñ| G[–ü—Ä–æ–±—Ä –æ—Å–∏—Ç–∏ –≤–∏–Ω—è—Ç–æ–∫ –¥–∞–ª—ñ]

    C --> H[–í–∏–∫–æ–Ω–∞—Ç–∏ finally]
    F --> H
    G --> H

    H --> I{–ë—É–≤ return?}
    I -->|–¢–∞–∫| J[–ü–æ–≤–µ—Ä–Ω—É—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è]
    I -->|–ù—ñ| K[–ü—Ä–æ–¥–æ–≤–∂–∏—Ç–∏ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è]

    style A fill:#3b82f6,stroke:#1d4ed8,color:#ffffff
    style B fill:#f59e0b,stroke:#b45309,color:#ffffff
    style E fill:#f59e0b,stroke:#b45309,color:#ffffff
    style H fill:#3b82f6,stroke:#1d4ed8,color:#ffffff
    style G fill:#64748b,stroke:#334155,color:#ffffff
```

::

### –ú–Ω–æ–∂–∏–Ω–Ω—ñ Catch –ë–ª–æ–∫–∏

–í–∏ –º–æ–∂–µ—Ç–µ –æ–±—Ä–æ–±–ª—è—Ç–∏ —Ä—ñ–∑–Ω—ñ —Ç–∏–ø–∏ –≤–∏–Ω—è—Ç–∫—ñ–≤ –ø–æ-—Ä—ñ–∑–Ω–æ–º—É:

```csharp [MultipleCatch.cs] showLineNumbers {8,13,18}
try
{
    string filePath = "data.json";
    string content = File.ReadAllText(filePath);
    int number = int.Parse(content);
    int result = 100 / number;
}
catch (FileNotFoundException ex)
{
    // –°–ø–µ—Ü–∏—Ñ—ñ—á–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –¥–ª—è –≤—ñ–¥—Å—É—Ç–Ω—å–æ–≥–æ —Ñ–∞–π–ª—É
    Console.WriteLine($"–§–∞–π–ª –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ: {ex.FileName}");
}
catch (FormatException ex)
{
    // –û–±—Ä–æ–±–∫–∞ –Ω–µ–≤–∞–ª—ñ–¥–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç—É —á–∏—Å–ª–∞
    Console.WriteLine($"–ù–µ–≤–∞–ª—ñ–¥–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç –¥–∞–Ω–∏—Ö: {ex.Message}");
}
catch (DivideByZeroException ex)
{
    // –û–±—Ä–æ–±–∫–∞ –¥—ñ–ª–µ–Ω–Ω—è –Ω–∞ –Ω—É–ª—å
    Console.WriteLine("–î—ñ–ª–µ–Ω–Ω—è –Ω–∞ –Ω—É–ª—å!");
}
catch (Exception ex)
{
    // –ó–∞–≥–∞–ª—å–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –±—É–¥—å-—è–∫–æ–≥–æ —ñ–Ω—à–æ–≥–æ –≤–∏–Ω—è—Ç–∫—É
    Console.WriteLine($"–ù–µ–≤—ñ–¥–æ–º–∞ –ø–æ–º–∏–ª–∫–∞: {ex.Message}");
}
```

::warning
**–ü–æ—Ä—è–¥–æ–∫ –º–∞—î –∑–Ω–∞—á–µ–Ω–Ω—è!** –ë–ª–æ–∫–∏ `catch` –ø–µ—Ä–µ–≤—ñ—Ä—è—é—Ç—å—Å—è **–∑–≤–µ—Ä—Ö—É –≤–Ω–∏–∑**. –†–æ–∑–º—ñ—â—É–π—Ç–µ –±—ñ–ª—å—à **–∫–æ–Ω–∫—Ä–µ—Ç–Ω—ñ** –≤–∏–Ω—è—Ç–∫–∏ –ø–µ—Ä–µ–¥ –±—ñ–ª—å—à **–∑–∞–≥–∞–ª—å–Ω–∏–º–∏**. –Ø–∫—â–æ –≤–∏ —Ä–æ–∑–º—ñ—Å—Ç–∏—Ç–µ `catch (Exception ex)` –ø–µ—Ä—à–∏–º, –≤—ñ–Ω –ø–µ—Ä–µ—Ö–æ–ø–∏—Ç—å **–≤—Å—ñ** –≤–∏–Ω—è—Ç–∫–∏, —ñ –Ω–∞—Å—Ç—É–ø–Ω—ñ –±–ª–æ–∫–∏ –Ω—ñ–∫–æ–ª–∏ –Ω–µ –≤–∏–∫–æ–Ω–∞—é—Ç—å—Å—è.
::

### –ì–∞—Ä–∞–Ω—Ç—ñ—ó Finally –ë–ª–æ–∫—É

**–¢–µ–æ—Ä—ñ—è: –ö–æ–ª–∏ Finally –ù–ï –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è**

–ë–ª–æ–∫ `finally` –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –º–∞–π–∂–µ –∑–∞–≤–∂–¥–∏, –∞–ª–µ —î **—Ä—ñ–¥–∫—ñ—Å–Ω—ñ –≤–∏–Ω—è—Ç–∫–∏**:

1.  **`Environment.FailFast()`**: –ù–µ–≥–∞–π–Ω–µ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è –ø—Ä–æ—Ü–µ—Å—É –±–µ–∑ –æ—á–∏—â–µ–Ω–Ω—è.
2.  **Stack Overflow**: –ü–µ—Ä–µ–ø–æ–≤–Ω–µ–Ω–Ω—è —Å—Ç–µ–∫—É (—Ä–µ–∫—É—Ä—Å—ñ—è –±–µ–∑ –≤–∏—Ö–æ–¥—É).
3.  **–ö—Ä–∏—Ç–∏—á–Ω—ñ –ø–æ–º–∏–ª–∫–∏ CLR**: –í–Ω—É—Ç—Ä—ñ—à–Ω—ñ –∑–±–æ—ó –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–æ—ó –º–∞—à–∏–Ω–∏.
4.  **–ó–±—ñ–π –∂–∏–≤–ª–µ–Ω–Ω—è**: –í—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —Å–µ—Ä–≤–µ—Ä–∞.

–í —É—Å—ñ—Ö –Ω–æ—Ä–º–∞–ª—å–Ω–∏—Ö —Å—Ü–µ–Ω–∞—Ä—ñ—è—Ö `finally` **–≥–∞—Ä–∞–Ω—Ç–æ–≤–∞–Ω–æ** –≤–∏–∫–æ–Ω–∞—î—Ç—å—Å—è.

```csharp [FinallyGuarantee.cs] showLineNumbers
static string ReadFile(string path)
{
    FileStream? stream = null;
    try
    {
        stream = File.OpenRead(path);
        using var reader = new StreamReader(stream);
        return reader.ReadToEnd(); // return –Ω–µ –ø–µ—Ä–µ—à–∫–æ–¥–∂–∞—î finally!
    }
    catch (IOException ex)
    {
        Console.WriteLine($"–ü–æ–º–∏–ª–∫–∞ —á–∏—Ç–∞–Ω–Ω—è: {ex.Message}");
        return string.Empty; // return –∑ catch —Ç–µ–∂ –Ω–µ –ø–µ—Ä–µ—à–∫–æ–¥–∂–∞—î
    }
    finally
    {
        // –í–∏–∫–æ–Ω–∞—î—Ç—å—Å—è –ó–ê–í–ñ–î–ò –ø–µ—Ä–µ–¥ –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è–º –∑ –º–µ—Ç–æ–¥—É
        stream?.Dispose();
        Console.WriteLine("–§–∞–π–ª –∑–∞–∫—Ä–∏—Ç–æ");
    }
}
```

::tip
**Best Practice**: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `finally` –¥–ª—è –∑–≤—ñ–ª—å–Ω–µ–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—ñ–≤ (–∑–∞–∫—Ä–∏—Ç—Ç—è —Ñ–∞–π–ª—ñ–≤, –∑'—î–¥–Ω–∞–Ω—å –∑ –ë–î, –º–µ—Ä–µ–∂–µ–≤–∏—Ö —Å–æ–∫–µ—Ç—ñ–≤). –©–µ –∫—Ä–∞—â–µ ‚Äî –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ [`using` statement](https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/statements/using), —è–∫–∏–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≥–µ–Ω–µ—Ä—É—î `try-finally` –±–ª–æ–∫.
::

### –†–æ–∑–º–æ—Ç—É–≤–∞–Ω–Ω—è –°—Ç–µ–∫—É (Stack Unwinding)

–ö–æ–ª–∏ –≤–∏–Ω–∏–∫–∞—î –≤–∏–Ω—è—Ç–æ–∫, CLR –ø–æ—á–∏–Ω–∞—î **—Ä–æ–∑–º–æ—Ç—É–≤–∞–Ω–Ω—è —Å—Ç–µ–∫—É –≤–∏–∫–ª–∏–∫—ñ–≤** (stack unwinding) ‚Äî –ø–æ—à—É–∫ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ–≥–æ –æ–±—Ä–æ–±–Ω–∏–∫–∞:

::mermaid

```mermaid
sequenceDiagram
    participant Main
    participant ProcessData
    participant ReadFile
    participant FileSystem

    Main->>ProcessData: –í–∏–∫–ª–∏–∫ ProcessData()
    ProcessData->>ReadFile: –í–∏–∫–ª–∏–∫ ReadFile()
    ReadFile->>FileSystem: File.OpenRead()
    FileSystem-->>ReadFile: ‚ùå FileNotFoundException

    Note over ReadFile: –ù–µ–º–∞—î catch –±–ª–æ–∫—É
    ReadFile-->>ProcessData: –ü—Ä–æ–±—Ä–æ—Å–∏—Ç–∏ –≤–∏–Ω—è—Ç–æ–∫ –≤–≥–æ—Ä—É

    Note over ProcessData: –Ñ catch (IOException)
    ProcessData->>ProcessData: –û–±—Ä–æ–±–∏—Ç–∏ –≤–∏–Ω—è—Ç–æ–∫
    ProcessData-->>Main: –ü–æ–≤–µ—Ä–Ω—É—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç

    Note over Main: –í–∏–Ω—è—Ç–æ–∫ –æ–±—Ä–æ–±–ª–µ–Ω–æ,\n–ø—Ä–æ–≥—Ä–∞–º–∞ –ø—Ä–æ–¥–æ–≤–∂—É—î —Ä–æ–±–æ—Ç—É
```

::

**–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü—ñ—è Stack Unwinding:**

```csharp [StackUnwindingDemo.cs] showLineNumbers
using System;
using System.IO;

class Program
{
    static void Main()
    {
        Console.WriteLine("Main: –ü–æ—á–∞—Ç–æ–∫");

        try
        {
            ProcessData("data.txt");
            Console.WriteLine("Main: –û–ø–µ—Ä–∞—Ü—ñ—è —É—Å–ø—ñ—à–Ω–∞");
        }
        catch (IOException ex)
        {
            Console.WriteLine($"Main: –ü–µ—Ä–µ—Ö–æ–ø–∏–≤ IOException: {ex.Message}");
            Console.WriteLine($"\nStack Trace:\n{ex.StackTrace}");
        }

        Console.WriteLine("Main: –ó–∞–≤–µ—Ä—à–µ–Ω–Ω—è");
    }

    static void ProcessData(string filename)
    {
        Console.WriteLine("  ProcessData: –û–±—Ä–æ–±–∫–∞ –¥–∞–Ω–∏—Ö –∑ —Ñ–∞–π–ª—É...");

        // –¢—É—Ç –Ω–µ–º–∞—î try-catch –¥–ª—è FileNotFoundException
        // –í–∏–Ω—è—Ç–æ–∫ –ø—Ä–æ–±—Ä–æ—Å–∏—Ç—Å—è –¥–æ Main()
        string content = ReadFile(filename);

        Console.WriteLine($"  ProcessData: –ü—Ä–æ—á–∏—Ç–∞–Ω–æ {content.Length} —Å–∏–º–≤–æ–ª—ñ–≤");
    }

    static string ReadFile(string path)
    {
        Console.WriteLine("    ReadFile: –í—ñ–¥–∫—Ä–∏—Ç—Ç—è —Ñ–∞–π–ª—É...");

        // –Ø–∫—â–æ —Ñ–∞–π–ª –Ω–µ —ñ—Å–Ω—É—î ‚Äî –≤–∏–∫–∏–Ω–µ—Ç—å—Å—è FileNotFoundException
        // –°—Ç–µ–∫ —Ä–æ–∑–º–æ—Ç—É—î—Ç—å—Å—è: ReadFile -> ProcessData -> Main
        string content = File.ReadAllText(path);

        Console.WriteLine("    ReadFile: –§–∞–π–ª –ø—Ä–æ—á–∏—Ç–∞–Ω–æ");
        return content;
    }
}

/* –í–∏–≤—ñ–¥ (—è–∫—â–æ —Ñ–∞–π–ª—É –Ω–µ–º–∞—î):
Main: –ü–æ—á–∞—Ç–æ–∫
  ProcessData: –û–±—Ä–æ–±–∫–∞ –¥–∞–Ω–∏—Ö –∑ —Ñ–∞–π–ª—É...
    ReadFile: –í—ñ–¥–∫—Ä–∏—Ç—Ç—è —Ñ–∞–π–ª—É...
Main: –ü–µ—Ä–µ—Ö–æ–ø–∏–≤ IOException: Could not find file '/path/to/data.txt'.

Stack Trace:
   at System.IO.FileStream.ValidateFileHandle(SafeFileHandle fileHandle)
   at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access)
   at System.IO.File.ReadAllText(String path)
   at Program.ReadFile(String path) in Program.cs:line 38
   at Program.ProcessData(String filename) in Program.cs:line 25
   at Program.Main() in Program.cs:line 12
Main: –ó–∞–≤–µ—Ä—à–µ–Ω–Ω—è
*/
```

**–ü–æ–∫—Ä–æ–∫–æ–≤–µ –ø–æ—è—Å–Ω–µ–Ω–Ω—è:**

1. **`Main()` –≤–∏–∫–ª–∏–∫–∞—î `ProcessData()`** ‚Äî –¥–æ–¥–∞—î frame —É —Å—Ç–µ–∫.
2. **`ProcessData()` –≤–∏–∫–ª–∏–∫–∞—î `ReadFile()`** ‚Äî —â–µ –æ–¥–∏–Ω frame.
3. **`ReadFile()` –≤–∏–∫–ª–∏–∫–∞—î `File.ReadAllText()`** ‚Äî –≤–∏–Ω–∏–∫–∞—î `FileNotFoundException`.
4. **–ü–æ—à—É–∫ –æ–±—Ä–æ–±–Ω–∏–∫–∞:**
    - CLR —à—É–∫–∞—î `catch` —É `ReadFile()` ‚Äî –Ω–µ–º–∞—î.
    - –ü–æ–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è –¥–æ `ProcessData()` ‚Äî –Ω–µ–º–∞—î `catch`.
    - –ü–æ–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è –¥–æ `Main()` ‚Äî –∑–Ω–∞–π–¥–µ–Ω–æ `catch (IOException)`!
5. **–í–∏–Ω—è—Ç–æ–∫ –ø–µ—Ä–µ—Ö–æ–ø–ª–µ–Ω–æ** ‚Äî `FileNotFoundException` —î –ø—ñ–¥–∫–ª–∞—Å–æ–º `IOException`, —Ç–æ–º—É –±–ª–æ–∫ —Å–ø—Ä–∞—Ü—å–æ–≤—É—î.
6. –ü—Ä–æ–≥—Ä–∞–º–∞ –ø—Ä–æ–¥–æ–≤–∂—É—î –Ω–æ—Ä–º–∞–ª—å–Ω–µ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –ø—ñ—Å–ª—è `catch`.

::note
**–í–∞–∂–ª–∏–≤–µ —Å–ø–æ—Å—Ç–µ—Ä–µ–∂–µ–Ω–Ω—è**: –£ `StackTrace` –≤–∏–¥–Ω–æ –≤–µ—Å—å —à–ª—è—Ö –≤–∏–∫–ª–∏–∫—É ‚Äî –≤—ñ–¥ `File.ReadAllText()` ‚Üí `ReadFile()` ‚Üí `ProcessData()` ‚Üí `Main()`. –¶–µ –¥–æ–∑–≤–æ–ª—è—î —Ç–æ—á–Ω–æ –≤—ñ–¥—Å—Ç–µ–∂–∏—Ç–∏, –¥–µ —Å–∞–º–µ –≤–∏–Ω–∏–∫–ª–∞ –ø–æ–º–∏–ª–∫–∞ —Ç–∞ —è–∫ –º–∏ –¥–æ –Ω–µ—ó –¥—ñ–π—à–ª–∏.
::

**–©–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è:**

1. CLR —à—É–∫–∞—î `catch` –±–ª–æ–∫ —É –ø–æ—Ç–æ—á–Ω–æ–º—É –º–µ—Ç–æ–¥—ñ.
2. –Ø–∫—â–æ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ ‚Äî –ø–æ–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è –¥–æ –º–µ—Ç–æ–¥—É, —â–æ –≤–∏–∫–ª–∏–∫–∞–≤ (`caller`).
3. –ü—Ä–æ—Ü–µ—Å –ø–æ–≤—Ç–æ—Ä—é—î—Ç—å—Å—è –¥–æ —Ç–∏—Ö –ø—ñ—Ä, –ø–æ–∫–∏ –Ω–µ –±—É–¥–µ –∑–Ω–∞–π–¥–µ–Ω–æ `catch` –∞–±–æ –¥–æ—Å—è–≥–Ω—É—Ç–æ `Main()`.
4. –Ø–∫—â–æ –∂–æ–¥–µ–Ω –æ–±—Ä–æ–±–Ω–∏–∫ –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ ‚Äî –ø—Ä–æ–≥—Ä–∞–º–∞ **–∞–≤–∞—Ä—ñ–π–Ω–æ –∑–∞–≤–µ—Ä—à—É—î—Ç—å—Å—è** –∑ unhandled exception.

## Exception Filters (–§—ñ–ª—å—Ç—Ä–∏ –í–∏–Ω—è—Ç–∫—ñ–≤)

C# 6.0 –≤–≤—ñ–≤ **—Ñ—ñ–ª—å—Ç—Ä–∏ –≤–∏–Ω—è—Ç–∫—ñ–≤** –∑ –∫–ª—é—á–æ–≤–∏–º —Å–ª–æ–≤–æ–º [`when`](https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/when) ‚Äî –ø–æ—Ç—É–∂–Ω–∏–π –º–µ—Ö–∞–Ω—ñ–∑–º –¥–ª—è —É–º–æ–≤–Ω–æ—ó –æ–±—Ä–æ–±–∫–∏ –≤–∏–Ω—è—Ç–∫—ñ–≤.

### –°–∏–Ω—Ç–∞–∫—Å–∏—Å

```csharp [ExceptionFilter.cs] showLineNumbers
try
{
    await httpClient.GetStringAsync("https://api.example.com/data");
}
catch (HttpRequestException ex) when (ex.StatusCode == HttpStatusCode.NotFound)
{
    Console.WriteLine("–†–µ—Å—É—Ä—Å –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ (404)");
}
catch (HttpRequestException ex) when (ex.StatusCode == HttpStatusCode.Unauthorized)
{
    Console.WriteLine("–ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–æ (401). –û–Ω–æ–≤—ñ—Ç—å —Ç–æ–∫–µ–Ω");
}
catch (HttpRequestException ex)
{
    Console.WriteLine($"–Ü–Ω—à–∞ HTTP –ø–æ–º–∏–ª–∫–∞: {ex.StatusCode}");
}
```

### –ü–µ—Ä–µ–≤–∞–≥–∏ –Ω–∞–¥ If-Else

::code-group

```csharp [‚ùå If-Else –≤ Catch] showLineNumbers
try
{
    // ...
}
catch (HttpRequestException ex)
{
    if (ex.StatusCode == HttpStatusCode.NotFound)
    {
        Console.WriteLine("404");
    }
    else if (ex.StatusCode == HttpStatusCode.Unauthorized)
    {
        Console.WriteLine("401");
    }
    else
    {
        Console.WriteLine("–Ü–Ω—à–∞ –ø–æ–º–∏–ª–∫–∞");
    }
}
```

```csharp [‚úÖ Exception Filters] showLineNumbers
try
{
    // ...
}
catch (HttpRequestException ex) when (ex.StatusCode == HttpStatusCode.NotFound)
{
    Console.WriteLine("404");
}
catch (HttpRequestException ex) when (ex.StatusCode == HttpStatusCode.Unauthorized)
{
    Console.WriteLine("401");
}
catch (HttpRequestException ex)
{
    Console.WriteLine("–Ü–Ω—à–∞ –ø–æ–º–∏–ª–∫–∞");
}
```

::

**–ß–æ–º—É —Ñ—ñ–ª—å—Ç—Ä–∏ –∫—Ä–∞—â—ñ:**

| –ö—Ä–∏—Ç–µ—Ä—ñ–π          | If-Else –≤ Catch                    | Exception Filters (`when`)                |
| :---------------- | :--------------------------------- | :---------------------------------------- |
| **–ß–∏—Ç–∞–±–µ–ª—å–Ω—ñ—Å—Ç—å** | –í–∫–ª–∞–¥–µ–Ω–∞ –ª–æ–≥—ñ–∫–∞, –≤–∞–∂–∫–æ —á–∏—Ç–∞—Ç–∏      | –ü–ª–æ—Å–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞, –ª–µ–≥–∫–æ —Å–∫–∞–Ω—É–≤–∞—Ç–∏         |
| **Debugging**     | –°—Ç–µ–∫ –≤–∂–µ —Ä–æ–∑–º–æ—Ç–∞–Ω–æ                 | –°—Ç–µ–∫ **–Ω–µ** —Ä–æ–∑–º–æ—Ç—É—î—Ç—å—Å—è –¥–æ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏     |
| **–¢–æ—á–∫–∏ –∑—É–ø–∏–Ω–∫–∏** | Break on first chance –Ω–µ –¥–æ–ø–æ–º–∞–≥–∞—î | Debugger –∑—É–ø–∏–Ω—è—î—Ç—å—Å—è –Ω–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º—É catch |
| **Performance**   | –í–∏–Ω—è—Ç–æ–∫ –∑–∞–≤–∂–¥–∏ —Å–ø—ñ–π–º–∞–Ω–æ            | –í–∏–Ω—è—Ç–æ–∫ –ø—Ä–æ–±—Ä–∞—Å—É—î—Ç—å—Å—è, —è–∫—â–æ —É–º–æ–≤–∞ false   |

**–¢–µ–æ—Ä—ñ—è: –°—Ç–µ–∫ –Ω–µ —Ä–æ–∑–º–æ—Ç—É—î—Ç—å—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–≤—ñ—Ä—Ü—ñ —Ñ—ñ–ª—å—Ç—Ä–∞**

–¶–µ –∫—Ä–∏—Ç–∏—á–Ω–∞ –≤—ñ–¥–º—ñ–Ω–Ω—ñ—Å—Ç—å! –ö–æ–ª–∏ CLR –∑—É—Å—Ç—Ä—ñ—á–∞—î `catch` –∑ `when`:

1. –í–∏–Ω—è—Ç–æ–∫ **–ù–ï** –ø–µ—Ä–µ—Ö–æ–ø–ª—é—î—Ç—å—Å—è –Ω–µ–≥–∞–π–Ω–æ.
2. –û–±—á–∏—Å–ª—é—î—Ç—å—Å—è —É–º–æ–≤–∞ `when`.
3. –Ø–∫—â–æ `false` ‚Äî CLR –ø—Ä–æ–¥–æ–≤–∂—É—î –ø–æ—à—É–∫ –¥–∞–ª—ñ –ø–æ —Å—Ç–µ–∫—É, **–Ω–µ –æ—á–∏—â—É—é—á–∏ –ø–æ—Ç–æ—á–Ω–∏–π frame**.
4. –Ø–∫—â–æ `true` ‚Äî —Ç—ñ–ª—å–∫–∏ —Ç–æ–¥—ñ –≤–∏–Ω—è—Ç–æ–∫ –ø–µ—Ä–µ—Ö–æ–ø–ª—é—î—Ç—å—Å—è.

–¶–µ –æ–∑–Ω–∞—á–∞—î, —â–æ **—Å—Ç–µ–∫ –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è –Ω–µ—É—à–∫–æ–¥–∂–µ–Ω–∏–º** –¥–ª—è –Ω–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è, –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ —Ñ—ñ–ª—å—Ç—Ä –Ω–µ —Å–ø—Ä–∞—Ü—é–≤–∞–≤.

### –°–∫–ª–∞–¥–Ω—ñ –§—ñ–ª—å—Ç—Ä–∏ –∑ –õ–æ–≥—É–≤–∞–Ω–Ω—è–º

–§—ñ–ª—å—Ç—Ä–∏ –º–æ–∂—É—Ç—å –≤–∏–∫–ª–∏–∫–∞—Ç–∏ –º–µ—Ç–æ–¥–∏ (–∞–ª–µ –±—É–¥—å—Ç–µ –æ–±–µ—Ä–µ–∂–Ω—ñ –∑ –ø–æ–±—ñ—á–Ω–∏–º–∏ –µ—Ñ–µ–∫—Ç–∞–º–∏!):

```csharp [FilterWithLogging.cs] showLineNumbers
static bool LogException(Exception ex)
{
    Console.WriteLine($"[LOG] {DateTime.Now}: {ex.GetType().Name} - {ex.Message}");
    return false; // –ó–∞–≤–∂–¥–∏ –ø–æ–≤–µ—Ä—Ç–∞—î–º–æ false, —â–æ–± –ù–ï –ø–µ—Ä–µ—Ö–æ–ø–ª—é–≤–∞—Ç–∏
}

try
{
    // –ü–æ—Ç–µ–Ω—Ü—ñ–π–Ω–æ –Ω–µ–±–µ–∑–ø–µ—á–Ω–∏–π –∫–æ–¥
    RiskyOperation();
}
catch (Exception ex) when (LogException(ex))
{
    // –¶–µ–π –±–ª–æ–∫ –ù–Ü–ö–û–õ–ò –Ω–µ –≤–∏–∫–æ–Ω–∞—î—Ç—å—Å—è, –±–æ LogException –ø–æ–≤–µ—Ä—Ç–∞—î false
    // –ê–ª–µ –≤–∏–Ω—è—Ç–æ–∫ –±—É–¥–µ –∑–∞–ª–æ–≥–æ–≤–∞–Ω–æ!
}
catch (SpecificException ex)
{
    // –†–µ–∞–ª—å–Ω–∞ –æ–±—Ä–æ–±–∫–∞
}
```

::caution
**–ü–æ–±—ñ—á–Ω—ñ –µ—Ñ–µ–∫—Ç–∏ —É —Ñ—ñ–ª—å—Ç—Ä–∞—Ö**: –£–º–æ–≤–∞ `when` –º–∞—î –±—É—Ç–∏ **—á–∏—Å—Ç–æ—é —Ñ—É–Ω–∫—Ü—ñ—î—é** (pure function) ‚Äî –Ω–µ –∑–º—ñ–Ω—é–≤–∞—Ç–∏ —Å—Ç–∞–Ω –ø—Ä–æ–≥—Ä–∞–º–∏. –í–∏–∫–ª—é—á–µ–Ω–Ω—è: –ª–æ–≥—É–≤–∞–Ω–Ω—è –¥–ª—è –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏. –ê–ª–µ –Ω–∞–≤—ñ—Ç—å —Ç—É—Ç –±—É–¥—å—Ç–µ –æ–±–µ—Ä–µ–∂–Ω—ñ ‚Äî —è–∫—â–æ –ª–æ–≥—É–≤–∞–Ω–Ω—è –≤–∏–∫–∏–Ω–µ –≤–∏–Ω—è—Ç–æ–∫, –≤—ñ–Ω –∑–∞–º—ñ–Ω–∏—Ç—å –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∏–π!
::

## Throwing Exceptions (–í–∏–∫–∏–¥–∞–Ω–Ω—è –í–∏–Ω—è—Ç–∫—ñ–≤)

### –û–ø–µ—Ä–∞—Ç–æ—Ä `throw`

–©–æ–± **–≤–∏–∫–∏–Ω—É—Ç–∏** –≤–∏–Ω—è—Ç–æ–∫, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –∫–ª—é—á–æ–≤–µ —Å–ª–æ–≤–æ [`throw`](https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/statements/exception-handling-statements#the-throw-statement):

```csharp [ThrowBasic.cs] showLineNumbers
public void SetAge(int age)
{
    if (age < 0 || age > 150)
    {
        throw new ArgumentOutOfRangeException(
            nameof(age),
            age,
            "–í—ñ–∫ –º–∞—î –±—É—Ç–∏ –≤ –¥—ñ–∞–ø–∞–∑–æ–Ω—ñ 0-150"
        );
    }

    Age = age;
}
```

::tip
**Best Practice**: –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `nameof()` –¥–ª—è –ø–µ—Ä–µ–¥–∞—á—ñ —ñ–º–µ–Ω—ñ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞. –¶–µ –∑–∞—Ö–∏—Å—Ç–∏—Ç—å –≤—ñ–¥ –ø–æ–º–∏–ª–æ–∫ –ø—Ä–∏ —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥—É.
::

### Throw Expressions (C# 7.0+)

–ü–æ—á–∏–Ω–∞—é—á–∏ –∑ C# 7.0, `throw` –º–æ–∂–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏—Å—è —è–∫ **–≤–∏—Ä–∞–∑** —É —Ç–∞–∫–∏—Ö –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞—Ö:

```csharp [ThrowExpressions.cs] showLineNumbers
// Null-coalescing –∑ throw
public string Name { get; }

public User(string name)
{
    Name = name ?? throw new ArgumentNullException(nameof(name));
}

// –¢–µ—Ä–Ω–∞—Ä–Ω–∏–π –æ–ø–µ—Ä–∞—Ç–æ—Ä
public int Divide(int a, int b)
{
    return b != 0
        ? a / b
        : throw new DivideByZeroException();
}

// Expression-bodied member
public string GetFileName() =>
    _fileName ?? throw new InvalidOperationException("–§–∞–π–ª –Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ");

// Lambda
Func<string, int> parser = s =>
    int.TryParse(s, out int result)
        ? result
        : throw new FormatException($"'{s}' –Ω–µ —î —á–∏—Å–ª–æ–º");
```

### Re-throwing: `throw` vs `throw ex`

–¶–µ **–∫—Ä–∏—Ç–∏—á–Ω–∞ —Ä—ñ–∑–Ω–∏—Ü—è**, —è–∫–∞ –≤–ø–ª–∏–≤–∞—î –Ω–∞ –Ω–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è:

::code-group

```csharp [‚ùå –ü–û–ì–ê–ù–û: throw ex] showLineNumbers
try
{
    DoSomething();
}
catch (Exception ex)
{
    Console.WriteLine($"–ü–æ–º–∏–ª–∫–∞: {ex.Message}");
    throw ex; // ‚ùå –í–¢–†–ê–¢–ê StackTrace!
}
```

```csharp [‚úÖ –î–û–ë–†–ï: throw] showLineNumbers
try
{
    DoSomething();
}
catch (Exception ex)
{
    Console.WriteLine($"–ü–æ–º–∏–ª–∫–∞: {ex.Message}");
    throw; // ‚úÖ –ó–±–µ—Ä—ñ–≥–∞—î –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∏–π StackTrace
}
```

::

**–©–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è:**

-   **`throw ex`**: –°—Ç–≤–æ—Ä—é—î—Ç—å—Å—è **–Ω–æ–≤–∏–π** StackTrace –∑ –ø–æ—Ç–æ—á–Ω–æ—ó —Ç–æ—á–∫–∏. –í–∏ **–≤—Ç—Ä–∞—á–∞—î—Ç–µ** —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–µ –º—ñ—Å—Ü–µ –ø–æ–º–∏–ª–∫–∏.
-   **`throw`** (–±–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç—É): –ü—Ä–æ–±—Ä–∞—Å—É—î –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∏–π –≤–∏–Ω—è—Ç–æ–∫ –∑ **–Ω–µ–∑–º—ñ–Ω–Ω–∏–º** StackTrace.

::warning
**–ù—ñ–∫–æ–ª–∏ –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `throw ex`** –±–µ–∑ –≤–∞–≥–æ–º–æ—ó –ø—Ä–∏—á–∏–Ω–∏. –¶–µ —É—Å–∫–ª–∞–¥–Ω—é—î –Ω–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è —ñ –ø—Ä–∏—Ö–æ–≤—É—î —Å–ø—Ä–∞–≤–∂–Ω—é –ø—Ä–∏—á–∏–Ω—É –ø–æ–º–∏–ª–∫–∏.
::

### Wrapping Exceptions (–û–±–≥–æ—Ä—Ç–∞–Ω–Ω—è –í–∏–Ω—è—Ç–∫—ñ–≤)

–Ü–Ω–æ–¥—ñ –ø–æ—Ç—Ä—ñ–±–Ω–æ "–æ–±–≥–æ—Ä–Ω—É—Ç–∏" –≤–∏–Ω—è—Ç–æ–∫ –Ω–∏–∂—á–æ–≥–æ —Ä—ñ–≤–Ω—è —É –±—ñ–ª—å—à –∑—Ä–æ–∑—É–º—ñ–ª–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∏–π:

```csharp [ExceptionWrapping.cs] showLineNumbers
public User LoadUser(int userId)
{
    try
    {
        string json = File.ReadAllText($"users/{userId}.json");
        return JsonSerializer.Deserialize<User>(json)!;
    }
    catch (FileNotFoundException ex)
    {
        // –û–±–≥–æ—Ä—Ç–∞—î–º–æ —Ç–µ—Ö–Ω—ñ—á–Ω–∏–π –≤–∏–Ω—è—Ç–æ–∫ —É –¥–æ–º–µ–Ω–Ω–∏–π
        throw new UserNotFoundException(
            userId,
            $"–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ {userId} –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ",
            ex // –í–ê–ñ–õ–ò–í–û: –ø–µ—Ä–µ–¥–∞—î–º–æ —è–∫ InnerException!
        );
    }
    catch (JsonException ex)
    {
        throw new DataCorruptedException(
            $"–î–∞–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ {userId} –ø–æ—à–∫–æ–¥–∂–µ–Ω—ñ",
            ex
        );
    }
}
```

**–ü–µ—Ä–µ–≤–∞–≥–∏:**

-   –ü—Ä–∏—Ö–æ–≤—É—î —Ç–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ –≤—ñ–¥ –≤–∏–∫–ª–∏–∫–∞—é—á–æ–≥–æ –∫–æ–¥—É.
-   –ù–∞–¥–∞—î –¥–æ–º–µ–Ω–Ω–æ-—Å–ø–µ—Ü–∏—Ñ—ñ—á–Ω—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é.
-   –ó–±–µ—Ä—ñ–≥–∞—î –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∏–π –≤–∏–Ω—è—Ç–æ–∫ –≤ `InnerException` –¥–ª—è –Ω–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è.

## Custom Exceptions (–í–ª–∞—Å–Ω—ñ –í–∏–Ω—è—Ç–∫–∏)

### –ö–æ–ª–∏ –°—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –í–ª–∞—Å–Ω–∏–π –í–∏–Ω—è—Ç–æ–∫?

–°—Ç–≤–æ—Ä—é–π—Ç–µ –≤–ª–∞—Å–Ω–∏–π –≤–∏–Ω—è—Ç–æ–∫, —è–∫—â–æ:

1. **–ü–æ—Ç—Ä—ñ–±–Ω–∞ –¥–æ–º–µ–Ω–Ω–∞ —Å–µ–º–∞–Ω—Ç–∏–∫–∞**: `InsufficientFundsException` –∑—Ä–æ–∑—É–º—ñ–ª—ñ—à–∏–π –∑–∞ `InvalidOperationException`.
2. **–ü–æ—Ç—Ä—ñ–±–Ω—ñ –¥–æ–¥–∞—Ç–∫–æ–≤—ñ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ**: –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è `AccountId`, `RequestedAmount`, `AvailableBalance`.
3. **–†—ñ–∑–Ω–∞ –æ–±—Ä–æ–±–∫–∞**: –≤–∏–∫–ª–∏–∫–∞—é—á–∏–π –∫–æ–¥ –º–∞—î –æ–±—Ä–æ–±–ª—è—Ç–∏ —Ü–µ —ñ–Ω–∞–∫—à–µ, –Ω—ñ–∂ —ñ–Ω—à—ñ –≤–∏–Ω—è—Ç–∫–∏.

::warning
**–ù–µ —Å—Ç–≤–æ—Ä—é–π—Ç–µ –≤–∏–Ω—è—Ç–∫–∏ –±–µ–∑ –ø–æ—Ç—Ä–µ–±–∏!** –Ø–∫—â–æ `ArgumentNullException` —á–∏ `InvalidOperationException` –¥–æ—Å—Ç–∞—Ç–Ω—å–æ –æ–ø–∏—Å—É—é—Ç—å —Å–∏—Ç—É–∞—Ü—ñ—é ‚Äî –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —ó—Ö.
::

### –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π –®–∞–±–ª–æ–Ω

```csharp [CustomException.cs] showLineNumbers
// 1. –£—Å–ø–∞–¥–∫—É–π—Ç–µ –≤—ñ–¥ Exception –∞–±–æ –±—ñ–ª—å—à –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ—ó –ø—ñ–¥–∫–ª–∞—Å–∏
// 2. –ù–∞–∑–≤–∞ –º–∞—î –∑–∞–∫—ñ–Ω—á—É–≤–∞—Ç–∏—Å—è –Ω–∞ "Exception"
// 3. –†–µ–∞–ª—ñ–∑—É–π—Ç–µ —Ç—Ä–∏ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∏ (—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–∞)
public class InsufficientFundsException : Exception
{
    public string AccountId { get; }
    public decimal RequestedAmount { get; }
    public decimal AvailableBalance { get; }

    // –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –±–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤
    public InsufficientFundsException()
    {
    }

    // –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∑ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º
    public InsufficientFundsException(string message)
        : base(message)
    {
    }

    // –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∑ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º —Ç–∞ inner exception
    public InsufficientFundsException(string message, Exception innerException)
        : base(message, innerException)
    {
    }

    // –î–æ–¥–∞—Ç–∫–æ–≤–∏–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∑ –¥–æ–º–µ–Ω–Ω–∏–º–∏ –¥–∞–Ω–∏–º–∏
    public InsufficientFundsException(
        string accountId,
        decimal requestedAmount,
        decimal availableBalance)
        : base($"–ù–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ –∫–æ—à—Ç—ñ–≤ –Ω–∞ —Ä–∞—Ö—É–Ω–∫—É {accountId}. " +
               $"–ó–∞–ø–∏—Ç–∞–Ω–æ: {requestedAmount:C}, –¥–æ—Å—Ç—É–ø–Ω–æ: {availableBalance:C}")
    {
        AccountId = accountId;
        RequestedAmount = requestedAmount;
        AvailableBalance = availableBalance;
    }
}
```

### –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

```csharp [UsingCustomException.cs] showLineNumbers
public class BankAccount
{
    public string Id { get; init; }
    public decimal Balance { get; private set; }

    public void Withdraw(decimal amount)
    {
        if (amount > Balance)
        {
            throw new InsufficientFundsException(
                Id,
                amount,
                Balance
            );
        }

        Balance -= amount;
    }
}

// –û–±—Ä–æ–±–∫–∞
try
{
    account.Withdraw(1000m);
}
catch (InsufficientFundsException ex)
{
    Console.WriteLine(ex.Message);
    Console.WriteLine($"–†–∞—Ö—É–Ω–æ–∫: {ex.AccountId}");
    Console.WriteLine($"–ë—Ä–∞–∫—É—î: {ex.RequestedAmount - ex.AvailableBalance:C}");

    // –ú–æ–∂–Ω–∞ –≤—ñ–¥–æ–±—Ä–∞–∑–∏—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É –∫–æ–Ω–∫—Ä–µ—Ç–Ω—É —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é
    ShowInsufficientFundsDialog(ex);
}
```

### –°–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è (–ó–∞—Å—Ç–∞—Ä—ñ–ª–∞, –∞–ª–µ –∫–æ—Ä–∏—Å–Ω–æ –∑–Ω–∞—Ç–∏)

–î–æ .NET Core 3.0 –≤–∏–Ω—è—Ç–∫–∏ –ø–æ—Ç—Ä—ñ–±–Ω–æ –±—É–ª–æ —Ä–æ–±–∏—Ç–∏ —Å–µ—Ä—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–º–∏ –¥–ª—è –ø–µ—Ä–µ–¥–∞—á—ñ –º—ñ–∂ AppDomains:

```csharp
[Serializable]
public class CustomException : Exception
{
    public string CustomProperty { get; set; }

    // –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä —Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó
    protected CustomException(SerializationInfo info, StreamingContext context)
        : base(info, context)
    {
        CustomProperty = info.GetString(nameof(CustomProperty))!;
    }

    public override void GetObjectData(SerializationInfo info, StreamingContext context)
    {
        base.GetObjectData(info, context);
        info.AddValue(nameof(CustomProperty), CustomProperty);
    }
}
```

::note
–£ —Å—É—á–∞—Å–Ω–æ–º—É .NET (Core/5+) AppDomains –ø—Ä–∞–∫—Ç–∏—á–Ω–æ –Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è, —Ç–æ–º—É —Å–µ—Ä—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è –≤–∏–Ω—è—Ç–∫—ñ–≤ —Ä—ñ–¥–∫–æ –ø–æ—Ç—Ä—ñ–±–Ω–∞. –ê–ª–µ —è–∫—â–æ –≤–∏ –ø—ñ–¥—Ç—Ä–∏–º—É—î—Ç–µ legacy –∫–æ–¥ –∞–±–æ –ø—Ä–∞—Ü—é—î—Ç–µ –∑ .NET Framework ‚Äî –º–∞–π—Ç–µ —Ü–µ –Ω–∞ —É–≤–∞–∑—ñ.
::

## Best Practices (–ö—Ä–∞—â—ñ –ü—Ä–∞–∫—Ç–∏–∫–∏)

### 1. Fail Fast (–ó–±—ñ–π –®–≤–∏–¥–∫–æ)

**–ü—Ä–∏–Ω—Ü–∏–ø**: –Ø–∫—â–æ –≤–∏—è–≤–ª–µ–Ω–æ –Ω–µ–∫–æ—Ä–µ–∫—Ç–Ω–∏–π —Å—Ç–∞–Ω, —è–∫–∏–π –º–æ–∂–µ –ø—Ä–∏–∑–≤–µ—Å—Ç–∏ –¥–æ –ø–æ—à–∫–æ–¥–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö ‚Äî –Ω–µ–≥–∞–π–Ω–æ –≤–∏–∫–∏–Ω—å—Ç–µ –≤–∏–Ω—è—Ç–æ–∫. –ù–µ –Ω–∞–º–∞–≥–∞–π—Ç–µ—Å—è "—è–∫–æ—Å—å" –ø—Ä–æ–¥–æ–≤–∂–∏—Ç–∏ —Ä–æ–±–æ—Ç—É.

::code-group

```csharp [‚ùå –ü–û–ì–ê–ù–û: –ü—Ä–∏—Ö–æ–≤—É–≤–∞–Ω–Ω—è –ü–æ–º–∏–ª–∫–∏] showLineNumbers
public void ProcessPayment(Payment payment)
{
    if (payment == null)
    {
        // –ú–æ–≤—á–∫–∏ —ñ–≥–Ω–æ—Ä—É—î–º–æ ‚Äî –ù–ï –†–û–ë–Ü–¢–¨ –¢–ê–ö!
        return;
    }

    // –ü—Ä–æ–¥–æ–≤–∂—É—î–º–æ –∑ –Ω–µ–≤–∞–ª—ñ–¥–Ω–∏–º–∏ –¥–∞–Ω–∏–º–∏...
}
```

```csharp [‚úÖ –î–û–ë–†–ï: Fail Fast] showLineNumbers
public void ProcessPayment(Payment payment)
{
    ArgumentNullException.ThrowIfNull(payment); // C# 11+

    if (payment.Amount <= 0)
    {
        throw new ArgumentOutOfRangeException(
            nameof(payment),
            "–°—É–º–∞ –ø–ª–∞—Ç–µ–∂—É –º–∞—î –±—É—Ç–∏ –¥–æ–¥–∞—Ç–Ω–æ—é"
        );
    }

    // –¢–µ–ø–µ—Ä –º–æ–∂–µ–º–æ –±—É—Ç–∏ –≤–ø–µ–≤–Ω–µ–Ω—ñ, —â–æ –¥–∞–Ω—ñ –≤–∞–ª—ñ–¥–Ω—ñ
    _paymentGateway.Charge(payment);
}
```

::

**–ü–µ—Ä–µ–≤–∞–≥–∏:**

-   –ü–æ–º–∏–ª–∫–∏ –≤–∏—è–≤–ª—è—é—Ç—å—Å—è **—Ä–∞–Ω–æ** ‚Äî –±–ª–∏–∂—á–µ –¥–æ –ø—Ä–∏—á–∏–Ω–∏.
-   –õ–µ–≥—à–µ –Ω–∞–ª–∞–≥–æ–¥–∂—É–≤–∞—Ç–∏ ‚Äî StackTrace –≤–∫–∞–∑—É—î –Ω–∞ —Ä–µ–∞–ª—å–Ω—É –ø—Ä–æ–±–ª–µ–º—É.
-   –ó–∞–ø–æ–±—ñ–≥–∞—î **–∫–∞—Å–∫–∞–¥–Ω–∏–º –∑–±–æ—è–º** —á–µ—Ä–µ–∑ –Ω–µ–≤–∞–ª—ñ–¥–Ω—ñ –¥–∞–Ω—ñ.

::tip
**–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ Guard Clauses**: –£ C# 11+ —î [`ArgumentNullException.ThrowIfNull()`](https://learn.microsoft.com/en-us/dotnet/api/system.argumentnullexception.throwifnull), [`ArgumentException.ThrowIfNullOrEmpty()`](https://learn.microsoft.com/en-us/dotnet/api/system.argumentexception.throwifnullorempty) —Ç–∞ –ø–æ–¥—ñ–±–Ω—ñ –º–µ—Ç–æ–¥–∏ –¥–ª—è –ª–∞–∫–æ–Ω—ñ—á–Ω–æ—ó –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó.
::

### 2. Don't Swallow Exceptions (–ù–µ "–ö–æ–≤—Ç–∞–π—Ç–µ" –í–∏–Ω—è—Ç–∫–∏)

–û–¥–∏–Ω –∑ –Ω–∞–π–≥—ñ—Ä—à–∏—Ö –∞–Ω—Ç–∏-–ø–∞—Ç–µ—Ä–Ω—ñ–≤:

```csharp
‚ùå try
{
    RiskyOperation();
}
catch (Exception)
{
    // –ü–æ—Ä–æ–∂–Ω—ñ–π catch ‚Äî "–ø—Ä–æ–∫–æ–≤—Ç–Ω—É–ª–∏" –≤–∏–Ω—è—Ç–æ–∫
}
```

**–ß–æ–º—É —Ü–µ –∫–∞—Ç–∞—Å—Ç—Ä–æ—Ñ—ñ—á–Ω–æ:**

-   –ü—Ä–æ–≥—Ä–∞–º–∞ –ø—Ä–æ–¥–æ–≤–∂—É—î –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –≤ **–Ω–µ–∫–æ—Ä–µ–∫—Ç–Ω–æ–º—É —Å—Ç–∞–Ω—ñ**.
-   **–ù–µ–º–æ–∂–ª–∏–≤–æ** –Ω–∞–ª–∞–≥–æ–¥–∏—Ç–∏ ‚Äî –Ω–µ–º–∞—î –∂–æ–¥–Ω–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó.
-   –ü–æ–º–∏–ª–∫–∞ –ø—Ä–æ—è–≤–∏—Ç—å—Å—è –ø—ñ–∑–Ω—ñ—à–µ –≤ **–Ω–µ–ø–µ—Ä–µ–¥–±–∞—á—É–≤–∞–Ω–æ–º—É –º—ñ—Å—Ü—ñ**.

**–©–æ —Ä–æ–±–∏—Ç–∏ –∑–∞–º—ñ—Å—Ç—å —Ü—å–æ–≥–æ:**

```csharp
‚úÖ try
{
    RiskyOperation();
}
catch (Exception ex)
{
    // –ó–ê–í–ñ–î–ò —Ö–æ—á —â–æ-–Ω–µ–±—É–¥—å —Ä–æ–±—ñ—Ç—å –∑ –≤–∏–Ω—è—Ç–∫–æ–º:
    _logger.LogError(ex, "–ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –≤–∏–∫–æ–Ω–∞–Ω–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó");

    // –ú–æ–∂–ª–∏–≤—ñ –≤–∞—Ä—ñ–∞–Ω—Ç–∏:
    // 1. –ü—Ä–æ–±—Ä–æ—Å–∏—Ç–∏ –¥–∞–ª—ñ
    throw;

    // 2. –û–±–≥–æ—Ä–Ω—É—Ç–∏ –≤ —ñ–Ω—à–∏–π –≤–∏–Ω—è—Ç–æ–∫
    throw new OperationFailedException("–û–ø–µ—Ä–∞—Ü—ñ—è –Ω–µ –≤–¥–∞–ª–∞—Å—è", ex);

    // 3. –ü–æ–≤–µ—Ä–Ω—É—Ç–∏ Result<T> –∑ –ø–æ–º–∏–ª–∫–æ—é (–ø–∞—Ç—Ç–µ—Ä–Ω Result)
    return Result.Failure<Data>(ex.Message);
}
```

### 3. –õ–æ–≤—ñ—Ç—å –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ñ –í–∏–Ω—è—Ç–∫–∏

::code-group

```csharp [‚ùå –ó–∞–Ω–∞–¥—Ç–æ –®–∏—Ä–æ–∫–æ] showLineNumbers
try
{
    var data = LoadFromDatabase();
    ProcessData(data);
    SaveToFile(data);
}
catch (Exception ex) // –õ–æ–≤–∏–º–æ –í–°–ï ‚Äî –ø–æ–≥–∞–Ω–∞ —ñ–¥–µ—è
{
    Console.WriteLine("–©–æ—Å—å –ø—ñ—à–ª–æ –Ω–µ —Ç–∞–∫");
}
```

```csharp [‚úÖ –°–ø–µ—Ü–∏—Ñ—ñ—á–Ω–∞ –û–±—Ä–æ–±–∫–∞] showLineNumbers
try
{
    var data = LoadFromDatabase();
    ProcessData(data);
    SaveToFile(data);
}
catch (SqlException ex) when (ex.Number == 1205) // Deadlock
{
    // –ü–æ–≤—Ç–æ—Ä–∏—Ç–∏ –æ–ø–µ—Ä–∞—Ü—ñ—é
    _logger.LogWarning("Deadlock, –ø–æ–≤—Ç–æ—Ä–Ω–∞ —Å–ø—Ä–æ–±–∞...");
    Retry();
}
catch (IOException ex)
{
    _logger.LogError(ex, "–ü–æ–º–∏–ª–∫–∞ –∑–∞–ø–∏—Å—É —Ñ–∞–π–ª—É");
    throw new DataSaveException("–ù–µ –≤–¥–∞–ª–æ—Å—è –∑–±–µ—Ä–µ–≥—Ç–∏ –¥–∞–Ω—ñ", ex);
}
catch (InvalidOperationException ex)
{
    _logger.LogError(ex, "–ù–µ–≤–∞–ª—ñ–¥–Ω–∏–π —Å—Ç–∞–Ω –¥–∞–Ω–∏—Ö");
    throw;
}
// –ù–ï –ª–æ–≤–∏–º–æ Exception ‚Äî —Ö–∞–π –Ω–µ–æ–±—Ä–æ–±–ª–µ–Ω—ñ –≤–∏–Ω—è—Ç–∫–∏ –ø–∞–¥–∞—é—Ç—å
```

::

**–ß–æ–º—É —Ü–µ –≤–∞–∂–ª–∏–≤–æ:**

-   `ThreadAbortException`, `StackOverflowException`, `OutOfMemoryException` ‚Äî **–ù–ï** —Ç—Ä–µ–±–∞ –æ–±—Ä–æ–±–ª—è—Ç–∏. –¶–µ –∫—Ä–∏—Ç–∏—á–Ω—ñ –∑–±–æ—ó CLR.
-   –õ–æ–≤–ª—è—á–∏ `Exception`, –≤–∏ –º–æ–∂–µ—Ç–µ –ø—Ä–∏—Ö–æ–≤–∞—Ç–∏ –ø–æ–º–∏–ª–∫–∏ –≤ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∞—Ö, —è–∫–∏—Ö –Ω–µ –æ—á—ñ–∫—É–≤–∞–ª–∏.

### 4. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `using` –∞–±–æ `try-finally` –¥–ª—è –†–µ—Å—É—Ä—Å—ñ–≤

–†–µ—Å—É—Ä—Å–∏ (—Ñ–∞–π–ª–∏, –∑'—î–¥–Ω–∞–Ω–Ω—è –∑ –ë–î, —Å–æ–∫–µ—Ç–∏) **–∑–∞–≤–∂–¥–∏** —Ç—Ä–µ–±–∞ –∑–≤—ñ–ª—å–Ω—è—Ç–∏:

::code-group

```csharp [‚ùå –ù–µ–±–µ–∑–ø–µ—á–Ω–æ] showLineNumbers
FileStream stream = File.OpenRead("data.txt");
ProcessFile(stream);
stream.Dispose(); // –ù–ï –≤–∏–∫–æ–Ω–∞—î—Ç—å—Å—è, —è–∫—â–æ ProcessFile –≤–∏–∫–∏–Ω–µ –≤–∏–Ω—è—Ç–æ–∫!
```

```csharp [‚úÖ try-finally] showLineNumbers
FileStream? stream = null;
try
{
    stream = File.OpenRead("data.txt");
    ProcessFile(stream);
}
finally
{
    stream?.Dispose();
}
```

```csharp [‚úÖ using (–ù–∞–π–∫—Ä–∞—â–µ)] showLineNumbers
using FileStream stream = File.OpenRead("data.txt");
ProcessFile(stream);
// Dispose() –≤–∏–∫–ª–∏—á–µ—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –Ω–∞–≤—ñ—Ç—å –ø—Ä–∏ –≤–∏–Ω—è—Ç–∫—É
```

::

### 5. –í–∏–Ω—è—Ç–∫–∏ ‚Äî –ù–µ –¥–ª—è –ö–æ–Ω—Ç—Ä–æ–ª—é –ü–æ—Ç–æ–∫—É

**–ê–Ω—Ç–∏-–ø–∞—Ç–µ—Ä–Ω: Exception-Driven Development**

```csharp
‚ùå // –ù–Ü–ö–û–õ–ò –Ω–µ —Ä–æ–±—ñ—Ç—å —Ç–∞–∫!
try
{
    int index = list.IndexOf(item);
    return list[index];
}
catch (ArgumentOutOfRangeException)
{
    return null; // –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –≤–∏–Ω—è—Ç–æ–∫ —è–∫ if
}
```

**–ß–æ–º—É —Ü–µ –ø–æ–≥–∞–Ω–æ:**

-   **–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å**: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤–∏–Ω—è—Ç–∫—É ‚Äî –¥–æ—Ä–æ–≥–∞ –æ–ø–µ—Ä–∞—Ü—ñ—è (–∑–∞—Ö–æ–ø–ª–µ–Ω–Ω—è StackTrace).
-   **–ß–∏—Ç–∞–±–µ–ª—å–Ω—ñ—Å—Ç—å**: –ö–æ–¥ –≤–∞–∂–∫–æ –∑—Ä–æ–∑—É–º—ñ—Ç–∏.
-   **–°–µ–º–∞–Ω—Ç–∏–∫–∞**: –í–∏–Ω—è—Ç–∫–∏ –¥–ª—è **–≤–∏–Ω—è—Ç–∫–æ–≤–∏—Ö** —Å–∏—Ç—É–∞—Ü—ñ–π, –Ω–µ –¥–ª—è –∑–≤–∏—á–∞–π–Ω–æ—ó –ª–æ–≥—ñ–∫–∏.

**–ü—Ä–∞–≤–∏–ª—å–Ω–æ:**

```csharp
‚úÖ int index = list.IndexOf(item);
if (index >= 0)
{
    return list[index];
}
return null;
```

### 6. –†–æ–∑—É–º—ñ–Ω–Ω—è –í–∞—Ä—Ç–æ—Å—Ç—ñ –í–∏–Ω—è—Ç–∫—ñ–≤

**–¢–µ–æ—Ä—ñ—è: Performance Impact**

–í–∏–∫–∏–¥–∞–Ω–Ω—è —Ç–∞ –æ–±—Ä–æ–±–∫–∞ –≤–∏–Ω—è—Ç–∫—É –≤–∫–ª—é—á–∞—î:

1. **–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –æ–±'—î–∫—Ç–∞** –≤ –∫—É–ø—ñ (heap allocation).
2. **–ó–∞—Ö–æ–ø–ª–µ–Ω–Ω—è StackTrace** ‚Äî CLR –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –≤–µ—Å—å —Å—Ç–µ–∫ –≤–∏–∫–ª–∏–∫—ñ–≤ —ñ –∑–±–µ—Ä—ñ–≥–∞—î —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –∫–æ–∂–µ–Ω frame (–¥–æ—Ä–æ–≥–æ!).
3. **–†–æ–∑–º–æ—Ç—É–≤–∞–Ω–Ω—è —Å—Ç–µ–∫—É** ‚Äî –ø–æ—à—É–∫ –æ–±—Ä–æ–±–Ω–∏–∫–∞ —Ç–∞ –≤–∏–∫–ª–∏–∫ `finally` –±–ª–æ–∫—ñ–≤.

–ü—Ä–∏–±–ª–∏–∑–Ω–∞ –≤–∞—Ä—Ç—ñ—Å—Ç—å: **~100-1000x –ø–æ–≤—ñ–ª—å–Ω—ñ—à–µ** –∑–∞ –∑–≤–∏—á–∞–π–Ω–∏–π `if-else`.

**–ö–æ–ª–∏ —Ü–µ –ø—Ä–∏–π–Ω—è—Ç–Ω–æ:**

-   –°–ø—Ä–∞–≤–¥—ñ **–≤–∏–Ω—è—Ç–∫–æ–≤—ñ** —Å–∏—Ç—É–∞—Ü—ñ—ó (–≤—ñ–¥—Å—É—Ç–Ω—ñ–π —Ñ–∞–π–ª, –ø—Ä–æ–±–ª–µ–º–∏ –º–µ—Ä–µ–∂—ñ).
-   –†—ñ–¥–∫–æ –≤–∏–Ω–∏–∫–∞—é—Ç—å (< 1% –≤–∏–ø–∞–¥–∫—ñ–≤).

**–ö–æ–ª–∏ –ù–ï –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏:**

-   –í–∞–ª—ñ–¥–∞—Ü—ñ—è –≤–≤–µ–¥–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ ‚Üí `TryParse`, `TryGetValue`.
-   –ë—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∞ (–Ω–µ–¥–æ—Å—Ç–∞—Ç–Ω—å–æ –∫–æ—à—Ç—ñ–≤) ‚Üí [Result Pattern](https://learn.microsoft.com/en-us/archive/msdn-magazine/2013/march/features-functional-programming-railway-oriented-programming) –∞–±–æ –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è `bool`.

### –ü–æ—Ä—ñ–≤–Ω—è–ª—å–Ω–∞ –¢–∞–±–ª–∏—Ü—è: Best Practices vs Anti-Patterns

| Best Practice                                 | Anti-Pattern                              | –ù–∞—Å–ª—ñ–¥–∫–∏ Anti-Pattern                          |
| :-------------------------------------------- | :---------------------------------------- | :--------------------------------------------- |
| –í–∏–∫–∏–¥–∞–π—Ç–µ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ñ –≤–∏–Ω—è—Ç–∫–∏                   | `throw new Exception("error")`            | –í–∞–∂–∫–æ –æ–±—Ä–æ–±–ª—è—Ç–∏, –ø–ª—É—Ç–∞—î –≤–∏–∫–ª–∏–∫–∞—é—á–∏–π –∫–æ–¥        |
| –õ–æ–≤—ñ—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ñ –≤–∏–Ω—è—Ç–∫–∏                      | `catch (Exception)`                       | –•–æ–≤–∞—î –∫—Ä–∏—Ç–∏—á–Ω—ñ –ø–æ–º–∏–ª–∫–∏, —É—Å–∫–ª–∞–¥–Ω—é—î –Ω–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è |
| `throw;` –¥–ª—è re-throw                         | `throw ex;`                               | –í—Ç—Ä–∞—Ç–∞ –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–æ–≥–æ StackTrace                |
| `using` / `try-finally` –¥–ª—è —Ä–µ—Å—É—Ä—Å—ñ–≤          | –í–∏–∫–ª–∏–∫ `Dispose()` –±–µ–∑ –∑–∞—Ö–∏—Å—Ç—É            | –í–∏—Ç—ñ–∫ —Ä–µ—Å—É—Ä—Å—ñ–≤ –ø—Ä–∏ –≤–∏–Ω—è—Ç–∫—É                     |
| Fail Fast –ø—Ä–∏ –Ω–µ–≤–∞–ª—ñ–¥–Ω–∏—Ö –¥–∞–Ω–∏—Ö                | –ú–æ–≤—á–∞–∑–Ω–µ —ñ–≥–Ω–æ—Ä—É–≤–∞–Ω–Ω—è –∞–±–æ default –∑–Ω–∞—á–µ–Ω–Ω—è | –ö–∞—Å–∫–∞–¥–Ω—ñ –∑–±–æ—ó, –≤–∞–∂–∫–æ –Ω–∞–ª–∞–≥–æ–¥–∂—É–≤–∞—Ç–∏             |
| –õ–æ–≥—É–≤–∞–Ω–Ω—è –í–°—ñ–• –≤–∏–Ω—è—Ç–∫—ñ–≤                       | –ü–æ—Ä–æ–∂–Ω—ñ–π `catch { }`                      | "–ß–æ—Ä–Ω–∞ –¥—ñ—Ä–∞" ‚Äî –ø–æ–º–∏–ª–∫–∞ –∑–Ω–∏–∫–∞—î –±–µ–∑—Å–ª—ñ–¥–Ω–æ        |
| –í–∏–Ω—è—Ç–∫–∏ –¥–ª—è –≤–∏–Ω—è—Ç–∫–æ–≤–∏—Ö —Å–∏—Ç—É–∞—Ü—ñ–π               | –í–∏–Ω—è—Ç–∫–∏ –¥–ª—è –∑–≤–∏—á–∞–π–Ω–æ–≥–æ –ø–æ—Ç–æ–∫—É             | –ü–æ–≥–∞–Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å, –ø–ª—É—Ç–∞–Ω–∞ –ª–æ–≥—ñ–∫–∞          |
| `ArgumentNullException.ThrowIfNull()`         | –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤—Ä—É—á–Ω—É + `throw`                | –ë—ñ–ª—å—à–µ –∫–æ–¥—É, –º–æ–∂–ª–∏–≤—ñ –ø–æ–º–∏–ª–∫–∏                   |
| –û–±–≥–æ—Ä—Ç–∞–Ω–Ω—è —É –¥–æ–º–µ–Ω–Ω—ñ –≤–∏–Ω—è—Ç–∫–∏ –∑ InnerException | –í—Ç—Ä–∞—Ç–∞ –æ—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–æ–≥–æ –≤–∏–Ω—è—Ç–∫—É              | –ù–µ–º–æ–∂–ª–∏–≤–æ –¥—ñ–∑–Ω–∞—Ç–∏—Å—è —Å–ø—Ä–∞–≤–∂–Ω—é –ø—Ä–∏—á–∏–Ω—É           |

::tip
**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ –í–∏–Ω—è—Ç–∫–∞–º–∏: Result Pattern**

–î–ª—è –±—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∏ —Ä–æ–∑–≥–ª—è–Ω—å—Ç–µ [Result Pattern](../../4.architecture-best-practices/4.validation-flow-control.md) ‚Äî –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –æ–±'—î–∫—Ç–∞ `Result<T>`, —è–∫–∏–π –º—ñ—Å—Ç–∏—Ç—å –∞–±–æ —É—Å–ø—ñ—à–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è, –∞–±–æ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –ø–æ–º–∏–ª–∫—É. –¶–µ:

-   –®–≤–∏–¥—à–µ (–Ω–µ–º–∞—î overhead –≤–∏–Ω—è—Ç–∫—ñ–≤)
-   –Ø–≤–Ω—ñ—à–µ (—Å–∏–≥–Ω–∞—Ç—É—Ä–∞ –º–µ—Ç–æ–¥—É –ø–æ–∫–∞–∑—É—î, —â–æ –º–æ–∂–µ –±—É—Ç–∏ –ø–æ–º–∏–ª–∫–∞)
-   –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω–∏–π –ø—ñ–¥—Ö—ñ–¥ (Railway Oriented Programming)

–ë—ñ–±–ª—ñ–æ—Ç–µ–∫–∏: `FluentResults`, `ErrorOr`, `LanguageExt`.
::

## Troubleshooting (–£—Å—É–Ω–µ–Ω–Ω—è –ü—Ä–æ–±–ª–µ–º)

### –¢–∏–ø–æ–≤—ñ –ü–æ–º–∏–ª–∫–∏ —Ç–∞ –†—ñ—à–µ–Ω–Ω—è

#### 1. NullReferenceException ‚Äî –ù–∞–π—á–∞—Å—Ç—ñ—à–∞ –ü–æ–º–∏–ª–∫–∞

```csharp
‚ùå string name = user.Profile.Name; // user –∞–±–æ Profile –º–æ–∂–µ –±—É—Ç–∏ null
```

**–†—ñ—à–µ–Ω–Ω—è:**

```csharp
‚úÖ // Null-conditional operator
string? name = user?.Profile?.Name;

‚úÖ // Pattern matching (C# 9+)
if (user is { Profile.Name: var name })
{
    Console.WriteLine(name);
}

‚úÖ // Nullable Reference Types (–≤–∫–ª—é—á–∏—Ç–∏ –≤ .csproj)
<Nullable>enable</Nullable>
```

#### 2. –ó–∞–±—É–ª–∏ `await` ‚Äî –í–∏–Ω—è—Ç–∫–∏ "–ó–Ω–∏–∫–∞—é—Ç—å"

```csharp
‚ùå async Task ProcessAsync()
{
    DoWorkAsync(); // –ó–∞–±—É–ª–∏ await ‚Äî –≤–∏–Ω—è—Ç–æ–∫ –ù–ï –±—É–¥–µ –æ–±—Ä–æ–±–ª–µ–Ω–æ!
}
```

**–†—ñ—à–µ–Ω–Ω—è:**

```csharp
‚úÖ async Task ProcessAsync()
{
    await DoWorkAsync(); // –¢–µ–ø–µ—Ä –≤–∏–Ω—è—Ç–æ–∫ –ø—Ä–æ–±—Ä–æ—Å–∏—Ç—Å—è
}

‚úÖ // –ê–±–æ —è–∫—â–æ –Ω–µ –ø–æ—Ç—Ä—ñ–±–µ–Ω —Ä–µ–∑—É–ª—å—Ç–∞—Ç, –∞–ª–µ —Ç—Ä–µ–±–∞ –æ–±—Ä–æ–±–∏—Ç–∏ –ø–æ–º–∏–ª–∫—É
_ = DoWorkAsync().ContinueWith(task =>
{
    if (task.IsFaulted)
    {
        _logger.LogError(task.Exception, "–ü–æ–º–∏–ª–∫–∞ —Ñ–æ–Ω–æ–≤–æ—ó –∑–∞–¥–∞—á—ñ");
    }
}, TaskScheduler.Default);
```

#### 3. Deadlock —É `async void`

```csharp
‚ùå async void Button_Click(object sender, EventArgs e)
{
    await LoadDataAsync();
    // –Ø–∫—â–æ —Ç—É—Ç –≤–∏–Ω—è—Ç–æ–∫ ‚Äî –ø—Ä–æ–≥—Ä–∞–º–∞ –≤–ø–∞–¥–µ!
}
```

**–†—ñ—à–µ–Ω–Ω—è:**

```csharp
‚úÖ async void Button_Click(object sender, EventArgs e)
{
    try
    {
        await LoadDataAsync();
    }
    catch (Exception ex)
    {
        _logger.LogError(ex, "–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è");
        MessageBox.Show($"–ü–æ–º–∏–ª–∫–∞: {ex.Message}");
    }
}
```

::caution
**async void** ‚Äî –Ω–µ–±–µ–∑–ø–µ—á–Ω–æ! –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ **—Ç—ñ–ª—å–∫–∏** –¥–ª—è event handlers. –í —É—Å—ñ—Ö —ñ–Ω—à–∏—Ö –≤–∏–ø–∞–¥–∫–∞—Ö –ø–æ–≤–µ—Ä—Ç–∞–π—Ç–µ `Task` –∞–±–æ `Task<T>`.
::

### –ù–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è –∑ Debugger

#### –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Exception Settings —É Visual Studio / Rider

1. **Break on Thrown Exceptions**: `Debug ‚Üí Windows ‚Üí Exception Settings`
2. –£–≤—ñ–º–∫–Ω—ñ—Ç—å –¥–ª—è —Ç–∏–ø—ñ–≤, —è–∫—ñ –≤–∞—Å —Ü—ñ–∫–∞–≤–ª—è—Ç—å (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `System.NullReferenceException`)
3. Debugger –∑—É–ø–∏–Ω–∏—Ç—å—Å—è **–≤ –º–æ–º–µ–Ω—Ç –≤–∏–∫–∏–¥–∞–Ω–Ω—è**, –∞ –Ω–µ –≤ `catch`

#### Conditional Breakpoints –Ω–∞ –í–∏–Ω—è—Ç–∫–∞—Ö

```csharp
try
{
    ProcessItems(items);
}
catch (Exception ex) when (ex.Message.Contains("critical"))
{
    // –ü–æ—Å—Ç–∞–≤—Ç–µ breakpoint —Ç—É—Ç –∑ —É–º–æ–≤–æ—é:
    // ex.Message.Contains("specific error")
    throw;
}
```

## –ü—Ä–∞–∫—Ç–∏–∫–∞ —Ç–∞ –†–µ–∑—é–º–µ

### –ó–∞–≤–¥–∞–Ω–Ω—è –¥–ª—è –ó–∞–∫—Ä—ñ–ø–ª–µ–Ω–Ω—è

#### üü¢ –õ–µ–≥–∫–∏–π –†—ñ–≤–µ–Ω—å: –ë–∞–∑–æ–≤–∞ –û–±—Ä–æ–±–∫–∞ –í–∏–Ω—è—Ç–∫—ñ–≤

–ù–∞–ø–∏—à—ñ—Ç—å –º–µ—Ç–æ–¥ `SafeDivide(int a, int b)`, —è–∫–∏–π:

-   –í–∏–∫–æ–Ω—É—î –¥—ñ–ª–µ–Ω–Ω—è `a / b`
-   –û–±—Ä–æ–±–ª—è—î `DivideByZeroException`
-   –ü–æ–≤–µ—Ä—Ç–∞—î `0` —É –≤–∏–ø–∞–¥–∫—É –ø–æ–º–∏–ª–∫–∏
-   –õ–æ–≥—É—î –ø–æ–º–∏–ª–∫—É –≤ –∫–æ–Ω—Å–æ–ª—å

::collapsible{title="üí° –ü—ñ–¥–∫–∞–∑–∫–∞"}
–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `try-catch` –∑ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–º —Ç–∏–ø–æ–º –≤–∏–Ω—è—Ç–∫—É. –ù–µ –∑–∞–±—É–¥—å—Ç–µ –≤–∏–≤–µ—Å—Ç–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø–µ—Ä–µ–¥ –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è–º `0`.
::

::collapsible{title="‚úÖ –†—ñ—à–µ–Ω–Ω—è"}

```csharp [SafeDivide.cs] showLineNumbers
public static int SafeDivide(int a, int b)
{
    try
    {
        return a / b;
    }
    catch (DivideByZeroException ex)
    {
        Console.WriteLine($"–ü–æ–º–∏–ª–∫–∞: {ex.Message}. –ü–æ–≤–µ—Ä—Ç–∞—î–º–æ 0");
        return 0;
    }
}

// –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
Console.WriteLine(SafeDivide(10, 2));  // 5
Console.WriteLine(SafeDivide(10, 0));  // –ü–æ–º–∏–ª–∫–∞: ... –ü–æ–≤–µ—Ä—Ç–∞—î–º–æ 0
```

::

---

#### üü° –°–µ—Ä–µ–¥–Ω—ñ–π –†—ñ–≤–µ–Ω—å: –í–ª–∞—Å–Ω–∏–π –í–∏–Ω—è—Ç–æ–∫ –∑ –í–∞–ª—ñ–¥–∞—Ü—ñ—î—é

–°—Ç–≤–æ—Ä—ñ—Ç—å –∫–ª–∞—Å `EmailValidator` –∑ –º–µ—Ç–æ–¥–æ–º `Validate(string email)`, —è–∫–∏–π:

-   –ü–µ—Ä–µ–≤—ñ—Ä—è—î, —á–∏ –º—ñ—Å—Ç–∏—Ç—å email —Å–∏–º–≤–æ–ª `@`
-   –í–∏–∫–∏–¥–∞—î –≤–ª–∞—Å–Ω–∏–π –≤–∏–Ω—è—Ç–æ–∫ `InvalidEmailException` –∑ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—î—é –ø—Ä–æ email
-   `InvalidEmailException` –º–∞—î –≤–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å `InvalidEmail` —Ç–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è

–ù–∞–ø–∏—à—ñ—Ç—å —Ç–µ—Å—Ç–æ–≤–∏–π –∫–æ–¥, —è–∫–∏–π –æ–±—Ä–æ–±–ª—è—î —Ü–µ–π –≤–∏–Ω—è—Ç–æ–∫.

::collapsible{title="üí° –ü—ñ–¥–∫–∞–∑–∫–∞"}

1. –°—Ç–≤–æ—Ä—ñ—Ç—å –∫–ª–∞—Å `InvalidEmailException : Exception`
2. –î–æ–¥–∞–π—Ç–µ –≤–ª–∞—Å—Ç–∏–≤—ñ—Å—Ç—å `public string InvalidEmail { get; }`
3. –†–µ–∞–ª—ñ–∑—É–π—Ç–µ —Ç—Ä–∏ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏—Ö –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∏ + –æ–¥–∏–Ω –∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `invalidEmail`
4. –£ `Validate` –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `string.Contains("@")`

::

::collapsible{title="‚úÖ –†—ñ—à–µ–Ω–Ω—è"}

```csharp [EmailValidator.cs] showLineNumbers
public class InvalidEmailException : Exception
{
    public string InvalidEmail { get; }

    public InvalidEmailException() { }

    public InvalidEmailException(string message) : base(message) { }

    public InvalidEmailException(string message, Exception innerException)
        : base(message, innerException) { }

    public InvalidEmailException(string invalidEmail, string message)
        : base(message)
    {
        InvalidEmail = invalidEmail;
    }
}

public class EmailValidator
{
    public static void Validate(string email)
    {
        if (string.IsNullOrWhiteSpace(email) || !email.Contains("@"))
        {
            throw new InvalidEmailException(
                email,
                $"Email '{email}' –Ω–µ —î –≤–∞–ª—ñ–¥–Ω–∏–º: –≤—ñ–¥—Å—É—Ç–Ω—ñ–π —Å–∏–º–≤–æ–ª '@'"
            );
        }
    }
}

// –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
try
{
    EmailValidator.Validate("testexample.com");
}
catch (InvalidEmailException ex)
{
    Console.WriteLine(ex.Message);
    Console.WriteLine($"–ü—Ä–æ–±–ª–µ–º–Ω–∏–π email: {ex.InvalidEmail}");
}
```

::

---

#### üî¥ –°–∫–ª–∞–¥–Ω–∏–π –†—ñ–≤–µ–Ω—å: Retry Logic –∑ Exception Filters

–†–µ–∞–ª—ñ–∑—É–π—Ç–µ –º–µ—Ç–æ–¥ `ExecuteWithRetry<T>(Func<T> operation, int maxAttempts)`, —è–∫–∏–π:

-   –í–∏–∫–æ–Ω—É—î `operation` –¥–æ `maxAttempts` —Ä–∞–∑—ñ–≤
-   –ü–æ–≤—Ç–æ—Ä—é—î –ª–∏—à–µ –ø—Ä–∏ `HttpRequestException` –∑ –∫–æ–¥–æ–º 429 (Too Many Requests) –∞–±–æ 503 (Service Unavailable)
-   –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î exception filters –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å-–∫–æ–¥—ñ–≤
-   –ß–µ–∫–∞—î –µ–∫—Å–ø–æ–Ω–µ–Ω—Ü—ñ–π–Ω–æ –∑—Ä–æ—Å—Ç–∞—é—á–∏–π —á–∞—Å –º—ñ–∂ —Å–ø—Ä–æ–±–∞–º–∏ (100ms, 200ms, 400ms...)
-   –õ–æ–≥—É—î –∫–æ–∂–Ω—É —Å–ø—Ä–æ–±—É
-   –ü—Ä–æ–±—Ä–∞—Å—É—î –≤–∏–Ω—è—Ç–æ–∫ –ø—ñ—Å–ª—è –≤–∏—á–µ—Ä–ø–∞–Ω–Ω—è —Å–ø—Ä–æ–±

::collapsible{title="üí° –ü—ñ–¥–∫–∞–∑–∫–∞"}

1. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —Ü–∏–∫–ª `for` –¥–ª—è —Å–ø—Ä–æ–±
2. Exception filter: `catch (HttpRequestException ex) when (ex.StatusCode == ...)`
3. `Thread.Sleep(100 * (int)Math.Pow(2, attempt))` –¥–ª—è –µ–∫—Å–ø–æ–Ω–µ–Ω—Ü—ñ–π–Ω–æ–≥–æ –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è
4. –ù–µ –∑–∞–±—É–¥—å—Ç–µ –ø—Ä–æ–±—Ä–æ—Å–∏—Ç–∏ `throw;` –ø—ñ—Å–ª—è –æ—Å—Ç–∞–Ω–Ω—å–æ—ó —Å–ø—Ä–æ–±–∏

::

::collapsible{title="‚úÖ –†—ñ—à–µ–Ω–Ω—è"}

```csharp [RetryLogic.cs] showLineNumbers
using System.Net;

public class RetryHelper
{
    public static T ExecuteWithRetry<T>(Func<T> operation, int maxAttempts)
    {
        for (int attempt = 1; attempt <= maxAttempts; attempt++)
        {
            try
            {
                return operation();
            }
            catch (HttpRequestException ex)
                when (ex.StatusCode == HttpStatusCode.TooManyRequests ||
                      ex.StatusCode == HttpStatusCode.ServiceUnavailable)
            {
                if (attempt == maxAttempts)
                {
                    Console.WriteLine($"‚ùå –í–∏—á–µ—Ä–ø–∞–Ω–æ –≤—Å—ñ {maxAttempts} —Å–ø—Ä–æ–±–∏");
                    throw; // –ü—Ä–æ–±—Ä–∞—Å—É—î–º–æ –ø—ñ—Å–ª—è –æ—Å—Ç–∞–Ω–Ω—å–æ—ó —Å–ø—Ä–æ–±–∏
                }

                int delayMs = 100 * (int)Math.Pow(2, attempt - 1);
                Console.WriteLine(
                    $"‚ö†Ô∏è –°–ø—Ä–æ–±–∞ {attempt}/{maxAttempts} –Ω–µ –≤–¥–∞–ª–∞—Å—è " +
                    $"({ex.StatusCode}). –û—á—ñ–∫—É–≤–∞–Ω–Ω—è {delayMs}ms..."
                );

                Thread.Sleep(delayMs);
            }
            // –Ü–Ω—à—ñ –≤–∏–Ω—è—Ç–∫–∏ –ø—Ä–æ–±—Ä–∞—Å—É—é—Ç—å—Å—è –Ω–µ–≥–∞–π–Ω–æ
        }

        throw new InvalidOperationException("–ù–µ–æ—á—ñ–∫—É–≤–∞–Ω–∏–π —Å—Ç–∞–Ω");
    }
}

// –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è (–ø—Ä–∏–∫–ª–∞–¥ –∑ mock)
try
{
    int attempt = 0;
    var result = RetryHelper.ExecuteWithRetry(() =>
    {
        attempt++;
        if (attempt < 3)
        {
            throw new HttpRequestException(
                "Service Unavailable",
                null,
                HttpStatusCode.ServiceUnavailable
            );
        }
        return "Success!";
    }, maxAttempts: 5);

    Console.WriteLine($"‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç: {result}");
}
catch (HttpRequestException ex)
{
    Console.WriteLine($"–û–ø–µ—Ä–∞—Ü—ñ—è –Ω–µ –≤–¥–∞–ª–∞—Å—è: {ex.Message}");
}
```

::

### –†–µ–∑—é–º–µ

–£ —Ü—å–æ–º—É —Ä–æ–∑–¥—ñ–ª—ñ –≤–∏ –≤–∏–≤—á–∏–ª–∏:

1. **–§—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ñ –∫–æ–Ω—Ü–µ–ø—Ü—ñ—ó**:

    - –í–∏–Ω—è—Ç–∫–∏ —è–∫ –º–µ—Ö–∞–Ω—ñ–∑–º –æ–±—Ä–æ–±–∫–∏ –ø–æ–º–∏–ª–æ–∫
    - –Ü—î—Ä–∞—Ä—Ö—ñ—è –≤–∏–Ω—è—Ç–∫—ñ–≤ —Ç–∞ –∫–ª–∞—Å `System.Exception`
    - –†–æ–∑–º–æ—Ç—É–≤–∞–Ω–Ω—è —Å—Ç–µ–∫—É (stack unwinding)

2. **Try-Catch-Finally**:

    - –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–ª–æ–∫—ñ–≤ –æ–±—Ä–æ–±–∫–∏ –≤–∏–Ω—è—Ç–∫—ñ–≤
    - –ì–∞—Ä–∞–Ω—Ç—ñ—ó –≤–∏–∫–æ–Ω–∞–Ω–Ω—è `finally`
    - –ü–æ—Ä—è–¥–æ–∫ –º–Ω–æ–∂–∏–Ω–Ω–∏—Ö `catch` –±–ª–æ–∫—ñ–≤

3. **Exception Filters**:

    - –ö–ª—é—á–æ–≤–µ —Å–ª–æ–≤–æ `when` –¥–ª—è —É–º–æ–≤–Ω–æ—ó –æ–±—Ä–æ–±–∫–∏
    - –ü–µ—Ä–µ–≤–∞–≥–∏ –Ω–∞–¥ `if-else` —É –Ω–∞–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—ñ
    - –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Å—Ç–µ–∫—É –ø—Ä–∏ –ø–µ—Ä–µ–≤—ñ—Ä—Ü—ñ —Ñ—ñ–ª—å—Ç—Ä–∞

4. **Throwing Exceptions**:

    - –û–ø–µ—Ä–∞—Ç–æ—Ä `throw` —Ç–∞ throw expressions
    - –ö—Ä–∏—Ç–∏—á–Ω–∞ —Ä—ñ–∑–Ω–∏—Ü—è –º—ñ–∂ `throw` —Ç–∞ `throw ex`
    - –û–±–≥–æ—Ä—Ç–∞–Ω–Ω—è –≤–∏–Ω—è—Ç–∫—ñ–≤ (exception wrapping)

5. **Custom Exceptions**:

    - –ö–æ–ª–∏ —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ –≤–ª–∞—Å–Ω—ñ –≤–∏–Ω—è—Ç–∫–∏
    - –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∏–π —à–∞–±–ª–æ–Ω –∑ —Ç—Ä—å–æ–º–∞ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞–º–∏
    - –î–æ–¥–∞–≤–∞–Ω–Ω—è –¥–æ–º–µ–Ω–Ω–∏—Ö –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç–µ–π

6. **Best Practices**:
    - ‚úÖ Fail Fast ‚Äî –∑–±—ñ–π –ø—Ä–∏ –ø–µ—Ä—à—ñ–π –ø–æ–º–∏–ª—Ü—ñ
    - ‚úÖ –õ–æ–≤—ñ—Ç—å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ñ –≤–∏–Ω—è—Ç–∫–∏, –Ω–µ `Exception`
    - ‚úÖ –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `using` –¥–ª—è —Ä–µ—Å—É—Ä—Å—ñ–≤
    - ‚ùå –ù–µ "–∫–æ–≤—Ç–∞–π—Ç–µ" –≤–∏–Ω—è—Ç–∫–∏
    - ‚ùå –ù–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –≤–∏–Ω—è—Ç–∫–∏ –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—é –ø–æ—Ç–æ–∫—É
    - ‚ùå –ù—ñ–∫–æ–ª–∏ –Ω–µ –ø–∏—à—ñ—Ç—å `throw ex`

::tip
**–ù–∞—Å—Ç—É–ø–Ω—ñ –ö—Ä–æ–∫–∏**:

-   –í–∏–≤—á—ñ—Ç—å [Pattern Matching](./5.pattern-matching.md) –¥–ª—è –≤–∏—Ç–æ–Ω—á–µ–Ω–∏—Ö –ø–µ—Ä–µ–≤—ñ—Ä–æ–∫
-   –î–æ—Å–ª—ñ–¥—ñ—Ç—å [Result Pattern](../../4.architecture-best-practices/4.validation-flow-control.md) —è–∫ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—É –≤–∏–Ω—è—Ç–∫—ñ–≤
-   –ü—Ä–∞–∫—Ç–∏–∫—É–π—Ç–µ [–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É –æ–±—Ä–æ–±–∫—É –ø–æ–º–∏–ª–æ–∫](../../6.internals-concurrency/5.async-await.md) –∑ `Task` —Ç–∞ `async/await`

::

### –ö–æ—Ä–∏—Å–Ω—ñ –ü–æ—Å–∏–ª–∞–Ω–Ω—è

-   [Exception Handling (C# Programming Guide)](https://learn.microsoft.com/en-us/dotnet/csharp/fundamentals/exceptions/)
-   [Best Practices for Exceptions](https://learn.microsoft.com/en-us/dotnet/standard/exceptions/best-practices-for-exceptions)
-   [Exception Class](https://learn.microsoft.com/en-us/dotnet/api/system.exception)
-   [When Keyword (Exception Filters)](https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/when)
-   [Throw Statement](https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/statements/exception-handling-statements)
