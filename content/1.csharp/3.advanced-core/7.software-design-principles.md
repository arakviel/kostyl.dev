# [Software Design Principles (–ü—Ä–∏–Ω—Ü–∏–ø–∏ –ü—Ä–æ–µ–∫—Ç—É–≤–∞–Ω–Ω—è –ü–ó)](https://learn.microsoft.com/en-us/dotnet/architecture/modern-web-apps-azure/architectural-principles)

::note
**–ü–µ—Ä–µ–¥—É–º–æ–≤–∏**: –†–µ–∫–æ–º–µ–Ω–¥—É—î—Ç—å—Å—è –æ–∑–Ω–∞–π–æ–º–∏—Ç–∏—Å—å –∑ [–∫–ª–∞—Å–∞–º–∏ —Ç–∞ –æ–±'—î–∫—Ç–∞–º–∏](/csharp/oop/classes-objects), [–Ω–∞—Å–ª—ñ–¥—É–≤–∞–Ω–Ω—è–º —Ç–∞ –ø–æ–ª—ñ–º–æ—Ä—Ñ—ñ–∑–º–æ–º](/csharp/oop/oop-pillars), [—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º–∏](/csharp/advanced-core/interfaces-deep-dive) —Ç–∞ [generics](/csharp/advanced-core/generics) –ø–µ—Ä–µ–¥ –≤–∏–≤—á–µ–Ω–Ω—è–º —Ü—å–æ–≥–æ —Ä–æ–∑–¥—ñ–ª—É.
::

## –ù–∞–≤—ñ—â–æ —Ü–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ?

–£—è–≤—ñ—Ç—å, —â–æ –≤–∏ –ø—Ä–∏—î–¥–Ω–∞–ª–∏—Å—è –¥–æ –ø—Ä–æ—î–∫—Ç—É, –¥–µ –∫–æ–¥ –≤–∏–≥–ª—è–¥–∞—î —Ç–∞–∫:

```csharp [UserManager.cs] showLineNumbers
public class UserManager
{
    public void ProcessUser(string userData)
    {
        // –ü–∞—Ä—Å–∏–Ω–≥ –¥–∞–Ω–∏—Ö
        var parts = userData.Split(',');
        string name = parts[0];
        string email = parts[1];

        // –í–∞–ª—ñ–¥–∞—Ü—ñ—è email
        if (!email.Contains("@"))
        {
            throw new Exception("Invalid email");
        }

        // –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –≤ –±–∞–∑—É –¥–∞–Ω–∏—Ö
        using var connection = new SqlConnection("Server=...");
        connection.Open();
        var command = new SqlCommand($"INSERT INTO Users VALUES ('{name}', '{email}')", connection);
        command.ExecuteNonQuery();

        // –í—ñ–¥–ø—Ä–∞–≤–∫–∞ email
        var smtp = new SmtpClient("smtp.gmail.com");
        smtp.Send(email, "Welcome!", "Thanks for registering!");

        // –õ–æ–≥—É–≤–∞–Ω–Ω—è
        File.AppendAllText("log.txt", $"{DateTime.Now}: User {name} created\n");
    }
}
```

**–©–æ –Ω–µ —Ç–∞–∫ –∑ —Ü–∏–º –∫–æ–¥–æ–º?**

-   üö´ **–û–¥–∏–Ω –∫–ª–∞—Å —Ä–æ–±–∏—Ç—å –∑–∞–Ω–∞–¥—Ç–æ –±–∞–≥–∞—Ç–æ** ‚Äî –ø–∞—Ä—Å–∏–Ω–≥, –≤–∞–ª—ñ–¥–∞—Ü—ñ—é, –ë–î, email, –ª–æ–≥—É–≤–∞–Ω–Ω—è
-   üö´ **–ù–µ–º–æ–∂–ª–∏–≤–æ —Ç–µ—Å—Ç—É–≤–∞—Ç–∏** ‚Äî –≤—Å–µ –∑–≤'—è–∑–∞–Ω–æ –∑ –∑–æ–≤–Ω—ñ—à–Ω—ñ–º–∏ —Å–µ—Ä–≤—ñ—Å–∞–º–∏
-   üö´ **–í–∞–∂–∫–æ –∑–º—ñ–Ω—é–≤–∞—Ç–∏** ‚Äî –∑–º—ñ–Ω–∞ –ª–æ–≥—ñ–∫–∏ email –≤–∏–º–∞–≥–∞—î —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –≤—Å—å–æ–≥–æ –∫–ª–∞—Å—É
-   üö´ **SQL Injection –≤—Ä–∞–∑–ª–∏–≤—ñ—Å—Ç—å** ‚Äî –Ω–µ–±–µ–∑–ø–µ—á–Ω–∞ –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü—ñ—è —Ä—è–¥–∫—ñ–≤
-   üö´ **–ñ–æ—Ä—Å—Ç–∫–∞ –∑–∞–ª–µ–∂–Ω—ñ—Å—Ç—å** ‚Äî –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏—Ö —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ–π (`SqlConnection`, `SmtpClient`)

**–í–∞—Ä—Ç—ñ—Å—Ç—å –∑–º—ñ–Ω –∑—Ä–æ—Å—Ç–∞—î –µ–∫—Å–ø–æ–Ω–µ–Ω—Ü—ñ–π–Ω–æ:**

::mermaid

```mermaid
graph LR
    A[–ü–æ—á–∞—Ç–æ–∫ –ø—Ä–æ–µ–∫—Ç—É] -->|–¢–∏–∂–¥–µ–Ω—å 1| B[–õ–µ–≥–∫—ñ –∑–º—ñ–Ω–∏]
    B -->|–¢–∏–∂–¥–µ–Ω—å 4| C[–°–µ—Ä–µ–¥–Ω—è —Å–∫–ª–∞–¥–Ω—ñ—Å—Ç—å]
    C -->|–ú—ñ—Å—è—Ü—å 3| D[–í–∞–∂–∫—ñ –∑–º—ñ–Ω–∏]
    D -->|–†—ñ–∫ 1| E[–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥]
    E -->|–†—ñ–∫ 2| F[–ü–æ–≤–Ω–µ –ø–µ—Ä–µ–ø–∏—Å—É–≤–∞–Ω–Ω—è]

    style A fill:#3b82f6,stroke:#1d4ed8,color:#ffffff
    style B fill:#3b82f6,stroke:#1d4ed8,color:#ffffff
    style C fill:#f59e0b,stroke:#b45309,color:#ffffff
    style D fill:#f59e0b,stroke:#b45309,color:#ffffff
    style E fill:#ef4444,stroke:#b91c1c,color:#ffffff
    style F fill:#ef4444,stroke:#b91c1c,color:#ffffff
```

::

**Software Design Principles —Ä—è—Ç—É—é—Ç—å –≤—ñ–¥ —Ü—å–æ–≥–æ!**

–¶—ñ –ø—Ä–∏–Ω—Ü–∏–ø–∏ ‚Äî —Ü–µ –Ω–∞–±—ñ—Ä –ø–µ—Ä–µ–≤—ñ—Ä–µ–Ω–∏—Ö —á–∞—Å–æ–º –ø—Ä–∞–≤–∏–ª, —è–∫—ñ –¥–æ–ø–æ–º–∞–≥–∞—é—Ç—å –ø–∏—Å–∞—Ç–∏ –∫–æ–¥, —â–æ:

-   ‚úÖ **–õ–µ–≥–∫–æ –∑–º—ñ–Ω—é–≤–∞—Ç–∏** ‚Äî –∑–º—ñ–Ω–∏ –ª–æ–∫–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ
-   ‚úÖ **–õ–µ–≥–∫–æ —Ç–µ—Å—Ç—É–≤–∞—Ç–∏** ‚Äî –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ –º–æ–∂–Ω–∞ –∑–∞–º—ñ–Ω–∏—Ç–∏
-   ‚úÖ **–õ–µ–≥–∫–æ —Ä–æ–∑—É–º—ñ—Ç–∏** ‚Äî –∫–æ–∂–µ–Ω –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –º–∞—î —á—ñ—Ç–∫—É –º–µ—Ç—É
-   ‚úÖ **–õ–µ–≥–∫–æ —Ä–æ–∑—à–∏—Ä—é–≤–∞—Ç–∏** ‚Äî –Ω–æ–≤–∞ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å –¥–æ–¥–∞—î—Ç—å—Å—è –±–µ–∑ –∑–º—ñ–Ω–∏ —ñ—Å–Ω—É—é—á–æ–≥–æ –∫–æ–¥—É

## –ï–≤–æ–ª—é—Ü—ñ—è: –Ø–∫ –º–∏ –¥—ñ–π—à–ª–∏ –¥–æ —Ü–∏—Ö –ø—Ä–∏–Ω—Ü–∏–ø—ñ–≤?

**1990-—Ç—ñ: –°–ø–∞–≥–µ—Ç—Ç—ñ-–∫–æ–¥**

-   –ü—Ä–æ—Ü–µ–¥—É—Ä–Ω–µ –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è
-   –ì–ª–æ–±–∞–ª—å–Ω—ñ –∑–º—ñ–Ω–Ω—ñ
-   `GOTO` statements
-   –ü—Ä–æ–±–ª–µ–º–∞: –ö–æ–¥ —Å—Ç–∞—î –Ω–µ—á–∏—Ç–∞–±–µ–ª—å–Ω–∏–º –ø—ñ—Å–ª—è 1000+ —Ä—è–¥–∫—ñ–≤

**2000-—Ç—ñ: –û–û–ü —Ç–∞ Pattern-mania**

-   Gang of Four Design Patterns (1994)
-   Robert Martin (Uncle Bob) —Ñ–æ—Ä–º–∞–ª—ñ–∑—É—î SOLID (2000)
-   –ü—Ä–æ–±–ª–µ–º–∞: –ù–∞–¥-—ñ–Ω–∂–µ–Ω–µ—Ä—ñ—è, "pattern for everything"

**2010-—Ç—ñ: Pragmatic simplicity**

-   YAGNI, KISS —Å—Ç–∞—é—Ç—å mainstream
-   Agile —Ç–∞ TDD –ø–æ–ø—É–ª—è—Ä–∏–∑—É—é—Ç—å –ø—Ä–æ—Å—Ç–æ—Ç—É
-   –ë–∞–ª–∞–Ω—Å –º—ñ–∂ –≥–Ω—É—á–∫—ñ—Å—Ç—é —Ç–∞ –ø—Ä–æ—Å—Ç–æ—Ç–æ—é

**2020-—Ç—ñ: Modern C# —ñ –ø—Ä–∏–Ω—Ü–∏–ø–∏**

-   Nullable Reference Types –ø—ñ–¥—Ç—Ä–∏–º—É—é—Ç—å DIP
-   Records —Ç–∞ pattern matching —Å–ø—Ä–æ—â—É—é—Ç—å SOLID
-   Source Generators –∞–≤—Ç–æ–º–∞—Ç–∏–∑—É—é—Ç—å boilerplate

::tip
**–ö–ª—é—á–æ–≤–∞ —ñ–¥–µ—è**: –ü—Ä–∏–Ω—Ü–∏–ø–∏ –Ω–µ —î –¥–æ–≥–º–∞–º–∏! –¶–µ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏, —è–∫—ñ —Ç—Ä–µ–±–∞ –∑–∞—Å—Ç–æ—Å–æ–≤—É–≤–∞—Ç–∏ –∑ —Ä–æ–∑—É–º–æ–º. –Ü–Ω–æ–¥—ñ –ø–æ—Ä—É—à–µ–Ω–Ω—è –ø—Ä–∏–Ω—Ü–∏–ø—É ‚Äî –ø—Ä–∞–≤–∏–ª—å–Ω–µ —Ä—ñ—à–µ–Ω–Ω—è –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ—ó —Å–∏—Ç—É–∞—Ü—ñ—ó.
::

## SOLID Principles: –ü'—è—Ç—å –°—Ç–æ–≤–ø—ñ–≤ –Ø–∫—ñ—Å–Ω–æ–≥–æ –û–û–ü

SOLID ‚Äî —Ü–µ –∞–∫—Ä–æ–Ω—ñ–º –∑ –ø'—è—Ç–∏ –ø—Ä–∏–Ω—Ü–∏–ø—ñ–≤ –æ–±'—î–∫—Ç–Ω–æ-–æ—Ä—ñ—î–Ω—Ç–æ–≤–∞–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç—É–≤–∞–Ω–Ω—è:

| –ü—Ä–∏–Ω—Ü–∏–ø                   | –ê–±—Ä–µ–≤—ñ–∞—Ç—É—Ä–∞ | –°—É—Ç—å                                                         |
| :------------------------ | :---------- | :----------------------------------------------------------- |
| **S**ingle Responsibility | SRP         | –û–¥–∏–Ω –∫–ª–∞—Å = –æ–¥–Ω–∞ –ø—Ä–∏—á–∏–Ω–∞ –¥–ª—è –∑–º—ñ–Ω–∏                           |
| **O**pen/Closed           | OCP         | –í—ñ–¥–∫—Ä–∏—Ç–∏–π –¥–ª—è —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è, –∑–∞–∫—Ä–∏—Ç–∏–π –¥–ª—è –º–æ–¥–∏—Ñ—ñ–∫–∞—Ü—ñ—ó           |
| **L**iskov Substitution   | LSP         | –ü—ñ–¥—Ç–∏–ø–∏ –º–∞—é—Ç—å –±—É—Ç–∏ –≤–∑–∞—î–º–æ–∑–∞–º—ñ–Ω–Ω–∏–º–∏                           |
| **I**nterface Segregation | ISP         | –ë–∞–≥–∞—Ç–æ —Å–ø–µ—Ü–∏—Ñ—ñ—á–Ω–∏—Ö —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ñ–≤ –∫—Ä–∞—â–µ, –Ω—ñ–∂ –æ–¥–∏–Ω —É–Ω—ñ–≤–µ—Ä—Å–∞–ª—å–Ω–∏–π |
| **D**ependency Inversion  | DIP         | –ó–∞–ª–µ–∂–Ω—ñ—Å—Ç—å –≤—ñ–¥ –∞–±—Å—Ç—Ä–∞–∫—Ü—ñ–π, –∞ –Ω–µ –≤—ñ–¥ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏—Ö —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ–π    |

::mermaid

```mermaid
graph TD
    SOLID[SOLID Principles]
    SOLID --> SRP[Single Responsibility<br/>–û–¥–∏–Ω –æ–±–æ–≤'—è–∑–æ–∫]
    SOLID --> OCP[Open/Closed<br/>–†–æ–∑—à–∏—Ä–µ–Ω–Ω—è –±–µ–∑ –∑–º—ñ–Ω–∏]
    SOLID --> LSP[Liskov Substitution<br/>–í–∑–∞—î–º–æ–∑–∞–º—ñ–Ω–Ω—ñ—Å—Ç—å]
    SOLID --> ISP[Interface Segregation<br/>–°–ø–µ—Ü–∏—Ñ—ñ—á–Ω—ñ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∏]
    SOLID --> DIP[Dependency Inversion<br/>–ê–±—Å—Ç—Ä–∞–∫—Ü—ñ—ó > –î–µ—Ç–∞–ª—ñ]

    SRP --> GOAL[Maintainable<br/>Testable<br/>Flexible Code]
    OCP --> GOAL
    LSP --> GOAL
    ISP --> GOAL
    DIP --> GOAL

    style SOLID fill:#3b82f6,stroke:#1d4ed8,color:#ffffff
    style SRP fill:#64748b,stroke:#334155,color:#ffffff
    style OCP fill:#64748b,stroke:#334155,color:#ffffff
    style LSP fill:#64748b,stroke:#334155,color:#ffffff
    style ISP fill:#64748b,stroke:#334155,color:#ffffff
    style DIP fill:#64748b,stroke:#334155,color:#ffffff
    style GOAL fill:#f59e0b,stroke:#b45309,color:#ffffff
```

::

### 1. Single Responsibility Principle (SRP)

> **–ü—Ä–∏–Ω—Ü–∏–ø –Ñ–¥–∏–Ω–æ—ó –í—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–æ—Å—Ç—ñ**: –ö–ª–∞—Å –ø–æ–≤–∏–Ω–µ–Ω –º–∞—Ç–∏ –ª–∏—à–µ –æ–¥–Ω—É –ø—Ä–∏—á–∏–Ω—É –¥–ª—è –∑–º—ñ–Ω–∏.

**–ê–∫–∞–¥–µ–º—ñ—á–Ω–µ –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è**: [SRP](https://learn.microsoft.com/en-us/dotnet/architecture/modern-web-apps-azure/architectural-principles#single-responsibility) —Å—Ç–≤–µ—Ä–¥–∂—É—î, —â–æ –ø—Ä–æ–≥—Ä–∞–º–Ω–∞ —Å—É—Ç–Ω—ñ—Å—Ç—å (–∫–ª–∞—Å, –º–æ–¥—É–ª—å, —Ñ—É–Ω–∫—Ü—ñ—è) –ø–æ–≤–∏–Ω–Ω–∞ –º–∞—Ç–∏ —î–¥–∏–Ω—É, —á—ñ—Ç–∫–æ –≤–∏–∑–Ω–∞—á–µ–Ω—É –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ—Å—Ç—å. –¶–µ –æ–∑–Ω–∞—á–∞—î, —â–æ –∫–ª–∞—Å –º–∞—î –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ –æ–¥–Ω—É –∑–∞–¥–∞—á—É —ñ —Ä–æ–±–∏—Ç–∏ —ó—ó –¥–æ–±—Ä–µ.

**–ó–≤'—è–∑–æ–∫ –∑ Cohesion (–ó—á–µ–ø–ª–µ–Ω—ñ—Å—Ç—å)**:

SRP —Ç—ñ—Å–Ω–æ –ø–æ–≤'—è–∑–∞–Ω–∏–π –∑ –∫–æ–Ω—Ü–µ–ø—Ü—ñ—î—é **high cohesion** (–≤–∏—Å–æ–∫–∞ –∑—á–µ–ø–ª–µ–Ω—ñ—Å—Ç—å) ‚Äî –º—ñ—Ä–∞ —Ç–æ–≥–æ, –Ω–∞—Å–∫—ñ–ª—å–∫–∏ –ø–æ–≤'—è–∑–∞–Ω—ñ –æ–±–æ–≤'—è–∑–∫–∏ –∫–ª–∞—Å—É –º—ñ–∂ —Å–æ–±–æ—é. –ö–ª–∞—Å –∑ –≤–∏—Å–æ–∫–æ—é cohesion –º–∞—î –º–µ—Ç–æ–¥–∏ —Ç–∞ –¥–∞–Ω—ñ, —è–∫—ñ –ø—Ä–∞—Ü—é—é—Ç—å —Ä–∞–∑–æ–º –¥–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –æ–¥–Ω—ñ—î—ó —á—ñ—Ç–∫–æ—ó –º–µ—Ç–∏.

::warning
**–í–∞–∂–ª–∏–≤–æ**: "–û–¥–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ—Å—Ç—å" ‚â† "–æ–¥–∏–Ω –º–µ—Ç–æ–¥"! –ö–ª–∞—Å –º–æ–∂–µ –º–∞—Ç–∏ –±–∞–≥–∞—Ç–æ –º–µ—Ç–æ–¥—ñ–≤, —è–∫—â–æ –≤–æ–Ω–∏ –≤—Å—ñ —Å–ª—É—Ç –æ–¥–Ω—ñ–π –º–µ—Ç—ñ.
::

#### –ü—Ä–æ–±–ª–µ–º–∞: God Object (–ö–ª–∞—Å-–ë–æ–≥)

```csharp [UserService.cs - VIOLATION] showLineNumbers
public class UserService
{
    // ‚ùå –í—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ—Å—Ç—å 1: –†–æ–±–æ—Ç–∞ –∑ –¥–∞–Ω–∏–º–∏
    public void SaveUser(User user)
    {
        using var connection = new SqlConnection("...");
        connection.Open();
        var command = new SqlCommand($"INSERT INTO Users VALUES ('{user.Name}')", connection);
        command.ExecuteNonQuery();
    }

    // ‚ùå –í—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ—Å—Ç—å 2: –í–∞–ª—ñ–¥–∞—Ü—ñ—è
    public bool ValidateEmail(string email)
    {
        return email.Contains("@") && email.Contains(".");
    }

    // ‚ùå –í—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ—Å—Ç—å 3: –í—ñ–¥–ø—Ä–∞–≤–∫–∞ –ø–æ—à—Ç–∏
    public void SendWelcomeEmail(User user)
    {
        var smtp = new SmtpClient("smtp.gmail.com");
        smtp.Send(user.Email, "Welcome!", "Thanks for registering!");
    }

    // ‚ùå –í—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ—Å—Ç—å 4: –õ–æ–≥—É–≤–∞–Ω–Ω—è
    public void LogActivity(string message)
    {
        File.AppendAllText("log.txt", $"{DateTime.Now}: {message}\n");
    }

    // ‚ùå –í—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ—Å—Ç—å 5: –§–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è –∑–≤—ñ—Ç—ñ–≤
    public string GenerateUserReport(User user)
    {
        return $"<html><body><h1>{user.Name}</h1></body></html>";
    }
}
```

**–ß–æ–º—É —Ü–µ –ø–æ–≥–∞–Ω–æ?**

1. **–í–∞–∂–∫–æ —Ç–µ—Å—Ç—É–≤–∞—Ç–∏** ‚Äî –∫–æ–∂–µ–Ω —Ç–µ—Å—Ç –ø–æ—Ç—Ä–µ–±—É—î –ë–î, SMTP, —Ñ–∞–π–ª–æ–≤–æ—ó —Å–∏—Å—Ç–µ–º–∏
2. **–í–∞–∂–∫–æ –∑–º—ñ–Ω—é–≤–∞—Ç–∏** ‚Äî –∑–º—ñ–Ω–∞ —Ñ–æ—Ä–º–∞—Ç—É email –∑–∞—á—ñ–ø–∞—î –∫–ª–∞—Å, —â–æ –ø—Ä–∞—Ü—é—î –∑ –ë–î
3. **–ù–∏–∑—å–∫–∞ –ø–µ—Ä–µ–≤–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è** ‚Äî –Ω–µ –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –ª–æ–≥—É–≤–∞–Ω–Ω—è –æ–∫—Ä–µ–º–æ
4. **–ü–æ—Ä—É—à–µ–Ω–Ω—è –±–∞–≥–∞—Ç—å–æ—Ö –ø—Ä–∏–Ω—Ü–∏–ø—ñ–≤** ‚Äî —Ç–∞–∫–æ–∂ –ø–æ—Ä—É—à—É—î OCP, DIP

#### –†—ñ—à–µ–Ω–Ω—è: –†–æ–∑–¥—ñ–ª–µ–Ω–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω–æ—Å—Ç–µ–π

::code-group

```csharp [UserRepository.cs] showLineNumbers
// –í—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ—Å—Ç—å: –†–æ–±–æ—Ç–∞ –∑ –¥–∞–Ω–∏–º–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
public class UserRepository
{
    private readonly string _connectionString;

    public UserRepository(string connectionString)
    {
        _connectionString = connectionString;
    }

    public void Save(User user)
    {
        using var connection = new SqlConnection(_connectionString);
        connection.Open();
        // –ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–∏–π –∑–∞–ø–∏—Ç –∑–∞–º—ñ—Å—Ç—å –∫–æ–Ω–∫–∞—Ç–µ–Ω–∞—Ü—ñ—ó
        var command = new SqlCommand(
            "INSERT INTO Users (Name, Email) VALUES (@name, @email)",
            connection);
        command.Parameters.AddWithValue("@name", user.Name);
        command.Parameters.AddWithValue("@email", user.Email);
        command.ExecuteNonQuery();
    }
}
```

```csharp [EmailValidator.cs] showLineNumbers
// –í—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ—Å—Ç—å: –í–∞–ª—ñ–¥–∞—Ü—ñ—è email
public class EmailValidator
{
    private static readonly Regex EmailRegex =
        new Regex(@"^[^@\s]+@[^@\s]+\.[^@\s]+$", RegexOptions.Compiled);

    public bool IsValid(string email)
    {
        if (string.IsNullOrWhiteSpace(email))
            return false;

        return EmailRegex.IsMatch(email);
    }
}
```

```csharp [EmailService.cs] showLineNumbers
// –í—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ—Å—Ç—å: –í—ñ–¥–ø—Ä–∞–≤–∫–∞ email
public class EmailService
{
    private readonly SmtpClient _smtpClient;

    public EmailService(SmtpClient smtpClient)
    {
        _smtpClient = smtpClient;
    }

    public void SendWelcomeEmail(string to, string userName)
    {
        var message = new MailMessage
        {
            To = { to },
            Subject = "Welcome!",
            Body = $"Thanks for registering, {userName}!"
        };

        _smtpClient.Send(message);
    }
}
```

::

**–¢–µ–ø–µ—Ä –∫–æ–∂–µ–Ω –∫–ª–∞—Å –º–∞—î –æ–¥–Ω—É –≤—ñ–¥–ø–æ–≤—ñ–¥–∞–ª—å–Ω—ñ—Å—Ç—å —ñ –æ–¥–∏–Ω "reason to change"!**
