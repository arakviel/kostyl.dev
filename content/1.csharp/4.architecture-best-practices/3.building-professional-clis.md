---
title: 'Building Professional CLIs'
description: '–ì–ª–∏–±–æ–∫–µ –≤–∏–≤—á–µ–Ω–Ω—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø—Ä–æ—Ñ–µ—Å—ñ–π–Ω–∏—Ö –∫–æ–Ω—Å–æ–ª—å–Ω–∏—Ö —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ñ–≤ –≤ C# –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º System.CommandLine —Ç–∞ Spectre.Console'
---

# Building Professional CLIs

## –í—Å—Ç—É–ø —Ç–∞ –ö–æ–Ω—Ç–µ–∫—Å—Ç

–£—è–≤—ñ—Ç—å, —â–æ –≤–∏ —Ä–æ–∑—Ä–æ–±–ª—è—î—Ç–µ —Å–∏—Å—Ç–µ–º—É –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—ó —Ä—É—Ç–∏–Ω–Ω–∏—Ö –∑–∞–¥–∞—á —É –≤–∞—à—ñ–π –∫–æ–º–∞–Ω–¥—ñ. –í–∞–º –ø–æ—Ç—Ä—ñ–±–µ–Ω —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç, —è–∫–∏–π:

-   –ü—Ä–∏–π–º–∞—î –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –∫–æ–º–∞–Ω–¥–Ω–æ–≥–æ —Ä—è–¥–∫–∞ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, `myapp process --input data.csv --output results.json`)
-   –í—ñ–¥–æ–±—Ä–∞–∂–∞—î –ø—Ä–æ–≥—Ä–µ—Å –æ–±—Ä–æ–±–∫–∏ –∑ –∫–æ–ª—å–æ—Ä–æ–≤–∏–º —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º
-   –í–∑–∞—î–º–æ–¥—ñ—î –∑ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–µ–º —á–µ—Ä–µ–∑ —ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ñ –º–µ–Ω—é
-   –í–∏–≤–æ–¥–∏—Ç—å –∑—Ä–æ–∑—É–º—ñ–ª—ñ –ø–æ–º–∏–ª–∫–∏ —Ç–∞ –ø—ñ–¥–∫–∞–∑–∫–∏
-   –ü—Ä–∞—Ü—é—î –æ–¥–Ω–∞–∫–æ–≤–æ –¥–æ–±—Ä–µ –≤ –±—É–¥—å-—è–∫–æ–º—É —Ç–µ—Ä–º—ñ–Ω–∞–ª—ñ

–¢–∞–∫–∏–π —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –º–æ–∂–µ –±—É—Ç–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–∏–π –¥–ª—è:

-   –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—ó —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è
-   –û–±—Ä–æ–±–∫–∏ –¥–∞–Ω–∏—Ö
-   –Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–≥–æ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–∏—Å—Ç–µ–º
-   –°–∏—Å—Ç–µ–º–Ω–æ–≥–æ –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä—É–≤–∞–Ω–Ω—è
-   CI/CD –ø—Ä–æ—Ü–µ—Å—ñ–≤

::note
**–ü—Ä–æ–±–ª–µ–º–∞**: –¢–∏–ø–æ–≤—ñ –∫–æ–Ω—Å–æ–ª—å–Ω—ñ –∑–∞—Å—Ç–æ—Å—É–Ω–∫–∏ –≤ C# –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å –ª–∏—à–µ `Console.WriteLine()` —Ç–∞ `Console.ReadLine()`, —â–æ –ø—Ä–∏–∑–≤–æ–¥–∏—Ç—å –¥–æ:

-   –ù–µ–∑—Ä—É—á–Ω–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥—É –∞—Ä–≥—É–º–µ–Ω—Ç—ñ–≤
-   –ù–µ–∑—Ä–æ–∑—É–º—ñ–ª–∏—Ö –ø–æ–º–∏–ª–æ–∫
-   –í—ñ–¥—Å—É—Ç–Ω–æ—Å—Ç—ñ –∞–≤—Ç–æ–¥–æ–ø–æ–≤–Ω–µ–Ω–Ω—è
-   –ü–æ–≥–∞–Ω–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫–æ–≥–æ –¥–æ—Å–≤—ñ–¥—É
    ::

**–í–∏—Ä—ñ—à–µ–Ω–Ω—è**: –°—É—á–∞—Å–Ω—ñ –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ —è–∫ **System.CommandLine** —Ç–∞ **Spectre.Console** –Ω–∞–¥–∞—é—Ç—å –ø–æ—Ç—É–∂–Ω—ñ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø—Ä–æ—Ñ–µ—Å—ñ–π–Ω–∏—Ö CLI —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ñ–≤ –∑:

-   –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–º –ø–∞—Ä—Å–∏–Ω–≥–æ–º –∞—Ä–≥—É–º–µ–Ω—Ç—ñ–≤
-   –í–∞–ª—ñ–¥–∞—Ü—ñ—î—é –≤—Ö—ñ–¥–Ω–∏—Ö –¥–∞–Ω–∏—Ö
-   –ê–≤—Ç–æ–¥–æ–ø–æ–≤–Ω–µ–Ω–Ω—è–º –∫–æ–º–∞–Ω–¥
-   –ö–æ–ª—å–æ—Ä–æ–≤–∏–º –≤–∏–≤–æ–¥–æ–º
-   –Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏–º–∏ –µ–ª–µ–º–µ–Ω—Ç–∞–º–∏ (–º–µ–Ω—é, –ø—Ä–æ–≥—Ä–µ—Å-–±–∞—Ä–∏, —Ç–∞–±–ª–∏—Ü—ñ)
-   –£–Ω—ñ—Ñ—ñ–∫–æ–≤–∞–Ω–∏–º UX

### –ï–≤–æ–ª—é—Ü—ñ—è CLI —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤

::mermaid

```mermaid
graph TD
    A[–ü—Ä–æ—Å—Ç–∏–π Console.WriteLine] -->|–û–±–º–µ–∂–µ–Ω–Ω—è| B[–†—É—á–Ω–∏–π –ø–∞—Ä—Å–∏–Ω–≥ –∞—Ä–≥—É–º–µ–Ω—Ç—ñ–≤]
    B -->|–°–∫–ª–∞–¥–Ω—ñ—Å—Ç—å| C[System.CommandLine]
    C -->|UX| D[Spectre.Console]
    D -->|–ü—Ä–æ—Ñ–µ—Å—ñ–π–Ω—ñ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏| E[–°—É—á–∞—Å–Ω—ñ CLI –¥–æ–¥–∞—Ç–∫–∏]

    style A fill:#64748b,stroke:#334155,color:#ffffff
    style B fill:#64748b,stroke:#33415,color:#ffffff
    style C fill:#3b82f6,stroke:#1d4ed8,color:#ffffff
    style D fill:#3b82f6,stroke:#1d4ed8,color:#ffffff
    style E fill:#f59e0b,stroke:#b45309,color:#ffffff
```

::

### –ü–µ—Ä–µ–¥—É–º–æ–≤–∏

–ü–µ—Ä–µ–¥ –≤–∏–≤—á–µ–Ω–Ω—è–º —Ü—ñ—î—ó —Ç–µ–º–∏ –≤–∞–º –ø–æ—Ç—Ä—ñ–±–Ω–æ —Ä–æ–∑—É–º—ñ—Ç–∏:

-   [–û—Å–Ω–æ–≤–∏ C#](/csharp/fundamentals/variables-data-types)
-   [–†–æ–±–æ—Ç—É –∑ –∫–æ–Ω—Å–æ–ª–ª—é](/csharp/fundamentals/interactive-console)
-   [–û—Å–Ω–æ–≤–∏ –û–û–ü](/csharp/oop/classes-objects)

## –§—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ñ –ö–æ–Ω—Ü–µ–ø—Ü—ñ—ó

### –©–æ —Ç–∞–∫–µ CLI (Command Line Interface)

**CLI (Command Line Interface)** ‚Äî —Ü–µ —Ç–µ–∫—Å—Ç–æ–≤–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤–∑–∞—î–º–æ–¥—ñ—ó –∑ –∫–æ–º–ø'—é—Ç–µ—Ä–Ω–æ—é —Å–∏—Å—Ç–µ–º–æ—é, –¥–µ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–≤–æ–¥–∏—Ç—å –∫–æ–º–∞–Ω–¥–∏ —É –≤–∏–≥–ª—è–¥—ñ —Ç–µ–∫—Å—Ç—É, –∞ –æ—Ç—Ä–∏–º—É—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç —É –≤–∏–≥–ª—è–¥—ñ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –≤–∏–≤–æ–¥—É.

::mermaid

```mermaid
graph LR
    A[–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á] -->|–í–≤–æ–¥–∏—Ç—å –∫–æ–º–∞–Ω–¥—É| B[CLI Parser]
    B -->|–ê–Ω–∞–ª—ñ–∑—É—î| C[–ö–æ–º–∞–Ω–¥–∞/–ê—Ä–≥—É–º–µ–Ω—Ç–∏/–û–ø—Ü—ñ—ó]
    C -->|–í–∏–∫–æ–Ω—É—î| D[–õ–æ–≥—ñ–∫–∞ –¥–æ–¥–∞—Ç–∫—É]
    D -->|–ü–æ–≤–µ—Ä—Ç–∞—î| E[–¢–µ–∫—Å—Ç–æ–≤–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç]
    E -->|–í–∏–≤–æ–¥–∏—Ç—å| A

    style B fill:#3b82f6,stroke:#1d4ed8,color:#ffffff
    style C fill:#f59e0b,stroke:#b45309,color:#ffffff
    style D fill:#10b981,stroke:#059669,color:#ffffff
```

::

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ CLI

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç    | –û–ø–∏—Å                                                   | –ü—Ä–∏–∫–ª–∞–¥                                    |
| :----------- | :----------------------------------------------------- | :----------------------------------------- |
| **–ö–æ–º–∞–Ω–¥–∞**  | –û—Å–Ω–æ–≤–Ω–∞ –¥—ñ—è, —è–∫—É –≤–∏–∫–æ–Ω—É—î –¥–æ–¥–∞—Ç–æ–∫                       | `git commit`, `dotnet build`               |
| **–ê—Ä–≥—É–º–µ–Ω—Ç** | –û–±–æ–≤'—è–∑–∫–æ–≤–∏–π –ø–∞—Ä–∞–º–µ—Ç—Ä, —â–æ –≤–∫–∞–∑—É—î—Ç—å—Å—è –±–µ–∑ –ø—Ä–µ—Ñ—ñ–∫—Å—É      | `git add file.txt` (`file.txt` - –∞—Ä–≥—É–º–µ–Ω—Ç) |
| **–û–ø—Ü—ñ—è**    | –ù–µ–æ–±–æ–≤'—è–∑–∫–æ–≤–∏–π –ø–∞—Ä–∞–º–µ—Ç—Ä, —â–æ –ø–æ—á–∏–Ω–∞—î—Ç—å—Å—è –∑ `--` –∞–±–æ `-` | `--verbose`, `-v`                          |
| **–§–ª–∞–≥**     | –û–ø—Ü—ñ—è, —â–æ –Ω–µ –ø—Ä–∏–π–º–∞—î –∑–Ω–∞—á–µ–Ω–Ω—è                          | `--help`, `--version`                      |

### System.CommandLine vs Spectre.Console

| –§—É–Ω–∫—Ü—ñ—è                       | System.CommandLine | Spectre.Console |
| :---------------------------- | :----------------- | :-------------- |
| –ü–∞—Ä—Å–∏–Ω–≥ –∞—Ä–≥—É–º–µ–Ω—Ç—ñ–≤            | ‚úÖ                 | ‚ùå              |
| –í–∞–ª—ñ–¥–∞—Ü—ñ—è –≤—Ö—ñ–¥–Ω–∏—Ö –¥–∞–Ω–∏—Ö       | ‚úÖ                 | ‚ùå              |
| –ö–æ–ª—å–æ—Ä–æ–≤–∏–π –≤–∏–≤—ñ–¥              | ‚ùå                 | ‚úÖ              |
| –Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ñ –µ–ª–µ–º–µ–Ω—Ç–∏         | ‚ùå                 | ‚úÖ              |
| –¢–∞–±–ª–∏—Ü—ñ, –¥–µ—Ä–µ–≤–∞, –ø—Ä–æ–≥—Ä–µ—Å-–±–∞—Ä–∏ | ‚ùå                 | ‚úÖ              |
| –ê–≤—Ç–æ–¥–æ–ø–æ–≤–Ω–µ–Ω–Ω—è                | ‚úÖ                 | ‚ùå              |

**–í–∏—Å–Ω–æ–≤–æ–∫**: System.CommandLine –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∑–∞ –≤—Ö—ñ–¥–Ω—ñ –¥–∞–Ω—ñ, Spectre.Console ‚Äî –∑–∞ –≤–∏—Ö—ñ–¥–Ω—ñ.

## System.CommandLine: Parsing Arguments, Options, Commands

### –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

```bash
dotnet add package System.CommandLine
```

### –û—Å–Ω–æ–≤–∏: –ü—Ä–æ—Å—Ç–∞ –∫–æ–º–∞–Ω–¥–∞

```csharp [Program.cs] showLineNumbers
using System.CommandLine;

// –í–∏–∑–Ω–∞—á–∞—î–º–æ –∫–æ—Ä–µ–Ω–µ–≤—É –∫–æ–º–∞–Ω–¥—É
var rootCommand = new RootCommand("–ú—ñ–π –ø–µ—Ä—à–∏–π CLI –¥–æ–¥–∞—Ç–æ–∫");

// –î–æ–¥–∞—î–º–æ –∫–æ–º–∞–Ω–¥—É –¥–æ –æ–±—Ä–æ–±–∫–∏
rootCommand.SetHandler(() =>
{
    Console.WriteLine("–ü—Ä–∏–≤—ñ—Ç –∑ CLI –¥–æ–¥–∞—Ç–∫—É!");
});

// –í–∏–∫–æ–Ω—É—î–º–æ –∫–æ–º–∞–Ω–¥—É
await rootCommand.InvokeAsync(args);
```

**–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:**

```bash
dotnet run
# –í–∏–≤–µ–¥–µ: –ü—Ä–∏–≤—ñ—Ç –∑ CLI –¥–æ–¥–∞—Ç–∫—É!
```

### –ê—Ä–≥—É–º–µ–Ω—Ç–∏

```csharp [Program.cs] showLineNumbers
using System.CommandLine;

var rootCommand = new RootCommand("–ü—Ä–æ—Å—Ç–∏–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä");

// –í–∏–∑–Ω–∞—á–∞—î–º–æ –∞—Ä–≥—É–º–µ–Ω—Ç–∏
var firstNumberArg = new Argument<int>("first", "–ü–µ—Ä—à–µ —á–∏—Å–ª–æ");
var secondNumberArg = new Argument<int>("second", "–î—Ä—É–≥–µ —á–∏—Å–ª–æ");

rootCommand.AddArgument(firstNumberArg);
rootCommand.AddArgument(secondNumberArg);

rootCommand.SetHandler((first, second) =>
{
    Console.WriteLine($"{first} + {second} = {first + second}");
}, firstNumberArg, secondNumberArg);

await rootCommand.InvokeAsync(args);
```

**–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:**

```bash
dotnet run 5 3
# –í–∏–≤–µ–¥–µ: 5 + 3 = 8
```

### –û–ø—Ü—ñ—ó

```csharp [Program.cs] showLineNumbers
using System.CommandLine;

var rootCommand = new RootCommand("–ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ–π–Ω–∏–π —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç");

// –í–∏–∑–Ω–∞—á–∞—î–º–æ –æ–ø—Ü—ñ—ó
var verboseOption = new Option<bool>("--verbose", "–î–µ—Ç–∞–ª—å–Ω–∏–π –≤–∏–≤—ñ–¥");
var outputOption = new Option<string>("--output", () => "output.txt", "–§–∞–π–ª –≤–∏–≤–æ–¥—É");

rootCommand.AddOption(verboseOption);
rootCommand.AddOption(outputOption);

rootCommand.SetHandler((verbose, output) =>
{
    if (verbose)
        Console.WriteLine($"–í–∏–≤—ñ–¥ –±—É–¥–µ –∑–∞–ø–∏—Å–∞–Ω–æ –¥–æ: {output}");

    Console.WriteLine($"–û–±—Ä–æ–±–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞, —Ä–µ–∑—É–ª—å—Ç–∞—Ç —É {output}");
}, verboseOption, outputOption);

await rootCommand.InvokeAsync(args);
```

**–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:**

```bash
dotnet run --verbose --output results.txt
# –í–∏–≤–µ–¥–µ:
# –í–∏–≤—ñ–¥ –±—É–¥–µ –∑–∞–ø–∏—Å–∞–Ω–æ –¥–æ: results.txt
# –û–±—Ä–æ–±–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞, —Ä–µ–∑—É–ª—å—Ç–∞—Ç —É results.txt
```

### –ö–æ–º–∞–Ω–¥–∏ —Ç–∞ –ø—ñ–¥–∫–æ–º–∞–Ω–¥–∏

```csharp [Program.cs] showLineNumbers
using System.CommandLine;

var rootCommand = new RootCommand("–£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø—Ä–æ–µ–∫—Ç–∞–º–∏");

// –ü—ñ–¥–∫–æ–º–∞–Ω–¥–∞ –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø—Ä–æ–µ–∫—Ç—É
var createCommand = new Command("create", "–°—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤–∏–π –ø—Ä–æ–µ–∫—Ç")
{
    new Option<string>("--name", "–ù–∞–∑–≤–∞ –ø—Ä–æ–µ–∫—Ç—É"),
    new Option<string>("--type", () => "console", "–¢–∏–ø –ø—Ä–æ–µ–∫—Ç—É")
};

createCommand.SetHandler((name, type) =>
{
    Console.WriteLine($"–°—Ç–≤–æ—Ä—é—î–º–æ {type} –ø—Ä–æ–µ–∫—Ç –∑ –Ω–∞–∑–≤–æ—é '{name}'");
},
new Option<string>("--name", "–ù–∞–∑–≤–∞ –ø—Ä–æ–µ–∫—Ç—É"),
new Option<string>("--type", () => "console", "–¢–∏–ø –ø—Ä–æ–µ–∫—Ç—É"));

// –ü—ñ–¥–∫–æ–º–∞–Ω–¥–∞ –¥–ª—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è –ø—Ä–æ–µ–∫—Ç—É
var deleteCommand = new Command("delete", "–í–∏–¥–∞–ª–∏—Ç–∏ –ø—Ä–æ–µ–∫—Ç")
{
    new Argument<string>("name", "–ù–∞–∑–≤–∞ –ø—Ä–æ–µ–∫—Ç—É –¥–ª—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è")
};

deleteCommand.SetHandler((name) =>
{
    Console.WriteLine($"–í–∏–¥–∞–ª—è—î–º–æ –ø—Ä–æ–µ–∫—Ç: {name}");
},
new Argument<string>("name", "–ù–∞–∑–≤–∞ –ø—Ä–æ–µ–∫—Ç—É –¥–ª—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è"));

rootCommand.AddCommand(createCommand);
rootCommand.AddCommand(deleteCommand);

await rootCommand.InvokeAsync(args);
```

**–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:**

```bash
dotnet run create --name MyProject --type webapi
# –í–∏–≤–µ–¥–µ: –°—Ç–≤–æ—Ä—é—î–º–æ webapi –ø—Ä–æ–µ–∫—Ç –∑ –Ω–∞–∑–≤–æ—é 'MyProject'

dotnet run delete MyProject
# –í–∏–≤–µ–¥–µ: –í–∏–¥–∞–ª—è—î–º–æ –ø—Ä–æ–µ–∫—Ç: MyProject
```

### –í–∞–ª—ñ–¥–∞—Ü—ñ—è

```csharp [Program.cs] showLineNumbers
using System.CommandLine;

var rootCommand = new RootCommand("–í–∞–ª—ñ–¥–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö");

var emailOption = new Option<string>("--email", "Email –∞–¥—Ä–µ—Å–∞");
emailOption.AddValidator(result =>
{
    var value = result.GetValueForOption(emailOption);
    if (string.IsNullOrEmpty(value))
        return;

    if (!value.Contains('@'))
        result.ErrorMessage = "–ù–µ–≤–∞–ª—ñ–¥–Ω–∏–π email –∞–¥—Ä–µ—Å";
});

var ageOption = new Option<int>("--age", "–í—ñ–∫");
ageOption.AddValidator(result =>
{
    var value = result.GetValueForOption(ageOption);
    if (value < 0 || value > 150)
        result.ErrorMessage = "–í—ñ–∫ –º–∞—î –±—É—Ç–∏ –≤—ñ–¥ 0 –¥–æ 150";
});

rootCommand.AddOption(emailOption);
rootCommand.AddOption(ageOption);

rootCommand.SetHandler((email, age) =>
{
    Console.WriteLine($"Email: {email}, –í—ñ–∫: {age}");
}, emailOption, ageOption);

await rootCommand.InvokeAsync(args);
```

**–í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:**

```bash
dotnet run --email invalid-email --age 200
# –í–∏–≤–µ–¥–µ –ø–æ–º–∏–ª–∫—É: –ù–µ–≤–∞–ª—ñ–¥–Ω–∏–π email –∞–¥—Ä–µ—Å, –í—ñ–∫ –º–∞—î –±—É—Ç–∏ –≤—ñ–¥ 0 –¥–æ 150
```

## Spectre.Console: Styling & Markup (colors, emoji)

### –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

```bash
dotnet add package Spectre.Console
```

### –û—Å–Ω–æ–≤–∏: –ö–æ–ª—å–æ—Ä–∏ —Ç–∞ —Å—Ç–∏–ª—ñ

```csharp [Program.cs] showLineNumbers
using Spectre.Console;

// –ü—Ä–æ—Å—Ç–∏–π –∫–æ–ª—å–æ—Ä–æ–≤–∏–π –≤–∏–≤—ñ–¥
AnsiConsole.MarkupLine("[red]–ß–µ—Ä–≤–æ–Ω–∏–π[/] —Ç–µ–∫—Å—Ç");
AnsiConsole.MarkupLine("[green]–ó–µ–ª–µ–Ω–∏–π[/] —Ç–µ–∫—Å—Ç");
AnsiConsole.MarkupLine("[blue]–°–∏–Ω—ñ–π[/] —Ç–µ–∫—Å—Ç");

// –ö–æ–º–±—ñ–Ω–∞—Ü—ñ—è –∫–æ–ª—å–æ—Ä—ñ–≤ —Ç–∞ —Å—Ç–∏–ª—ñ–≤
AnsiConsole.MarkupLine("[bold red]–ñ–∏—Ä–Ω–∏–π —á–µ—Ä–≤–æ–Ω–∏–π[/]");
AnsiConsole.MarkupLine("[underline blue]–ü—ñ–¥–∫—Ä–µ—Å–ª–µ–Ω–∏–π —Å–∏–Ω—ñ–π[/]");
AnsiConsole.MarkupLine("[strikethrough yellow]–ó–∞–∫—Ä–µ—Å–ª–µ–Ω–∏–π –∂–æ–≤—Ç–∏–π[/]");

// –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∫–æ–ª—å–æ—Ä—ñ–≤ –¥–ª—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
AnsiConsole.MarkupLine("[bold green]‚úì[/] –£—Å–ø—ñ—à–Ω–æ –≤–∏–∫–æ–Ω–∞–Ω–æ");
AnsiConsole.MarkupLine("[bold red]‚úó[/] –ü–æ–º–∏–ª–∫–∞");
AnsiConsole.MarkupLine("[bold yellow]‚ö†[/] –ü–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è");

// –ï–º–æ–¥–∑—ñ
AnsiConsole.MarkupLine("[bold blue]–ü—Ä–∏–≤—ñ—Ç![/] üåü");
AnsiConsole.MarkupLine("–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è [yellow]...[/] üöÄ");
```

### –ü–∞–ª—ñ—Ç—Ä–∏ –∫–æ–ª—å–æ—Ä—ñ–≤

```csharp [Program.cs] showLineNumbers
using Spectre.Console;

// –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è CSS-–Ω–∞–∑–≤ –∫–æ–ª—å–æ—Ä—ñ–≤
AnsiConsole.MarkupLine("[color(255,165,0)]–ü–æ–º–∞—Ä–∞–Ω—á–µ–≤–∏–π[/] –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é RGB");
AnsiConsole.MarkupLine("[color(0,255,0)]–ó–µ–ª–µ–Ω–∏–π[/] –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é RGB");

// –í–∏–≤–µ–¥–µ–Ω–Ω—è –∫–æ–ª—å–æ—Ä–æ–≤–æ—ó –ø–∞–ª—ñ—Ç—Ä–∏
var colors = new[]
{
    "red", "green", "blue", "yellow", "magenta", "cyan",
    "orange", "purple", "pink", "brown"
};

foreach (var color in colors)
{
    AnsiConsole.MarkupLine($"[{color}]{color}[/]");
}
```

### –°—Ç–∏–ª—ñ —Ç–∞ —Ç–µ–º–∏

```csharp [Program.cs] showLineNumbers
using Spectre.Console;

// –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–µ–º–∏ –¥–ª—è –≤—Å—å–æ–≥–æ –≤–∏–≤–æ–¥—É
AnsiConsole.Write(
    new Panel("–¶–µ –ø–∞–Ω–µ–ª—å –∑—ñ —Å—Ç–∏–ª–µ–º")
        .Header("–ó–∞–≥–æ–ª–æ–≤–æ–∫")
        .Border(BoxBorder.Double)
        .BorderColor(Color.Blue));

// –í–∏–≤–µ–¥–µ–Ω–Ω—è —Ç–∞–±–ª–∏—Ü—ñ –∑ –∫–æ–ª—å–æ—Ä–∞–º–∏
var table = new Table();
table.Border(TableBorder.Double);
table.AddColumn(new TableColumn("–ö–æ–ª—ñ—Ä").Centered());
table.AddColumn(new TableColumn("–û–ø–∏—Å").Centered());

table.AddRow("[red]–ß–µ—Ä–≤–æ–Ω–∏–π[/]", "–ü–æ–º–∏–ª–∫–∏");
table.AddRow("[green]–ó–µ–ª–µ–Ω–∏–π[/]", "–£—Å–ø—ñ—Ö");
table.AddRow("[yellow]–ñ–æ–≤—Ç–∏–π[/]", "–ü–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è");

AnsiConsole.Write(table);
```

## Spectre.Console: Widgets (Tables, Trees, Panels, Rules)

### –¢–∞–±–ª–∏—Ü—ñ

```csharp [Program.cs] showLineNumbers
using Spectre.Console;

// –ü—Ä–æ—Å—Ç–∞ —Ç–∞–±–ª–∏—Ü—è
var table = new Table();
table.Title = new TableTitle("–°–ø–∏—Å–æ–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤");
table.Caption = new TableCaption("–í—Å—å–æ–≥–æ: 3 –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ");

// –î–æ–¥–∞—î–º–æ –∫–æ–ª–æ–Ω–∫–∏
table.AddColumn("ID");
table.AddColumn("–Ü–º'—è");
table.AddColumn("Email");
table.AddColumn("–†–æ–ª—å");

// –î–æ–¥–∞—î–º–æ —Ä—è–¥–∫–∏
table.AddRow("1", "[bold]–ê–¥–º—ñ–Ω[/]", "admin@example.com", "[green]Admin[/]");
table.AddRow("2", "–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á", "user@example.com", "[yellow]User[/]");
table.AddRow("3", "–ú–æ–¥–µ—Ä–∞—Ç–æ—Ä", "moderator@example.com", "[blue]Moderator[/]");

// –°—Ç–∏–ª—ñ
table.BorderStyle(Style.Parse("blue"));
table.BorderColor(Color.Blue);

AnsiConsole.Write(table);
```

### –î–µ—Ä–µ–≤–∞

```csharp [Program.cs] showLineNumbers
using Spectre.Console;

// –°—Ç–≤–æ—Ä—é—î–º–æ –¥–µ—Ä–µ–≤–æ
var tree = new Tree("–§–∞–π–ª–∏ –ø—Ä–æ–µ–∫—Ç—É");

// –î–æ–¥–∞—î–º–æ –≤—É–∑–ª–∏
var src = tree.AddNode("[bold blue]src/[/]");
src.AddNode("[green]Program.cs[/]");
src.AddNode("[green]Services/[/]");
src.AddNode("[green]Models/[/]");

var tests = tree.AddNode("[bold red]tests/[/]");
tests.AddNode("[yellow]UnitTest1.cs[/]");
tests.AddNode("[yellow]IntegrationTest.cs[/]");

var config = tree.AddNode("[bold yellow]config/[/]");
config.AddNode("[green]appsettings.json[/]");

AnsiConsole.Write(tree);
```

### –ü–∞–Ω–µ–ª—ñ

```csharp [Program.cs] showLineNumbers
using Spectre.Console;

// –ü—Ä–æ—Å—Ç–∞ –ø–∞–Ω–µ–ª—å
var panel = new Panel("–¶–µ –∑–≤–∏—á–∞–π–Ω–∞ –ø–∞–Ω–µ–ª—å");
panel.Header = new PanelHeader("–ó–∞–≥–æ–ª–æ–≤–æ–∫");
panel.Border = BoxBorder.Double;
panel.BorderColor(Color.Blue);

AnsiConsole.Write(panel);

// –ü–∞–Ω–µ–ª—å –∑ –∫–æ–ª—å–æ—Ä–æ–≤–∏–º –≤–º—ñ—Å—Ç–æ–º
var statusPanel = new Panel(
    "[bold green]‚úì[/] –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑–∞–≤–µ—Ä—à–µ–Ω–æ\n" +
    "[bold yellow]‚ö†[/] –ü–æ—Ç—Ä–µ–±—É—î –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è");
statusPanel.Header = new PanelHeader("–°—Ç–∞—Ç—É—Å");
statusPanel.Border = BoxBorder.Rounded;
statusPanel.Expand = true;

AnsiConsole.Write(statusPanel);
```

### –†–æ–∑–¥—ñ–ª—å–Ω–∏–∫–∏

```csharp [Program.cs] showLineNumbers
using Spectre.Console;

// –ü—Ä–æ—Å—Ç–∏–π —Ä–æ–∑–¥—ñ–ª—å–Ω–∏–∫
AnsiConsole.Write(new Rule("–†–æ–∑–¥—ñ–ª—å–Ω–∏–∫"));

// –†–æ–∑–¥—ñ–ª—å–Ω–∏–∫ –∑ —Å–∏–º–≤–æ–ª–æ–º
AnsiConsole.Write(new Rule("–í–∞–∂–ª–∏–≤–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è").RuleStyle(Style.Parse("red")));

// –†–æ–∑–¥—ñ–ª—å–Ω–∏–∫ –∑ —Ç–µ–∫—Å—Ç–æ–º –ø–æ —Ü–µ–Ω—Ç—Ä—É
AnsiConsole.Write(new Rule("[bold blue]–†–æ–∑–¥—ñ–ª 1[/]").RuleStyle(Style.Parse("blue")));

// –í–∏–≤–µ–¥–µ–Ω–Ω—è –∑ –≤—ñ–¥—Å—Ç—É–ø–∞–º–∏
AnsiConsole.WriteLine();
AnsiConsole.Write(new Rule("–ö—ñ–Ω–µ—Ü—å —Ä–æ–∑–¥—ñ–ª—É").RuleStyle(Style.Parse("dim")));
AnsiConsole.WriteLine();
```

## Spectre.Console: Prompts (Selection, Multi-selection, Text input with validation)

### –¢–µ–∫—Å—Ç–æ–≤–∏–π –≤–≤—ñ–¥

```csharp [Program.cs] showLineNumbers
using Spectre.Console;

// –ü—Ä–æ—Å—Ç–∏–π –≤–≤—ñ–¥
var name = AnsiConsole.Ask<string>("–í–≤–µ–¥—ñ—Ç—å –≤–∞—à–µ [green]—ñ–º'—è[/]:");
AnsiConsole.MarkupLine($"–ü—Ä–∏–≤—ñ—Ç, [bold]{name}[/]! üåü");

// –í–≤—ñ–¥ –∑ –≤–∞–ª—ñ–¥–∞—Ü—ñ—î—é
var email = AnsiConsole.Prompt(
    new TextPrompt<string>("–í–≤–µ–¥—ñ—Ç—å –≤–∞—à [blue]email[/]:")
        .Validate(email =>
        {
            if (email.Contains('@'))
                return ValidationResult.Success();
            else
                return ValidationResult.Error("Email –º–∞—î –º—ñ—Å—Ç–∏—Ç–∏ —Å–∏–º–≤–æ–ª @");
        }));

AnsiConsole.MarkupLine($"Email: [bold]{email}[/]");

// –í–≤—ñ–¥ –ø–∞—Ä–æ–ª—é (–Ω–µ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è)
var password = AnsiConsole.Prompt(
    new TextPrompt<string>("–í–≤–µ–¥—ñ—Ç—å [red]–ø–∞—Ä–æ–ª—å[/]:")
        .PromptStyle("red")
        .Secret());

AnsiConsole.MarkupLine("–ü–∞—Ä–æ–ª—å –ø—Ä–∏–π–Ω—è—Ç–æ! ‚úÖ");
```

### –í–∏–±—ñ—Ä –æ–¥–Ω–æ–≥–æ –µ–ª–µ–º–µ–Ω—Ç–∞

```csharp [Program.cs] showLineNumbers
using Spectre.Console;

// –í–∏–±—ñ—Ä –∑ –∫—ñ–ª—å–∫–æ—Ö –æ–ø—Ü—ñ–π
var language = AnsiConsole.Prompt(
    new SelectionPrompt<string>()
        .Title("–í–∏–±–µ—Ä—ñ—Ç—å –º–æ–≤—É –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è:")
        .PageSize(5)
        .MoreChoicesText("[grey](–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ ‚Üë‚Üì –¥–ª—è –Ω–∞–≤—ñ–≥–∞—Ü—ñ—ó)[/]")
        .AddChoices("C#", "Python", "JavaScript", "Java", "Go", "Rust"));

AnsiConsole.MarkupLine($"–í–∏ –æ–±—Ä–∞–ª–∏: [bold blue]{language}[/]");

// –í–∏–±—ñ—Ä –∑ –∫–∞—Å—Ç–æ–º–Ω–∏–º —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è–º
var projectType = AnsiConsole.Prompt(
    new SelectionPrompt<string>()
        .Title("–í–∏–±–µ—Ä—ñ—Ç—å —Ç–∏–ø –ø—Ä–æ–µ–∫—Ç—É:")
        .Converter(choice => $"[bold]{choice.Name}[/] - {choice.Description}")
        .AddChoices(
            new ProjectType("console", "–ö–æ–Ω—Å–æ–ª—å–Ω–∏–π –¥–æ–¥–∞—Ç–æ–∫"),
            new ProjectType("webapi", "Web API"),
            new ProjectType("mvc", "MVC –¥–æ–¥–∞—Ç–æ–∫"),
            new ProjectType("library", "–ë—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ –∫–ª–∞—Å—ñ–≤")));

AnsiConsole.MarkupLine($"–°—Ç–≤–æ—Ä—é—î–º–æ: [bold]{projectType.Name}[/] ({projectType.Description})");

public class ProjectType
{
    public string Name { get; }
    public string Description { get; }

    public ProjectType(string name, string description)
    {
        Name = name;
        Description = description;
    }
}
```

### –í–∏–±—ñ—Ä –∫—ñ–ª—å–∫–æ—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤

```csharp [Program.cs] showLineNumbers
using Spectre.Console;

// –í–∏–±—ñ—Ä –∫—ñ–ª—å–∫–æ—Ö –æ–ø—Ü—ñ–π
var features = AnsiConsole.Prompt(
    new MultiSelectionPrompt<string>()
        .Title("–í–∏–±–µ—Ä—ñ—Ç—å —Ñ—É–Ω–∫—Ü—ñ—ó –¥–ª—è –¥–æ–¥–∞—Ç–∫—É:")
        .PageSize(10)
        .InstructionsText(
            "[grey](–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ [blue]Space[/] –¥–ª—è –≤–∏–±–æ—Ä—É, [green]Enter[/] –¥–ª—è –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è)[/]")
        .AddChoiceGroup("–ë–∞–∑–æ–≤—ñ —Ñ—É–Ω–∫—Ü—ñ—ó", new[] { "–ê–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è", "–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è" })
        .AddChoiceGroup("–†–æ–∑—à–∏—Ä–µ–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó", new[] { "API", "–ö–µ—à—É–≤–∞–Ω–Ω—è", "–õ–æ–≥—É–≤–∞–Ω–Ω—è" })
        .AddChoiceGroup("–Ü–Ω—Ç–µ—Ä—Ñ–µ–π—Å", new[] { "CLI", "Web UI", "Mobile UI" }));

AnsiConsole.MarkupLine("–û–±—Ä–∞–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó:");
foreach (var feature in features)
{
    AnsiConsole.MarkupLine($"  [green]‚Ä¢[/] {feature}");
}
```

## Spectre.Console: Live Displays (Progress Bars, Status spinners, Live charts)

### –ü—Ä–æ–≥—Ä–µ—Å-–±–∞—Ä–∏

```csharp [Program.cs] showLineNumbers
using Spectre.Console;

// –ü—Ä–æ—Å—Ç–∏–π –ø—Ä–æ–≥—Ä–µ—Å-–±–∞—Ä
var progress = new Progress(Console.Out);
progress.Start(ctx =>
{
    var task = ctx.AddTask("–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö", maxValue: 100);

    while (!task.IsFinished)
    {
        task.Increment(1);
        Thread.Sleep(50);
    }
});

// –°–∫–ª–∞–¥–Ω–∏–π –ø—Ä–æ–≥—Ä–µ—Å-–±–∞—Ä –∑ –∫—ñ–ª—å–∫–æ–º–∞ –∑–∞–≤–¥–∞–Ω–Ω—è–º–∏
var multiProgress = new Progress(Console.Out);
multiProgress.Start(ctx =>
{
    var task1 = ctx.AddTask("[green]–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è[/]", maxValue: 1000);
    var task2 = ctx.AddTask("[blue]–û–±—Ä–æ–±–∫–∞[/]", maxValue: 2000);
    var task3 = ctx.AddTask("[yellow]–ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è[/]", maxValue: 500);

    while (!task1.IsFinished || !task2.IsFinished || !task3.IsFinished)
    {
        task1.Increment(1.5);
        task2.Increment(2.3);
        task3.Increment(0.8);
        Thread.Sleep(10);
    }
});

// –ü—Ä–æ–≥—Ä–µ—Å-–±–∞—Ä –∑ –∫–∞—Å—Ç–æ–º–Ω–∏–º —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è–º
var customProgress = new Progress(Console.Out,
    new ProgressTaskSettings
    {
        AutoRefresh = true,
        HideCompleted = false
    });

customProgress.Start(ctx =>
{
    var task = ctx.AddTask("–ö–æ–º–ø—ñ–ª—è—Ü—ñ—è", maxValue: 100);
    task.Description = "[bold]–ö–æ–º–ø—ñ–ª—è—Ü—ñ—è[/] [green]Program.cs[/]";

    while (!task.IsFinished)
    {
        task.Increment(1);
        Thread.Sleep(20);
    }
});
```

### –°—Ç–∞—Ç—É—Å-—ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä–∏

```csharp [Program.cs] showLineNumbers
using Spectre.Console;

// –ü—Ä–æ—Å—Ç–∏–π —Å—Ç–∞—Ç—É—Å-—ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä
AnsiConsole.Status()
    .Start("–í–∏–∫–æ–Ω–∞–Ω–Ω—è –æ–ø–µ—Ä–∞—Ü—ñ—ó...", ctx =>
    {
        ctx.Status = "[green]–ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö...[/]";
        Thread.Sleep(1000);

        ctx.Status = "[blue]–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö...[/]";
        Thread.Sleep(1000);

        ctx.Status = "[yellow]–û–±—Ä–æ–±–∫–∞ –¥–∞–Ω–∏—Ö...[/]";
        Thread.Sleep(1000);

        ctx.Status = "[green]–ó–∞–≤–µ—Ä—à–µ–Ω–æ![/]";
    });

// –°—Ç–∞—Ç—É—Å-—ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑ –∫–∞—Å—Ç–æ–º–Ω–∏–º —Å–ø—ñ–Ω–Ω–µ—Ä–æ–º
AnsiConsole.Status()
    .Spinner(Spinner.Known.Star)
    .SpinnerStyle(Style.Parse("green"))
    .Start("–ê–Ω–∞–ª—ñ–∑ —Ñ–∞–π–ª—ñ–≤...", ctx =>
    {
        for (int i = 0; i < 5; i++)
        {
            ctx.Status = $"–ê–Ω–∞–ª—ñ–∑ —Ñ–∞–π–ª—É {i + 1}/5...";
            Thread.Sleep(500);
        }
    });
```

### –ñ–∏–≤—ñ —Ç–∞–±–ª–∏—Ü—ñ

```csharp [Program.cs] showLineNumbers
using Spectre.Console;

// –°—Ç–≤–æ—Ä—é—î–º–æ —Ç–∞–±–ª–∏—Ü—é –∑ –¥–∞–Ω–∏–º–∏
var table = new Table();
table.AddColumn("–ù–∞–∑–≤–∞");
table.AddColumn("–°—Ç–∞—Ç—É—Å");
table.AddColumn("–ü—Ä–æ–≥—Ä–µ—Å");

// –°–∏–º—É–ª—é—î–º–æ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö
var tasks = new[]
{
    new LiveTask("–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è", 0),
    new LiveTask("–û–±—Ä–æ–±–∫–∞", 0),
    new LiveTask("–ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è", 0)
};

var live = new LiveDisplay(table);
live.Start(ctx =>
{
    while (tasks.Any(t => t.Progress < 100))
    {
        table = new Table();
        table.AddColumn("–ù–∞–∑–≤–∞");
        table.AddColumn("–°—Ç–∞—Ç—É—Å");
        table.AddColumn("–ü—Ä–æ–≥—Ä–µ—Å");

        foreach (var task in tasks)
        {
            if (task.Progress < 100)
                task.Progress += 2;

            var status = task.Progress switch
            {
                < 33 => "[yellow]–í–∏–∫–æ–Ω—É—î—Ç—å—Å—è[/]",
                < 6 => "[blue]–û–±—Ä–æ–±–∫–∞[/]",
                < 100 => "[green]–ú–∞–π–∂–µ –≥–æ—Ç–æ–≤–æ[/]",
                _ => "[bold green]‚úì –ì–æ—Ç–æ–≤–æ[/]"
            };

            table.AddRow(task.Name, status, $"[cyan]{task.Progress}%[/]");
        }

        ctx.Update(live);
        Thread.Sleep(100);
    }
});

public class LiveTask
{
    public string Name { get; }
    public int Progress { get; set; }

    public LiveTask(string name, int progress)
    {
        Name = name;
        Progress = progress;
    }
}
```

## AnsiConsole Features

### –†–æ–±–æ—Ç–∞ –∑ –∫–æ–ª–æ–Ω–∫–∞–º–∏

```csharp [Program.cs] showLineNumbers
using Spectre.Console;

// –í–∏–≤–µ–¥–µ–Ω–Ω—è –≤ –∫–æ–ª–æ–Ω–∫–∏
var columns = new Columns(
    new Panel("–ö–æ–ª–æ–Ω–∫–∞ 1"),
    new Panel("–ö–æ–ª–æ–Ω–∫–∞ 2"),
    new Panel("–ö–æ–ª–æ–Ω–∫–∞ 3"));

columns.Expand = true;
AnsiConsole.Write(columns);

// –í–∏–≤–µ–¥–µ–Ω–Ω—è —Å–ø–∏—Å–∫—É –≤ –∫–æ–ª–æ–Ω–∫–∞—Ö
var features = new[]
{
    "–ü–∞—Ä—Å–∏–Ω–≥ –∞—Ä–≥—É–º–µ–Ω—Ç—ñ–≤",
    "–ö–æ–ª—å–æ—Ä–æ–≤–∏–π –≤–∏–≤—ñ–¥",
    "–Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ñ –µ–ª–µ–º–µ–Ω—Ç–∏",
    "–ü—Ä–æ–≥—Ä–µ—Å-–±–∞—Ä–∏",
    "–¢–∞–±–ª–∏—Ü—ñ",
    "–î–µ—Ä–µ–≤–∞"
};

var featureColumns = new Columns(features.Select(f => new Panel(f)).ToArray());
featureColumns.Padding = new Padding(2, 1);
AnsiConsole.Write(featureColumns);
```

### Grid (—Ç–∞–±–ª–∏—Ü—è –±–µ–∑ —Ä–∞–º–æ–∫)

```csharp [Program.cs] showLineNumbers
using Spectre.Console;

// –°—Ç–≤–æ—Ä—é—î–º–æ —Å—ñ—Ç–∫—É
var grid = new Grid();
grid.AddColumn(new GridColumn().Width(20));
grid.AddColumn(new GridColumn().Width(30));
grid.AddColumn(new GridColumn());

// –î–æ–¥–∞—î–º–æ —Ä—è–¥–∫–∏
grid.AddRow("[bold]–ù–∞–∑–≤–∞[/]", "[bold]–û–ø–∏—Å[/]", "[bold]–°—Ç–∞—Ç—É—Å[/]");
grid.AddRow("CLI Parser", "–ü–∞—Ä—Å–∏–Ω–≥ –∫–æ–º–∞–Ω–¥–Ω–æ–≥–æ —Ä—è–¥–∫–∞", "[green]‚úì[/]");
grid.AddRow("Color Output", "–ö–æ–ª—å–æ—Ä–æ–≤–∏–π –≤–∏–≤—ñ–¥", "[green]‚úì[/]");
grid.AddRow("Progress Bars", "–Ü–Ω–¥–∏–∫–∞—Ç–æ—Ä–∏ –ø—Ä–æ–≥—Ä–µ—Å—É", "[green]‚úì[/]");

AnsiConsole.Write(grid);
```

### –ö–∞—Å—Ç–æ–º—ñ–∑–∞—Ü—ñ—è –≤–∏–≤–æ–¥—É

```csharp [Program.cs] showLineNumbers
using Spectre.Console;

// –ö–∞—Å—Ç–æ–º—ñ–∑–∞—Ü—ñ—è —à–∏—Ä–∏–Ω–∏ –∫–æ–Ω—Å–æ–ª—ñ
AnsiConsole.Profile.Width = 80;

// –ö–∞—Å—Ç–æ–º—ñ–∑–∞—Ü—ñ—è –∫–æ–ª—å–æ—Ä—ñ–≤
AnsiConsole.Profile.Capabilities.ColorSystem = ColorSystemSupport.TrueColor;

// –í–∏–≤–µ–¥–µ–Ω–Ω—è –∑ –≤—ñ–¥—Å—Ç—É–ø–∞–º–∏
AnsiConsole.Write(new Padder(
    new Panel("–í–º—ñ—Å—Ç –∑ –≤—ñ–¥—Å—Ç—É–ø–∞–º–∏"),
    new Padding(2, 2, 2, 2)));

// –£–º–æ–≤–Ω–µ –≤–∏–≤–µ–¥–µ–Ω–Ω—è (—Ç—ñ–ª—å–∫–∏ —è–∫—â–æ –∫–æ–Ω—Å–æ–ª—å –ø—ñ–¥—Ç—Ä–∏–º—É—î –∫–æ–ª—å–æ—Ä–∏)
if (AnsiConsole.Profile.SupportsColor())
{
    AnsiConsole.MarkupLine("[bold green]–ö–æ–ª—å–æ—Ä–∏ –ø—ñ–¥—Ç—Ä–∏–º—É—é—Ç—å—Å—è![/]");
}
else
{
    AnsiConsole.WriteLine("–ö–æ–ª—å–æ—Ä–∏ –Ω–µ –ø—ñ–¥—Ç—Ä–∏–º—É—é—Ç—å—Å—è");
}
```

## –ö–æ–º–±—ñ–Ω—É–≤–∞–Ω–Ω—è System.CommandLine —Ç–∞ Spectre.Console

### –ü—Ä–∏–∫–ª–∞–¥: –Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏–π —Ñ–∞–π–ª–æ–≤–∏–π –º–µ–Ω–µ–¥–∂–µ—Ä

```csharp [FileManager.cs] showLineNumbers
using System.CommandLine;
using Spectre.Console;

public class FileManager
{
    public static async Task<int> Run(string[] args)
    {
        var rootCommand = new RootCommand("CLI —Ñ–∞–π–ª–æ–≤–∏–π –º–µ–Ω–µ–¥–∂–µ—Ä");

        var listCommand = new Command("list", "–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ —Ñ–∞–π–ª–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó")
        {
            new Option<string>("--path", () => ".", "–®–ª—è—Ö –¥–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó")
        };

        listCommand.SetHandler((path) => ListFiles(path),
            new Option<string>("--path", () => ".", "–®–ª—è—Ö –¥–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—ó"));

        var copyCommand = new Command("copy", "–ö–æ–ø—ñ—é–≤–∞—Ç–∏ —Ñ–∞–π–ª")
        {
            new Argument<string>("source", "–î–∂–µ—Ä–µ–ª–æ"),
            new Argument<string>("destination", "–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è")
        };

        copyCommand.SetHandler((source, destination) => CopyFile(source, destination),
            new Argument<string>("source", "–î–∂–µ—Ä–µ–ª–æ"),
            new Argument<string>("destination", "–ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è"));

        rootCommand.AddCommand(listCommand);
        rootCommand.AddCommand(copyCommand);

        return await rootCommand.InvokeAsync(args);
    }

    private static void ListFiles(string path)
    {
        if (!Directory.Exists(path))
        {
            AnsiConsole.MarkupLine("[red]–î–∏—Ä–µ–∫—Ç–æ—Ä—ñ—è –Ω–µ —ñ—Å–Ω—É—î:[/] {path}");
            return;
        }

        var table = new Table();
        table.Title = new TableTitle($"–§–∞–π–ª–∏ –≤: {path}");
        table.AddColumn("–ù–∞–∑–≤–∞");
        table.AddColumn("–¢–∏–ø");
        table.AddColumn("–†–æ–∑–º—ñ—Ä");
        table.AddColumn("–î–∞—Ç–∞ –∑–º—ñ–Ω–∏");

        var files = Directory.GetFiles(path)
            .Select(f => new FileInfo(f))
            .Concat(Directory.GetDirectories(path).Select(d => new DirectoryInfo(d)));

        foreach (var file in files)
        {
            var type = file is DirectoryInfo ? "[blue]DIR[/]" : "[yellow]FILE[/]";
            var size = file is FileInfo fileInfo ? FormatFileSize(fileInfo.Length) : "-";
            var modified = file.LastWriteTime.ToString("yyyy-MM-dd HH:mm");

            table.AddRow(file.Name, type, size, modified);
        }

        AnsiConsole.Write(table);
    }

    private static void CopyFile(string source, string destination)
    {
        if (!File.Exists(source))
        {
            AnsiConsole.MarkupLine($"[red]–§–∞–π–ª –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ:[/] {source}");
            return;
        }

        var progress = new Progress(Console.Out);
        progress.Start(ctx =>
        {
            var task = ctx.AddTask("–ö–æ–ø—ñ—é–≤–∞–Ω–Ω—è —Ñ–∞–π–ª—É", maxValue: 100);

            // –°–∏–º—É–ª—è—Ü—ñ—è –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è
            for (int i = 0; i <= 100; i++)
            {
                task.Increment(1);
                Thread.Sleep(10);
            }
        });

        File.Copy(source, destination, true);
        AnsiConsole.MarkupLine($"[green]–§–∞–π–ª —Å–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ:[/] {source} ‚Üí {destination}");
    }

    private static string FormatFileSize(long bytes)
    {
        string[] sizes = { "B", "KB", "MB", "GB" };
        double len = bytes;
        int order = 0;
        while (len >= 1024 && order < sizes.Length - 1)
        {
            order++;
            len = len / 1024;
        }

        return $"{len:0.##} {sizes[order]}";
    }
}
```

### –ü—Ä–∏–∫–ª–∞–¥: –ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∑–≤—ñ—Ç—ñ–≤

```csharp [ReportGenerator.cs] showLineNumbers
using System.CommandLine;
using Spectre.Console;

public class ReportGenerator
{
    public static async Task<int> Run(string[] args)
    {
        var rootCommand = new RootCommand("–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∑–≤—ñ—Ç—ñ–≤");

        var generateCommand = new Command("generate", "–ó–≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –∑–≤—ñ—Ç")
        {
            new Option<string>("--format", () => "table", "–§–æ—Ä–º–∞—Ç –≤–∏–≤–æ–¥—É (table, json, csv)"),
            new Option<string>("--output", () => "report.txt", "–§–∞–π–ª –≤–∏–≤–æ–¥—É"),
            new Option<bool>("--interactive", "–Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏–π —Ä–µ–∂–∏–º")
        };

        generateCommand.SetHandler(async (format, output, interactive) =>
            await GenerateReport(format, output, interactive),
            new Option<string>("--format", () => "table", "–§–æ—Ä–º–∞—Ç –≤–∏–≤–æ–¥—É (table, json, csv)"),
            new Option<string>("--output", () => "report.txt", "–§–∞–π–ª –≤–∏–≤–æ–¥—É"),
            new Option<bool>("--interactive", "–Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏–π —Ä–µ–∂–∏–º"));

        rootCommand.AddCommand(generateCommand);

        return await rootCommand.InvokeAsync(args);
    }

    private static async Task GenerateReport(string format, string output, bool interactive)
    {
        // –ó–±–∏—Ä–∞—î–º–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ —ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ, —è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ
        if (interactive)
        {
            format = AnsiConsole.Prompt(
                new SelectionPrompt<string>()
                    .Title("–í–∏–±–µ—Ä—ñ—Ç—å —Ñ–æ—Ä–º–∞—Ç –∑–≤—ñ—Ç—É:")
                    .AddChoices("table", "json", "csv"));

            output = AnsiConsole.Ask<string>("–í–≤–µ–¥—ñ—Ç—å —à–ª—è—Ö –¥–æ —Ñ–∞–π–ª—É –≤–∏–≤–æ–¥—É:");
        }

        // –°–∏–º—É–ª—é—î–º–æ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—é –∑–≤—ñ—Ç—É
        var progress = new Progress(Console.Out);
        progress.Start(ctx =>
        {
            var task = ctx.AddTask("–ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –∑–≤—ñ—Ç—É", maxValue: 100);

            for (int i = 0; i <= 10; i++)
            {
                task.Increment(1);
                Thread.Sleep(20);
            }
        });

        // –°—Ç–≤–æ—Ä—é—î–º–æ –∑–≤—ñ—Ç
        var reportData = GenerateSampleData();

        switch (format.ToLower())
        {
            case "table":
                DisplayAsTable(reportData);
                break;
            case "json":
                var json = System.Text.Json.JsonSerializer.Serialize(reportData, new System.Text.Json.JsonSerializerOptions { WriteIndented = true });
                await File.WriteAllTextAsync(output, json);
                AnsiConsole.MarkupLine($"[green]–ó–≤—ñ—Ç –∑–±–µ—Ä–µ–∂–µ–Ω–æ —É —Ñ–æ—Ä–º–∞—Ç—ñ JSON:[/] {output}");
                break;
            case "csv":
                await WriteToCsv(reportData, output);
                AnsiConsole.MarkupLine($"[green]–ó–≤—ñ—Ç –∑–±–µ—Ä–µ–∂–µ–Ω–æ —É —Ñ–æ—Ä–º–∞—Ç—ñ CSV:[/] {output}");
                break;
            default:
                AnsiConsole.MarkupLine($"[red]–ù–µ–≤—ñ–¥–æ–º–∏–π —Ñ–æ—Ä–º–∞—Ç:[/] {format}");
                break;
        }
    }

    private static List<ReportItem> GenerateSampleData()
    {
        return new List<ReportItem>
        {
            new ReportItem { Name = "–ü—Ä–æ–µ–∫—Ç A", Status = "–ì–æ—Ç–æ–≤–∏–π", Progress = 100, Score = 95.5 },
            new ReportItem { Name = "–ü—Ä–æ–µ–∫—Ç B", Status = "–í —Ä–æ–±–æ—Ç—ñ", Progress = 75, Score = 82.3 },
            new ReportItem { Name = "–ü—Ä–æ–µ–∫—Ç C", Status = "–ü–ª–∞–Ω—É—î—Ç—å—Å—è", Progress = 10, Score = 0 },
            new ReportItem { Name = "–ü—Ä–æ–µ–∫—Ç D", Status = "–ó–∞—Ç—Ä–∏–º—É—î—Ç—å—Å—è", Progress = 40, Score = 65.0 }
        };
    }

    private static void DisplayAsTable(List<ReportItem> data)
    {
        var table = new Table();
        table.Title = new TableTitle("–ó–≤—ñ—Ç –ø–æ –ø—Ä–æ–µ–∫—Ç–∞–º");
        table.AddColumn("–ù–∞–∑–≤–∞");
        table.AddColumn("–°—Ç–∞—Ç—É—Å");
        table.AddColumn("–ü—Ä–æ–≥—Ä–µ—Å");
        table.AddColumn("–û—Ü—ñ–Ω–∫–∞");

        foreach (var item in data)
        {
            var statusColor = item.Status switch
            {
                "–ì–æ—Ç–æ–≤–∏–π" => "green",
                "–í —Ä–æ–±–æ—Ç—ñ" => "yellow",
                "–ü–ª–∞–Ω—É—î—Ç—å—Å—è" => "blue",
                "–ó–∞—Ç—Ä–∏–º—É—î—Ç—å—Å—è" => "red",
                _ => "white"
            };

            var progressText = $"[cyan]{item.Progress}%[/]";
            var scoreText = item.Score > 0 ? $"[bold]{item.Score:F1}[/]" : "-";

            table.AddRow(
                item.Name,
                $"[{statusColor}]{item.Status}[/]",
                progressText,
                scoreText);
        }

        AnsiConsole.Write(table);
    }

    private static async Task WriteToCsv(List<ReportItem> data, string filePath)
    {
        var csv = "–ù–∞–∑–≤–∞,–°—Ç–∞—Ç—É—Å,–ü—Ä–æ–≥—Ä–µ—Å,–û—Ü—ñ–Ω–∫–∞\n";
        foreach (var item in data)
        {
            csv += $"{item.Name},{item.Status},{item.Progress},{item.Score}\n";
        }

        await File.WriteAllTextAsync(filePath, csv);
    }
}

public class ReportItem
{
    public string Name { get; set; }
    public string Status { get; set; }
    public int Progress { get; set; }
    public double Score { get; set; }
}
```

### –ü—Ä–∏–∫–ª–∞–¥: CLI –∫–ª—ñ—î–Ω—Ç API

```csharp [ApiClient.cs] showLineNumbers
using System.CommandLine;
using Spectre.Console;
using System.Text.Json;

public class ApiClient
{
    public static async Task<int> Run(string[] args)
    {
        var rootCommand = new RootCommand("CLI –∫–ª—ñ—î–Ω—Ç –¥–ª—è API");

        var getUsersCommand = new Command("get-users", "–û—Ç—Ä–∏–º–∞—Ç–∏ —Å–ø–∏—Å–æ–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤")
        {
            new Option<int>("--page", () => 1, "–ù–æ–º–µ—Ä —Å—Ç–æ—Ä—ñ–Ω–∫–∏"),
            new Option<int>("--limit", () => 10, "–ö—ñ–ª—å–∫—ñ—Å—Ç—å –∑–∞–ø–∏—Å—ñ–≤")
        };

        getUsersCommand.SetHandler(async (page, limit) =>
            await GetUsers(page, limit),
            new Option<int>("--page", () => 1, "–ù–æ–º–µ—Ä —Å—Ç–æ—Ä—ñ–Ω–∫–∏"),
            new Option<int>("--limit", () => 10, "–ö—ñ–ª—å–∫—ñ—Å—Ç—å –∑–∞–ø–∏—Å—ñ–≤"));

        var getUserCommand = new Command("get-user", "–û—Ç—Ä–∏–º–∞—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑–∞ ID")
        {
            new Argument<int>("id", "ID –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞")
        };

        getUserCommand.SetHandler(async (id) => await GetUser(id),
            new Argument<int>("id", "ID –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞"));

        rootCommand.AddCommand(getUsersCommand);
        rootCommand.AddCommand(getUserCommand);

        return await rootCommand.InvokeAsync(args);
    }

    private static async Task GetUsers(int page, int limit)
    {
        var status = AnsiConsole.Status()
            .Spinner(Spinner.Known.Star)
            .Start("–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤...", async ctx =>
            {
                // –°–∏–º—É–ª—è—Ü—ñ—è HTTP –∑–∞–ø–∏—Ç—É
                await Task.Delay(1000);

                // –ì–µ–Ω–µ—Ä—É—î–º–æ —Ñ–µ–π–∫–æ–≤—ñ –¥–∞–Ω—ñ
                var users = GenerateFakeUsers(page, limit);

                ctx.Status = "–û–±—Ä–æ–±–∫–∞ –¥–∞–Ω–∏—Ö...";
                await Task.Delay(500);

                DisplayUsersTable(users);
            });
    }

    private static async Task GetUser(int id)
    {
        var status = AnsiConsole.Status()
            .Spinner(Spinner.Known.Clock)
            .Start($"–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑ ID {id}...", async ctx =>
            {
                await Task.Delay(800);

                var user = GenerateFakeUser(id);

                if (user == null)
                {
                    AnsiConsole.MarkupLine($"[red]–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑ ID {id} –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ[/]");
                    return;
                }

                DisplayUserDetails(user);
            });
    }

    private static List<User> GenerateFakeUsers(int page, int limit)
    {
        var users = new List<User>();
        var startId = (page - 1) * limit + 1;

        for (int i = 0; i < limit; i++)
        {
            var id = startId + i;
            users.Add(new User
            {
                Id = id,
                Name = $"–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á {id}",
                Email = $"user{id}@example.com",
                Role = id % 3 == 0 ? "Admin" : id % 3 == 1 ? "Moderator" : "User",
                IsActive = id % 2 == 0
            });
        }

        return users;
    }

    private static User GenerateFakeUser(int id)
    {
        if (id > 100) return null; // –°–∏–º—É–ª—è—Ü—ñ—è 404

        return new User
        {
            Id = id,
            Name = $"–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á {id}",
            Email = $"user{id}@example.com",
            Role = id % 3 == 0 ? "Admin" : id % 3 == 1 ? "Moderator" : "User",
            IsActive = id % 2 == 0,
            CreatedAt = DateTime.Now.AddDays(-id)
        };
    }

    private static void DisplayUsersTable(List<User> users)
    {
        var table = new Table();
        table.Title = new TableTitle("–°–ø–∏—Å–æ–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤");
        table.AddColumn("ID");
        table.AddColumn("–Ü–º'—è");
        table.AddColumn("Email");
        table.AddColumn("–†–æ–ª—å");
        table.AddColumn("–°—Ç–∞—Ç—É—Å");

        foreach (var user in users)
        {
            var roleColor = user.Role == "Admin" ? "red" : user.Role == "Moderator" ? "yellow" : "blue";
            var status = user.IsActive ? "[green]–ê–∫—Ç–∏–≤–Ω–∏–π[/]" : "[red]–ù–µ–∞–∫—Ç–∏–≤–Ω–∏–π[/]";

            table.AddRow(
                user.Id.ToString(),
                user.Name,
                user.Email,
                $"[{roleColor}]{user.Role}[/]",
                status
            );
        }

        AnsiConsole.Write(table);
    }

    private static void DisplayUserDetails(User user)
    {
        var grid = new Grid();
        grid.AddColumn(new GridColumn().Width(15));
        grid.AddColumn(new GridColumn());

        grid.AddRow("[bold]ID:[/]", user.Id.ToString());
        grid.AddRow("[bold]–Ü–º'—è:[/]", user.Name);
        grid.AddRow("[bold]Email:[/]", user.Email);
        grid.AddRow("[bold]–†–æ–ª—å:[/]", user.Role);
        grid.AddRow("[bold]–°—Ç–∞—Ç—É—Å:[/]", user.IsActive ? "[green]–ê–∫—Ç–∏–≤–Ω–∏–π[/]" : "[red]–ù–µ–∞–∫—Ç–∏–≤–Ω–∏–π[/]");
        grid.AddRow("[bold]–°—Ç–≤–æ—Ä–µ–Ω–æ:[/]", user.CreatedAt?.ToString("yyyy-MM-dd HH:mm") ?? "N/A");

        var panel = new Panel(grid);
        panel.Header = new PanelHeader($"–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á #{user.Id}");
        panel.Border = BoxBorder.Double;

        AnsiConsole.Write(panel);
    }
}

public class User
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string Email { get; set; }
    public string Role { get; set; }
    public bool IsActive { get; set; }
    public DateTime? CreatedAt { get; set; }
}
```

## Best Practices

### –û—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—è –∫–æ–¥—É

```csharp [Program.cs] showLineNumbers
using System.CommandLine;
using Spectre.Console;

// –û—Å–Ω–æ–≤–Ω–∏–π –∫–ª–∞—Å –¥–ª—è –∑–∞–ø—É—Å–∫—É CLI
public class Program
{
    public static async Task<int> Main(string[] args)
    {
        var app = new CliApplication();
        return await app.RunAsync(args);
    }
}

// –ö–ª–∞—Å –¥–ª—è —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è CLI –¥–æ–¥–∞—Ç–∫–æ–º
public class CliApplication
{
    private readonly RootCommand _rootCommand;

    public CliApplication()
    {
        _rootCommand = CreateRootCommand();
    }

    public async Task<int> RunAsync(string[] args)
    {
        return await _rootCommand.InvokeAsync(args);
    }

    private RootCommand CreateRootCommand()
    {
        var rootCommand = new RootCommand("–ú—ñ–π –ø—Ä–æ—Ñ–µ—Å—ñ–π–Ω–∏–π CLI –¥–æ–¥–∞—Ç–æ–∫");

        // –î–æ–¥–∞—î–º–æ –∫–æ–º–∞–Ω–¥–∏
        rootCommand.AddCommand(CreateUserCommand());
        rootCommand.AddCommand(CreateReportCommand());
        rootCommand.AddCommand(CreateConfigCommand());

        return rootCommand;
    }

    private Command CreateUserCommand()
    {
        var command = new Command("user", "–û–ø–µ—Ä–∞—Ü—ñ—ó –∑ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞–º–∏");

        command.AddCommand(new UserListCommand().GetCommand());
        command.AddCommand(new UserCreateCommand().GetCommand());
        command.AddCommand(new UserDeleteCommand().GetCommand());

        return command;
    }

    private Command CreateReportCommand()
    {
        var command = new Command("report", "–ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –∑–≤—ñ—Ç—ñ–≤");

        command.AddCommand(new ReportGenerateCommand().GetCommand());
        command.AddCommand(new ReportListCommand().GetCommand());

        return command;
    }

    private Command CreateConfigCommand()
    {
        var command = new Command("config", "–ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –¥–æ–¥–∞—Ç–∫—É");

        command.AddCommand(new ConfigGetCommand().GetCommand());
        command.AddCommand(new ConfigSetCommand().GetCommand());

        return command;
    }
}

// –ë–∞–∑–æ–≤–∏–π –∫–ª–∞—Å –¥–ª—è –∫–æ–º–∞–Ω–¥
public abstract class BaseCommand
{
    protected Command GetCommandInternal(string name, string description)
    {
        var command = new Command(name, description);
        ConfigureCommand(command);
        return command;
    }

    protected abstract void ConfigureCommand(Command command);
}

// –ü—Ä–∏–∫–ª–∞–¥ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—ó –∫–æ–º–∞–Ω–¥–∏
public class UserListCommand : BaseCommand
{
    protected override void ConfigureCommand(Command command)
    {
        command.SetHandler(() => Execute());
    }

    private void Execute()
    {
        // –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –ª–æ–≥—ñ–∫–∏
        AnsiConsole.MarkupLine("[green]–°–ø–∏—Å–æ–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤:[/]");
    }

    public Command GetCommand() => GetCommandInternal("list", "–°–ø–∏—Å–æ–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤");
}
```

### –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫

```csharp [ErrorHandling.cs] showLineNumbers
using Spectre.Console;

public static class ErrorHandler
{
    public static async Task<int> ExecuteSafelyAsync(Func<Task<int>> operation)
    {
        try
        {
            return await operation();
        }
        catch (Exception ex) when (ex is not OperationCanceledException)
        {
            var errorPanel = new Panel(
                $"[bold red]{ex.GetType().Name}[/]\n" +
                $"[red]{ex.Message}[/]\n\n" +
                "[grey]–î–æ–∫–ª–∞–¥–Ω—ñ—à–µ:[/] [blue]https://docs.example.com/errors[/]")
                .Header("–ü–û–ú–ò–õ–ö–ê")
                .Border(BoxBorder.Double)
                .BorderColor(Color.Red);

            AnsiConsole.Write(errorPanel);

            // –õ–æ–≥—É–≤–∞–Ω–Ω—è –≤ —Ñ–∞–π–ª –¥–ª—è –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
            await LogErrorAsync(ex);

            return 1; // –ü–æ–≤–µ—Ä—Ç–∞—î–º–æ –∫–æ–¥ –ø–æ–º–∏–ª–∫–∏
        }
    }

    private static async Task LogErrorAsync(Exception ex)
    {
        var logEntry = $"{DateTime.Now:yyyy-MM-dd HH:mm:ss} - {ex}\n";
        await File.AppendAllTextAsync("error.log", logEntry);
    }
}

// –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è
public class Program
{
    public static async Task<int> Main(string[] args)
    {
        return await ErrorHandler.ExecuteSafelyAsync(async () =>
        {
            var app = new CliApplication();
            return await app.RunAsync(args);
        });
    }
}
```

### –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è CLI –¥–æ–¥–∞—Ç–∫—ñ–≤

```csharp [CliTests.cs] showLineNumbers
using System.CommandLine;
using System.CommandLine.Invocation;
using System.IO;
using Spectre.Console.Testing;
using Xunit;

public class CliTests
{
    [Fact]
    public async Task Should_Display_Help_When_Called_With_Help_Option()
    {
        // Arrange
        var console = new TestConsole();
        var app = new CliApplication();

        // Act
        var result = await app.RunAsync(new[] { "--help" }, console);

        // Assert
        Assert.Equal(0, result);
        Assert.Contains("–ú—ñ–π –ø—Ä–æ—Ñ–µ—Å—ñ–π–Ω–∏–π CLI –¥–æ–¥–∞—Ç–æ–∫", console.Out.ToString());
    }

    [Fact]
    public async Task Should_Execute_Command_With_Arguments()
    {
        // Arrange
        var console = new TestConsole();
        var app = new CliApplication();

        // Act
        var result = await app.RunAsync(new[] { "user", "list" }, console);

        // Assert
        Assert.Equal(0, result);
        Assert.Contains("–°–ø–∏—Å–æ–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤", console.Out.ToString());
    }

    [Fact]
    public async Task Should_Handle_Invalid_Arguments()
    {
        // Arrange
        var console = new TestConsole();
        var app = new CliApplication();

        // Act
        var result = await app.RunAsync(new[] { "invalid-command" }, console);

        // Assert
        Assert.Equal(1, result);
        Assert.Contains("Unrecognized command or argument", console.Error.ToString());
    }
}
```

## Troubleshooting

### –¢–∏–ø–æ–≤—ñ –ø—Ä–æ–±–ª–µ–º–∏ —Ç–∞ —Ä—ñ—à–µ–Ω–Ω—è

#### 1. –ü—Ä–æ–±–ª–µ–º–∞: –í–∏–≤—ñ–¥ –Ω–µ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è —É CI/CD —Å–µ—Ä–µ–¥–æ–≤–∏—â—ñ

```csharp [Fix.cs] showLineNumbers
// –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ, —á–∏ –ø—ñ–¥—Ç—Ä–∏–º—É—î—Ç—å—Å—è –∫–æ–ª—å–æ—Ä–æ–≤–∏–π –≤–∏–≤—ñ–¥
if (AnsiConsole.Profile.SupportsColor())
{
    // –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –∫–æ–ª—å–æ—Ä–∏
    AnsiConsole.MarkupLine("[green]–£—Å–ø—ñ—à–Ω–æ[/]");
}
else
{
    // –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ –ø—Ä–æ—Å—Ç–∏–π —Ç–µ–∫—Å—Ç
    AnsiConsole.WriteLine("–£—Å–ø—ñ—à–Ω–æ");
}
```

#### 2. –ü—Ä–æ–±–ª–µ–º–∞: –ö–æ–º–∞–Ω–¥–∏ –Ω–µ —Ä–µ—î—Å—Ç—Ä—É—é—Ç—å—Å—è

```csharp [Fix.cs] showLineNumbers
// –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—å, —â–æ –∫–æ–º–∞–Ω–¥–∏ –¥–æ–¥–∞—é—Ç—å—Å—è –¥–æ –∫–æ—Ä–µ–Ω–µ–≤–æ—ó –∫–æ–º–∞–Ω–¥–∏
var rootCommand = new RootCommand();
var subCommand = new Command("sub", "–ü—ñ–¥–∫–æ–º–∞–Ω–¥–∞");
rootCommand.AddCommand(subCommand); // –í–∞–∂–ª–∏–≤–æ: –¥–æ–¥–∞—î–º–æ –∫–æ–º–∞–Ω–¥—É!
```

#### 3. –ü—Ä–æ–±–ª–µ–º–∞: –í–∞–ª—ñ–¥–∞—Ü—ñ—è –Ω–µ –ø—Ä–∞—Ü—é—î

```csharp [Fix.cs] showLineNumbers
// –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—å, —â–æ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è –¥–æ–¥–∞—î—Ç—å—Å—è –¥–æ –æ–ø—Ü—ñ—ó, –∞ –Ω–µ –¥–æ –æ–±—Ä–æ–±–Ω–∏–∫–∞
var option = new Option<string>("--email", "Email");
option.AddValidator(result =>  // –î–æ–¥–∞—î–º–æ –≤–∞–ª—ñ–¥–∞—Ü—ñ—é –¥–æ –æ–ø—Ü—ñ—ó
{
    var value = result.GetValueForOption(option);
    if (!string.IsNullOrEmpty(value) && !value.Contains('@'))
        result.ErrorMessage = "–ù–µ–≤–∞–ª—ñ–¥–Ω–∏–π email";
});
```

## –ü—Ä–∞–∫—Ç–∏–∫–∞ —Ç–∞ –†–µ–∑—é–º–µ

### –ó–∞–≤–¥–∞–Ω–Ω—è –¥–ª—è –ó–∞–∫—Ä—ñ–ø–ª–µ–Ω–Ω—è

#### üü¢ –õ–µ–≥–∫–∏–π –†—ñ–≤–µ–Ω—å: –ü—Ä–æ—Å—Ç–∏–π CLI —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç

–°—Ç–≤–æ—Ä—ñ—Ç—å CLI –¥–æ–¥–∞—Ç–æ–∫, —è–∫–∏–π:

1. –ü—Ä–∏–π–º–∞—î –∞—Ä–≥—É–º–µ–Ω—Ç `--name` –¥–ª—è —ñ–º–µ–Ω—ñ
2. –í–∏–≤–æ–¥–∏—Ç—å –ø—Ä–∏–≤—ñ—Ç–∞–Ω–Ω—è –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º Spectre.Console
3. –ü—ñ–¥—Å–≤—ñ—á—É—î —ñ–º'—è –∂–æ–≤—Ç–∏–º –∫–æ–ª—å–æ—Ä–æ–º

::collapsible{title="üí° –ü—ñ–¥–∫–∞–∑–∫–∞"}
–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `Option<string>` –¥–ª—è –∞—Ä–≥—É–º–µ–Ω—Ç—É —Ç–∞ `AnsiConsole.MarkupLine()` –¥–ª—è –∫–æ–ª—å–æ—Ä–æ–≤–æ–≥–æ –≤–∏–≤–æ–¥—É.
::

::collapsible{title="‚úÖ –†—ñ—à–µ–Ω–Ω—è"}

```csharp [GreetingApp.cs] showLineNumbers
using System.CommandLine;
using Spectre.Console;

var nameOption = new Option<string>("--name", "–í–∞—à–µ —ñ–º'—è");
nameOption.AddValidator(result =>
{
    var value = result.GetValueForOption(nameOption);
    if (string.IsNullOrWhiteSpace(value))
        result.ErrorMessage = "–Ü–º'—è –Ω–µ –º–æ–∂–µ –±—É—Ç–∏ –ø–æ—Ä–æ–∂–Ω—ñ–º";
});

var rootCommand = new RootCommand("–ü—Ä–∏–≤—ñ—Ç–∞–ª—å–Ω–∏–π CLI –¥–æ–¥–∞—Ç–æ–∫");
rootCommand.AddOption(nameOption);

rootCommand.SetHandler((name) =>
{
    AnsiConsole.MarkupLine($"–ü—Ä–∏–≤—ñ—Ç, [yellow bold]{name}[/]! üåü");
}, nameOption);

await rootCommand.InvokeAsync(args);
```

::

---

#### üü° –°–µ—Ä–µ–¥–Ω—ñ–π –†—ñ–≤–µ–Ω—å: –Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏–π –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä

–°—Ç–≤–æ—Ä—ñ—Ç—å CLI –¥–æ–¥–∞—Ç–æ–∫ –∑ –Ω–∞—Å—Ç—É–ø–Ω–∏–º–∏ —Ñ—É–Ω–∫—Ü—ñ—è–º–∏:

1. –ö–æ–º–∞–Ω–¥–∞ `calculate` –¥–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –æ–±—á–∏—Å–ª–µ–Ω—å
2. –Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏–π –≤–∏–±—ñ—Ä –æ–ø–µ—Ä–∞—Ü—ñ—ó (–¥–æ–¥–∞–≤–∞–Ω–Ω—è, –≤—ñ–¥–Ω—ñ–º–∞–Ω–Ω—è, –º–Ω–æ–∂–µ–Ω–Ω—è, –¥—ñ–ª–µ–Ω–Ω—è)
3. –í–≤–µ–¥–µ–Ω–Ω—è –¥–≤–æ—Ö —á–∏—Å–µ–ª
4. –í–∏–≤–µ–¥–µ–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—É –∑ –ø—Ä–æ–≥—Ä–µ—Å-–±–∞—Ä–æ–º

::collapsible{title="üí° –ü—ñ–¥–∫–∞–∑–∫–∞"}
–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `SelectionPrompt` –¥–ª—è –≤–∏–±–æ—Ä—É –æ–ø–µ—Ä–∞—Ü—ñ—ó, `TextPrompt` –¥–ª—è –≤–≤–µ–¥–µ–Ω–Ω—è —á–∏—Å–µ–ª, `Progress` –¥–ª—è –∞–Ω—ñ–º–∞—Ü—ñ—ó –æ–±—á–∏—Å–ª–µ–Ω–Ω—è.
::

::collapsible{title="‚úÖ –†—ñ—à–µ–Ω–Ω—è"}

```csharp [CalculatorApp.cs] showLineNumbers
using System.CommandLine;
using Spectre.Console;

var calculateCommand = new Command("calculate", "–í–∏–∫–æ–Ω–∞—Ç–∏ –æ–±—á–∏—Å–ª–µ–Ω–Ω—è");

calculateCommand.SetHandler(() =>
{
    var operation = AnsiConsole.Prompt(
        new SelectionPrompt<string>()
            .Title("–í–∏–±–µ—Ä—ñ—Ç—å –æ–ø–µ—Ä–∞—Ü—ñ—é:")
            .AddChoices("–î–æ–¥–∞–≤–∞–Ω–Ω—è", "–í—ñ–¥–Ω—ñ–º–∞–Ω–Ω—è", "–ú–Ω–æ–∂–µ–Ω–Ω—è", "–î—ñ–ª–µ–Ω–Ω—è"));

    var first = AnsiConsole.Ask<double>("–í–≤–µ–¥—ñ—Ç—å –ø–µ—Ä—à–µ —á–∏—Å–ª–æ:");
    var second = AnsiConsole.Ask<double>("–í–≤–µ–¥—ñ—Ç—å –¥—Ä—É–≥–µ —á–∏—Å–ª–æ:");

    var result = 0.0;
    var operationSymbol = "";

    // –í–∏–∫–æ–Ω—É—î–º–æ –æ–±—á–∏—Å–ª–µ–Ω–Ω—è –∑ –∞–Ω—ñ–º–∞—Ü—ñ—î—é
    var progress = new Progress(Console.Out);
    progress.Start(ctx =>
    {
        var task = ctx.AddTask("–û–±—á–∏—Å–ª–µ–Ω–Ω—è", maxValue: 100);

        for (int i = 0; i <= 100; i++)
        {
            task.Increment(1);
            Thread.Sleep(10);
        }
    });

    switch (operation)
    {
        case "–î–æ–¥–∞–≤–∞–Ω–Ω—è":
            result = first + second;
            operationSymbol = "+";
            break;
        case "–í—ñ–¥–Ω—ñ–º–∞–Ω–Ω—è":
            result = first - second;
            operationSymbol = "-";
            break;
        case "–ú–Ω–æ–∂–µ–Ω–Ω—è":
            result = first * second;
            operationSymbol = "*";
            break;
        case "–î—ñ–ª–µ–Ω–Ω—è":
            if (second == 0)
            {
                AnsiConsole.MarkupLine("[red]–ü–æ–º–∏–ª–∫–∞: –î—ñ–ª–µ–Ω–Ω—è –Ω–∞ –Ω—É–ª—å![/]");
                return;
            }
            result = first / second;
            operationSymbol = "/";
            break;
    }

    var resultTable = new Table();
    resultTable.AddColumn("–í–∏—Ä–∞–∑");
    resultTable.AddColumn("–†–µ–∑—É–ª—å—Ç–∞—Ç");
    resultTable.AddRow($"[bold]{first} {operationSymbol} {second}[/]", $"[green]{result}[/]");

    AnsiConsole.Write(resultTable);
});

var rootCommand = new RootCommand("–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä CLI");
rootCommand.AddCommand(calculateCommand);

await rootCommand.InvokeAsync(args);
```

::

---

#### üî¥ –°–∫–ª–∞–¥–Ω–∏–π –†—ñ–≤–µ–Ω—å: –ú–µ–Ω–µ–¥–∂–µ—Ä –∑–∞–≤–¥–∞–Ω—å

–°—Ç–≤–æ—Ä—ñ—Ç—å CLI –¥–æ–¥–∞—Ç–æ–∫ –¥–ª—è —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∑–∞–≤–¥–∞–Ω–Ω—è–º–∏:

1. –ö–æ–º–∞–Ω–¥–∏: `add`, `list`, `complete`, `delete`
2. –ó–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö —É JSON —Ñ–∞–π–ª—ñ
3. –Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∏–π –≤–∏–±—ñ—Ä –∑–∞–≤–¥–∞–Ω—å –¥–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è
4. –í–∏–≤–µ–¥–µ–Ω–Ω—è –ø—Ä–æ–≥—Ä–µ—Å—É –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º —Ç–∞–±–ª–∏—Ü—å
5. –ü—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –æ–ø–µ—Ä–∞—Ü—ñ–π –≤–∏–¥–∞–ª–µ–Ω–Ω—è

::collapsible{title="üí° –ü—ñ–¥–∫–∞–∑–∫–∞"}
–°—Ç–≤–æ—Ä—ñ—Ç—å –∫–ª–∞—Å `TaskManager` –¥–ª—è —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –¥–∞–Ω–∏–º–∏, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `MultiSelectionPrompt` –¥–ª—è –≤–∏–±–æ—Ä—É –∑–∞–≤–¥–∞–Ω—å, `Table` –¥–ª—è –≤–∏–≤–µ–¥–µ–Ω–Ω—è —Å–ø–∏—Å–∫—É.
::

::collapsible{title="‚úÖ –†—ñ—à–µ–Ω–Ω—è"}

```csharp [TaskManagerApp.cs] showLineNumbers
using System.CommandLine;
using Spectre.Console;
using System.Text.Json;

public class TaskItem
{
    public int Id { get; set; }
    public string Title { get; set; }
    public bool IsCompleted { get; set; }
    public DateTime CreatedAt { get; set; }
}

public class TaskManager
{
    private readonly string _dataFile;
    private List<TaskItem> _tasks;

    public TaskManager(string dataFile = "tasks.json")
    {
        _dataFile = dataFile;
        LoadTasks();
    }

    private void LoadTasks()
    {
        if (File.Exists(_dataFile))
        {
            var json = File.ReadAllText(_dataFile);
            _tasks = JsonSerializer.Deserialize<List<TaskItem>>(json) ?? new List<TaskItem>();
        }
        else
        {
            _tasks = new List<TaskItem>();
        }
    }

    private void SaveTasks()
    {
        var json = JsonSerializer.Serialize(_tasks, new JsonSerializerOptions { WriteIndented = true });
        File.WriteAllText(_dataFile, json);
    }

    public void AddTask(string title)
    {
        var newTask = new TaskItem
        {
            Id = _tasks.Count > 0 ? _tasks.Max(t => t.Id) + 1 : 1,
            Title = title,
            IsCompleted = false,
            CreatedAt = DateTime.Now
        };

        _tasks.Add(newTask);
        SaveTasks();
        AnsiConsole.MarkupLine($"[green]–ó–∞–≤–¥–∞–Ω–Ω—è –¥–æ–¥–∞–Ω–æ:[/] {title}");
    }

    public void ListTasks()
    {
        if (!_tasks.Any())
        {
            AnsiConsole.MarkupLine("[yellow]–ù–µ–º–∞—î –∑–∞–≤–¥–∞–Ω—å[/]");
            return;
        }

        var table = new Table();
        table.Title = new TableTitle("–°–ø–∏—Å–æ–∫ –∑–∞–≤–¥–∞–Ω—å");
        table.AddColumn("ID");
        table.AddColumn("–ù–∞–∑–≤–∞");
        table.AddColumn("–°—Ç–∞—Ç—É—Å");
        table.AddColumn("–°—Ç–≤–æ—Ä–µ–Ω–æ");

        foreach (var task in _tasks.OrderBy(t => t.Id))
        {
            var status = task.IsCompleted ? "[green]‚úì[/]" : "[red]‚óã[/]";
            var title = task.IsCompleted ? $"[strikethrough]{task.Title}[/]" : task.Title;

            table.AddRow(
                task.Id.ToString(),
                title,
                status,
                task.CreatedAt.ToString("yyyy-MM-dd")
            );
        }

        AnsiConsole.Write(table);
    }

    public void CompleteTasks(List<int> ids)
    {
        foreach (var id in ids)
        {
            var task = _tasks.FirstOrDefault(t => t.Id == id);
            if (task != null)
            {
                task.IsCompleted = true;
            }
        }

        SaveTasks();
        AnsiConsole.MarkupLine($"[green]–ü–æ–∑–Ω–∞—á–µ–Ω–æ —è–∫ –≤–∏–∫–æ–Ω–∞–Ω—ñ:[/] {string.Join(", ", ids)}");
    }

    public void DeleteTasks(List<int> ids)
    {
        _tasks.RemoveAll(t => ids.Contains(t.Id));
        SaveTasks();
        AnsiConsole.MarkupLine($"[red]–í–∏–¥–∞–ª–µ–Ω–æ –∑–∞–≤–¥–∞–Ω—å:[/] {ids.Count}");
    }
}

var rootCommand = new RootCommand("–ú–µ–Ω–µ–¥–∂–µ—Ä –∑–∞–≤–¥–∞–Ω—å CLI");

var addCommand = new Command("add", "–î–æ–¥–∞—Ç–∏ –Ω–æ–≤–µ –∑–∞–≤–¥–∞–Ω–Ω—è")
{
    new Argument<string>("title", "–ù–∞–∑–≤–∞ –∑–∞–≤–¥–∞–Ω–Ω—è")
};

addCommand.SetHandler((title) =>
{
    var manager = new TaskManager();
    manager.AddTask(title);
},
new Argument<string>("title", "–ù–∞–∑–≤–∞ –∑–∞–≤–¥–∞–Ω–Ω—è"));

var listCommand = new Command("list", "–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ —Å–ø–∏—Å–æ–∫ –∑–∞–≤–¥–∞–Ω—å");
listCommand.SetHandler(() =>
{
    var manager = new TaskManager();
    manager.ListTasks();
});

var completeCommand = new Command("complete", "–ü–æ–∑–Ω–∞—á–∏—Ç–∏ –∑–∞–≤–¥–∞–Ω–Ω—è —è–∫ –≤–∏–∫–æ–Ω–∞–Ω—ñ");
completeCommand.SetHandler(() =>
{
    var manager = new TaskManager();
    var activeTasks = manager._tasks.Where(t => !t.IsCompleted).ToList();

    if (!activeTasks.Any())
    {
        AnsiConsole.MarkupLine("[yellow]–ù–µ–º–∞—î –∞–∫—Ç–∏–≤–Ω–∏—Ö –∑–∞–≤–¥–∞–Ω—å[/]");
        return;
    }

    var selectedIds = AnsiConsole.Prompt(
        new MultiSelectionPrompt<int>()
            .Title("–í–∏–±–µ—Ä—ñ—Ç—å –∑–∞–≤–¥–∞–Ω–Ω—è –¥–ª—è –≤–∏–∫–æ–Ω–∞–Ω–Ω—è:")
            .PageSize(10)
            .AddChoices(activeTasks.Select(t => t.Id).ToArray()));

    if (selectedIds.Any())
    {
        manager.CompleteTasks(selectedIds.ToList());
    }
});

var deleteCommand = new Command("delete", "–í–∏–¥–∞–ª–∏—Ç–∏ –∑–∞–≤–¥–∞–Ω–Ω—è");
deleteCommand.SetHandler(() =>
{
    var manager = new TaskManager();

    if (!manager._tasks.Any())
    {
        AnsiConsole.MarkupLine("[yellow]–ù–µ–º–∞—î –∑–∞–≤–¥–∞–Ω—å –¥–ª—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è[/]");
        return;
    }

    var selectedIds = AnsiConsole.Prompt(
        new MultiSelectionPrompt<int>()
            .Title("–í–∏–±–µ—Ä—ñ—Ç—å –∑–∞–≤–¥–∞–Ω–Ω—è –¥–ª—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è:")
            .PageSize(10)
            .AddChoices(manager._tasks.Select(t => t.Id).ToArray()));

    if (selectedIds.Any())
    {
        var confirmed = AnsiConsole.Confirm($"–í–∏–¥–∞–ª–∏—Ç–∏ {selectedIds.Count()} –∑–∞–≤–¥–∞–Ω—å?");

        if (confirmed)
        {
            manager.DeleteTasks(selectedIds.ToList());
        }
    }
});

rootCommand.AddCommand(addCommand);
rootCommand.AddCommand(listCommand);
rootCommand.AddCommand(completeCommand);
rootCommand.AddCommand(deleteCommand);

await rootCommand.InvokeAsync(args);
```

::

### –†–µ–∑—é–º–µ

–£ —Ü—å–æ–º—É —Ä–æ–∑–¥—ñ–ª—ñ –≤–∏ –≤–∏–≤—á–∏–ª–∏:

1. **System.CommandLine**:

    - –ü–∞—Ä—Å–∏–Ω–≥ –∞—Ä–≥—É–º–µ–Ω—Ç—ñ–≤, –æ–ø—Ü—ñ–π —Ç–∞ –∫–æ–º–∞–Ω–¥
    - –í–∞–ª—ñ–¥–∞—Ü—ñ—é –≤—Ö—ñ–¥–Ω–∏—Ö –¥–∞–Ω–∏—Ö
    - –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —ñ—î—Ä–∞—Ä—Ö—ñ—ó –∫–æ–º–∞–Ω–¥
    - –ê–≤—Ç–æ–¥–æ–ø–æ–≤–Ω–µ–Ω–Ω—è —Ç–∞ –¥–æ–≤—ñ–¥–∫—É

2. **Spectre.Console**:

    - –ö–æ–ª—å–æ—Ä–æ–≤–∏–π –≤–∏–≤—ñ–¥ —Ç–∞ markup
    - –í—ñ–¥–∂–µ—Ç–∏: —Ç–∞–±–ª–∏—Ü—ñ, –¥–µ—Ä–µ–≤–∞, –ø–∞–Ω–µ–ª—ñ, —Ä–æ–∑–¥—ñ–ª—å–Ω–∏–∫–∏
    - –Ü–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ñ –µ–ª–µ–º–µ–Ω—Ç–∏: –≤–∏–±—ñ—Ä, —Ç–µ–∫—Å—Ç–æ–≤–∏–π –≤–≤—ñ–¥, –≤–∞–ª—ñ–¥–∞—Ü—ñ—è
    - –ñ–∏–≤—ñ –¥–∏—Å–ø–ª–µ—ó: –ø—Ä–æ–≥—Ä–µ—Å-–±–∞—Ä–∏, —Å—Ç–∞—Ç—É—Å-—ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä–∏

3. **–ö–æ–º–±—ñ–Ω—É–≤–∞–Ω–Ω—è —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ñ–≤**:
    - –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø—Ä–æ—Ñ–µ—Å—ñ–π–Ω–∏—Ö CLI —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ñ–≤
    - –û—Ä–≥–∞–Ω—ñ–∑–∞—Ü—ñ—è –∫–æ–¥—É —Ç–∞ best practices
    - –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ —Ç–∞ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

::tip
**–ù–∞—Å—Ç—É–ø–Ω—ñ –ö—Ä–æ–∫–∏**:

-   –î–æ—Å–ª—ñ–¥—ñ—Ç—å –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ [FluentValidation](https://docs.fluentvalidation.net/) –¥–ª—è —Å–∫–ª–∞–¥–Ω–æ—ó –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó
-   –û–∑–Ω–∞–π–æ–º—Ç–µ—Å—å –∑ [CommandLineParser](https://github.com/commandlineparser/commandline) —è–∫ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–æ—é
-   –í–∏–≤—á—ñ—Ç—å [Terminal.Gui](https://github.com/gui-cs/Terminal.Gui) –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–æ–≤–Ω–æ—Ü—ñ–Ω–Ω–∏—Ö TUI –¥–æ–¥–∞—Ç–∫—ñ–≤
    ::

### –ö–æ—Ä–∏—Å–Ω—ñ –ü–æ—Å–∏–ª–∞–Ω–Ω—è

-   [System.CommandLine Documentation](https://github.com/dotnet/command-line-api)
-   [Spectre.Console Documentation](https://spectreconsole.net/)
-   [Command Line Interface Guidelines](https://clig.dev/)
